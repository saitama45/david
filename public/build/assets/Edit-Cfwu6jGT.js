import{G as J,f as K,x as h,T as W,l as Y,r as y,o as a,c as k,w as n,a as r,g as t,b as u,u as l,t as d,h as c,s as M,n as x,d as p,e as U,F}from"./app-Bw_fMWAP.js";import{u as I}from"./useSelectOptions-BcktnHf_.js";const Z={class:"flex flex-col gap-5 p-5"},ee={class:"bg-white border rounded-md shadow-sm w-full"},te={class:"overflow-x-auto"},le={class:"min-w-full table-fixed",style:{"table-layout":"fixed"}},oe={class:"bg-white"},se={class:"text-sm text-gray-600"},ne={class:"flex items-center justify-between"},re={key:0,class:"ml-2 flex-shrink-0"},ae={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ue={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ie={class:"flex items-center justify-between"},de={key:0,class:"ml-2 flex-shrink-0"},pe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},me={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ye={class:"flex items-center justify-between"},ce={key:0,class:"ml-2 flex-shrink-0"},ve={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},fe={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},we={class:"flex items-center justify-between"},ge={key:0,class:"ml-2 flex-shrink-0"},be={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ke={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},xe={class:"flex items-center justify-between"},_e={key:0,class:"ml-2 flex-shrink-0"},Ce={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Se={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Pe={class:"text-sm text-gray-700"},Ve=["title"],he={class:"md:hidden p-4 space-y-3"},Oe={class:"font-semibold truncate"},Be={class:"text-sm font-normal"},De={class:"text-sm text-gray-600"},Ne={class:"text-sm text-gray-600"},je={class:"text-sm text-gray-600"},Me={class:"px-4 py-3 text-sm text-gray-700"},Ue={class:"font-bold"},Te={__name:"Edit",props:{item:{type:Object,required:!0},categories:{type:Array,default:()=>[]},products:{type:Array,default:()=>[]},existingIngredients:{type:Array,default:()=>[]}},setup(T){const N=J(),A=K(),O=T,L=h(!1),g=O.item,o=W({POSCode:g.POSCode??null,POSDescription:g.POSDescription??null,POSName:g.POSName??null,Category:g.Category??null,SubCategory:g.SubCategory??null,SRP:g.SRP??0,DeliveryPrice:g.DeliveryPrice??0,TableVibePrice:g.TableVibePrice??0,is_active:g.is_active!==null?Number(g.is_active):null}),B=h([]);O.existingIngredients.forEach(m=>{B.value.push({id:m.id,sap_masterfile_id:m.sap_masterfile_id??null,inventory_code:m.inventory_code,name:m.name,quantity:Number(m.quantity),uom:m.uom,assembly:m.assembly??null,unit_cost:m.unit_cost??null,total_cost:m.total_cost??null})}),I(O.products);const{options:q}=I(O.categories),E=h([{label:"Active",value:1},{label:"Inactive",value:0}]),i=h(null),b=h("asc"),j=Y(()=>i.value?[...B.value].sort((e,D)=>{let C=e[i.value],S=D[i.value];C==null&&(C=typeof S=="number"?0:""),S==null&&(S=typeof C=="number"?0:"");const V=parseFloat(C),v=parseFloat(S);if(!Number.isNaN(V)&&!Number.isNaN(v))return b.value==="asc"?V-v:v-V;const f=String(C).toLowerCase(),w=String(S).toLowerCase();return f<w?b.value==="asc"?-1:1:f>w?b.value==="asc"?1:-1:0}):B.value),P=m=>{i.value===m?b.value=b.value==="asc"?"desc":"asc":(i.value=m,b.value="asc")},R=()=>{A.require({message:"Are you sure you want to update this product's FG Details?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{o.put(route("POSMasterfile.update",g.id),{preserveScroll:!0,onSuccess:()=>{N.add({severity:"success",summary:"Success",detail:"FG Details Successfully Updated",life:3e3})},onError:m=>{console.error(m),N.add({severity:"error",summary:"Error",detail:"An error occurred while updating the FG details.",life:3e3})}})}})};return(m,e)=>{const D=y("BackButton"),C=y("CardTitle"),S=y("CardDescription"),V=y("CardHeader"),v=y("Label"),_=y("Input"),f=y("FormError"),w=y("InputContainer"),G=y("LabelXS"),$=y("CardContent"),H=y("Button"),Q=y("CardFooter"),X=y("Card"),z=y("Layout");return a(),k(z,{heading:"Edit BOM Details"},{"header-actions":n(()=>[r(D)]),default:n(()=>[t("div",Z,[r(X,{class:"w-full"},{default:n(()=>[r(V,null,{default:n(()=>[r(C,null,{default:n(()=>e[14]||(e[14]=[u("FG Details")])),_:1}),r(S,null,{default:n(()=>e[15]||(e[15]=[u("Input all the important fields")])),_:1})]),_:1}),r($,{class:"grid sm:grid-cols-2 gap-5"},{default:n(()=>[r(w,null,{default:n(()=>[r(v,null,{default:n(()=>e[16]||(e[16]=[u("POS Code")])),_:1}),r(_,{modelValue:l(o).POSCode,"onUpdate:modelValue":e[0]||(e[0]=s=>l(o).POSCode=s)},null,8,["modelValue"]),l(o).errors.POSCode?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.POSCode),1)]),_:1})):c("",!0)]),_:1}),r(w,null,{default:n(()=>[r(v,null,{default:n(()=>e[17]||(e[17]=[u("POS Desc")])),_:1}),r(_,{modelValue:l(o).POSDescription,"onUpdate:modelValue":e[1]||(e[1]=s=>l(o).POSDescription=s)},null,8,["modelValue"]),l(o).errors.POSDescription?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.POSDescription),1)]),_:1})):c("",!0)]),_:1}),r(w,null,{default:n(()=>[r(v,null,{default:n(()=>e[18]||(e[18]=[u("POS Name")])),_:1}),r(_,{modelValue:l(o).POSName,"onUpdate:modelValue":e[2]||(e[2]=s=>l(o).POSName=s)},null,8,["modelValue"]),l(o).errors.POSName?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.POSName),1)]),_:1})):c("",!0)]),_:1}),r(w,null,{default:n(()=>[r(v,null,{default:n(()=>e[19]||(e[19]=[u("Category")])),_:1}),r(l(M),{modelValue:l(o).Category,"onUpdate:modelValue":e[3]||(e[3]=s=>l(o).Category=s),options:l(q),optionLabel:"label",optionValue:"value",placeholder:"Select a Category"},null,8,["modelValue","options"]),l(o).errors.Category?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.Category),1)]),_:1})):c("",!0)]),_:1}),r(w,null,{default:n(()=>[r(v,null,{default:n(()=>e[20]||(e[20]=[u("Sub Category")])),_:1}),r(_,{modelValue:l(o).SubCategory,"onUpdate:modelValue":e[4]||(e[4]=s=>l(o).SubCategory=s)},null,8,["modelValue"]),l(o).errors.SubCategory?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.SubCategory),1)]),_:1})):c("",!0)]),_:1}),r(w,null,{default:n(()=>[r(v,null,{default:n(()=>e[21]||(e[21]=[u("SRP")])),_:1}),r(_,{modelValue:l(o).SRP,"onUpdate:modelValue":e[5]||(e[5]=s=>l(o).SRP=s),type:"number"},null,8,["modelValue"]),l(o).errors.SRP?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.SRP),1)]),_:1})):c("",!0)]),_:1}),r(w,null,{default:n(()=>[r(v,null,{default:n(()=>e[22]||(e[22]=[u("Delivery Price")])),_:1}),r(_,{modelValue:l(o).DeliveryPrice,"onUpdate:modelValue":e[6]||(e[6]=s=>l(o).DeliveryPrice=s),type:"number"},null,8,["modelValue"]),l(o).errors.DeliveryPrice?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.DeliveryPrice),1)]),_:1})):c("",!0)]),_:1}),r(w,null,{default:n(()=>[r(v,null,{default:n(()=>e[23]||(e[23]=[u("Table Vibe Price")])),_:1}),r(_,{modelValue:l(o).TableVibePrice,"onUpdate:modelValue":e[7]||(e[7]=s=>l(o).TableVibePrice=s),type:"number"},null,8,["modelValue"]),l(o).errors.TableVibePrice?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.TableVibePrice),1)]),_:1})):c("",!0)]),_:1}),r(w,null,{default:n(()=>[r(G,null,{default:n(()=>e[24]||(e[24]=[u("Active Status")])),_:1}),r(l(M),{modelValue:l(o).is_active,"onUpdate:modelValue":e[8]||(e[8]=s=>l(o).is_active=s),options:E.value,optionLabel:"label",optionValue:"value",placeholder:"Select a Status"},null,8,["modelValue","options"]),l(o).errors.is_active?(a(),k(f,{key:0},{default:n(()=>[u(d(l(o).errors.is_active),1)]),_:1})):c("",!0)]),_:1})]),_:1}),r(Q,{class:"justify-end"},{default:n(()=>[r(H,{onClick:R,loading:L.value},{default:n(()=>e[25]||(e[25]=[u("Update FG Details")])),_:1},8,["loading"])]),_:1})]),_:1}),t("div",ee,[e[43]||(e[43]=t("div",{class:"px-4 py-3 border-b"},[t("span",{class:"font-semibold text-gray-700"},"Ingredients")],-1)),t("div",te,[t("table",le,[e[41]||(e[41]=t("colgroup",null,[t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"33.3333%"}}),t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"16.6666%"}})],-1)),t("thead",oe,[t("tr",se,[t("th",{class:x(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="inventory_code"}]),onClick:e[9]||(e[9]=s=>P("inventory_code"))},[t("div",ne,[e[28]||(e[28]=t("span",{class:"truncate"},"Item Code",-1)),i.value==="inventory_code"?(a(),p("span",re,[b.value==="asc"?(a(),p("svg",ae,e[26]||(e[26]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",ue,e[27]||(e[27]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):c("",!0)])],2),t("th",{class:x(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="name"}]),onClick:e[10]||(e[10]=s=>P("name"))},[t("div",ie,[e[31]||(e[31]=t("span",{class:"truncate"},"Name",-1)),i.value==="name"?(a(),p("span",de,[b.value==="asc"?(a(),p("svg",pe,e[29]||(e[29]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",me,e[30]||(e[30]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):c("",!0)])],2),t("th",{class:x(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="assembly"}]),onClick:e[11]||(e[11]=s=>P("assembly"))},[t("div",ye,[e[34]||(e[34]=t("span",{class:"truncate"},"Assembly",-1)),i.value==="assembly"?(a(),p("span",ce,[b.value==="asc"?(a(),p("svg",ve,e[32]||(e[32]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",fe,e[33]||(e[33]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):c("",!0)])],2),t("th",{class:x(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="quantity"}]),onClick:e[12]||(e[12]=s=>P("quantity"))},[t("div",we,[e[37]||(e[37]=t("span",{class:"truncate"},"Quantity",-1)),i.value==="quantity"?(a(),p("span",ge,[b.value==="asc"?(a(),p("svg",be,e[35]||(e[35]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",ke,e[36]||(e[36]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):c("",!0)])],2),t("th",{class:x(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="uom"}]),onClick:e[13]||(e[13]=s=>P("uom"))},[t("div",xe,[e[40]||(e[40]=t("span",{class:"truncate"},"UOM",-1)),i.value==="uom"?(a(),p("span",_e,[b.value==="asc"?(a(),p("svg",Ce,e[38]||(e[38]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",Se,e[39]||(e[39]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):c("",!0)])],2)])]),t("tbody",Pe,[(a(!0),p(F,null,U(j.value,s=>(a(),p("tr",{key:s.id,class:"border-t"},[t("td",{class:x(["px-4 py-3 align-top whitespace-nowrap overflow-hidden text-ellipsis",{"bg-gray-50":i.value==="inventory_code"}])},d(s.inventory_code),3),t("td",{class:x(["px-4 py-3 align-top",{"bg-gray-50":i.value==="name"}])},[t("div",{class:"truncate",title:s.name},d(s.name),9,Ve)],2),t("td",{class:x(["px-4 py-3 align-top whitespace-nowrap overflow-hidden text-ellipsis",{"bg-gray-50":i.value==="assembly"}])},d(s.assembly??"-"),3),t("td",{class:x(["px-4 py-3 align-top whitespace-nowrap",{"bg-gray-50":i.value==="quantity"}])},d(s.quantity),3),t("td",{class:x(["px-4 py-3 align-top whitespace-nowrap",{"bg-gray-50":i.value==="uom"}])},d(s.uom),3)]))),128))])])]),t("div",he,[(a(!0),p(F,null,U(j.value,s=>(a(),p("div",{key:"m-"+s.id,class:"border rounded p-3"},[t("div",Oe,[u(d(s.name)+" ",1),t("span",Be,"("+d(s.inventory_code)+")",1)]),t("div",De,"Assembly: "+d(s.assembly??"-"),1),t("div",Ne,"UOM: "+d(s.uom),1),t("div",je,"Quantity: "+d(s.quantity),1)]))),128))]),t("div",Me,[t("p",null,[e[42]||(e[42]=u("Total Items: ")),t("span",Ue,d(B.value.length),1)])])])])]),_:1})}}};export{Te as default};
