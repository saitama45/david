import{f as K,x as E,Q as A,y as N,N as w,r,o as f,c as y,w as e,a as t,n as m,b as a,t as s,u as T,i as Y,d as L,e as P,E as Z,h as V,F as H}from"./app-p8ycGfai.js";import{u as ee}from"./useToast-BAk2IYqi.js";import{l as te}from"./lodash-Z9yJD-f9.js";import{u as le}from"./useAuth-CsB0rIGq.js";const se={__name:"Index",props:{wastages:{type:Object,required:!0},counts:{type:Object,required:!0},stores:{type:Array,required:!0}},setup(_){K(),ee();const{hasAccess:h}=le();let v=E(A().props.filters.currentFilter||"approved_lvl1"),b=E(A().props.filters.search);N(v,function(o){w.get(route("wastage-approval-lvl2.index"),{currentFilter:o,search:b.value},{preserveState:!0,replace:!0})}),N(b,te.throttle(function(o){w.get(route("wastage-approval-lvl2.index"),{search:o,currentFilter:v.value},{preserveState:!0,replace:!0})},500));const C=o=>{v.value=o},x=o=>v.value==o?"bg-primary text-white":"",F=o=>{switch(o.toUpperCase()){case"APPROVED_LVL2":return"bg-green-500 text-white";case"APPROVED_LVL1":return"bg-blue-500 text-white";case"CANCELLED":return"bg-red-400 text-white";case"PENDING":return"bg-yellow-500 text-white";default:return"bg-gray-500 text-white"}},B=o=>{w.get(`/wastage-approval-level2/show/${o}`)},k=o=>o?new Date(o).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",D=o=>{var l,i,p;return o.store_branch_name||((l=o.storeBranch)==null?void 0:l.name)||((i=o.storeBranch)==null?void 0:i.branch_name)||((p=o.storeBranch)==null?void 0:p.brand_name)||"Unknown Store"},S=o=>o?new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(o):"â‚±0.00";return(o,l)=>{const i=r("Badge"),p=r("Button"),I=r("FilterTab"),R=r("Input"),M=r("SearchBar"),q=r("TableHeader"),u=r("TH"),O=r("TableHead"),d=r("TD"),U=r("TableBody"),$=r("Table"),W=r("ShowButton"),j=r("MobileTableHeading"),g=r("LabelXS"),Q=r("MobileTableRow"),X=r("MobileTableContainer"),z=r("Pagination"),G=r("TableContainer"),J=r("Layout");return f(),y(J,{heading:"Wastage Approval 2nd Level",hasExcelDownload:!1},{default:e(()=>[t(I,null,{default:e(()=>[t(p,{class:m(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("all")]),onClick:l[0]||(l[0]=n=>C("all"))},{default:e(()=>[l[4]||(l[4]=a("ALL ")),t(i,{class:m(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("all")])},{default:e(()=>[a(s(_.counts.all),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(p,{class:m(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("approved_lvl1")]),onClick:l[1]||(l[1]=n=>C("approved_lvl1"))},{default:e(()=>[l[5]||(l[5]=a("APPROVED LEVEL 1 ")),t(i,{class:m(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("approved_lvl1")])},{default:e(()=>[a(s(_.counts.approved_lvl1),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(p,{class:m(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("cancelled")]),onClick:l[2]||(l[2]=n=>C("cancelled"))},{default:e(()=>[l[6]||(l[6]=a("CANCELLED ")),t(i,{class:m(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("cancelled")])},{default:e(()=>[a(s(_.counts.cancelled),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),t(G,null,{default:e(()=>[t(q,null,{default:e(()=>[t(M,null,{default:e(()=>[t(R,{class:"pl-10",modelValue:T(b),"onUpdate:modelValue":l[3]||(l[3]=n=>Y(b)?b.value=n:b=n),placeholder:"Search by Wastage Number, Reason, or Store"},null,8,["modelValue"])]),_:1})]),_:1}),t($,null,{default:e(()=>[t(O,null,{default:e(()=>[t(u,null,{default:e(()=>l[7]||(l[7]=[a("Id")])),_:1}),t(u,null,{default:e(()=>l[8]||(l[8]=[a("Wastage #")])),_:1}),t(u,null,{default:e(()=>l[9]||(l[9]=[a("Store")])),_:1}),t(u,null,{default:e(()=>l[10]||(l[10]=[a("Total Qty")])),_:1}),t(u,null,{default:e(()=>l[11]||(l[11]=[a("Items")])),_:1}),t(u,null,{default:e(()=>l[12]||(l[12]=[a("Total Cost")])),_:1}),t(u,null,{default:e(()=>l[13]||(l[13]=[a("Status")])),_:1}),t(u,null,{default:e(()=>l[14]||(l[14]=[a("Date")])),_:1}),t(u,null,{default:e(()=>l[15]||(l[15]=[a("Actions")])),_:1})]),_:1}),t(U,null,{default:e(()=>[(f(!0),L(H,null,P(_.wastages.data,n=>(f(),L("tr",{key:n.id},[t(d,null,{default:e(()=>[a(s(n.id),1)]),_:2},1024),t(d,null,{default:e(()=>[a(s(n.wastage_no),1)]),_:2},1024),t(d,null,{default:e(()=>[a(s(D(n)),1)]),_:2},1024),t(d,null,{default:e(()=>[a(s(n.total_quantity||0),1)]),_:2},1024),t(d,null,{default:e(()=>[a(s(n.items_count||0),1)]),_:2},1024),t(d,null,{default:e(()=>[a(s(S(n.total_cost)),1)]),_:2},1024),t(d,null,{default:e(()=>[t(i,{class:m([F(n.wastage_status),"font-bold"])},{default:e(()=>{var c;return[a(s(((c=n.wastage_status)==null?void 0:c.toUpperCase().replace("_"," "))??"N/A"),1)]}),_:2},1032,["class"])]),_:2},1024),t(d,null,{default:e(()=>[a(s(k(n.created_at)),1)]),_:2},1024),t(d,{class:"flex"},{default:e(()=>[T(h)("view wastage approval level 2")?(f(),y(p,{key:0,onClick:c=>B(n.id),variant:"link"},{default:e(()=>[t(T(Z))]),_:2},1032,["onClick"])):V("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(X,null,{default:e(()=>[(f(!0),L(H,null,P(_.wastages.data,n=>(f(),y(Q,{key:n.id},{default:e(()=>[t(j,{title:n.wastage_no},{default:e(()=>[T(h)("view wastage approval level 2")?(f(),y(W,{key:0,onClick:c=>B(n.id)},null,8,["onClick"])):V("",!0)]),_:2},1032,["title"]),t(g,null,{default:e(()=>[a("Store: "+s(D(n)),1)]),_:2},1024),t(g,null,{default:e(()=>{var c;return[a("Status: "+s((c=n.wastage_status)==null?void 0:c.toUpperCase().replace("_"," ")),1)]}),_:2},1024),t(g,null,{default:e(()=>[a("Total: "+s(S(n.total_cost))+" ("+s(n.total_quantity||0)+" items)",1)]),_:2},1024),t(g,null,{default:e(()=>[a("Date: "+s(k(n.created_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(z,{data:_.wastages},null,8,["data"])]),_:1})]),_:1})}}};export{se as default};
