import{f as G,Q as S,N as w,r as a,o as c,c as g,w as e,a as t,n as _,b as n,t as s,u as x,i as Q,d as y,e as k,h as D,F as O}from"./app-Bp7xdNcv.js";import{u as K}from"./useToast-BYf4YE8m.js";import{l as W}from"./lodash-KmyjfxIh.js";import{u as Y}from"./useAuth-Bvg2Md3x.js";const ne={__name:"Index",props:{orders:{type:Object},counts:{type:Object}},setup(f){G(),K();let m=ref(S().props.filters.currentFilter||"pending"),i=ref(S().props.filters.search);watch(m,function(o){w.get(route("orders-approval.index"),{currentFilter:o,search:i.value},{preserveState:!0,replace:!0})}),watch(i,W.throttle(function(o){w.get(route("orders-approval.index"),{search:o,currentFilter:m.value},{preserveState:!0,replace:!0})},500));const C=o=>{m.value=o},b=o=>m.value==o?"bg-primary text-white":"",F=o=>{switch(console.log(o.toUpperCase()),o.toUpperCase()){case"APPROVED":return"bg-green-500 text-white";case"REJECTED":return"bg-red-400 text-white";case"COMMITED":return"bg-blue-400 text-white";default:return"bg-yellow-500 text-white"}},E=o=>{w.get(route("emergency-orders-approval.show",o))},{hasAccess:h}=Y(),N=computed(()=>route("orders-approval.export",{search:i.value,filter:m.value}));return(o,l)=>{const T=a("Badge"),v=a("Button"),R=a("FilterTab"),A=a("Input"),H=a("SearchBar"),M=a("TableHeader"),u=a("TH"),V=a("TableHead"),d=a("TD"),j=a("Eye"),I=a("TableBody"),L=a("Table"),P=a("ShowButton"),U=a("MobileTableHeading"),B=a("LabelXS"),$=a("MobileTableRow"),J=a("MobileTableContainer"),X=a("Pagination"),q=a("TableContainer"),z=a("Layout");return c(),g(z,{heading:"Emergency Orders For Approval List",hasExcelDownload:!0,exportRoute:x(N)},{default:e(()=>[t(R,null,{default:e(()=>[t(v,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",b("pending")]),onClick:l[0]||(l[0]=r=>C("pending"))},{default:e(()=>[l[3]||(l[3]=n("PENDING ")),t(T,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",b("pending")])},{default:e(()=>[n(s(f.counts.pending),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(v,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",b("rejected")]),onClick:l[1]||(l[1]=r=>C("rejected"))},{default:e(()=>[l[4]||(l[4]=n("REJECTED ")),t(T,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",b("rejected")])},{default:e(()=>[n(s(f.counts.rejected),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),t(q,null,{default:e(()=>[t(M,null,{default:e(()=>[t(H,null,{default:e(()=>[t(A,{class:"pl-10",modelValue:x(i),"onUpdate:modelValue":l[2]||(l[2]=r=>Q(i)?i.value=r:i=r),placeholder:"Order Number Search"},null,8,["modelValue"])]),_:1})]),_:1}),t(L,null,{default:e(()=>[t(V,null,{default:e(()=>[t(u,null,{default:e(()=>l[5]||(l[5]=[n("Id")])),_:1}),t(u,null,{default:e(()=>l[6]||(l[6]=[n("Supplier")])),_:1}),t(u,null,{default:e(()=>l[7]||(l[7]=[n("Store")])),_:1}),t(u,null,{default:e(()=>l[8]||(l[8]=[n("Order #")])),_:1}),t(u,null,{default:e(()=>l[9]||(l[9]=[n("Order Date")])),_:1}),t(u,null,{default:e(()=>l[10]||(l[10]=[n("Order Placed Date")])),_:1}),t(u,null,{default:e(()=>l[11]||(l[11]=[n("Order Status")])),_:1}),t(u,null,{default:e(()=>l[12]||(l[12]=[n("Actions")])),_:1})]),_:1}),t(I,null,{default:e(()=>[(c(!0),y(O,null,k(f.orders.data,r=>(c(),y("tr",{key:r.id},[t(d,null,{default:e(()=>[n(s(r.id),1)]),_:2},1024),t(d,null,{default:e(()=>{var p;return[n(s(((p=r.supplier)==null?void 0:p.name)??"N/A"),1)]}),_:2},1024),t(d,null,{default:e(()=>{var p;return[n(s(((p=r.store_branch)==null?void 0:p.name)??"N/A"),1)]}),_:2},1024),t(d,null,{default:e(()=>[n(s(r.order_number),1)]),_:2},1024),t(d,null,{default:e(()=>[n(s(r.order_date),1)]),_:2},1024),t(d,null,{default:e(()=>[n(s(r.created_at),1)]),_:2},1024),t(d,null,{default:e(()=>[t(T,{class:_([F(r.order_status),"font-bold"])},{default:e(()=>[n(s(r.order_status.toUpperCase()),1)]),_:2},1032,["class"])]),_:2},1024),t(d,{class:"flex"},{default:e(()=>[x(h)("view order for approval")?(c(),g(v,{key:0,onClick:p=>E(r.order_number),variant:"link"},{default:e(()=>[t(j)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(J,null,{default:e(()=>[(c(!0),y(O,null,k(f.orders.data,r=>(c(),g($,null,{default:e(()=>[t(U,{title:r.order_number},{default:e(()=>[x(h)("view order for approval")?(c(),g(P,{key:0,onClick:p=>E(r.order_number)},null,8,["onClick"])):D("",!0)]),_:2},1032,["title"]),t(B,null,{default:e(()=>[n("Order Status: "+s(r.order_request_status),1)]),_:2},1024),t(B,null,{default:e(()=>[n("Order Date: "+s(r.order_date),1)]),_:2},1024)]),_:2},1024))),256))]),_:1}),t(X,{data:f.orders},null,8,["data"])]),_:1})]),_:1},8,["exportRoute"])}}};export{ne as default};
