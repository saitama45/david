import{u as J}from"./useSearch-CHd_X8p0.js";import{x as K,Q as W,y as B,N as D,l as Y,r,o as u,c as _,w as t,a as l,n as p,b as n,t as s,u as T,i as Z,h as v,d as C,e as I,F as N}from"./app-rjK1ng7o.js";import{u as ee}from"./useAuth-DN4uYPJg.js";import"./lodash-DqVvdaAw.js";const te={key:0},se={__name:"Index",props:{orders:{type:Object,required:!0},counts:{type:Object,required:!0}},setup(m){const M=m;let y=K(W().props.filters.currentFilter||"all");const{search:g}=J("orders-receiving.index");B([y,g],([o,e])=>{D.get(route("orders-receiving.index"),{currentFilter:o,search:e},{preserveState:!0,replace:!0})});const w=o=>{y.value=o},c=o=>y.value===o?"bg-primary text-white":"",O=o=>{switch(o.toUpperCase()){case"RECEIVED":return"bg-green-500 text-white";case"PENDING":return"bg-yellow-500 text-white";case"INCOMPLETE":return"bg-orange-500 text-white";case"COMMITED":return"bg-blue-400 text-white";default:return"bg-gray-500 text-white"}},S=o=>{D.get(`/orders-receiving/show/${o}`)},{hasAccess:k}=ee(),h=Y(()=>route("orders-receiving.export",{search:g.value,currentFilter:y.value}));return B(()=>M.orders,o=>{console.log("OrderReceiving Index - Orders data updated:",o),o.data&&o.data.forEach((e,x)=>{var f;console.log(`Order ${x+1}:`,{id:e.id,supplier_id:e.supplier_id,supplier_name:(f=e.supplier)==null?void 0:f.name,variant:e.variant,remarks:e.remarks,is_dropshipping:e.supplier_id===5})})},{immediate:!0,deep:!0}),(o,e)=>{const x=r("Badge"),f=r("Button"),R=r("FilterTab"),V=r("Input"),A=r("SearchBar"),F=r("TableHeader"),i=r("TH"),L=r("TableHead"),d=r("TD"),H=r("Eye"),$=r("TableBody"),P=r("Table"),U=r("ShowButton"),j=r("MobileTableHeading"),E=r("LabelXS"),q=r("MobileTableRow"),X=r("MobileTableContainer"),z=r("Pagination"),G=r("TableContainer"),Q=r("Layout");return u(),_(Q,{heading:"Inbound Orders",hasExcelDownload:!0,exportRoute:h.value},{default:t(()=>[l(R,null,{default:t(()=>[l(f,{class:p(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",c("all")]),onClick:e[0]||(e[0]=a=>w("all"))},{default:t(()=>[e[5]||(e[5]=n("ALL ")),l(x,{class:p(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",c("all")])},{default:t(()=>[n(s(m.counts.all),1)]),_:1},8,["class"])]),_:1},8,["class"]),l(f,{class:p(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",c("received")]),onClick:e[1]||(e[1]=a=>w("received"))},{default:t(()=>[e[6]||(e[6]=n("RECEIVED ")),l(x,{class:p(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",c("received")])},{default:t(()=>[n(s(m.counts.received),1)]),_:1},8,["class"])]),_:1},8,["class"]),l(f,{class:p(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",c("incomplete")]),onClick:e[2]||(e[2]=a=>w("incomplete"))},{default:t(()=>[e[7]||(e[7]=n("INCOMPLETE ")),l(x,{class:p(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",c("incomplete")])},{default:t(()=>[n(s(m.counts.incomplete),1)]),_:1},8,["class"])]),_:1},8,["class"]),l(f,{class:p(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",c("commited")]),onClick:e[3]||(e[3]=a=>w("commited"))},{default:t(()=>[e[8]||(e[8]=n("COMMITED ")),l(x,{class:p(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",c("commited")])},{default:t(()=>[n(s(m.counts.commited),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),l(G,null,{default:t(()=>[l(F,null,{default:t(()=>[l(A,null,{default:t(()=>[l(V,{class:"pl-10",modelValue:T(g),"onUpdate:modelValue":e[4]||(e[4]=a=>Z(g)?g.value=a:null),placeholder:"Search..."},null,8,["modelValue"])]),_:1})]),_:1}),l(P,null,{default:t(()=>[l(L,null,{default:t(()=>[l(i,null,{default:t(()=>e[9]||(e[9]=[n("Id")])),_:1}),l(i,null,{default:t(()=>e[10]||(e[10]=[n("Supplier")])),_:1}),l(i,null,{default:t(()=>e[11]||(e[11]=[n("Store")])),_:1}),l(i,null,{default:t(()=>e[12]||(e[12]=[n("Order #")])),_:1}),l(i,null,{default:t(()=>e[13]||(e[13]=[n("Order Date")])),_:1}),l(i,null,{default:t(()=>e[14]||(e[14]=[n("Order Placed Date")])),_:1}),l(i,null,{default:t(()=>e[15]||(e[15]=[n("Variant")])),_:1}),l(i,null,{default:t(()=>e[16]||(e[16]=[n("Receiving Status")])),_:1}),T(k)("view approved order")?(u(),_(i,{key:0},{default:t(()=>e[17]||(e[17]=[n("Actions")])),_:1})):v("",!0)]),_:1}),l($,null,{default:t(()=>[(u(!0),C(N,null,I(m.orders.data,a=>(u(),C("tr",{key:a.id},[l(d,null,{default:t(()=>[n(s(a.id),1)]),_:2},1024),l(d,null,{default:t(()=>{var b;return[n(s(((b=a.supplier)==null?void 0:b.name)??"N/A"),1)]}),_:2},1024),l(d,null,{default:t(()=>{var b;return[n(s(((b=a.store_branch)==null?void 0:b.name)??"N/A"),1)]}),_:2},1024),l(d,null,{default:t(()=>[n(s(a.order_number),1)]),_:2},1024),l(d,null,{default:t(()=>[n(s(a.order_date),1)]),_:2},1024),l(d,null,{default:t(()=>[n(s(a.created_at),1)]),_:2},1024),l(d,null,{default:t(()=>[String(a.supplier_id)==="5"&&a.variant&&a.variant!=="N/A"&&a.variant!=="mass dts"?(u(),C("span",te,s(a.variant),1)):v("",!0)]),_:2},1024),l(d,null,{default:t(()=>[l(x,{class:p([O(a.order_status),"font-bold"])},{default:t(()=>[n(s(a.order_status.toUpperCase().replace("_"," ")),1)]),_:2},1032,["class"])]),_:2},1024),l(d,null,{default:t(()=>[T(k)("view approved order")?(u(),_(f,{key:0,variant:"outline",onClick:b=>S(a.order_number)},{default:t(()=>[l(H)]),_:2},1032,["onClick"])):v("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(X,null,{default:t(()=>[(u(!0),C(N,null,I(m.orders.data,a=>(u(),_(q,{key:a.id},{default:t(()=>[l(j,{title:a.order_number},{default:t(()=>[T(k)("view approved order")?(u(),_(U,{key:0,onClick:b=>S(a.order_number)},null,8,["onClick"])):v("",!0)]),_:2},1032,["title"]),l(E,null,{default:t(()=>[n("Receiving Status: "+s(a.order_status.toUpperCase()),1)]),_:2},1024),l(E,null,{default:t(()=>[n("Order Date: "+s(a.order_date),1)]),_:2},1024),String(a.supplier_id)==="5"&&a.variant&&a.variant!=="N/A"&&a.variant!=="mass dts"?(u(),_(E,{key:0},{default:t(()=>[n(" Variant: "+s(a.variant),1)]),_:2},1024)):v("",!0)]),_:2},1024))),128))]),_:1}),l(z,{data:m.orders},null,8,["data"])]),_:1})]),_:1},8,["exportRoute"])}}};export{se as default};
