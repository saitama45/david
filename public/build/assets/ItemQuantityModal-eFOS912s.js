import{_ as R,a as W,b as X,c as J,d as Y,e as Z}from"./DialogTitle-Cz47cJZ9.js";import{X as ee,x as B,y as Q,l as _,W as te,o as m,c as x,w as i,a as l,u as a,b as c,t as d,g as s,aG as C,h as f,aj as y,E as ae,ay as T,M as se,_ as le,P as ie,d as g,e as ne,F as ue}from"./app-Bw_fMWAP.js";import{_ as oe,a as re}from"./AlertDescription-BIQh25OR.js";import de from"./StockIndicator-LGFp_Qmz.js";/* empty css                                                                          */import{P as F}from"./package-B7IKRS5Q.js";import{C as ce}from"./circle-alert-CKZC4SuZ.js";import"./circle-x-Bf0oHHlB.js";import"./trending-up-5JwK62pX.js";import"./triangle-alert-Dth29Wrv.js";const me={class:"space-y-6"},ve={class:"flex items-center gap-4 p-4 bg-muted/50 rounded-lg border"},fe={class:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0"},ye={class:"flex-1 min-w-0"},_e={class:"font-medium truncate"},be={class:"text-sm text-muted-foreground"},xe={class:"flex items-center gap-4 mt-2"},ge={class:"flex items-center gap-2"},pe={class:"space-y-4"},ke={class:"flex items-center gap-3"},we={class:"space-y-2"},he={class:"flex gap-2 flex-wrap"},Qe={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ce={class:"flex items-center justify-between"},$e={class:"text-sm text-blue-700 mt-1"},Ie={class:"text-right"},qe={class:"text-lg font-bold text-blue-900"},Ne={key:0,class:"mt-3 pt-3 border-t border-blue-200"},Ve={class:"flex justify-between items-center"},Me={class:"text-lg font-bold text-blue-900"},Ee={key:1,class:"space-y-2"},Pe={key:0,class:"flex items-center gap-2 text-sm"},ze={key:1,class:"text-sm"},Oe={class:"mt-1"},je={__name:"ItemQuantityModal",props:{item:{type:Object,required:!0},currentQuantity:{type:Number,default:1},isOpen:{type:Boolean,default:!1}},emits:["save","close","view-item"],setup(r,{emit:S}){const v=r,k=S,e=B(v.currentQuantity),b=B(v.isOpen);Q(()=>v.isOpen,n=>{b.value=n,n&&(e.value=v.currentQuantity)}),Q(()=>v.currentQuantity,n=>{e.value=n});const o=_(()=>{var n;return((n=v.item)==null?void 0:n.stock)||0}),D=_(()=>{var t;const n=e.value*(((t=v.item)==null?void 0:t.cost_per_quantity)||0);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(n)}),L=_(()=>[1,5,10,25,50,100].filter(t=>t<=o.value)),$=_(()=>e.value>o.value?`Insufficient stock. Only ${o.value} units available.`:e.value<1?"Quantity must be at least 1.":Number.isInteger(e.value)?null:"Quantity must be a whole number."),U=_(()=>e.value>o.value||e.value<1?"destructive":"default"),w=_(()=>e.value>=1&&e.value<=o.value&&Number.isInteger(e.value)),A=()=>{e.value<o.value&&e.value++},H=()=>{e.value>1&&e.value--},I=n=>{e.value=n},G=()=>{Number.isInteger(e.value)||(e.value=Math.floor(e.value)),e.value<1?e.value=1:e.value>o.value&&(e.value=o.value)},q=()=>{w.value&&(k("save",{item:v.item,quantity:e.value}),h())},h=()=>{b.value=!1,k("close")},K=()=>{k("view-item",v.item)},N=n=>{n.key==="Enter"&&w.value?q():n.key==="Escape"&&h()};return Q(b,n=>{n?te(()=>{document.addEventListener("keydown",N)}):document.removeEventListener("keydown",N)}),(n,t)=>(m(),x(a(Z),{open:b.value,"onUpdate:open":t[2]||(t[2]=p=>b.value=p)},{default:i(()=>[l(a(Y),{class:"sm:max-w-lg"},{default:i(()=>{var p,V,M,E,P,z,O,j;return[l(a(R),null,{default:i(()=>[l(a(W),{class:"flex items-center gap-2"},{default:i(()=>[l(a(F),{class:"w-5 h-5"}),t[3]||(t[3]=c(" Edit Item Quantity "))]),_:1}),l(a(X),null,{default:i(()=>{var u;return[c(" Update the transfer quantity for "+d((u=r.item)==null?void 0:u.description),1)]}),_:1})]),_:1}),s("div",me,[s("div",ve,[s("div",fe,[l(a(F),{class:"w-6 h-6 text-primary"})]),s("div",ye,[s("h4",_e,d((p=r.item)==null?void 0:p.description),1),s("p",be,d((V=r.item)==null?void 0:V.item_code),1),s("div",xe,[l(de,{available:((M=r.item)==null?void 0:M.stock)||0,requested:r.currentQuantity,size:"small"},null,8,["available","requested"]),s("div",ge,[l(a(C),{variant:"secondary"},{default:i(()=>{var u;return[c("â‚±"+d((((u=r.item)==null?void 0:u.cost_per_quantity)||0).toFixed(2)),1)]}),_:1}),(E=r.item)!=null&&E.uom?(m(),x(a(C),{key:0,variant:"outline"},{default:i(()=>{var u;return[c(d((u=r.item)==null?void 0:u.uom),1)]}),_:1})):f("",!0)])])]),l(a(y),{size:"sm",variant:"outline",onClick:K,title:"View Details"},{default:i(()=>[l(a(ae),{class:"w-4 h-4"})]),_:1})]),s("div",pe,[l(a(T),{for:"quantity",class:"text-base font-medium"},{default:i(()=>t[4]||(t[4]=[c("Transfer Quantity")])),_:1}),s("div",ke,[l(a(y),{variant:"outline",size:"lg",onClick:H,disabled:e.value<=1,class:"h-12 w-12"},{default:i(()=>[l(a(se),{class:"w-4 h-4"})]),_:1},8,["disabled"]),l(a(le),{id:"quantity",modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=u=>e.value=u),modelModifiers:{number:!0},type:"number",min:"1",max:o.value,class:"text-center text-lg font-semibold h-12",onInput:G},null,8,["modelValue","max"]),l(a(y),{variant:"outline",size:"lg",onClick:A,disabled:e.value>=o.value,class:"h-12 w-12"},{default:i(()=>[l(a(ie),{class:"w-4 h-4"})]),_:1},8,["disabled"])]),s("div",we,[l(a(T),{class:"text-sm text-muted-foreground"},{default:i(()=>t[5]||(t[5]=[c("Quick Select")])),_:1}),s("div",he,[(m(!0),g(ue,null,ne(L.value,u=>(m(),x(a(y),{key:u,size:"sm",variant:e.value===u?"default":"outline",onClick:Be=>I(u),disabled:u>o.value},{default:i(()=>[c(d(u),1)]),_:2},1032,["variant","onClick","disabled"]))),128)),o.value>100?(m(),x(a(y),{key:0,size:"sm",variant:e.value===o.value?"default":"outline",onClick:t[1]||(t[1]=u=>I(o.value)),class:"text-xs"},{default:i(()=>[c(" Max ("+d(o.value)+") ",1)]),_:1},8,["variant"])):f("",!0)])])]),$.value?(m(),x(a(oe),{key:0,variant:U.value,class:"border-l-4"},{default:i(()=>[l(a(ce),{class:"w-4 h-4"}),l(a(re),null,{default:i(()=>[c(d($.value),1)]),_:1})]),_:1},8,["variant"])):f("",!0),s("div",Qe,[s("div",Ce,[s("div",null,[t[6]||(t[6]=s("h4",{class:"font-medium text-blue-900"},"Stock Information",-1)),s("p",$e," Available: "+d(o.value)+" units ",1)]),s("div",Ie,[t[7]||(t[7]=s("p",{class:"text-sm text-blue-600"},"Requested",-1)),s("p",qe,d(e.value),1)])]),e.value>0?(m(),g("div",Ne,[s("div",Ve,[t[8]||(t[8]=s("span",{class:"text-sm text-blue-700"},"Total Value:",-1)),s("span",Me,d(D.value),1)])])):f("",!0)]),(P=r.item)!=null&&P.category||(z=r.item)!=null&&z.remarks?(m(),g("div",Ee,[(O=r.item)!=null&&O.category?(m(),g("div",Pe,[t[9]||(t[9]=s("span",{class:"text-muted-foreground"},"Category:",-1)),l(a(C),{variant:"outline"},{default:i(()=>[c(d(r.item.category),1)]),_:1})])):f("",!0),(j=r.item)!=null&&j.remarks?(m(),g("div",ze,[t[10]||(t[10]=s("span",{class:"text-muted-foreground"},"Notes:",-1)),s("p",Oe,d(r.item.remarks),1)])):f("",!0)])):f("",!0)]),l(a(J),null,{default:i(()=>[l(a(y),{variant:"outline",onClick:h},{default:i(()=>t[11]||(t[11]=[c(" Cancel ")])),_:1}),l(a(y),{onClick:q,disabled:!w.value},{default:i(()=>t[12]||(t[12]=[c(" Save Changes ")])),_:1},8,["disabled"])]),_:1})]}),_:1})]),_:1},8,["open"]))}},Re=ee(je,[["__scopeId","data-v-cebaab2c"]]);export{Re as default};
