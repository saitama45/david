import{Y as J,x as N,l as w,y as W,r as X,o as i,c,w as a,g as n,u as t,aA as x,N as _,a as s,P as z,b as r,h,d as b,e as S,aQ as j,t as u,n as Z,bp as B,aN as A,F as $,aL as E,aM as P,_ as tt,aB as et,aF as st,aG as at,aH as lt,aK as Q,E as U,bu as nt}from"./app-Bp7xdNcv.js";import{_ as ot,a as rt,b as q,c as v,d as ut,e as g}from"./TableHeader-DmwgdUbH.js";import G from"./TransferStatusBadge-BHYO3dtt.js";import{S as it}from"./search-RtaD5aad.js";import{R as dt}from"./rotate-ccw-BVWVL-fj.js";import{S as H}from"./square-pen-BXz0dBaO.js";import"./VisuallyHidden-CFaLkp8s.js";import"./clock-CRAPMzg8.js";import"./circle-x-ya5U_PzQ.js";import"./package-8PI2OvT-.js";const ft={class:"flex gap-2"},mt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},ct={class:"flex items-center justify-between"},_t={class:"text-sm font-medium text-muted-foreground"},vt={class:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center"},gt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},pt={class:"relative"},xt={class:"flex gap-2"},bt={class:"text-sm text-muted-foreground"},yt={class:"hidden md:block"},ht={class:"flex justify-end gap-2"},kt={class:"flex items-center justify-between"},wt={class:"flex items-center gap-2"},St={class:"font-semibold text-sm"},$t={class:"flex gap-1"},Ct={class:"grid grid-cols-2 gap-3 text-sm"},Tt={class:"font-medium"},Nt={class:"font-medium"},jt={class:"grid grid-cols-2 gap-3 text-sm"},At={class:"font-medium"},Vt={class:"font-medium"},Ft={class:"flex items-center justify-between text-sm"},Dt={class:"font-medium"},Ot={key:0,class:"text-center py-12"},It={class:"text-muted-foreground mb-4"},Lt={key:1,class:"mt-6"},Rt={__name:"Index",props:{orders:Object,statistics:Object,filters:Object,statusOptions:Array,permissions:Object},setup(d){const y=d,p=N(y.filters.search||""),f=N(y.filters.status||"all"),k=N(""),C=w(()=>p.value||f.value&&f.value!=="all"||k.value),M=w(()=>{const o=y.statistics?y.statistics:{};return[{label:"Total Transfers",value:o.total?o.total:0,color:"text-blue-600"},{label:"Open",value:o.open?o.open:0,color:"text-gray-600"},{label:"In Transit",value:o.in_transit?o.in_transit:0,color:"text-purple-600"},{label:"Received",value:o.received?o.received:0,color:"text-green-600"}]}),K=()=>{const o={};p.value&&(o.search=p.value),f.value&&f.value!=="all"&&(o.status=f.value),k.value&&(o.date_range=k.value),_.get(route("interco.index"),o,{preserveState:!0,preserveScroll:!0})},Y=()=>{p.value="",f.value="all",k.value="",_.get(route("interco.index"),{},{preserveState:!0,preserveScroll:!0})},V=o=>o?new Date(o).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):"N/A",F=o=>{var e,m,l;return o.from_store_name||((e=o.sendingStore)==null?void 0:e.name)||((m=o.sendingStore)==null?void 0:m.branch_name)||((l=o.sendingStore)==null?void 0:l.brand_name)||"Unknown Sending Store"},D=o=>{var e,m;return o.to_store_name||((e=o.store_branch)==null?void 0:e.name)||((m=o.store_branch)==null?void 0:m.branch_name)||"Unknown Receiving Store"},O=o=>!o||!Array.isArray(o)?0:o.reduce((e,m)=>e+(Number(m.quantity_ordered)||0),0),I=w(()=>y.permissions.can_create),L=w(()=>y.permissions.can_edit);W([p,f,k],()=>{clearTimeout(R),R=setTimeout(()=>{K()},500)});let R;return(o,e)=>{const m=X("Layout");return i(),c(m,{heading:"Store-to-Store Transfers",hasExcelDownload:!0},{"header-actions":a(()=>[n("div",ft,[I.value?(i(),c(t(x),{key:0,onClick:e[0]||(e[0]=l=>t(_).get(o.route("interco.create")))},{default:a(()=>[s(t(z),{class:"w-4 h-4 mr-2"}),e[4]||(e[4]=r(" New Transfer "))]),_:1})):h("",!0)])]),default:a(()=>[n("div",mt,[(i(!0),b($,null,S(M.value,l=>(i(),c(t(j),{key:l.label},{default:a(()=>[s(t(A),{class:"p-4"},{default:a(()=>[n("div",ct,[n("div",null,[n("p",_t,u(l.label),1),n("p",{class:Z(["text-2xl font-bold",l.color])},u(l.value),3)]),n("div",vt,[s(t(B),{class:"w-4 h-4 text-primary"})])])]),_:2},1024)]),_:2},1024))),128))]),s(t(j),{class:"mb-6"},{default:a(()=>[s(t(E),null,{default:a(()=>[s(t(P),{class:"text-lg"},{default:a(()=>e[5]||(e[5]=[r("Filters")])),_:1})]),_:1}),s(t(A),null,{default:a(()=>[n("div",gt,[n("div",pt,[s(t(it),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s(t(tt),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value=l),placeholder:"Search transfers...",class:"pl-10"},null,8,["modelValue"])]),s(t(et),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l)},{default:a(()=>[s(t(st),null,{default:a(()=>[s(t(at),{placeholder:"All Statuses"})]),_:1}),s(t(lt),null,{default:a(()=>[s(t(Q),{value:"all"},{default:a(()=>e[6]||(e[6]=[r("All Statuses")])),_:1}),(i(!0),b($,null,S(d.statusOptions,l=>(i(),c(t(Q),{key:l.value,value:l.value},{default:a(()=>[r(u(l.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),n("div",xt,[s(t(x),{variant:"outline",onClick:Y,disabled:!C.value},{default:a(()=>[s(t(dt),{class:"w-4 h-4 mr-2"}),e[7]||(e[7]=r(" Clear "))]),_:1},8,["disabled"])])])]),_:1})]),_:1}),s(t(j),null,{default:a(()=>[s(t(E),null,{default:a(()=>[s(t(P),null,{default:a(()=>e[8]||(e[8]=[r("Transfers")])),_:1}),n("p",bt," Showing "+u(d.orders.from)+" to "+u(d.orders.to)+" of "+u(d.orders.total)+" transfers ",1)]),_:1}),s(t(A),null,{default:a(()=>[n("div",yt,[s(t(ot),null,{default:a(()=>[s(t(rt),null,{default:a(()=>[s(t(q),null,{default:a(()=>[s(t(v),null,{default:a(()=>e[9]||(e[9]=[r("Transfer #")])),_:1}),s(t(v),null,{default:a(()=>e[10]||(e[10]=[r("From Store")])),_:1}),s(t(v),null,{default:a(()=>e[11]||(e[11]=[r("To Store")])),_:1}),s(t(v),null,{default:a(()=>e[12]||(e[12]=[r("Items")])),_:1}),s(t(v),null,{default:a(()=>e[13]||(e[13]=[r("Quantity")])),_:1}),s(t(v),null,{default:a(()=>e[14]||(e[14]=[r("Status")])),_:1}),s(t(v),null,{default:a(()=>e[15]||(e[15]=[r("Date")])),_:1}),s(t(v),{class:"text-right"},{default:a(()=>e[16]||(e[16]=[r("Actions")])),_:1})]),_:1})]),_:1}),s(t(ut),null,{default:a(()=>[(i(!0),b($,null,S(d.orders.data,l=>(i(),c(t(q),{key:l.id},{default:a(()=>[s(t(g),{class:"font-medium"},{default:a(()=>[r(u(l.interco_number),1)]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(F(l)),1)]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(D(l)),1)]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(l.store_order_items?l.store_order_items.length:0),1)]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(O(l.store_order_items)),1)]),_:2},1024),s(t(g),null,{default:a(()=>[s(G,{status:l.interco_status},null,8,["status"])]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(V(l.order_date)),1)]),_:2},1024),s(t(g),{class:"text-right"},{default:a(()=>[n("div",ht,[s(t(x),{variant:"ghost",size:"sm",onClick:T=>t(_).get(o.route("interco.show",l.id))},{default:a(()=>[s(t(U),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),L.value&&l.interco_status==="open"?(i(),c(t(x),{key:0,variant:"ghost",size:"sm",onClick:T=>t(_).get(o.route("interco.edit",l.id))},{default:a(()=>[s(t(H),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):h("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),s(nt,{class:"md:hidden"},{default:a(()=>[(i(!0),b($,null,S(d.orders.data,l=>(i(),b("div",{key:l.id,class:"border-b last:border-b-0 p-4 space-y-3"},[n("div",kt,[n("div",wt,[n("span",St,u(l.interco_number),1),s(G,{status:l.interco_status},null,8,["status"])]),n("div",$t,[s(t(x),{variant:"ghost",size:"sm",onClick:T=>t(_).get(o.route("interco.show",l.id))},{default:a(()=>[s(t(U),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),L.value&&l.interco_status==="open"?(i(),c(t(x),{key:0,variant:"ghost",size:"sm",onClick:T=>t(_).get(o.route("interco.edit",l.id))},{default:a(()=>[s(t(H),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):h("",!0)])]),n("div",Ct,[n("div",null,[e[17]||(e[17]=n("span",{class:"text-muted-foreground text-xs"},"From:",-1)),n("div",Tt,u(F(l)),1)]),n("div",null,[e[18]||(e[18]=n("span",{class:"text-muted-foreground text-xs"},"To:",-1)),n("div",Nt,u(D(l)),1)])]),n("div",jt,[n("div",null,[e[19]||(e[19]=n("span",{class:"text-muted-foreground text-xs"},"Items:",-1)),n("div",At,u(l.store_order_items?l.store_order_items.length:0),1)]),n("div",null,[e[20]||(e[20]=n("span",{class:"text-muted-foreground text-xs"},"Quantity:",-1)),n("div",Vt,u(O(l.store_order_items)),1)])]),n("div",Ft,[n("div",null,[e[21]||(e[21]=n("span",{class:"text-muted-foreground text-xs"},"Date:",-1)),n("div",Dt,u(V(l.order_date)),1)])])]))),128))]),_:1}),d.orders.data.length===0?(i(),b("div",Ot,[s(t(B),{class:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e[23]||(e[23]=n("h3",{class:"text-lg font-medium mb-2"},"No transfers found",-1)),n("p",It,u(C.value?"Try adjusting your filters":"Get started by creating your first transfer"),1),I.value&&!C.value?(i(),c(t(x),{key:0,onClick:e[3]||(e[3]=l=>t(_).get(o.route("interco.create")))},{default:a(()=>[s(t(z),{class:"w-4 h-4 mr-2"}),e[22]||(e[22]=r(" Create Transfer "))]),_:1})):h("",!0)])):h("",!0),d.orders.data.length>0?(i(),b("div",Lt,e[24]||(e[24]=[n("div",{class:"flex justify-center"},null,-1)]))):h("",!0)]),_:1})]),_:1})]),_:1})}}},Kt=J(Rt,[["__scopeId","data-v-cc62b106"]]);export{Kt as default};
