import{X as qe,f as Ie,T as se,x as b,aW as Ee,l as C,y as H,ai as Ne,r as $e,o as f,c as oe,w as m,a as i,u as n,b as v,N as re,aj as T,g as t,n as D,aX as K,m as Q,O as X,ay as I,s as ne,d as g,t as _,h,_ as j,aY as ae,P as Ve,z as De,e as Y,ah as W,F as Z,aZ as Ae,i as Oe}from"./app-rjK1ng7o.js";import{I as Ue}from"./ItemAutoComplete-95Pbgfq4.js";import{u as Fe}from"./useToast-DBCD-RTl.js";import{u as Te}from"./useEditQuantity-BCpCvMmE.js";import{_ as ie,a as le}from"./AlertDescription-B6smwBW-.js";import{d as je,_ as Be,a as Le,b as Pe,c as Me,e as Qe}from"./DialogTitle-B5P0ImB3.js";import de from"./StockIndicator-DP0m4Ibx.js";/* empty css                                                                          */import{A as Ge}from"./arrow-left-CawIyKRQ.js";import{P as G}from"./package-Dr2_9bTP.js";import{T as ue}from"./triangle-alert-wjSEt5KL.js";import{S as ce}from"./square-pen-r0X0rD3O.js";import{C as Re}from"./chevron-left-CEk8dY0_.js";import"./lodash-DqVvdaAw.js";import"./circle-x-M_usABET.js";import"./trending-up-XZiWa48v.js";const ze={class:"space-y-4"},He={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Ke={class:"flex items-center gap-3"},Xe={class:"p-2 bg-blue-600 rounded-lg"},Ye={class:"px-4 sm:px-6 py-4"},We={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ze={class:"space-y-2"},Je={key:0,class:"text-sm text-red-600"},et={class:"space-y-2"},tt={key:0,class:"text-sm text-red-600"},st={key:1,class:"text-sm text-muted-foreground"},ot={class:"space-y-2"},rt={key:0,class:"text-sm text-red-600"},nt={class:"space-y-2 md:col-span-3"},at={key:0,class:"text-sm text-red-600"},it={class:"space-y-2 md:col-span-3"},lt={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},dt={class:"flex items-center gap-3"},ut={class:"p-2 bg-green-600 rounded-lg"},ct={class:"px-4 sm:px-6 py-4"},mt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},_t={class:"space-y-2"},ft={key:0,class:"text-sm text-red-600"},pt={class:"space-y-2"},gt={class:"space-y-2"},vt={class:"space-y-2"},yt={key:0,class:"text-sm text-red-600"},bt={class:"flex justify-end mt-4"},ht={key:1,class:"text-sm text-muted-foreground mt-2"},xt={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},kt={class:"flex items-center gap-3"},wt={class:"p-2 bg-purple-600 rounded-lg"},Ct={class:"text-lg font-semibold text-gray-900"},St={class:"p-4 sm:p-6 space-y-4"},qt={class:"flex flex-col gap-3"},It={class:"relative"},Et={class:"flex flex-wrap gap-2"},Nt={class:"flex items-center gap-2"},$t={class:"font-bold text-lg"},Vt={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 text-sm text-gray-600"},Dt={class:"flex items-center gap-2"},At={class:"block md:hidden space-y-2"},Ot={class:"flex items-start justify-between mb-2"},Ut={class:"flex-1"},Ft={class:"font-medium text-gray-900"},Tt=["onClick"],jt={class:"grid grid-cols-2 gap-2 text-sm"},Bt={class:"mt-1 flex items-center gap-1"},Lt={class:"font-medium"},Pt=["onClick"],Mt={class:"mt-1"},Qt={class:"mt-2 pt-2 border-t border-gray-100"},Gt=["onClick"],Rt={key:0,class:"text-center py-8 text-gray-500"},zt={class:"hidden md:block"},Ht={class:"overflow-x-auto border border-gray-200 rounded-lg"},Kt={class:"w-full text-sm"},Xt={class:"divide-y divide-gray-200"},Yt={class:"px-4 py-3 text-gray-900"},Wt={class:"font-medium"},Zt={class:"px-4 py-3 text-center"},Jt={class:"flex items-center justify-center gap-2"},es={class:"font-medium"},ts=["onClick"],ss={key:0,class:"text-xs text-red-600 text-center"},os={key:1,class:"text-xs text-red-600 text-center"},rs={class:"px-4 py-3 text-gray-900"},ns={class:"px-4 py-3 text-center"},as={class:"flex justify-center gap-1"},is=["onClick"],ls={key:0},ds={colspan:"4",class:"px-4 py-8 text-center text-gray-500"},us={class:"flex flex-col items-center"},cs={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-3 pt-4 border-t border-gray-200"},ms={class:"text-sm text-gray-700"},_s={class:"flex items-center gap-1"},fs=["disabled"],ps=["onClick","disabled"],gs=["disabled"],vs={key:1,class:"mt-4"},ys={class:"flex flex-col sm:flex-row gap-3 justify-end pt-4 border-t border-gray-200"},bs={class:"flex gap-2"},hs={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xs={class:"grid gap-4 py-4"},ks={class:"grid grid-cols-4 items-center gap-4"},ws={__name:"Create",props:{myStoreOptions:Array,sendingStoreOptions:Array,items:Array,user_store_branch_id:Number},setup(me){const A=me,J=Ie(),{toast:p}=Fe(),a=se({store_branch_id:A.user_store_branch_id,sending_store_branch_id:null,transfer_date:new Date().toISOString().split("T")[0],interco_reason:"",remarks:"",items:[]}),c=b([]);b(null),b(!1),b(null),b([]),b([]);const y=b({}),N=b(!1),B=b(null),V=b(null),U=b(!1),F=b([]),o=Ee({id:null,inventory_code:null,name:null,description:null,unit_of_measurement:null,base_uom:null,base_qty:null,quantity:null,cost:null,total_cost:null,uom:null}),x=se({item:null}),{isEditQuantityModalOpen:L,formQuantity:q,openEditQuantityModal:_e}=Te(a,c,null),$=b({transferDetails:!0,addItem:!0,items:!0}),R=s=>{$.value[s]=!$.value[s]},P=b(""),S=b(1),k=b(10),O=C(()=>{if(!P.value)return c.value;const s=P.value.toLowerCase();return c.value.filter(e=>e.description.toLowerCase().includes(s)||e.item_code.toLowerCase().includes(s)||e.uom&&e.uom.toLowerCase().includes(s))}),ee=C(()=>Math.ceil(O.value.length/k.value)),M=C(()=>{const s=(S.value-1)*k.value,e=s+k.value;return O.value.slice(s,e)}),fe=C(()=>{const s=ee.value,e=S.value,u=2,r=[];for(let l=Math.max(2,e-u);l<=Math.min(s-1,e+u);l++)r.push(l);return e-u>2&&r.unshift("..."),e+u<s-1&&r.push("..."),s>1&&r.unshift(1),s>1&&s!==1&&r.push(s),r.filter(l=>l!=="..."||r.indexOf(l)===r.lastIndexOf(l))});C(()=>A.branches.find(s=>s.id===a.sending_store_branch_id)),C(()=>A.branches.find(s=>s.id===a.store_branch_id));const pe=C(()=>c.value.reduce((s,e)=>s+(e.quantity_ordered||0),0));C(()=>c.value.reduce((s,e)=>s+(e.quantity_ordered||0)*(e.cost_per_quantity||0),0)),C(()=>a.sending_store_branch_id&&a.store_branch_id&&a.sending_store_branch_id!==a.store_branch_id);const ge=C(()=>a.sending_store_branch_id&&a.store_branch_id&&a.sending_store_branch_id!==a.store_branch_id),ve=C(()=>a.store_branch_id?A.sendingStoreOptions.filter(s=>s.value!==a.store_branch_id):A.sendingStoreOptions),ye=C(()=>!a.store_branch_id),be=()=>{if(x.clearErrors(),!x.item){x.setError("item","Item field is required");return}if(isNaN(Number(o.quantity))||Number(o.quantity)<1){x.setError("quantity","Quantity must be at least 1 and a valid number");return}if(o.cost===null||Number(o.cost)===0){p.add({severity:"error",summary:"Validation Error",detail:"Item cost cannot be zero or empty.",life:5e3});return}const s=[];if(o.inventory_code||s.push("Item code is missing"),o.unit_of_measurement||s.push("UOM is missing"),(!o.quantity||Number(o.quantity)<1)&&s.push("Valid quantity is required"),(o.cost===null||isNaN(Number(o.cost)))&&s.push("Item cost is invalid"),o.description||(o.description="No description"),s.length>0){p.add({severity:"error",summary:"Validation Error",detail:s.join("; "),life:5e3});return}const e=c.value.findIndex(l=>l.item_code===o.inventory_code),u=Number(o.quantity),r=Number(o.cost);if(e!==-1){const l=c.value[e],d=l.quantity_ordered+u,w=parseFloat((d*r).toFixed(2));l.quantity_ordered=d,l.total_cost=w,l.stock===void 0&&o.stock!==void 0&&(l.stock=o.stock)}else{const l={id:Date.now(),item_code:String(o.inventory_code),description:o.description||"No description",unit_of_measurement:o.unit_of_measurement,alt_uom:o.unit_of_measurement,quantity_ordered:parseFloat(Number(o.quantity).toFixed(2)),cost_per_quantity:Number(o.cost),uom:o.uom,stock:o.stock||0,total_cost:parseFloat((Number(o.quantity)*Number(o.cost)).toFixed(2))};c.value.push(l)}Object.keys(o).forEach(l=>{o[l]=null}),B.value=null,p.add({severity:"success",summary:"Success",detail:"Item added successfully.",life:5e3}),x.item=null,x.clearErrors()},te=s=>{c.value.splice(s,1)},z=(s,e)=>{_e(s.id,s.quantity_ordered)},he=()=>{let s=c.value.findIndex(e=>e.id===q.id);if(s===-1&&(s=c.value.findIndex(e=>e.item_code===q.item_code||e.description===q.description)),s!==-1){const e=Number(q.quantity),u=c.value[s];if(isNaN(e)||e<=0){q.errors.quantity="Quantity must be a positive number.",p.add({severity:"error",summary:"Validation Error",detail:"Quantity must be a positive number.",life:3e3});return}const r=Number(u.cost_per_quantity);if(isNaN(r)){p.add({severity:"error",summary:"Calculation Error",detail:"Item cost is invalid. Cannot update total cost.",life:3e3});return}u.quantity_ordered=parseFloat(e.toFixed(2)),u.total_cost=parseFloat((e*r).toFixed(2)),c.value=[...c.value],p.add({severity:"success",summary:"Success",detail:"Quantity Updated.",life:3e3}),L.value=!1}else p.add({severity:"error",summary:"Error",detail:`Item not found in transfer list. Looking for ID: ${q.id}, Item Code: ${q.item_code}, Description: ${q.description}`,life:5e3})},xe=()=>{console.log("üîç Validating form...");const s={};console.log("üìã Checking store selection..."),a.sending_store_branch_id?console.log("‚úÖ Sending store OK:",a.sending_store_branch_id):(console.log("‚ùå Sending store missing"),s.sending_store_branch_id="Sending store is required"),a.store_branch_id?console.log("‚úÖ Receiving store OK:",a.store_branch_id):(console.log("‚ùå Receiving store missing"),s.store_branch_id="Receiving store is required"),a.sending_store_branch_id===a.store_branch_id&&(console.log("‚ùå Stores are the same"),s.store_selection="Sending and receiving stores must be different"),a.transfer_date?console.log("‚úÖ Transfer date OK:",a.transfer_date):(console.log("‚ùå Transfer date missing"),s.transfer_date="Transfer date is required"),!a.interco_reason||!a.interco_reason.trim()?(console.log("‚ùå Transfer reason missing"),s.interco_reason="Reason for transfer is required"):console.log("‚úÖ Transfer reason OK:",a.interco_reason),console.log("üì¶ Checking items..."),c.value.length===0?(console.log("‚ùå No items found"),s.items="At least one item is required"):console.log(`‚úÖ Found ${c.value.length} items`),c.value.forEach((u,r)=>{console.log(`üîç Validating item ${r+1}:`,{item_code:u.item_code,quantity:u.quantity_ordered,stock:u.stock}),(!u.quantity_ordered||u.quantity_ordered<1)&&(console.log(`‚ùå Item ${r+1} quantity invalid`),s[`item_${r}_quantity`]="Quantity must be at least 1"),u.quantity_ordered>(u.stock||0)&&(console.log(`‚ùå Item ${r+1} insufficient stock`),s[`item_${r}_stock`]=`Insufficient stock. Only ${u.stock||0} available`)}),y.value=s;const e=Object.keys(s).length===0;return console.log(`üèÅ Validation ${e?"PASSED":"FAILED"}`,{errorsCount:Object.keys(s).length,errors:s}),e},ke=()=>{if(console.log("üöÄ SubmitForm called - Starting form submission"),!xe()){console.log("‚ùå Form validation failed"),p.add({severity:"error",summary:"Validation Error",detail:"Please fix all validation errors before submitting.",life:5e3});return}if(c.value.length===0){console.log("‚ùå No items to submit"),p.add({severity:"error",summary:"No Items",detail:"Please add at least one item to the transfer before submitting.",life:5e3});return}console.log("‚úÖ Form validation passed, showing confirmation dialog"),J.require({message:"Are you sure you want to create this interco transfer?",header:"Confirm Interco Transfer Creation",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-danger",rejectLabel:"No",acceptLabel:"Yes",acceptClass:"p-button-success",accept:()=>{we()},reject:()=>{console.log("‚ùå User cancelled transfer creation"),p.add({severity:"info",summary:"Cancelled",detail:"Interco transfer creation was cancelled.",life:3e3})}})},we=()=>{console.log("üîÑ Executing form submission..."),console.log("üìä Form data:",{store_branch_id:a.store_branch_id,sending_store_branch_id:a.sending_store_branch_id,interco_reason:a.interco_reason,items_count:c.value.length});const s={store_branch_id:a.store_branch_id,sending_store_branch_id:a.sending_store_branch_id,transfer_date:a.transfer_date,interco_reason:a.interco_reason,remarks:a.remarks||"",items:c.value.map((e,u)=>{const r={item_code:String(e.item_code),quantity_ordered:parseInt(Number(e.quantity_ordered)),quantity_committed:parseInt(Number(e.quantity_ordered)),cost_per_quantity:Number(e.cost_per_quantity||1),uom:String(e.unit_of_measurement||e.uom||"PCS"),remarks:e.remarks||""};return console.log(`üì¶ Item ${u+1}:`,r),r})};console.log("üì§ Submitting data to backend:",s),N.value=!0,re.post(route("interco.store"),s,{onStart:()=>{console.log("üîÑ Request started")},onSuccess:e=>{console.log("‚úÖ Request successful - Interco order created"),N.value=!1,p.add({severity:"success",summary:"Success",detail:"Interco transfer request created successfully!",life:5e3})},onError:e=>{if(console.error("‚ùå Form submission errors:",e),y.value=e,e.error)p.add({severity:"error",summary:"Submission Failed",detail:e.error,life:8e3});else if(e.items)p.add({severity:"error",summary:"Item Validation Error",detail:`Issue with items: ${e.items}`,life:8e3});else if(e.store_branch_id)p.add({severity:"error",summary:"Store Selection Error",detail:`Receiving store: ${e.store_branch_id}`,life:8e3});else if(e.sending_store_branch_id)p.add({severity:"error",summary:"Store Selection Error",detail:`Sending store: ${e.sending_store_branch_id}`,life:8e3});else{const u=Object.entries(e).map(([r,l])=>`${r}: ${l}`).join("; ");p.add({severity:"error",summary:"Validation Failed",detail:u,life:1e4})}N.value=!1},onCancel:()=>{console.log("‚èπÔ∏è Request was cancelled"),N.value=!1},onFinish:()=>{console.log("üèÅ Request finished"),N.value=!1},preserveState:!0,preserveScroll:!0})},Ce=()=>{try{if(c.value.length===0){p.add({severity:"info",summary:"Info",detail:"No items to clear.",life:3e3});return}J.require({message:"Are you sure you want to remove ALL items from the transfer?",header:"Confirm Clear All",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Cancel",acceptLabel:"Clear All",acceptClass:"p-button-danger",accept:()=>{c.value=[],p.add({severity:"success",summary:"Success",detail:"All items have been removed from the transfer.",life:3e3})},reject:()=>{}})}catch(s){console.error("Error in clearAllItems:",s),window.confirm("Are you sure you want to remove ALL items from the transfer?")&&(c.value=[])}};H(()=>a.store_branch_id,s=>{B.value=null,V.value=null,Object.keys(o).forEach(e=>{o[e]=null}),a.sending_store_branch_id===s&&(a.sending_store_branch_id=null),c.value=[],F.value=[]}),H(()=>a.sending_store_branch_id,s=>{s?F.value=[]:F.value=[],V.value=null,Object.keys(o).forEach(e=>{o[e]=null}),c.value=c.value.filter(e=>e.stock>0),B.value=null,V.value=null,Object.keys(o).forEach(e=>{o[e]=null})}),H(B,async s=>{if(s){U.value=!0,x.item=s;const[e,u]=s.split("|");e==="916A2C"&&console.log("üéØ DEBUG: 916A2C selected in productId watch:",{itemCode:e,altUOM:u,fullItemCode:s,sendingStoreId:a.sending_store_branch_id});try{const r=a.sending_store_branch_id;if(console.log("üîç DEBUG: Fetching item details:",{itemCode:e,altUOM:u,sendingStoreId:r}),!r){p.add({severity:"error",summary:"Error",detail:"Failed to determine sending store.",life:5e3}),U.value=!1;return}const l=await Ne.get(route("interco.get-item-details",{itemCode:e,altUOM:u,sendingStoreId:r})),d=l.data.item;if(console.log("üìä DEBUG: API response:",{status:l.status,hasData:!!d,result:d}),d)o.inventory_code=String(d.item_code),o.description=d.description||"No description",o.unit_of_measurement=d.alt_uom||d.uom,o.cost=Number(d.cost_per_quantity),o.uom=d.uom,o.stock=d.stock||0,e==="916A2C"&&console.log("üéØ DEBUG: 916A2C API success - Product details updated:",{inventory_code:o.inventory_code,description:o.description,unit_of_measurement:o.unit_of_measurement,stock:o.stock,original_api_description:d.description,fallback_used:d.description===null||d.description===void 0}),console.log("‚úÖ DEBUG: Product details updated:",{inventory_code:o.inventory_code,description:o.description,unit_of_measurement:o.unit_of_measurement,stock:o.stock});else{const w=F.value.find(E=>E.value===s);if(console.log("üîÑ DEBUG: Using fallback data:",{hasSelectedOption:!!w,hasOriginalData:!!(w&&w._originalData),originalData:w==null?void 0:w._originalData}),w&&w._originalData){const E=w._originalData;o.inventory_code=String(E.item_code),o.description=E.description||"No description",o.unit_of_measurement=E.alt_uom||E.uom,o.cost=Number(E.cost_per_quantity||0),o.uom=E.uom,o.stock=0,e==="916A2C"&&console.log("üéØ DEBUG: 916A2C fallback - Product details set:",{inventory_code:o.inventory_code,description:o.description,unit_of_measurement:o.unit_of_measurement,original_fallback_description:E.description,selected_option_label:w.label}),console.log("‚úÖ DEBUG: Fallback product details set:",{inventory_code:o.inventory_code,description:o.description,unit_of_measurement:o.unit_of_measurement})}else console.log("‚ùå DEBUG: No fallback data available"),p.add({severity:"error",summary:"Error",detail:"Item details not found.",life:5e3})}}catch(r){console.log("‚ö†Ô∏è DEBUG: API call failed, using fallback:",{error:r.message,itemCode:e});const l=F.value.find(d=>d.value===s);if(l&&l._originalData){const d=l._originalData;o.inventory_code=String(d.item_code),o.description=d.description||"No description",o.unit_of_measurement=d.alt_uom||d.uom,o.cost=Number(d.cost_per_quantity||0),o.uom=d.uom,o.stock=0,console.log("‚úÖ DEBUG: Catch fallback product details set:",{inventory_code:o.inventory_code,description:o.description})}else console.log("‚ùå DEBUG: No fallback data available in catch block"),p.add({severity:"error",summary:"Error",detail:"Failed to load item details.",life:5e3})}finally{U.value=!1}}else Object.keys(o).forEach(e=>{o[e]=null})},{deep:!0});const Se=s=>{if(!s){Object.keys(o).forEach(e=>{o[e]=null}),V.value=null;return}console.log("üéØ DEBUG: Auto-complete item selected:",{item_code:s.item_code,description:s.description,alt_uom:s.alt_uom,stock:s.stock}),o.id=s.id,o.inventory_code=String(s.item_code),o.description=s.description||"No description",o.unit_of_measurement=s.alt_uom||s.uom,o.cost=Number(s.cost_per_quantity||1),o.uom=s.uom,o.stock=s.stock||0,V.value=s,x.item=s.item_code,(s.item_code==="916A2C"||s.item_code==="397A2D")&&console.log(`üéØ DEBUG: ${s.item_code} auto-complete selected - Product details set:`,{inventory_code:o.inventory_code,description:o.description,unit_of_measurement:o.unit_of_measurement,stock:o.stock,item_code:s.item_code}),console.log("‚úÖ DEBUG: Auto-complete product details set:",{inventory_code:o.inventory_code,description:o.description,unit_of_measurement:o.unit_of_measurement,stock:o.stock})};return(s,e)=>{const u=$e("Layout");return f(),oe(u,{heading:"Create Store Transfer"},{"header-actions":m(()=>[i(n(T),{variant:"outline",onClick:e[0]||(e[0]=r=>n(re).get(s.route("interco.index")))},{default:m(()=>[i(n(Ge),{class:"w-4 h-4 mr-2"}),e[20]||(e[20]=v(" Back to Transfers "))]),_:1})]),default:m(()=>[t("div",ze,[t("div",He,[t("button",{onClick:e[1]||(e[1]=r=>R("transferDetails")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-blue-50 to-blue-100 border-b border-blue-200 flex items-center justify-between text-left hover:from-blue-100 hover:to-blue-200 transition-colors"},[t("div",Ke,[t("div",Xe,[i(n(G),{class:"w-5 h-5 text-white"})]),e[21]||(e[21]=t("div",null,[t("h2",{class:"text-lg font-semibold text-gray-900"},"Transfer Details"),t("p",{class:"text-sm text-gray-600"},"Basic transfer information")],-1))]),i(n(K),{class:D(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":$.value.transferDetails}])},null,8,["class"])]),Q(t("div",Ye,[t("div",We,[t("div",Ze,[i(n(I),{for:"receiving_store"},{default:m(()=>e[22]||(e[22]=[v("My Store *")])),_:1}),i(n(ne),{filter:"",placeholder:"Select your store",modelValue:n(a).store_branch_id,"onUpdate:modelValue":e[2]||(e[2]=r=>n(a).store_branch_id=r),options:A.myStoreOptions,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue","options"]),y.value.store_branch_id?(f(),g("p",Je,_(y.value.store_branch_id),1)):h("",!0)]),t("div",et,[i(n(I),{for:"sending_store"},{default:m(()=>e[23]||(e[23]=[v("Sending Store *")])),_:1}),i(n(ne),{filter:"",placeholder:"Select sending store",modelValue:n(a).sending_store_branch_id,"onUpdate:modelValue":e[3]||(e[3]=r=>n(a).sending_store_branch_id=r),options:ve.value,disabled:ye.value,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue","options","disabled"]),y.value.sending_store_branch_id?(f(),g("p",tt,_(y.value.sending_store_branch_id),1)):h("",!0),n(a).store_branch_id?h("",!0):(f(),g("p",st," Select My Store first "))]),t("div",ot,[i(n(I),{for:"transfer_date"},{default:m(()=>e[24]||(e[24]=[v("Transfer Date")])),_:1}),i(n(j),{id:"transfer_date",type:"date",modelValue:n(a).transfer_date,"onUpdate:modelValue":e[4]||(e[4]=r=>n(a).transfer_date=r),class:"w-full"},null,8,["modelValue"]),y.value.transfer_date?(f(),g("p",rt,_(y.value.transfer_date),1)):h("",!0)]),t("div",nt,[i(n(I),{for:"reason"},{default:m(()=>e[25]||(e[25]=[v("Reason for Transfer *")])),_:1}),i(n(ae),{id:"reason",modelValue:n(a).interco_reason,"onUpdate:modelValue":e[5]||(e[5]=r=>n(a).interco_reason=r),placeholder:"Explain why this transfer is needed...",rows:"3"},null,8,["modelValue"]),y.value.interco_reason?(f(),g("p",at,_(y.value.interco_reason),1)):h("",!0)]),t("div",it,[i(n(I),{for:"remarks"},{default:m(()=>e[26]||(e[26]=[v("Remarks (Optional)")])),_:1}),i(n(ae),{id:"remarks",modelValue:n(a).remarks,"onUpdate:modelValue":e[6]||(e[6]=r=>n(a).remarks=r),placeholder:"Additional notes or instructions...",rows:"2"},null,8,["modelValue"])])])],512),[[X,$.value.transferDetails]])]),t("div",lt,[t("button",{onClick:e[7]||(e[7]=r=>R("addItem")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-green-50 to-green-100 border-b border-green-200 flex items-center justify-between text-left hover:from-green-100 hover:to-green-200 transition-colors"},[t("div",dt,[t("div",ut,[i(n(Ve),{class:"w-5 h-5 text-white"})]),e[27]||(e[27]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"Add Items"),t("p",{class:"text-sm text-gray-600"},"Add items to your transfer")],-1))]),i(n(K),{class:D(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":$.value.addItem}])},null,8,["class"])]),Q(t("div",ct,[y.value.store_selection?(f(),oe(n(ie),{key:0,class:"mb-4"},{default:m(()=>[i(n(ue),{class:"w-4 h-4"}),i(n(le),null,{default:m(()=>[v(_(y.value.store_selection),1)]),_:1})]),_:1})):h("",!0),t("div",mt,[t("div",_t,[i(n(I),{class:"text-sm font-medium text-gray-700"},{default:m(()=>e[28]||(e[28]=[v("Item")])),_:1}),i(Ue,{modelValue:V.value,"onUpdate:modelValue":e[8]||(e[8]=r=>V.value=r),"sending-store-id":n(a).sending_store_branch_id,placeholder:"Type at least 3 characters to search for items...",disabled:!n(a).sending_store_branch_id||U.value,onItemSelected:Se},null,8,["modelValue","sending-store-id","disabled"]),n(x).errors.item?(f(),g("p",ft,_(n(x).errors.item),1)):h("",!0)]),t("div",pt,[i(n(I),{class:"text-sm font-medium text-gray-700"},{default:m(()=>e[29]||(e[29]=[v("UOM")])),_:1}),i(n(j),{type:"text",disabled:"",modelValue:o.unit_of_measurement,"onUpdate:modelValue":e[9]||(e[9]=r=>o.unit_of_measurement=r),class:"flex h-10 w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm"},null,8,["modelValue"])]),t("div",gt,[i(n(I),{class:"text-sm font-medium text-gray-700"},{default:m(()=>e[30]||(e[30]=[v("SOH Stock")])),_:1}),i(n(j),{type:"text",disabled:"",value:o.stock||0,class:"flex h-10 w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm"},null,8,["value"])]),t("div",vt,[i(n(I),{class:"text-sm font-medium text-gray-700"},{default:m(()=>e[31]||(e[31]=[v("Quantity")])),_:1}),i(n(j),{type:"number",modelValue:o.quantity,"onUpdate:modelValue":e[10]||(e[10]=r=>o.quantity=r),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm"},null,8,["modelValue"]),n(x).errors.quantity?(f(),g("p",yt,_(n(x).errors.quantity),1)):h("",!0)])]),t("div",bt,[i(n(T),{onClick:be,disabled:U.value||!n(a).sending_store_branch_id},{default:m(()=>e[32]||(e[32]=[v(" Add to Transfer ")])),_:1},8,["disabled"])]),n(a).sending_store_branch_id?h("",!0):(f(),g("p",ht," Select a sending store to add items "))],512),[[X,$.value.addItem]])]),t("div",xt,[t("button",{onClick:e[11]||(e[11]=r=>R("items")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200 flex items-center justify-between text-left hover:from-purple-100 hover:to-purple-200 transition-colors"},[t("div",kt,[t("div",wt,[i(n(G),{class:"w-5 h-5 text-white"})]),t("div",null,[t("h3",Ct,"Transfer Items ("+_(c.value.length)+")",1),e[33]||(e[33]=t("p",{class:"text-sm text-gray-600"},"Manage your transfer items and quantities",-1))])]),i(n(K),{class:D(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":$.value.items}])},null,8,["class"])]),Q(t("div",St,[t("div",qt,[t("div",It,[Q(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=r=>P.value=r),placeholder:"Search items by code or description...",class:"w-full h-10 pl-10 pr-4 rounded-md border border-gray-300 bg-white text-sm shadow-sm transition-colors placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500"},null,512),[[De,P.value]]),e[34]||(e[34]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),t("div",Et,[t("div",Nt,[e[35]||(e[35]=t("span",{class:"text-sm text-gray-600"},"Total Quantity:",-1)),t("span",$t,_(pe.value),1)])])]),t("div",Vt,[t("span",null,_(O.value.length)+" items found",1),t("div",Dt,[e[36]||(e[36]=t("span",null,"Items per page:",-1)),t("button",{onClick:e[13]||(e[13]=r=>k.value=10),class:D(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===10?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 10 ",2),t("button",{onClick:e[14]||(e[14]=r=>k.value=25),class:D(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===25?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 25 ",2),t("button",{onClick:e[15]||(e[15]=r=>k.value=50),class:D(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===50?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 50 ",2)])]),t("div",At,[(f(!0),g(Z,null,Y(M.value,(r,l)=>(f(),g("div",{key:r.id,class:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow"},[t("div",Ot,[t("div",Ut,[t("div",Ft,_(r.item_code)+" - "+_(r.description)+" ("+_(r.alt_uom||r.uom)+")",1)]),t("button",{onClick:d=>te(l),class:"h-8 w-8 p-0 hover:bg-red-50 hover:text-red-600 hover:border-red-300 flex-shrink-0 ml-2 rounded-md border border-gray-300"},[i(n(W),{class:"w-4 h-4"})],8,Tt)]),t("div",jt,[t("div",null,[e[37]||(e[37]=t("span",{class:"text-gray-600"},"Quantity:",-1)),t("div",Bt,[t("span",Lt,_(r.quantity_ordered),1),t("button",{onClick:d=>z(r,l),class:"text-blue-600 hover:text-blue-800"},[i(n(ce),{class:"w-3 h-3"})],8,Pt)])]),t("div",null,[e[38]||(e[38]=t("span",{class:"text-gray-600"},"SOH Stock:",-1)),t("div",Mt,[i(de,{available:Number(r.stock||0),requested:r.quantity_ordered,size:"small"},null,8,["available","requested"])])])]),t("div",Qt,[t("button",{onClick:d=>z(r,l),class:"w-full text-sm text-blue-600 hover:text-blue-800 font-medium"}," Edit Quantity ",8,Gt)])]))),128)),M.value.length===0?(f(),g("div",Rt,[i(n(G),{class:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e[39]||(e[39]=t("p",null,"No items found. Try searching or add items manually.",-1))])):h("",!0)]),t("div",zt,[t("div",Ht,[t("table",Kt,[e[41]||(e[41]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"Description"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Quantity"),t("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"SOH Stock"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Actions")])],-1)),t("tbody",Xt,[(f(!0),g(Z,null,Y(M.value,(r,l)=>(f(),g("tr",{key:r.id,class:"hover:bg-gray-50"},[t("td",Yt,[t("div",null,[t("p",Wt,_(r.item_code)+" - "+_(r.description)+" ("+_(r.alt_uom||r.uom)+")",1)])]),t("td",Zt,[t("div",Jt,[t("span",es,_(r.quantity_ordered),1),t("button",{onClick:d=>z(r,l),class:"text-blue-600 hover:text-blue-800"},[i(n(ce),{class:"w-3 h-3"})],8,ts)]),y.value[`item_${l}_quantity`]?(f(),g("p",ss,_(y.value[`item_${l}_quantity`]),1)):h("",!0),y.value[`item_${l}_stock`]?(f(),g("p",os,_(y.value[`item_${l}_stock`]),1)):h("",!0)]),t("td",rs,[i(de,{available:Number(r.stock||0),requested:r.quantity_ordered,size:"small"},null,8,["available","requested"])]),t("td",ns,[t("div",as,[t("button",{onClick:d=>te(l),class:"text-red-600 hover:text-red-800"},[i(n(W),{class:"w-4 h-4"})],8,is)])])]))),128)),M.value.length===0?(f(),g("tr",ls,[t("td",ds,[t("div",us,[i(n(G),{class:"w-12 h-12 text-gray-400 mb-2"}),e[40]||(e[40]=t("p",null,"No items found. Try searching or add items manually.",-1))])])])):h("",!0)])])])]),O.value.length>k.value?(f(),g("div",cs,[t("div",ms," Showing "+_((S.value-1)*k.value+1)+" to "+_(Math.min(S.value*k.value,O.value.length))+" of "+_(O.value.length)+" items ",1),t("div",_s,[t("button",{onClick:e[16]||(e[16]=r=>S.value--),disabled:S.value===1,class:"h-8 w-8 p-0 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[i(n(Re),{class:"w-4 h-4"})],8,fs),(f(!0),g(Z,null,Y(fe.value,r=>(f(),g("button",{key:r,onClick:l=>S.value=r==="..."?null:S.value=r,disabled:r==="...",class:D(["h-8 w-8 p-0 rounded-md text-sm font-medium transition-colors",S.value===r?"bg-blue-600 text-white":r==="..."?"text-gray-500 cursor-default":"border border-gray-300 hover:bg-gray-50"])},_(r),11,ps))),128)),t("button",{onClick:e[17]||(e[17]=r=>S.value++),disabled:S.value===ee.value,class:"h-8 w-8 p-0 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[i(n(Ae),{class:"w-4 h-4"})],8,gs)])])):h("",!0),y.value.items?(f(),g("div",vs,[i(n(ie),{variant:"destructive"},{default:m(()=>[i(n(ue),{class:"w-4 h-4"}),i(n(le),null,{default:m(()=>[v(_(y.value.items),1)]),_:1})]),_:1})])):h("",!0),t("div",ys,[t("div",bs,[i(n(T),{onClick:Ce,variant:"outline",class:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:c.value.length===0},{default:m(()=>[i(n(W),{class:"w-4 h-4 mr-2"}),e[42]||(e[42]=v(" Clear All "))]),_:1},8,["disabled"])]),i(n(T),{onClick:ke,disabled:N.value||!ge.value,class:"min-w-[120px]"},{default:m(()=>[N.value?(f(),g("svg",hs,e[43]||(e[43]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):h("",!0),v(" "+_(N.value?"Creating...":"Create Transfer"),1)]),_:1},8,["disabled"])])],512),[[X,$.value.items]])])]),i(n(Qe),{open:n(L),"onUpdate:open":e[19]||(e[19]=r=>Oe(L)?L.value=r:null)},{default:m(()=>[i(n(je),{class:"sm:max-w-[425px]"},{default:m(()=>[i(n(Be),null,{default:m(()=>[i(n(Le),null,{default:m(()=>e[44]||(e[44]=[v("Edit Quantity")])),_:1}),i(n(Pe),null,{default:m(()=>e[45]||(e[45]=[v(" Make changes to the quantity here. Click save when you're done. ")])),_:1})]),_:1}),t("div",xs,[t("div",ks,[i(n(I),{for:"quantity",class:"text-right"},{default:m(()=>e[46]||(e[46]=[v(" Quantity ")])),_:1}),i(n(j),{id:"quantity",type:"number",class:"col-span-3",modelValue:n(q).quantity,"onUpdate:modelValue":e[18]||(e[18]=r=>n(q).quantity=r)},null,8,["modelValue"])])]),i(n(Me),null,{default:m(()=>[i(n(T),{onClick:he},{default:m(()=>e[47]||(e[47]=[v("Save changes")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}},Ls=qe(ws,[["__scopeId","data-v-5ad75a37"]]);export{Ls as default};
