import{x as O,l as r}from"./app-p8ycGfai.js";const _=1,c=1e6,a={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let u=0;function d(){return u=(u+1)%Number.MAX_VALUE,u.toString()}const n=new Map;function i(s){if(n.has(s))return;const t=setTimeout(()=>{n.delete(s),o({type:a.REMOVE_TOAST,toastId:s})},c);n.set(s,t)}const e=O({toasts:[]});function o(s){switch(s.type){case a.ADD_TOAST:e.value.toasts=[s.toast,...e.value.toasts].slice(0,_);break;case a.UPDATE_TOAST:e.value.toasts=e.value.toasts.map(t=>t.id===s.toast.id?{...t,...s.toast}:t);break;case a.DISMISS_TOAST:{const{toastId:t}=s;t?i(t):e.value.toasts.forEach(T=>{i(T.id)}),e.value.toasts=e.value.toasts.map(T=>T.id===t||t===void 0?{...T,open:!1}:T);break}case a.REMOVE_TOAST:s.toastId===void 0?e.value.toasts=[]:e.value.toasts=e.value.toasts.filter(t=>t.id!==s.toastId);break}}function D(){return{toasts:r(()=>e.value.toasts),toast:l,dismiss:s=>o({type:a.DISMISS_TOAST,toastId:s})}}function l(s){const t=d(),T=S=>o({type:a.UPDATE_TOAST,toast:{...S,id:t}}),A=()=>o({type:a.DISMISS_TOAST,toastId:t});return o({type:a.ADD_TOAST,toast:{...s,id:t,open:!0,onOpenChange:S=>{S||A()}}}),{id:t,dismiss:A,update:T}}export{D as u};
