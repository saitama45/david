import{X as $,l as _,aP as B,o,c as g,w as m,a as d,u as n,av as P,b as p,au as V,g as a,d as i,e as x,n as j,a7 as q,h as c,t as l,aG as z,F as h,aw as A,az as S}from"./app-Bw_fMWAP.js";import{C as b}from"./clock-DsuBE0vk.js";import{C as y,a as E}from"./circle-x-Bf0oHHlB.js";import{P as F}from"./package-B7IKRS5Q.js";import{C as L}from"./check-CDHR8V18.js";import{C as Q}from"./calendar-DBmwDqo5.js";import{U as R}from"./user-DRUPNnu4.js";const X={class:"relative"},G={class:"space-y-6"},H={key:0,class:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center"},O={class:"flex-1 min-w-0"},J={class:"flex items-center gap-2 mb-1"},K={class:"font-medium"},M={class:"text-sm text-muted-foreground mb-2"},W={class:"flex items-center gap-4 mb-2"},Y={class:"text-xs text-muted-foreground flex items-center gap-1"},Z={key:0,class:"text-xs text-muted-foreground flex items-center gap-1"},ee={key:0,class:"mt-3 p-3 bg-muted/50 rounded-lg"},te={class:"text-muted-foreground"},re={class:"font-medium"},ae={key:1,class:"mt-3"},se={key:0,class:"text-center py-8"},oe={__name:"TransferTimeline",props:{transfer:{type:Object,required:!0},compact:{type:Boolean,default:!1}},setup(w){const e=w,u=t=>t?t.name&&t.name!==t.email?t.name:t.first_name||t.last_name?`${t.first_name||""} ${t.last_name||""}`.trim():t.email?t.email.split("@")[0].replace(/[._]/g," ").replace(/\b\w/g,r=>r.toUpperCase()):"Unknown User":"Unknown User";console.log("TransferTimeline Debug - Transfer Data:",{transfer:e.transfer,approval_action_date:e.transfer.approval_action_date,approver:e.transfer.approver,commited_action_date:e.transfer.commited_action_date,commiter:e.transfer.commiter,interco_status:e.transfer.interco_status});const T=_(()=>e.transfer.store_order_items?e.transfer.store_order_items.reduce((t,s)=>t+(Number(s.quantity_commited)||0),0):0),C=_(()=>e.transfer.store_order_items?e.transfer.store_order_items.length:0),v=_(()=>{const t=[];return t.push({status:"created",title:"Transfer Created",description:"Transfer request was created and submitted",date:e.transfer.created_at,user:u(e.transfer.encoder),completed:!0,icon:b,color:"gray"}),e.transfer.approval_action_date&&t.push({status:"approved",title:"Transfer Approved",description:"Transfer was approved by management",date:e.transfer.approval_action_date,user:u(e.transfer.approver),completed:["approved","committed","in_transit","received"].includes(e.transfer.interco_status),icon:y,color:"blue"}),e.transfer.commited_action_date&&t.push({status:"committed",title:"Transfer Committed",description:"Items were committed for transfer",date:e.transfer.commited_action_date,user:u(e.transfer.commiter),completed:["committed","in_transit","received"].includes(e.transfer.interco_status),icon:F,color:"yellow",details:e.transfer.store_order_items?[{label:"Total Items",value:C.value},{label:"Total Quantity",value:T.value}]:[]}),(e.transfer.interco_status==="in_transit"||e.transfer.interco_status==="received")&&t.push({status:"in_transit",title:"In Transit",description:"Items are being transported between stores",date:k(),user:"System",completed:e.transfer.interco_status==="received",icon:B,color:"purple"}),e.transfer.interco_status==="received"&&t.push({status:"received",title:"Transfer Completed",description:"All items have been received successfully",date:D(),user:"Receiving Store",completed:!0,icon:y,color:"green",badge:{text:"Completed",variant:"default"}}),e.transfer.interco_status==="disapproved"&&t.push({status:"disapproved",title:"Transfer Disapproved",description:"Transfer was disapproved",date:e.transfer.updated_at,user:u(e.transfer.approver),completed:!0,icon:E,color:"red",badge:{text:"Disapproved",variant:"destructive"}}),t}),k=()=>{if(e.transfer.commited_action_date){const t=new Date(e.transfer.commited_action_date);return new Date(t.getTime()+24*60*60*1e3)}return new Date},D=()=>e.transfer.updated_at||new Date,N=t=>t?new Date(t).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",I=t=>{const s={created:"bg-gray-100 text-gray-600 border-gray-300",approved:"bg-blue-100 text-blue-600 border-blue-300",committed:"bg-yellow-100 text-yellow-600 border-yellow-300",in_transit:"bg-purple-100 text-purple-600 border-purple-300",received:"bg-green-100 text-green-600 border-green-300",disapproved:"bg-red-100 text-red-600 border-red-300"};return s[t]||s.created};return(t,s)=>(o(),g(n(S),null,{default:m(()=>[d(n(V),null,{default:m(()=>[d(n(P),{class:"flex items-center gap-2"},{default:m(()=>[d(n(b),{class:"w-5 h-5"}),s[0]||(s[0]=p(" Transfer Timeline "))]),_:1})]),_:1}),d(n(A),null,{default:m(()=>[a("div",X,[s[3]||(s[3]=a("div",{class:"absolute left-6 top-0 bottom-0 w-0.5 bg-border"},null,-1)),a("div",G,[(o(!0),i(h,null,x(v.value,(r,U)=>(o(),i("div",{key:U,class:"flex items-start gap-4"},[a("div",{class:j(["relative z-10 w-12 h-12 rounded-full flex items-center justify-center border-2 border-background transition-all duration-300",I(r.status)])},[(o(),g(q(r.icon),{class:"w-5 h-5"})),r.completed?(o(),i("div",H,[d(n(L),{class:"w-3 h-3 text-white"})])):c("",!0)],2),a("div",O,[a("div",J,[a("h4",K,l(r.title),1),r.badge?(o(),g(n(z),{key:0,variant:r.badge.variant},{default:m(()=>[p(l(r.badge.text),1)]),_:2},1032,["variant"])):c("",!0)]),a("p",M,l(r.description),1),a("div",W,[a("span",Y,[d(n(Q),{class:"w-3 h-3"}),p(" "+l(N(r.date)),1)]),r.user?(o(),i("span",Z,[d(n(R),{class:"w-3 h-3"}),p(" "+l(r.user),1)])):c("",!0)]),r.details&&r.details.length>0?(o(),i("div",ee,[(o(!0),i(h,null,x(r.details,f=>(o(),i("div",{key:f.label,class:"flex items-baseline gap-2 text-sm mb-1 last:mb-0"},[a("span",te,l(f.label)+":",1),a("span",re,l(f.value),1)]))),128))])):c("",!0),r.completed?c("",!0):(o(),i("div",ae,s[1]||(s[1]=[a("div",{class:"flex items-center gap-2 text-xs text-muted-foreground"},[a("div",{class:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),a("span",null,"In Progress")],-1)])))])]))),128))]),v.value.length===0?(o(),i("div",se,[d(n(b),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground opacity-50"}),s[2]||(s[2]=a("p",{class:"text-sm text-muted-foreground"},"No timeline events available",-1))])):c("",!0)])]),_:1})]),_:1}))}},pe=$(oe,[["__scopeId","data-v-3e87cceb"]]);export{pe as default};
