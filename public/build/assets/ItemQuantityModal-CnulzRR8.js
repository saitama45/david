import{Y as K,x as T,y as Q,l as _,W as R,o as m,c as x,w as i,a as l,u as a,aW as X,aX as Z,b as c,aY as G,t as d,g as s,aZ as $,h as f,aA as y,E as J,aP as j,M as ee,_ as te,P as ae,d as g,e as se,F as le,a_ as ie,a$ as ne,b0 as ue}from"./app-DPA7xop8.js";import{_ as oe,a as re}from"./ItemQuantityModal.vue_vue_type_style_index_0_scoped_cebaab2c_lang-fZ_nlVKq.js";import de from"./StockIndicator-DB9uDRGt.js";import{P as F}from"./package-Buz1PgiL.js";import{C as ce}from"./circle-alert-CNaSQfq8.js";import"./circle-x-DaAv8wgv.js";import"./triangle-alert-B9jhW3xO.js";const me={class:"space-y-6"},ve={class:"flex items-center gap-4 p-4 bg-muted/50 rounded-lg border"},fe={class:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0"},ye={class:"flex-1 min-w-0"},_e={class:"font-medium truncate"},be={class:"text-sm text-muted-foreground"},xe={class:"flex items-center gap-4 mt-2"},ge={class:"flex items-center gap-2"},pe={class:"space-y-4"},ke={class:"flex items-center gap-3"},we={class:"space-y-2"},he={class:"flex gap-2 flex-wrap"},Qe={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},$e={class:"flex items-center justify-between"},Ce={class:"text-sm text-blue-700 mt-1"},Ie={class:"text-right"},qe={class:"text-lg font-bold text-blue-900"},Ne={key:0,class:"mt-3 pt-3 border-t border-blue-200"},Ve={class:"flex justify-between items-center"},Me={class:"text-lg font-bold text-blue-900"},Pe={key:1,class:"space-y-2"},Ee={key:0,class:"flex items-center gap-2 text-sm"},ze={key:1,class:"text-sm"},Oe={class:"mt-1"},Be={__name:"ItemQuantityModal",props:{item:{type:Object,required:!0},currentQuantity:{type:Number,default:1},isOpen:{type:Boolean,default:!1}},emits:["save","close","view-item"],setup(r,{emit:S}){const v=r,k=S,e=T(v.currentQuantity),b=T(v.isOpen);Q(()=>v.isOpen,n=>{b.value=n,n&&(e.value=v.currentQuantity)}),Q(()=>v.currentQuantity,n=>{e.value=n});const o=_(()=>{var n;return((n=v.item)==null?void 0:n.stock)||0}),A=_(()=>{var t;const n=e.value*(((t=v.item)==null?void 0:t.cost_per_quantity)||0);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(n)}),D=_(()=>[1,5,10,25,50,100].filter(t=>t<=o.value)),C=_(()=>e.value>o.value?`Insufficient stock. Only ${o.value} units available.`:e.value<1?"Quantity must be at least 1.":Number.isInteger(e.value)?null:"Quantity must be a whole number."),L=_(()=>e.value>o.value||e.value<1?"destructive":"default"),w=_(()=>e.value>=1&&e.value<=o.value&&Number.isInteger(e.value)),U=()=>{e.value<o.value&&e.value++},H=()=>{e.value>1&&e.value--},I=n=>{e.value=n},W=()=>{Number.isInteger(e.value)||(e.value=Math.floor(e.value)),e.value<1?e.value=1:e.value>o.value&&(e.value=o.value)},q=()=>{w.value&&(k("save",{item:v.item,quantity:e.value}),h())},h=()=>{b.value=!1,k("close")},Y=()=>{k("view-item",v.item)},N=n=>{n.key==="Enter"&&w.value?q():n.key==="Escape"&&h()};return Q(b,n=>{n?R(()=>{document.addEventListener("keydown",N)}):document.removeEventListener("keydown",N)}),(n,t)=>(m(),x(a(ue),{open:b.value,"onUpdate:open":t[2]||(t[2]=p=>b.value=p)},{default:i(()=>[l(a(ne),{class:"sm:max-w-lg"},{default:i(()=>{var p,V,M,P,E,z,O,B;return[l(a(X),null,{default:i(()=>[l(a(Z),{class:"flex items-center gap-2"},{default:i(()=>[l(a(F),{class:"w-5 h-5"}),t[3]||(t[3]=c(" Edit Item Quantity "))]),_:1}),l(a(G),null,{default:i(()=>{var u;return[c(" Update the transfer quantity for "+d((u=r.item)==null?void 0:u.description),1)]}),_:1})]),_:1}),s("div",me,[s("div",ve,[s("div",fe,[l(a(F),{class:"w-6 h-6 text-primary"})]),s("div",ye,[s("h4",_e,d((p=r.item)==null?void 0:p.description),1),s("p",be,d((V=r.item)==null?void 0:V.item_code),1),s("div",xe,[l(de,{available:((M=r.item)==null?void 0:M.stock)||0,requested:r.currentQuantity,size:"small"},null,8,["available","requested"]),s("div",ge,[l(a($),{variant:"secondary"},{default:i(()=>{var u;return[c("â‚±"+d((((u=r.item)==null?void 0:u.cost_per_quantity)||0).toFixed(2)),1)]}),_:1}),(P=r.item)!=null&&P.uom?(m(),x(a($),{key:0,variant:"outline"},{default:i(()=>{var u;return[c(d((u=r.item)==null?void 0:u.uom),1)]}),_:1})):f("",!0)])])]),l(a(y),{size:"sm",variant:"outline",onClick:Y,title:"View Details"},{default:i(()=>[l(a(J),{class:"w-4 h-4"})]),_:1})]),s("div",pe,[l(a(j),{for:"quantity",class:"text-base font-medium"},{default:i(()=>t[4]||(t[4]=[c("Transfer Quantity")])),_:1}),s("div",ke,[l(a(y),{variant:"outline",size:"lg",onClick:H,disabled:e.value<=1,class:"h-12 w-12"},{default:i(()=>[l(a(ee),{class:"w-4 h-4"})]),_:1},8,["disabled"]),l(a(te),{id:"quantity",modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=u=>e.value=u),modelModifiers:{number:!0},type:"number",min:"1",max:o.value,class:"text-center text-lg font-semibold h-12",onInput:W},null,8,["modelValue","max"]),l(a(y),{variant:"outline",size:"lg",onClick:U,disabled:e.value>=o.value,class:"h-12 w-12"},{default:i(()=>[l(a(ae),{class:"w-4 h-4"})]),_:1},8,["disabled"])]),s("div",we,[l(a(j),{class:"text-sm text-muted-foreground"},{default:i(()=>t[5]||(t[5]=[c("Quick Select")])),_:1}),s("div",he,[(m(!0),g(le,null,se(D.value,u=>(m(),x(a(y),{key:u,size:"sm",variant:e.value===u?"default":"outline",onClick:Te=>I(u),disabled:u>o.value},{default:i(()=>[c(d(u),1)]),_:2},1032,["variant","onClick","disabled"]))),128)),o.value>100?(m(),x(a(y),{key:0,size:"sm",variant:e.value===o.value?"default":"outline",onClick:t[1]||(t[1]=u=>I(o.value)),class:"text-xs"},{default:i(()=>[c(" Max ("+d(o.value)+") ",1)]),_:1},8,["variant"])):f("",!0)])])]),C.value?(m(),x(a(oe),{key:0,variant:L.value,class:"border-l-4"},{default:i(()=>[l(a(ce),{class:"w-4 h-4"}),l(a(re),null,{default:i(()=>[c(d(C.value),1)]),_:1})]),_:1},8,["variant"])):f("",!0),s("div",Qe,[s("div",$e,[s("div",null,[t[6]||(t[6]=s("h4",{class:"font-medium text-blue-900"},"Stock Information",-1)),s("p",Ce," Available: "+d(o.value)+" units ",1)]),s("div",Ie,[t[7]||(t[7]=s("p",{class:"text-sm text-blue-600"},"Requested",-1)),s("p",qe,d(e.value),1)])]),e.value>0?(m(),g("div",Ne,[s("div",Ve,[t[8]||(t[8]=s("span",{class:"text-sm text-blue-700"},"Total Value:",-1)),s("span",Me,d(A.value),1)])])):f("",!0)]),(E=r.item)!=null&&E.category||(z=r.item)!=null&&z.remarks?(m(),g("div",Pe,[(O=r.item)!=null&&O.category?(m(),g("div",Ee,[t[9]||(t[9]=s("span",{class:"text-muted-foreground"},"Category:",-1)),l(a($),{variant:"outline"},{default:i(()=>[c(d(r.item.category),1)]),_:1})])):f("",!0),(B=r.item)!=null&&B.remarks?(m(),g("div",ze,[t[10]||(t[10]=s("span",{class:"text-muted-foreground"},"Notes:",-1)),s("p",Oe,d(r.item.remarks),1)])):f("",!0)])):f("",!0)]),l(a(ie),null,{default:i(()=>[l(a(y),{variant:"outline",onClick:h},{default:i(()=>t[11]||(t[11]=[c(" Cancel ")])),_:1}),l(a(y),{onClick:q,disabled:!w.value},{default:i(()=>t[12]||(t[12]=[c(" Save Changes ")])),_:1},8,["disabled"])]),_:1})]}),_:1})]),_:1},8,["open"]))}},He=K(Be,[["__scopeId","data-v-cebaab2c"]]);export{He as default};
