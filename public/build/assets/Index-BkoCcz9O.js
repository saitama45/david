import{r as o,o as l,c as u,w as e,a as t,u as d,i as z,b as a,h as p,d as i,e as b,b5 as h,t as c,g as R,F as m,N as O}from"./app-DZB5krWT.js";import{u as G}from"./useSearch-BA-540Ma.js";import{u as J}from"./useAuth-D0qVILHh.js";import{u as K}from"./useReferenceDelete-Cl6cgyVS.js";import"./lodash-gd7BEsaJ.js";const Q={class:"h-full"},W={class:"flex flex-wrap gap-2"},Y={class:"flex flex-wrap gap-1"},le={__name:"Index",props:{roles:{type:Object,required:!0}},setup(x){const D=()=>{O.get(route("roles.create"))},{search:_}=G("roles.index"),{hasAccess:f}=J(),{deleteModel:v}=K(),N=computed(()=>route("roles.export",{search:_.value}));return(C,s)=>{const P=o("Input"),H=o("SearchBar"),L=o("TableHeader"),g=o("TH"),S=o("TableHead"),V=o("DivFlexCenter"),T=o("Badge"),F=o("PopoverTrigger"),E=o("PopoverContent"),I=o("Popover"),B=o("EditButton"),y=o("DeleteButton"),$=o("TableBody"),A=o("Table"),M=o("MobileTableHeading"),w=o("LabelXS"),k=o("DivFlexCol"),j=o("Pagination"),U=o("TableContainer"),X=o("Layout");return l(),u(X,{heading:"Roles",hasButton:d(f)("create roles"),buttonName:"Create New Role",handleClick:D,hasExcelDownload:!0,exportRoute:d(N)},{default:e(()=>[t(U,null,{default:e(()=>[t(L,null,{default:e(()=>[t(H,null,{default:e(()=>[t(P,{class:"pl-10",modelValue:d(_),"onUpdate:modelValue":s[0]||(s[0]=n=>z(_)?_.value=n:null),placeholder:"Search..."},null,8,["modelValue"])]),_:1})]),_:1}),t(A,{class:"sm:table hidden"},{default:e(()=>[t(S,null,{default:e(()=>[t(g,null,{default:e(()=>s[1]||(s[1]=[a("Id")])),_:1}),t(g,null,{default:e(()=>s[2]||(s[2]=[a("Name")])),_:1}),t(g,null,{default:e(()=>s[3]||(s[3]=[a("Permissions")])),_:1}),d(f)("edit roles")?(l(),u(g,{key:0},{default:e(()=>s[4]||(s[4]=[a("Actions")])),_:1})):p("",!0)]),_:1}),t($,null,{default:e(()=>[(l(!0),i(m,null,b(x.roles.data,n=>(l(),i("tr",Q,[t(h,null,{default:e(()=>[t(V,{class:"h-full"},{default:e(()=>[a(c(n.id),1)]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[a(c(n.name),1)]),_:2},1024),t(h,null,{default:e(()=>[R("section",W,[(l(!0),i(m,null,b(n.permissions,(r,q)=>(l(),i(m,null,[q<3?(l(),u(T,{key:r.id,class:"w-fit"},{default:e(()=>[a(c(r.name),1)]),_:2},1024)):p("",!0)],64))),256)),n.permissions.length>3?(l(),u(I,{key:0},{default:e(()=>[t(F,null,{default:e(()=>[t(T,{class:"w-fit cursor-pointer"},{default:e(()=>[a(" +"+c(n.permissions.length-3)+" more ",1)]),_:2},1024)]),_:2},1024),t(E,{class:"w-80 p-2"},{default:e(()=>[R("div",Y,[(l(!0),i(m,null,b(n.permissions,r=>(l(),u(T,{key:r.id,class:"w-fit"},{default:e(()=>[a(c(r.name),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)):p("",!0)])]),_:2},1024),d(f)("edit roles")?(l(),u(h,{key:0,class:"items-center flex"},{default:e(()=>[t(B,{isLink:!0,href:C.route("roles.edit",n.id)},null,8,["href"]),t(y,{onClick:r=>d(v)(C.route("roles.destroy",n.id),"Role")},null,8,["onClick"])]),_:2},1024)):p("",!0)]))),256))]),_:1})]),_:1}),t(k,{class:"sm:hidden gap-3"},{default:e(()=>[t(k,{class:"sm:hidden gap-3"},{default:e(()=>[(l(!0),i(m,null,b(x.roles.data,n=>(l(),u(k,{class:"rounded-lg border min-h-20 p-3"},{default:e(()=>[t(M,{title:n.name.toUpperCase()},{default:e(()=>[d(f)("edit roles")?(l(),u(B,{key:0,class:"size-5",isLink:!0,href:`/roles/edit/${n.id}`},null,8,["href"])):p("",!0),t(y,{onClick:r=>d(v)(C.route("roles.destroy",n.id),"Role")},null,8,["onClick"])]),_:2},1032,["title"]),t(w,{class:"text-[10px]"},{default:e(()=>s[5]||(s[5]=[a("Roles")])),_:1}),t(w,null,{default:e(()=>[a(c(n.permissions.slice(0,3).map(r=>r.name).join(", ")+(n.permissions.length>3?` and ${n.permissions.length-3} more`:"")),1)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),t(j,{data:x.roles},null,8,["data"])]),_:1})]),_:1},8,["hasButton","exportRoute"])}}};export{le as default};
