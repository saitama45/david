import{u as re}from"./useBackButton-B9bUould.js";import{x as V,r as _,o as f,c as b,w as e,a as l,b as u,t as a,h as N,n as oe,d as y,e as D,F as k,u as S,g as J,N as ie}from"./app-rjK1ng7o.js";import{d as F}from"./dayjs.min-CuH6jTGg.js";const se=["src","onClick"],fe={key:0,class:"grid sm:grid-cols-2 gap-5"},me=["src"],ye={__name:"Show",props:{order:{type:Object},orderedItems:{type:Object},receiveDatesHistory:{type:Object,required:!0},images:{type:Object,required:!0}},setup(o){var L;const{backButton:K}=re(route("store-orders.index")),W=C=>{if(!C)return"bg-gray-400 text-white";switch(C.toUpperCase()){case"APPROVED":return"bg-green-500 text-white";case"RECEIVED":return"bg-green-500 text-white";case"PENDING":return"bg-yellow-500 text-white";case"COMMITED":return"bg-blue-500 text-white";case"REJECTED":return"bg-red-400 text-white";default:return"bg-yellow-500 text-white"}},M=o;console.log("Ordered Items Prop:",M.orderedItems),console.log("Receive Dates History Prop:",M.receiveDatesHistory),console.log("Type of receiveDatesHistory:",typeof M.receiveDatesHistory,Array.isArray(M.receiveDatesHistory)),console.log("Length of receiveDatesHistory:",(L=M.receiveDatesHistory)==null?void 0:L.length);const Z=C=>{ie.get("/store-orders/create",{orderId:C})},Y=V(!1),g=V(null),c=C=>{const r=M.receiveDatesHistory.find(m=>m.id===C);g.value=r,Y.value=!0},I=V(null),B=V(!1),h=C=>{I.value=C,B.value=!0};return(C,t)=>{const r=_("LabelXS"),m=_("SpanBold"),v=_("InputContainer"),ee=_("Badge"),P=_("Card"),$=_("TableHeader"),i=_("TH"),j=_("DivFlexCol"),O=_("TableHead"),s=_("TD"),R=_("TableBody"),H=_("Table"),A=_("MobileTableHeading"),q=_("MobileTableRow"),U=_("MobileTableContainer"),E=_("TableContainer"),z=_("DivFlexCenter"),le=_("CardTitle"),te=_("ShowButton"),ue=_("Button"),ne=_("DialogTitle"),ae=_("DialogHeader"),Q=_("DialogContent"),X=_("Dialog"),de=_("Layout");return f(),b(de,{heading:"Order Details",hasButton:!0,buttonName:"Copy Order and Create Another",handleClick:()=>Z(o.order.id)},{default:e(()=>[l(j,{class:"gap-3"},{default:e(()=>[l(P,{class:"p-5 grid sm:grid-cols-4 gap-5"},{default:e(()=>[l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[3]||(t[3]=[u("Encoder: ")])),_:1}),l(m,null,{default:e(()=>{var n,d;return[u(a((n=o.order.encoder)==null?void 0:n.first_name)+" "+a((d=o.order.encoder)==null?void 0:d.last_name),1)]}),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[4]||(t[4]=[u("Order Number: ")])),_:1}),l(m,null,{default:e(()=>[u(a(o.order.order_number),1)]),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[5]||(t[5]=[u("Order Date: ")])),_:1}),l(m,null,{default:e(()=>[u(a(o.order.order_date),1)]),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[6]||(t[6]=[u("Approver: ")])),_:1}),o.order.approver?(f(),b(m,{key:0},{default:e(()=>{var n,d;return[u(a((n=o.order.approver)==null?void 0:n.first_name)+" "+a((d=o.order.approver)==null?void 0:d.last_name),1)]}),_:1})):N("",!0),o.order.approver?N("",!0):(f(),b(m,{key:1},{default:e(()=>t[7]||(t[7]=[u("N/a")])),_:1}))]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[8]||(t[8]=[u("Variant: ")])),_:1}),l(m,null,{default:e(()=>{var n;return[u(a((n=o.order.variant)==null?void 0:n.toUpperCase()),1)]}),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[9]||(t[9]=[u("Approval Action Date: ")])),_:1}),l(m,null,{default:e(()=>[u(a(o.order.approval_action_date?o.order.approval_action_date:"N/a"),1)]),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[10]||(t[10]=[u("Commiter: ")])),_:1}),l(m,null,{default:e(()=>{var n,d;return[u(a((n=o.order.commiter)==null?void 0:n.first_name)+" "+a((d=o.order.commiter)==null?void 0:d.last_name),1)]}),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[11]||(t[11]=[u("Order Status: ")])),_:1}),l(ee,{class:oe(["w-fit",W(o.order.order_status)])},{default:e(()=>{var n;return[u(a((n=o.order.order_status)==null?void 0:n.toUpperCase().replace("_"," ")),1)]}),_:1},8,["class"])]),_:1})]),_:1}),l(E,null,{default:e(()=>[l($,null,{default:e(()=>[l(m,{class:"sm:text-normal text-xs"},{default:e(()=>t[12]||(t[12]=[u("Ordered Items")])),_:1})]),_:1}),l(H,null,{default:e(()=>[l(O,null,{default:e(()=>[l(i,null,{default:e(()=>t[13]||(t[13]=[u(" Item Code ")])),_:1}),l(i,null,{default:e(()=>t[14]||(t[14]=[u(" Name ")])),_:1}),l(i,null,{default:e(()=>t[15]||(t[15]=[u("Base UOM")])),_:1}),l(i,null,{default:e(()=>t[16]||(t[16]=[u("UOM")])),_:1}),l(i,null,{default:e(()=>t[17]||(t[17]=[u(" Ordered")])),_:1}),l(i,null,{default:e(()=>t[18]||(t[18]=[u(" Approved")])),_:1}),l(i,null,{default:e(()=>t[19]||(t[19]=[u(" Comitted")])),_:1}),l(i,null,{default:e(()=>t[20]||(t[20]=[u(" Delivered")])),_:1}),l(i,null,{default:e(()=>t[21]||(t[21]=[u(" Received")])),_:1}),l(i,null,{default:e(()=>[l(j,null,{default:e(()=>[t[23]||(t[23]=u(" Variance ")),l(r,null,{default:e(()=>t[22]||(t[22]=[u("(Ordered vs Committed)")])),_:1})]),_:1})]),_:1}),l(i,null,{default:e(()=>[l(j,null,{default:e(()=>[t[25]||(t[25]=u(" Variance ")),l(r,null,{default:e(()=>t[24]||(t[24]=[u("(Committed vs Received)")])),_:1})]),_:1})]),_:1})]),_:1}),l(R,null,{default:e(()=>[(f(!0),y(k,null,D(o.orderedItems,n=>(f(),y("tr",{key:n.id},[l(s,null,{default:e(()=>{var d;return[u(a(((d=n.supplier_item)==null?void 0:d.ItemCode)??"N/a"),1)]}),_:2},1024),l(s,null,{default:e(()=>{var d;return[u(a(((d=n.supplier_item)==null?void 0:d.item_name)??"N/a"),1)]}),_:2},1024),l(s,null,{default:e(()=>{var d,p;return[u(a(((p=(d=n.supplier_item)==null?void 0:d.sap_master_file)==null?void 0:p.BaseUOM)??"N/a"),1)]}),_:2},1024),l(s,null,{default:e(()=>{var d;return[u(a(((d=n.supplier_item)==null?void 0:d.uom)??"N/a"),1)]}),_:2},1024),l(s,null,{default:e(()=>[u(a(n.quantity_ordered),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(n.quantity_approved),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(n.quantity_commited),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(n.quantity_received),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(n.quantity_received),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(Math.abs(n.quantity_approved-n.quantity_commited)),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(Math.abs(n.quantity_commited-n.quantity_received)),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(U,null,{default:e(()=>[(f(!0),y(k,null,D(o.orderedItems,n=>(f(),b(q,{key:n.id},{default:e(()=>{var d,p;return[l(A,{title:`${((d=n.supplier_item)==null?void 0:d.item_name)??"N/a"} (${((p=n.supplier_item)==null?void 0:p.ItemCode)??"N/a"})`},null,8,["title"]),l(r,null,{default:e(()=>{var x,w;return[u("Base UOM: "+a(((w=(x=n.supplier_item)==null?void 0:x.sap_master_file)==null?void 0:w.BaseUOM)??"N/a"),1)]}),_:2},1024),l(r,null,{default:e(()=>{var x;return[u("UOM: "+a(((x=n.supplier_item)==null?void 0:x.uom)??"N/a"),1)]}),_:2},1024),l(r,null,{default:e(()=>[u("Ordered: "+a(n.quantity_ordered),1)]),_:2},1024),l(r,null,{default:e(()=>[u("Approved: "+a(n.quantity_approved),1)]),_:2},1024),l(r,null,{default:e(()=>[u("Received: "+a(n.quantity_received),1)]),_:2},1024)]}),_:2},1024))),128))]),_:1})]),_:1}),l(E,null,{default:e(()=>[l($,null,{default:e(()=>[l(m,{class:"sm:text-normal text-xs"},{default:e(()=>t[26]||(t[26]=[u("Delivery Receipts")])),_:1})]),_:1}),l(H,null,{default:e(()=>[l(O,null,{default:e(()=>[l(i,null,{default:e(()=>t[27]||(t[27]=[u("Id")])),_:1}),l(i,null,{default:e(()=>t[28]||(t[28]=[u("Number")])),_:1}),l(i,null,{default:e(()=>t[29]||(t[29]=[u("Remarks")])),_:1}),l(i,null,{default:e(()=>t[30]||(t[30]=[u("Created at")])),_:1})]),_:1}),l(R,null,{default:e(()=>[(f(!0),y(k,null,D(o.order.delivery_receipts,n=>(f(),y("tr",{key:n.id},[l(s,null,{default:e(()=>[u(a(n.id),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(n.delivery_receipt_number),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(n.remarks),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(n.created_at),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(U,null,{default:e(()=>[(f(!0),y(k,null,D(o.order.delivery_receipts,n=>(f(),b(q,{key:n.id},{default:e(()=>[l(A,{title:`${n.delivery_receipt_number}`},null,8,["title"]),l(r,null,{default:e(()=>[u("Remarks: "+a(n.remarks??"N/a"),1)]),_:2},1024),l(r,null,{default:e(()=>[u("Created at: "+a(n.created_at),1)]),_:2},1024)]),_:2},1024))),128)),o.order.delivery_receipts.length<1?(f(),b(m,{key:0},{default:e(()=>t[31]||(t[31]=[u("None")])),_:1})):N("",!0)]),_:1})]),_:1}),l(E,null,{default:e(()=>[l($,null,{default:e(()=>[l(m,{class:"sm:text-normal text-xs"},{default:e(()=>t[32]||(t[32]=[u("Remarks")])),_:1})]),_:1}),l(H,null,{default:e(()=>[l(O,null,{default:e(()=>[l(i,null,{default:e(()=>t[33]||(t[33]=[u("Id")])),_:1}),l(i,null,{default:e(()=>t[34]||(t[34]=[u("Remarks By")])),_:1}),l(i,null,{default:e(()=>t[35]||(t[35]=[u("Action")])),_:1}),l(i,null,{default:e(()=>t[36]||(t[36]=[u("Remarks")])),_:1}),l(i,null,{default:e(()=>t[37]||(t[37]=[u("Created At")])),_:1})]),_:1}),l(R,null,{default:e(()=>[(f(!0),y(k,null,D(o.order.store_order_remarks,n=>(f(),y("tr",{key:n.id},[l(s,null,{default:e(()=>[u(a(n.id),1)]),_:2},1024),l(s,null,{default:e(()=>{var d,p;return[u(a((d=n.user)==null?void 0:d.first_name)+" "+a((p=n.user)==null?void 0:p.last_name),1)]}),_:2},1024),l(s,null,{default:e(()=>{var d;return[u(a((d=n.action)==null?void 0:d.toUpperCase()),1)]}),_:2},1024),l(s,null,{default:e(()=>[u(a(n.remarks),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(S(F)(n.created_at).format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(U,null,{default:e(()=>[(f(!0),y(k,null,D(o.order.store_order_remarks,n=>(f(),b(q,{key:n.id},{default:e(()=>{var d;return[l(A,{title:`${(d=n.action)==null?void 0:d.toUpperCase()}`},null,8,["title"]),l(r,null,{default:e(()=>[u("Remarks: "+a(n.remarks),1)]),_:2},1024),l(r,null,{default:e(()=>[u("Created at: "+a(S(F)(n.created_at).format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]}),_:2},1024))),128)),o.order.store_order_remarks.length<1?(f(),b(m,{key:0},{default:e(()=>t[38]||(t[38]=[u("None")])),_:1})):N("",!0)]),_:1})]),_:1}),l(P,{class:"p-5"},{default:e(()=>[l(v,{class:"col-span-4"},{default:e(()=>[l(r,null,{default:e(()=>t[39]||(t[39]=[u("Image Attachments: ")])),_:1}),l(z,{class:"gap-4 overflow-auto overflow-x-auto scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-gray-300 hover:scrollbar-thumb-gray-400"},{default:e(()=>[(f(!0),y(k,null,D(o.images,n=>(f(),y("div",{key:n.id,class:"relative"},[J("img",{src:n.image_url,class:"size-24 min-w-24 cursor-pointer hover:opacity-80 transition-opacity",onClick:d=>h(n)},null,8,se)]))),128))]),_:1}),o.images.length<1?(f(),b(m,{key:0},{default:e(()=>t[40]||(t[40]=[u("None")])),_:1})):N("",!0)]),_:1})]),_:1}),l(E,null,{default:e(()=>[l(le,{class:"sm:text-normal text-xs"},{default:e(()=>t[41]||(t[41]=[u("Receive Dates History")])),_:1}),l(H,null,{default:e(()=>[l(O,null,{default:e(()=>[l(i,null,{default:e(()=>t[42]||(t[42]=[u(" Id ")])),_:1}),l(i,null,{default:e(()=>t[43]||(t[43]=[u(" Item ")])),_:1}),l(i,null,{default:e(()=>t[44]||(t[44]=[u(" Item Code ")])),_:1}),l(i,null,{default:e(()=>t[45]||(t[45]=[u(" Quantity Received")])),_:1}),l(i,null,{default:e(()=>t[46]||(t[46]=[u(" Received At")])),_:1}),l(i,null,{default:e(()=>t[47]||(t[47]=[u(" Status")])),_:1}),l(i,null,{default:e(()=>t[48]||(t[48]=[u("Actions")])),_:1})]),_:1}),l(R,null,{default:e(()=>[(f(!0),y(k,null,D(o.receiveDatesHistory,n=>(f(),y("tr",{key:n.id},[l(s,null,{default:e(()=>[u(a(n.id),1)]),_:2},1024),l(s,null,{default:e(()=>{var d,p;return[u(a(((p=(d=n.store_order_item)==null?void 0:d.supplier_item)==null?void 0:p.item_name)??"N/a"),1)]}),_:2},1024),l(s,null,{default:e(()=>{var d,p;return[u(a(((p=(d=n.store_order_item)==null?void 0:d.supplier_item)==null?void 0:p.ItemCode)??"N/a"),1)]}),_:2},1024),l(s,null,{default:e(()=>[u(a(n.quantity_received),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(S(F)(n.received_date).format("MMMM D, YYYY h:mm A")),1)]),_:2},1024),l(s,null,{default:e(()=>[u(a(n.status),1)]),_:2},1024),l(s,null,{default:e(()=>[l(z,{class:"gap-3"},{default:e(()=>[l(te,{onClick:d=>c(n.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(U,null,{default:e(()=>[(f(!0),y(k,null,D(o.receiveDatesHistory,n=>(f(),b(q,{key:n.id},{default:e(()=>{var d,p,x,w;return[l(A,{title:`${((p=(d=n.store_order_item)==null?void 0:d.supplier_item)==null?void 0:p.item_name)??"N/a"} (${((w=(x=n.store_order_item)==null?void 0:x.supplier_item)==null?void 0:w.ItemCode)??"N/a"})`},null,8,["title"]),l(r,null,{default:e(()=>{var T,G;return[u("UOM: "+a(((G=(T=n.store_order_item)==null?void 0:T.supplier_item)==null?void 0:G.uom)??"N/a"),1)]}),_:2},1024),l(r,null,{default:e(()=>[u("Received: "+a(n.quantity_received),1)]),_:2},1024),l(r,null,{default:e(()=>{var T;return[u("Status: "+a((T=n.status)==null?void 0:T.toUpperCase()),1)]}),_:2},1024),o.receiveDatesHistory.length<1?(f(),b(m,{key:0},{default:e(()=>t[49]||(t[49]=[u("None")])),_:1})):N("",!0)]}),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),l(ue,{variant:"outline",class:"text-lg px-7",onClick:S(K)},{default:e(()=>t[50]||(t[50]=[u(" Back ")])),_:1},8,["onClick"]),l(X,{open:Y.value,"onUpdate:open":t[0]||(t[0]=n=>Y.value=n)},{default:e(()=>[l(Q,{class:"sm:max-w-[600px]"},{default:e(()=>[l(ae,null,{default:e(()=>[l(ne,null,{default:e(()=>t[51]||(t[51]=[u("Received Item Details")])),_:1})]),_:1}),g.value?(f(),y("section",fe,[l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[52]||(t[52]=[u("Item Code")])),_:1}),l(m,null,{default:e(()=>{var n,d;return[u(a(((d=(n=g.value.store_order_item)==null?void 0:n.supplier_item)==null?void 0:d.ItemCode)??"N/a"),1)]}),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[53]||(t[53]=[u("Item Name")])),_:1}),l(m,null,{default:e(()=>{var n,d;return[u(a(((d=(n=g.value.store_order_item)==null?void 0:n.supplier_item)==null?void 0:d.item_name)??"N/a"),1)]}),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[54]||(t[54]=[u("UOM")])),_:1}),l(m,null,{default:e(()=>{var n,d;return[u(a(((d=(n=g.value.store_order_item)==null?void 0:n.supplier_item)==null?void 0:d.uom)??"N/a"),1)]}),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[55]||(t[55]=[u("Received By")])),_:1}),l(m,null,{default:e(()=>{var n,d;return[u(a((n=g.value.receiver)==null?void 0:n.first_name)+" "+a((d=g.value.receiver)==null?void 0:d.last_name),1)]}),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[56]||(t[56]=[u("Quantity Received")])),_:1}),l(m,null,{default:e(()=>[u(a(g.value.quantity_received),1)]),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[57]||(t[57]=[u("Received At")])),_:1}),l(m,null,{default:e(()=>[u(a(g.value.received_date),1)]),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[58]||(t[58]=[u("Expiry Date")])),_:1}),l(m,null,{default:e(()=>[u(a(g.value.expiry_date??"N/a"),1)]),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[59]||(t[59]=[u("Status")])),_:1}),l(m,null,{default:e(()=>[u(a(g.value.status??"N/a"),1)]),_:1})]),_:1}),l(v,null,{default:e(()=>[l(r,null,{default:e(()=>t[60]||(t[60]=[u("Remarks")])),_:1}),l(m,null,{default:e(()=>[u(a(g.value.remarks??"N/a"),1)]),_:1})]),_:1})])):N("",!0)]),_:1})]),_:1},8,["open"]),l(X,{open:B.value,"onUpdate:open":t[2]||(t[2]=n=>B.value=n)},{default:e(()=>[l(Q,{class:"sm:max-w-[90vw] h-[90vh] p-0 flex items-center justify-center"},{default:e(()=>[J("button",{onClick:t[1]||(t[1]=n=>B.value=!1),class:"absolute right-4 top-4 rounded-sm ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 bg-white/80 p-2"}),I.value?(f(),y("img",{key:0,src:I.value.image_url,class:"max-h-full max-w-full object-contain",alt:"Enlarged image"},null,8,me)):N("",!0)]),_:1})]),_:1},8,["open"])]),_:1},8,["handleClick"])}}};export{ye as default};
