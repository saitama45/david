import{f as W,x as E,Q as I,y as R,N as v,l as Y,r as o,o as f,c as w,w as e,a as t,n as _,b as r,t as s,u as y,i as Z,d as h,e as A,E as ee,h as F,F as H}from"./app-Bp7xdNcv.js";import{u as te}from"./useToast-BYf4YE8m.js";import{l as ne}from"./lodash-KmyjfxIh.js";import{u as ae}from"./useAuth-Bvg2Md3x.js";const ue={__name:"Index",props:{orders:{type:Object,required:!0},counts:{type:Object,required:!0}},setup(b){W(),te();const{hasAccess:C}=ae();let x=E(I().props.filters.currentFilter||"approved"),i=E(I().props.filters.search);R(x,function(a){v.get(route("store-commits.index"),{currentFilter:a,search:i.value},{preserveState:!0,replace:!0})}),R(i,ne.throttle(function(a){v.get(route("store-commits.index"),{search:a,currentFilter:x.value},{preserveState:!0,replace:!0})},500));const S=a=>{x.value=a},g=a=>x.value==a?"bg-primary text-white":"",L=a=>{switch(a==null?void 0:a.toUpperCase()){case"APPROVED":return"bg-blue-500 text-white";case"COMMITTED":return"bg-yellow-500 text-white";case"IN_TRANSIT":return"bg-purple-500 text-white";case"PENDING":return"bg-gray-500 text-white";case"DECLINED":return"bg-red-500 text-white";case"OPEN":return"bg-gray-500 text-white";case"IN_TRANSIT":return"bg-purple-500 text-white";case"RECEIVED":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},N=a=>{v.get(`/store-commits/show/${a}`)};Y(()=>route("store-commits.export",{search:i.value,filter:x.value}));const k=a=>a?new Date(a).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):"N/A",D=a=>{var n,u,d;return a.from_store_name||((n=a.sendingStore)==null?void 0:n.name)||((u=a.sendingStore)==null?void 0:u.branch_name)||((d=a.sendingStore)==null?void 0:d.brand_name)||"Unknown Sending Store"},B=a=>{var n,u;return a.to_store_name||((n=a.store_branch)==null?void 0:n.name)||((u=a.store_branch)==null?void 0:u.branch_name)||"Unknown Receiving Store"};return(a,n)=>{const u=o("Badge"),d=o("Button"),P=o("FilterTab"),V=o("Input"),M=o("SearchBar"),O=o("TableHeader"),c=o("TH"),U=o("TableHead"),m=o("TD"),$=o("TableBody"),j=o("Table"),q=o("ShowButton"),X=o("MobileTableHeading"),T=o("LabelXS"),z=o("MobileTableRow"),G=o("MobileTableContainer"),Q=o("Pagination"),J=o("TableContainer"),K=o("Layout");return f(),w(K,{heading:"Store Commits",hasExcelDownload:!0},{default:e(()=>[t(P,null,{default:e(()=>[t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",g("all")]),onClick:n[0]||(n[0]=l=>S("all"))},{default:e(()=>[n[4]||(n[4]=r("ALL ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",g("all")])},{default:e(()=>[r(s(b.counts.all),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",g("approved")]),onClick:n[1]||(n[1]=l=>S("approved"))},{default:e(()=>[n[5]||(n[5]=r("APPROVED ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",g("approved")])},{default:e(()=>[r(s(b.counts.approved),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",g("in_transit")]),onClick:n[2]||(n[2]=l=>S("in_transit"))},{default:e(()=>[n[6]||(n[6]=r("IN TRANSIT ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",g("in_transit")])},{default:e(()=>[r(s(b.counts.in_transit),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),t(J,null,{default:e(()=>[t(O,null,{default:e(()=>[t(M,null,{default:e(()=>[t(V,{class:"pl-10",modelValue:y(i),"onUpdate:modelValue":n[3]||(n[3]=l=>Z(i)?i.value=l:i=l),placeholder:"Search by Order Number, Batch Reference, Remarks, Store or Supplier"},null,8,["modelValue"])]),_:1})]),_:1}),t(j,null,{default:e(()=>[t(U,null,{default:e(()=>[t(c,null,{default:e(()=>n[7]||(n[7]=[r("Id")])),_:1}),t(c,null,{default:e(()=>n[8]||(n[8]=[r("Sending Store")])),_:1}),t(c,null,{default:e(()=>n[9]||(n[9]=[r("Receiving Store")])),_:1}),t(c,null,{default:e(()=>n[10]||(n[10]=[r("Interco #")])),_:1}),t(c,null,{default:e(()=>n[11]||(n[11]=[r("Transfer Date")])),_:1}),t(c,null,{default:e(()=>n[12]||(n[12]=[r("Status")])),_:1}),t(c,null,{default:e(()=>n[13]||(n[13]=[r("Actions")])),_:1})]),_:1}),t($,null,{default:e(()=>[(f(!0),h(H,null,A(b.orders.data,l=>(f(),h("tr",{key:l.id},[t(m,null,{default:e(()=>[r(s(l.id),1)]),_:2},1024),t(m,null,{default:e(()=>[r(s(D(l)),1)]),_:2},1024),t(m,null,{default:e(()=>[r(s(B(l)),1)]),_:2},1024),t(m,null,{default:e(()=>[r(s(l.interco_number),1)]),_:2},1024),t(m,null,{default:e(()=>[r(s(k(l.order_date)),1)]),_:2},1024),t(m,null,{default:e(()=>[t(u,{class:_([L(l.interco_status),"font-bold"])},{default:e(()=>{var p;return[r(s(((p=l.interco_status)==null?void 0:p.toUpperCase())??"N/A"),1)]}),_:2},1032,["class"])]),_:2},1024),t(m,{class:"flex"},{default:e(()=>[y(C)("view store commits")?(f(),w(d,{key:0,onClick:p=>N(l.id),variant:"link"},{default:e(()=>[t(y(ee))]),_:2},1032,["onClick"])):F("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(G,null,{default:e(()=>[(f(!0),h(H,null,A(b.orders.data,l=>(f(),w(z,{key:l.id},{default:e(()=>[t(X,{title:l.interco_number},{default:e(()=>[y(C)("view store commits")?(f(),w(q,{key:0,onClick:p=>N(l.id)},null,8,["onClick"])):F("",!0)]),_:2},1032,["title"]),t(T,null,{default:e(()=>[r("From: "+s(D(l)),1)]),_:2},1024),t(T,null,{default:e(()=>[r("To: "+s(B(l)),1)]),_:2},1024),t(T,null,{default:e(()=>{var p;return[r("Status: "+s((p=l.interco_status)==null?void 0:p.toUpperCase()),1)]}),_:2},1024),t(T,null,{default:e(()=>[r("Transfer Date: "+s(k(l.order_date)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Q,{data:b.orders},null,8,["data"])]),_:1})]),_:1})}}};export{ue as default};
