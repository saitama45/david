import{f as Q,x as S,Q as h,y as D,N as y,l as K,r as n,o as c,c as v,w as e,a as t,n as f,b as a,t as s,u as T,i as W,d as C,e as O,E as Y,h as F,F as N}from"./app-Bp7xdNcv.js";import{u as Z}from"./useToast-BYf4YE8m.js";import{l as ee}from"./lodash-KmyjfxIh.js";import{u as te}from"./useAuth-Bvg2Md3x.js";const oe={__name:"Index",props:{orders:{type:Object,required:!0},counts:{type:Object,required:!0}},setup(m){Q(),Z();let _=S(h().props.filters.currentFilter||"pending"),i=S(h().props.filters.search);D(_,function(o){y.get(route("orders-approval.index"),{currentFilter:o,search:i.value},{preserveState:!0,replace:!0})}),D(i,ee.throttle(function(o){y.get(route("orders-approval.index"),{search:o,currentFilter:_.value},{preserveState:!0,replace:!0})},500));const w=o=>{_.value=o},b=o=>_.value==o?"bg-primary text-white":"",A=o=>{switch(console.log(o.toUpperCase()),o.toUpperCase()){case"APPROVED":return"bg-green-500 text-white";case"REJECTED":return"bg-red-400 text-white";case"COMMITTED":return"bg-blue-400 text-white";default:return"bg-yellow-500 text-white"}},k=o=>{y.get(`/orders-approval/show/${o}`)},{hasAccess:B}=te(),R=K(()=>route("orders-approval.export",{search:i.value,filter:_.value}));return(o,l)=>{const x=n("Badge"),g=n("Button"),H=n("FilterTab"),L=n("Input"),M=n("SearchBar"),V=n("TableHeader"),u=n("TH"),j=n("TableHead"),d=n("TD"),I=n("TableBody"),P=n("Table"),$=n("ShowButton"),U=n("MobileTableHeading"),E=n("LabelXS"),q=n("MobileTableRow"),J=n("MobileTableContainer"),X=n("Pagination"),z=n("TableContainer"),G=n("Layout");return c(),v(G,{heading:"Orders For Approval List",hasExcelDownload:!0,exportRoute:R.value},{default:e(()=>[t(H,null,{default:e(()=>[t(g,{class:f(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",b("all")]),onClick:l[0]||(l[0]=r=>w("all"))},{default:e(()=>[l[4]||(l[4]=a("ALL ")),t(x,{class:f(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",b("all")])},{default:e(()=>[a(s(m.counts.approved),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(g,{class:f(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",b("pending")]),onClick:l[1]||(l[1]=r=>w("pending"))},{default:e(()=>[l[5]||(l[5]=a("PENDING ")),t(x,{class:f(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",b("pending")])},{default:e(()=>[a(s(m.counts.pending),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(g,{class:f(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",b("rejected")]),onClick:l[2]||(l[2]=r=>w("rejected"))},{default:e(()=>[l[6]||(l[6]=a("REJECTED ")),t(x,{class:f(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",b("rejected")])},{default:e(()=>[a(s(m.counts.rejected),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),t(z,null,{default:e(()=>[t(V,null,{default:e(()=>[t(M,null,{default:e(()=>[t(L,{class:"pl-10",modelValue:T(i),"onUpdate:modelValue":l[3]||(l[3]=r=>W(i)?i.value=r:i=r),placeholder:"Order Number Search"},null,8,["modelValue"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(j,null,{default:e(()=>[t(u,null,{default:e(()=>l[7]||(l[7]=[a("Id")])),_:1}),t(u,null,{default:e(()=>l[8]||(l[8]=[a("Supplier")])),_:1}),t(u,null,{default:e(()=>l[9]||(l[9]=[a("Store")])),_:1}),t(u,null,{default:e(()=>l[10]||(l[10]=[a("Order #")])),_:1}),t(u,null,{default:e(()=>l[11]||(l[11]=[a("Order Date")])),_:1}),t(u,null,{default:e(()=>l[12]||(l[12]=[a("Order Placed Date")])),_:1}),t(u,null,{default:e(()=>l[13]||(l[13]=[a("Order Status")])),_:1}),t(u,null,{default:e(()=>l[14]||(l[14]=[a("Actions")])),_:1})]),_:1}),t(I,null,{default:e(()=>[(c(!0),C(N,null,O(m.orders.data,r=>(c(),C("tr",{key:r.id},[t(d,null,{default:e(()=>[a(s(r.id),1)]),_:2},1024),t(d,null,{default:e(()=>{var p;return[a(s(((p=r.supplier)==null?void 0:p.name)??"N/A"),1)]}),_:2},1024),t(d,null,{default:e(()=>{var p;return[a(s(((p=r.store_branch)==null?void 0:p.name)??"N/A"),1)]}),_:2},1024),t(d,null,{default:e(()=>[a(s(r.order_number),1)]),_:2},1024),t(d,null,{default:e(()=>[a(s(r.order_date),1)]),_:2},1024),t(d,null,{default:e(()=>[a(s(r.created_at),1)]),_:2},1024),t(d,null,{default:e(()=>[t(x,{class:f([A(r.order_status),"font-bold"])},{default:e(()=>[a(s(r.order_status.toUpperCase()),1)]),_:2},1032,["class"])]),_:2},1024),t(d,{class:"flex"},{default:e(()=>[T(B)("view order for approval")?(c(),v(g,{key:0,onClick:p=>k(r.order_number),variant:"link"},{default:e(()=>[t(T(Y))]),_:2},1032,["onClick"])):F("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(J,null,{default:e(()=>[(c(!0),C(N,null,O(m.orders.data,r=>(c(),v(q,{key:r.id},{default:e(()=>[t(U,{title:r.order_number},{default:e(()=>[T(B)("view order for approval")?(c(),v($,{key:0,onClick:p=>k(r.order_number)},null,8,["onClick"])):F("",!0)]),_:2},1032,["title"]),t(E,null,{default:e(()=>[a("Order Status: "+s(r.order_request_status),1)]),_:2},1024),t(E,null,{default:e(()=>[a("Order Date: "+s(r.order_date),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(X,{data:m.orders},null,8,["data"])]),_:1})]),_:1},8,["exportRoute"])}}};export{oe as default};
