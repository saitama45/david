import{x as U,T as b,G as z,f as J,y as K,r,o as P,c as D,w as t,a as l,b as s,u as o,t as m,g as y,h as W}from"./app-p8ycGfai.js";import{u as X}from"./useBackButton-DYna6UI2.js";const Y={class:"space-y-5"},Z={class:"flex flex-col space-y-1"},$={class:"flex flex-col space-y-1"},h={class:"text-xs"},ee=["href"],oe={__name:"Edit",props:{bom:{type:Object,required:!0}},setup(B){const{backButton:S}=X(route("pos-bom.index")),V=U(!1),_=b({pos_bom_file:null}),g=()=>{C.value=!0,_.post(route("pos-bom.import"),{onSuccess:()=>{c.add({severity:"success",summary:"Success",detail:"POS BOMs Updated Successfully.",life:3e3}),C.value=!1,V.value=!1},onError:O=>{C.value=!1,console.error("Import Error:",O),c.add({severity:"error",summary:"Error",detail:O.pos_bom_file||"An error occurred while trying to import. Please check file format and logs.",life:3e3})},onFinish:()=>{C.value=!1}})},c=z(),I=J(),v=B,C=U(!1);K(V,O=>{O||(_.reset(),_.clearErrors(),C.value=!1)});const a=v.bom,n=b({POSCode:a.POSCode??null,POSDescription:a.POSDescription??"",Assembly:a.Assembly??"",ItemCode:a.ItemCode??null,ItemDescription:a.ItemDescription??"",RecPercent:a.RecPercent??0,RecipeQty:a.RecipeQty??0,RecipeUOM:a.RecipeUOM??"",BOMQty:a.BOMQty??0,BOMUOM:a.BOMUOM??"",UnitCost:a.UnitCost??0,TotalCost:a.TotalCost??0}),x=()=>{I.require({message:"Are you sure you want to update this POS BOM?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{n.put(route("pos-bom.update",a.id),{preserveScroll:!0,onSuccess:()=>{c.add({severity:"success",summary:"Success",detail:"POS BOM Successfully Updated",life:3e3})},onError:O=>{console.error("Update Error:",O),c.add({severity:"error",summary:"Error",detail:"Failed to update POS BOM. Please check the form data.",life:3e3})}})}})};return(O,e)=>{const R=r("CardTitle"),k=r("CardDescription"),T=r("CardHeader"),d=r("Label"),i=r("Input"),p=r("FormError"),f=r("InputContainer"),F=r("CardContent"),M=r("Button"),Q=r("CardFooter"),E=r("Card"),A=r("DialogTitle"),w=r("DialogDescription"),L=r("DialogHeader"),H=r("Loading"),N=r("DialogFooter"),j=r("DialogContent"),q=r("Dialog"),G=r("Layout");return P(),D(G,{heading:"Edit POSMasterfile BOM Details"},{default:t(()=>[l(E,null,{default:t(()=>[l(T,null,{default:t(()=>[l(R,null,{default:t(()=>e[14]||(e[14]=[s("POSMasterfile BOM Details")])),_:1}),l(k,null,{default:t(()=>e[15]||(e[15]=[s("Input all the important fields")])),_:1})]),_:1}),l(F,{class:"grid sm:grid-cols-2 gap-5"},{default:t(()=>[l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[16]||(e[16]=[s("POS Code")])),_:1}),l(i,{modelValue:o(n).POSCode,"onUpdate:modelValue":e[0]||(e[0]=u=>o(n).POSCode=u)},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.POSCode),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[17]||(e[17]=[s("POS Description")])),_:1}),l(i,{modelValue:o(n).POSDescription,"onUpdate:modelValue":e[1]||(e[1]=u=>o(n).POSDescription=u)},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.POSDescription),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[18]||(e[18]=[s("Assembly")])),_:1}),l(i,{modelValue:o(n).Assembly,"onUpdate:modelValue":e[2]||(e[2]=u=>o(n).Assembly=u)},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.Assembly),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[19]||(e[19]=[s("Item Code")])),_:1}),l(i,{modelValue:o(n).ItemCode,"onUpdate:modelValue":e[3]||(e[3]=u=>o(n).ItemCode=u)},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.ItemCode),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[20]||(e[20]=[s("Item Description")])),_:1}),l(i,{modelValue:o(n).ItemDescription,"onUpdate:modelValue":e[4]||(e[4]=u=>o(n).ItemDescription=u)},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.ItemDescription),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[21]||(e[21]=[s("Rec Percent")])),_:1}),l(i,{type:"number",modelValue:o(n).RecPercent,"onUpdate:modelValue":e[5]||(e[5]=u=>o(n).RecPercent=u),step:"0.0001"},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.RecPercent),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[22]||(e[22]=[s("Recipe Quantity")])),_:1}),l(i,{type:"number",modelValue:o(n).RecipeQty,"onUpdate:modelValue":e[6]||(e[6]=u=>o(n).RecipeQty=u),step:"0.0001"},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.RecipeQty),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[23]||(e[23]=[s("Recipe UOM")])),_:1}),l(i,{modelValue:o(n).RecipeUOM,"onUpdate:modelValue":e[7]||(e[7]=u=>o(n).RecipeUOM=u)},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.RecipeUOM),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[24]||(e[24]=[s("BOM Quantity")])),_:1}),l(i,{type:"number",modelValue:o(n).BOMQty,"onUpdate:modelValue":e[8]||(e[8]=u=>o(n).BOMQty=u),step:"0.0001"},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.BOMQty),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[25]||(e[25]=[s("BOM UOM")])),_:1}),l(i,{modelValue:o(n).BOMUOM,"onUpdate:modelValue":e[9]||(e[9]=u=>o(n).BOMUOM=u)},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.BOMUOM),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[26]||(e[26]=[s("Unit Cost")])),_:1}),l(i,{type:"number",modelValue:o(n).UnitCost,"onUpdate:modelValue":e[10]||(e[10]=u=>o(n).UnitCost=u),step:"0.0001"},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.UnitCost),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(d,null,{default:t(()=>e[27]||(e[27]=[s("Total Cost")])),_:1}),l(i,{type:"number",modelValue:o(n).TotalCost,"onUpdate:modelValue":e[11]||(e[11]=u=>o(n).TotalCost=u),step:"0.0001"},null,8,["modelValue"]),l(p,null,{default:t(()=>[s(m(o(n).errors.TotalCost),1)]),_:1})]),_:1})]),_:1}),l(Q,{class:"justify-end gap-3"},{default:t(()=>[l(M,{onClick:o(S)},{default:t(()=>e[28]||(e[28]=[s("Back")])),_:1},8,["onClick"]),l(M,{onClick:x},{default:t(()=>e[29]||(e[29]=[s("Update")])),_:1})]),_:1})]),_:1}),l(q,{open:V.value,"onUpdate:open":e[13]||(e[13]=u=>V.value=u)},{default:t(()=>[l(j,{class:"sm:max-w-[600px]"},{default:t(()=>[l(L,null,{default:t(()=>[l(A,null,{default:t(()=>e[30]||(e[30]=[s("Import POS BOMs")])),_:1}),l(w,null,{default:t(()=>e[31]||(e[31]=[s(" Import the excel file of the POS BOMs. ")])),_:1})]),_:1}),y("div",Y,[y("div",Z,[l(i,{type:"file",onInput:e[12]||(e[12]=u=>o(_).pos_bom_file=u.target.files[0])}),l(p,null,{default:t(()=>[s(m(o(_).errors.pos_bom_file),1)]),_:1})]),y("div",$,[l(d,{class:"text-xs"},{default:t(()=>e[32]||(e[32]=[s("Accepted POS BOMs File Format")])),_:1}),y("ul",null,[y("li",h,[y("a",{class:"text-blue-500 underline",href:O.route("excel.pos-bom-template")},"Click to download template",8,ee)])])])]),l(N,null,{default:t(()=>[l(M,{disabled:C.value,onClick:g,type:"submit",class:"gap-2"},{default:t(()=>[e[33]||(e[33]=s(" Proceed ")),y("span",null,[C.value?(P(),D(H,{key:0})):W("",!0)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}};export{oe as default};
