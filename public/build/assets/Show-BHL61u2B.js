import{a1 as X,l as c,o as l,c as x,w as n,q as ee,a5 as te,u as s,a6 as de,ak as ue,al as ce,d as _,n as me,as as H,t as u,h as p,Y as fe,r as _e,a as o,b as f,N as C,aA as T,g as t,aL as A,aM as $,au as Q,aN as P,aQ as I,e as G,F as J,bo as Y,S as pe,aZ as ve}from"./app-DPA7xop8.js";import{_ as xe,a as ge,b as Z,c as w,d as ye,e as S}from"./TableHeader-ara02bzA.js";import be from"./TransferStatusBadge-C--JNcnl.js";import he from"./TransferSummary-BP_O23-i.js";import{U as K,T as ke}from"./TransferTimeline-w1NGxQbO.js";import{A as we}from"./arrow-left-BKgB39Yb.js";import{S as Se}from"./square-pen-BBOZKqAa.js";import{P as N}from"./package-Buz1PgiL.js";import{C as Ne}from"./calendar-CbGbSceW.js";import{C as B}from"./circle-x-DaAv8wgv.js";import{C as W}from"./clock-gdvRRjYx.js";import{C as qe}from"./circle-alert-CNaSQfq8.js";import"./VisuallyHidden-BIQTTYep.js";import"./check-50I8KCSE.js";var Ce=X({__name:"BaseSeparator",props:{orientation:{type:String,required:!1,default:"horizontal"},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(d){const a=d,g=["horizontal","vertical"];function v(b){return g.includes(b)}const y=c(()=>v(a.orientation)?a.orientation:"horizontal"),D=c(()=>y.value==="vertical"?a.orientation:void 0),U=c(()=>a.decorative?{role:"none"}:{"aria-orientation":D.value,role:"separator"});return(b,q)=>(l(),x(s(de),te({as:b.as,"as-child":b.asChild,"data-orientation":y.value},U.value),{default:n(()=>[ee(b.$slots,"default")]),_:3},16,["as","as-child","data-orientation"]))}}),Te=Ce,Ae=X({__name:"Separator",props:{orientation:{type:String,required:!1,default:"horizontal"},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(d){const a=d;return(g,v)=>(l(),x(Te,ue(ce(a)),{default:n(()=>[ee(g.$slots,"default")]),_:3},16))}}),$e=Ae;const j={__name:"Separator",props:{orientation:{type:String,required:!1},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},label:{type:String,required:!1}},setup(d){const a=d,g=c(()=>{const{class:v,...y}=a;return y});return(v,y)=>(l(),x(s($e),te(g.value,{class:s(H)("shrink-0 bg-border relative",a.orientation==="vertical"?"w-px h-full":"h-px w-full",a.class)}),{default:n(()=>[a.label?(l(),_("span",{key:0,class:me(s(H)("text-xs text-muted-foreground bg-background absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex justify-center items-center",a.orientation==="vertical"?"w-[1px] px-1 py-2":"h-[1px] py-1 px-2"))},u(a.label),3)):p("",!0)]),_:1},16,["class"]))}},Pe={class:"grid gap-6"},Ie={class:"grid lg:grid-cols-3 gap-6"},Be={class:"space-y-6"},De={class:"space-y-3"},Ue={class:"font-mono text-lg"},Me={class:"space-y-2"},Oe={class:"flex items-start gap-3"},ze={class:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0 mt-0.5"},Re={class:"font-medium"},je={class:"text-xs text-muted-foreground"},Ee={class:"flex items-start gap-3"},Le={class:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 mt-0.5"},Fe={class:"font-medium"},Ve={class:"text-xs text-muted-foreground"},He={class:"space-y-2"},Qe={class:"flex items-center gap-2"},Ge={class:"text-sm"},Je={key:0,class:"flex items-center gap-2"},Ye={class:"text-sm"},Ze={key:1,class:"flex items-center gap-2"},Ke={class:"text-sm"},We={class:"space-y-2"},Xe={key:0,class:"flex items-center gap-2"},et={class:"text-sm"},tt={key:1,class:"flex items-center gap-2"},st={key:2,class:"flex items-center gap-2"},rt={class:"text-sm"},ot={key:3,class:"flex items-center gap-2"},at={class:"text-sm"},nt={class:"lg:col-span-2 space-y-6"},it={class:"flex flex-wrap gap-3"},lt={key:0,class:"mb-6"},dt={class:"flex items-center justify-between mb-2"},ut={class:"text-sm text-muted-foreground"},ct={class:"w-full bg-secondary rounded-full h-2"};const mt={class:"font-medium"},ft={class:"font-medium"},_t={class:"flex items-center gap-2"},pt={class:"font-medium"},vt={key:0,class:"text-xs text-orange-600"},xt={class:"flex items-center gap-2"},gt={key:0,class:"w-2 h-2 rounded-full bg-green-500"},yt={key:1,class:"w-2 h-2 rounded-full bg-yellow-500"},bt={key:2,class:"w-2 h-2 rounded-full bg-gray-300"},ht={class:"text-sm"},kt={class:"mt-4 pt-4 border-t"},wt={class:"flex justify-between items-center"},St={class:"text-sm font-medium"},Nt={class:"text-sm"},qt={key:0},Ct={class:"text-sm"},Tt={__name:"Show",props:{order:Object,permissions:Object,statusTransitions:Array},setup(d){const a=d,g=c(()=>a.order.interco_number||"N/A"),v=c(()=>a.order.interco_status||"open"),y=c(()=>{var r,e,m;return console.log("Show.vue order data:",{from_store_name:a.order.from_store_name,sendingStore:a.order.sendingStore,has_serialized_name:!!a.order.from_store_name}),a.order.from_store_name||((r=a.order.sendingStore)==null?void 0:r.name)||((e=a.order.sendingStore)==null?void 0:e.branch_name)||((m=a.order.sendingStore)==null?void 0:m.brand_name)||"Unknown Sending Store"}),D=c(()=>{var r,e;return a.order.to_store_name||((r=a.order.store_branch)==null?void 0:r.name)||((e=a.order.store_branch)==null?void 0:e.branch_name)||"Unknown Receiving Store"}),U=c(()=>a.order.created_at),b=c(()=>a.order.interco_reason||"No reason provided"),q=c(()=>a.order.remarks||"No remarks"),M=r=>r?r.name&&r.name!==r.email?r.name:r.first_name||r.last_name?`${r.first_name||""} ${r.last_name||""}`.trim():r.email?r.email.split("@")[0].replace(/[._]/g," ").replace(/\b\w/g,m=>m.toUpperCase()):"Unknown User":"Unknown User",O=c(()=>{var e;if(!((e=a.order)!=null&&e.store_order_items)||!Array.isArray(a.order.store_order_items))return 0;const r=a.order.store_order_items.reduce((m,i)=>m+(Number(i.quantity_ordered)||0),0);return Number(r)||0});c(()=>{var e;if(!((e=a.order)!=null&&e.store_order_items)||!Array.isArray(a.order.store_order_items))return 0;const r=a.order.store_order_items.reduce((m,i)=>m+(Number(i.quantity_ordered)||0)*(Number(i.cost_per_quantity)||0),0);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(r)});const E=c(()=>{var e;if(!((e=a.order)!=null&&e.store_order_items)||!Array.isArray(a.order.store_order_items))return 0;const r=a.order.store_order_items.reduce((m,i)=>m+(Number(i.quantity_received)||0),0);return Number(r)||0});c(()=>{const r=O.value||0,e=E.value||0;return Math.max(0,r-e)});const L=c(()=>{const r=O.value||0,e=E.value||0;return r===0?0:e/r*100}),se=c(()=>a.permissions.can_edit&&v.value==="open");c(()=>a.permissions.can_approve&&v.value==="open"),c(()=>a.permissions.can_commit&&v.value==="approved");const re=c(()=>a.permissions.can_receive),z=r=>r?new Date(r).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",R=(r,e=2)=>r==null||isNaN(r)?"0.00":Number(r).toFixed(e),oe=r=>{var e,m;return console.log("Getting description for item:",r.item_code,"UOM:",r.uom),console.log("Available description data:",{item_description:r.item_description,sapMasterfile:r.sapMasterfile}),r.item_description||((e=r.sapMasterfile)==null?void 0:e.ItemDescription)||((m=r.sapMasterfile)==null?void 0:m.ItemName)||"Description not available"},F=r=>r.item_uom||r.uom||"",ae=r=>({open:W,approved:B,committed:N,in_transit:Y,received:B,disapproved:qe})[r]||W,ne=r=>{const e=a.statusTransitions.find(m=>m.action===r);e&&C.post(route(`interco.${r}`,a.order.id),{_method:"PATCH",next_status:e.nextStatus})},ie=()=>{C.get(route("orders-receiving.show",a.order.id))},le=()=>{C.get(route("interco.edit",a.order.id))};return(r,e)=>{const m=_e("Layout");return l(),x(m,{heading:"Transfer Details"},{actions:n(()=>[o(s(T),{variant:"outline",onClick:e[0]||(e[0]=i=>s(C).get(r.route("interco.index")))},{default:n(()=>[o(s(we),{class:"w-4 h-4 mr-2"}),e[1]||(e[1]=f(" Back to Transfers "))]),_:1}),se.value?(l(),x(s(T),{key:0,onClick:le},{default:n(()=>[o(s(Se),{class:"w-4 h-4 mr-2"}),e[2]||(e[2]=f(" Edit Transfer "))]),_:1})):p("",!0)]),default:n(()=>[t("div",Pe,[o(he,{transfer:d.order},null,8,["transfer"]),t("div",Ie,[t("div",Be,[o(s(I),null,{default:n(()=>[o(s(A),null,{default:n(()=>[o(s($),{class:"flex items-center gap-2"},{default:n(()=>[(l(),x(Q(ae(v.value)),{class:"w-5 h-5"})),e[3]||(e[3]=f(" Transfer Information "))]),_:1})]),_:1}),o(s(P),{class:"space-y-4"},{default:n(()=>{var i,h,k,V;return[t("div",De,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Transfer Number",-1)),t("p",Ue,u(g.value),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Status",-1)),o(be,{status:v.value},null,8,["status"])]),o(s(j)),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Stores",-1)),t("div",Me,[t("div",Oe,[t("div",ze,[o(s(N),{class:"w-4 h-4 text-red-600"})]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-xs text-muted-foreground"},"From",-1)),t("p",Re,u(y.value),1),t("p",je,u(((i=d.order.sendingStore)==null?void 0:i.branch_code)||((h=d.order.sendingStore)==null?void 0:h.code)||""),1)])]),t("div",Ee,[t("div",Le,[o(s(N),{class:"w-4 h-4 text-green-600"})]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-muted-foreground"},"To",-1)),t("p",Fe,u(D.value),1),t("p",Ve,u(((k=d.order.store_branch)==null?void 0:k.branch_code)||((V=d.order.store_branch)==null?void 0:V.code)||""),1)])])])]),o(s(j)),t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Timeline",-1)),t("div",He,[t("div",Qe,[o(s(Ne),{class:"w-4 h-4 text-muted-foreground"}),t("div",null,[e[9]||(e[9]=t("p",{class:"text-xs text-muted-foreground"},"Created",-1)),t("p",Ge,u(z(U.value)),1)])]),d.order.approval_action_date?(l(),_("div",Je,[o(s(B),{class:"w-4 h-4 text-blue-600"}),t("div",null,[e[10]||(e[10]=t("p",{class:"text-xs text-muted-foreground"},"Approved",-1)),t("p",Ye,u(z(d.order.approval_action_date)),1)])])):p("",!0),d.order.commited_action_date?(l(),_("div",Ze,[o(s(N),{class:"w-4 h-4 text-yellow-600"}),t("div",null,[e[11]||(e[11]=t("p",{class:"text-xs text-muted-foreground"},"Committed",-1)),t("p",Ke,u(z(d.order.commited_action_date)),1)])])):p("",!0)])]),o(s(j)),t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"People",-1)),t("div",We,[d.order.encoder?(l(),_("div",Xe,[o(s(K),{class:"w-4 h-4 text-muted-foreground"}),t("div",null,[e[13]||(e[13]=t("p",{class:"text-xs text-muted-foreground"},"Created by",-1)),t("p",et,u(M(d.order.encoder)),1)])])):(l(),_("div",tt,[o(s(K),{class:"w-4 h-4 text-muted-foreground"}),e[14]||(e[14]=t("div",null,[t("p",{class:"text-xs text-muted-foreground"},"Created by"),t("p",{class:"text-sm text-muted-foreground"},"Not specified")],-1))])),d.order.approver?(l(),_("div",st,[o(s(B),{class:"w-4 h-4 text-blue-600"}),t("div",null,[e[15]||(e[15]=t("p",{class:"text-xs text-muted-foreground"},"Approved by",-1)),t("p",rt,u(M(d.order.approver)),1)])])):p("",!0),d.order.commiter?(l(),_("div",ot,[o(s(N),{class:"w-4 h-4 text-yellow-600"}),t("div",null,[e[16]||(e[16]=t("p",{class:"text-xs text-muted-foreground"},"Committed by",-1)),t("p",at,u(M(d.order.commiter)),1)])])):p("",!0)])])])]}),_:1})]),_:1}),o(ke,{transfer:d.order},null,8,["transfer"])]),t("div",nt,[d.statusTransitions.length>0?(l(),x(s(I),{key:0},{default:n(()=>[o(s(A),null,{default:n(()=>[o(s($),null,{default:n(()=>e[18]||(e[18]=[f("Available Actions")])),_:1})]),_:1}),o(s(P),null,{default:n(()=>[t("div",it,[(l(!0),_(J,null,G(d.statusTransitions,i=>(l(),x(s(T),{key:i.action,variant:i.color==="red"?"destructive":"default",onClick:h=>ne(i.action)},{default:n(()=>[(l(),x(Q(i.icon),{class:"w-4 h-4 mr-2"})),f(" "+u(i.label),1)]),_:2},1032,["variant","onClick"]))),128)),re.value&&["committed","in_transit"].includes(v.value)?(l(),x(s(T),{key:0,onClick:ie},{default:n(()=>[o(s(Y),{class:"w-4 h-4 mr-2"}),e[19]||(e[19]=f(" Receive Items "))]),_:1})):p("",!0)])]),_:1})]),_:1})):p("",!0),o(s(I),null,{default:n(()=>[o(s(A),null,{default:n(()=>[o(s($),null,{default:n(()=>e[20]||(e[20]=[f("Transfer Items")])),_:1})]),_:1}),o(s(P),null,{default:n(()=>[v.value!=="open"?(l(),_("div",lt,[t("div",dt,[e[21]||(e[21]=t("span",{class:"text-sm font-medium"},"Transfer Progress",-1)),t("span",ut,u(R(L.value))+"%",1)]),t("div",ct,[t("div",{class:"bg-primary h-2 rounded-full transition-all duration-500",style:pe({width:`${R(L.value)}%`})},null,4)])])):p("",!0),o(s(xe),null,{default:n(()=>[o(s(ge),null,{default:n(()=>[o(s(Z),null,{default:n(()=>[o(s(w),null,{default:n(()=>e[22]||(e[22]=[f("Item Code")])),_:1}),o(s(w),null,{default:n(()=>e[23]||(e[23]=[f("Description")])),_:1}),o(s(w),null,{default:n(()=>e[24]||(e[24]=[f("Quantity")])),_:1}),o(s(w),null,{default:n(()=>e[25]||(e[25]=[f("Received")])),_:1}),o(s(w),null,{default:n(()=>e[26]||(e[26]=[f("Status")])),_:1})]),_:1})]),_:1}),o(s(ye),null,{default:n(()=>[(l(!0),_(J,null,G(d.order.store_order_items,i=>(l(),x(s(Z),{key:i.id},{default:n(()=>[o(s(S),{class:"font-medium"},{default:n(()=>{var h,k;return[f(u(((h=i.sapMasterfile)==null?void 0:h.ItemCode)||((k=i.sapMasterfile)==null?void 0:k.item_code)||i.item_code||"N/A"),1)]}),_:2},1024),o(s(S),null,{default:n(()=>[t("div",null,[p("",!0),t("p",mt,u(oe(i)),1),F(i)?(l(),x(s(ve),{key:1,variant:"outline",class:"text-xs mt-1"},{default:n(()=>[f(u(F(i)),1)]),_:2},1024)):p("",!0)])]),_:2},1024),o(s(S),null,{default:n(()=>[t("span",ft,u(i.quantity_ordered||0),1)]),_:2},1024),o(s(S),null,{default:n(()=>[t("div",_t,[t("span",pt,u(i.quantity_received||0),1),i.quantity_received>0&&i.quantity_received<i.quantity_ordered?(l(),_("span",vt," ("+u(i.quantity_ordered-i.quantity_received)+" pending) ",1)):p("",!0)])]),_:2},1024),o(s(S),null,{default:n(()=>[t("div",xt,[i.quantity_received===i.quantity_ordered&&i.quantity_received>0?(l(),_("div",gt)):i.quantity_received>0?(l(),_("div",yt)):(l(),_("div",bt)),t("span",ht,u(i.quantity_received===i.quantity_ordered&&i.quantity_received>0?"Complete":i.quantity_received>0?"Partial":"Pending"),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t("div",kt,[t("div",wt,[t("span",St,"Total Items: "+u(R(O.value)),1)])])]),_:1})]),_:1}),o(s(I),null,{default:n(()=>[o(s(A),null,{default:n(()=>[o(s($),null,{default:n(()=>e[27]||(e[27]=[f("Additional Information")])),_:1})]),_:1}),o(s(P),{class:"space-y-4"},{default:n(()=>[t("div",null,[e[28]||(e[28]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Reason for Transfer",-1)),t("p",Nt,u(b.value),1)]),q.value&&q.value!=="No remarks"?(l(),_("div",qt,[e[29]||(e[29]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Remarks",-1)),t("p",Ct,u(q.value),1)])):p("",!0)]),_:1})]),_:1})])])])]),_:1})}}},Ft=fe(Tt,[["__scopeId","data-v-4cb3875c"]]);export{Ft as default};
