import{l as S,r as a,o as _,c as w,w as n,a as t,b as r,d as p,e as C,t as s,n as T,F as B,g as A}from"./app-Bw_fMWAP.js";const I=["href"],q={key:1},F=["href"],E={key:1},$={__name:"Show",props:{branches:{type:Object,required:!0},history:{type:Object,required:!0}},setup(y){console.log("StockManagement Show Vue - History Data:",y.history);const f=o=>o==="add"||o==="add_quantity"?"IN":o==="out"||o==="deduct"||o==="log_usage"?"OUT":o==="initial_balance"||o==="BEG BAL"?"BEG BAL":o.replace(/_/g," ").toUpperCase(),d=(o,l=2,i=10)=>{if(o==null||isNaN(o))return"N/a";const c=parseFloat(o);if(isNaN(c))return"N/a";let u=c.toFixed(i);u=u.replace(/\.?0+$/,"");const b=u.split(".");return!b[1]||b[1].length<l?c.toFixed(l):u},N=o=>{if(!o)return"N/a";try{return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(l){return console.error("Error formatting date:",o,l),o}},h=S(()=>{var l,i;const o=(i=(l=y.history)==null?void 0:l.data)==null?void 0:i[0];if(o&&o.sap_masterfile){const c=o.sap_masterfile.ItemDescription,u=o.sap_masterfile.AltUOM;return`${c} with AltUOM: ${u}`}return"Stock Details"});return(o,l)=>{const i=a("TH"),c=a("TableHead"),u=a("TD"),b=a("TableBody"),D=a("Table"),O=a("MobileTableHeading"),m=a("LabelXS"),U=a("MobileTableRow"),H=a("MobileTableContainer"),M=a("Pagination"),x=a("TableContainer"),L=a("BackButton"),R=a("Layout");return _(),w(R,{heading:h.value},{default:n(()=>[t(x,null,{default:n(()=>[t(D,null,{default:n(()=>[t(c,null,{default:n(()=>[t(i,null,{default:n(()=>l[0]||(l[0]=[r("Id")])),_:1}),t(i,null,{default:n(()=>l[1]||(l[1]=[r("Ref No.")])),_:1}),t(i,null,{default:n(()=>l[2]||(l[2]=[r("Quantity Change")])),_:1}),t(i,null,{default:n(()=>l[3]||(l[3]=[r("Action")])),_:1}),t(i,null,{default:n(()=>l[4]||(l[4]=[r("Cost Center")])),_:1}),t(i,null,{default:n(()=>l[5]||(l[5]=[r("Unit Cost")])),_:1}),t(i,null,{default:n(()=>l[6]||(l[6]=[r("Total Cost")])),_:1}),t(i,null,{default:n(()=>l[7]||(l[7]=[r("Transaction Date")])),_:1}),t(i,null,{default:n(()=>l[8]||(l[8]=[r("Running SOH")])),_:1}),t(i,null,{default:n(()=>l[9]||(l[9]=[r("Remarks")])),_:1})]),_:1}),t(b,null,{default:n(()=>[(_(!0),p(B,null,C(y.history.data,(e,k)=>(_(),p("tr",{key:e.id},[t(u,null,{default:n(()=>[r(s(e.id),1)]),_:2},1024),t(u,null,{default:n(()=>[e.is_link_ref&&e.display_ref_no!=="N/a"?(_(),p("a",{key:0,href:e.ref_type==="interco"?o.route("interco.show",e.display_ref_no):e.ref_type==="wastage"?o.route("wastage.show.by-number",e.display_ref_no):o.route("store-orders.show",e.display_ref_no),target:"_blank",class:"text-blue-600 hover:underline"},s(e.display_ref_no),9,I)):(_(),p("span",q,s(e.display_ref_no??"N/a"),1))]),_:2},1024),t(u,{class:T({"text-red-500":f(e.action)==="OUT","text-green-500":f(e.action)==="IN"})},{default:n(()=>[r(s(f(e.action)==="OUT"?"-":"+")+s(d(e.quantity,2,10)),1)]),_:2},1032,["class"]),t(u,null,{default:n(()=>[r(s(f(e.action)),1)]),_:2},1024),t(u,null,{default:n(()=>{var g;return[r(s(((g=e.cost_center)==null?void 0:g.name)??"N/a"),1)]}),_:2},1024),t(u,null,{default:n(()=>[r(s(d(e.unit_cost,2,4)),1)]),_:2},1024),t(u,null,{default:n(()=>[r(s(d(e.total_cost,2,4)),1)]),_:2},1024),t(u,null,{default:n(()=>[r(s(N(e.transaction_date)),1)]),_:2},1024),t(u,{class:T({"font-bold text-green-600":k===0})},{default:n(()=>[r(s(d(e.running_soh,2,10)),1)]),_:2},1032,["class"]),t(u,null,{default:n(()=>[r(s(e.remarks&&e.remarks.replace(/testing/gi,"").trim()?e.remarks.replace(/testing/gi,"").trim():"None"),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(H,null,{default:n(()=>[(_(!0),p(B,null,C(y.history.data,(e,k)=>(_(),w(U,{key:e.id},{default:n(()=>[t(O,{title:`${f(e.action)}`},null,8,["title"]),t(m,null,{default:n(()=>[l[10]||(l[10]=r("Ref No.: ")),e.is_link_ref&&e.display_ref_no!=="N/a"?(_(),p("a",{key:0,href:e.ref_type==="interco"?o.route("interco.show",e.display_ref_no):e.ref_type==="wastage"?o.route("wastage.show.by-number",e.display_ref_no):o.route("store-orders.show",e.display_ref_no),target:"_blank",class:"text-blue-600 hover:underline"},s(e.display_ref_no),9,F)):(_(),p("span",E,s(e.display_ref_no??"N/a"),1))]),_:2},1024),t(m,null,{default:n(()=>[l[11]||(l[11]=r("Quantity Change: ")),A("span",{class:T({"text-red-500":f(e.action)==="OUT","text-green-500":f(e.action)==="IN"})},s(f(e.action)==="OUT"?"-":"+")+s(d(e.quantity,2,10)),3)]),_:2},1024),t(m,{class:T({"font-bold text-green-600":k===0})},{default:n(()=>[r("Running SOH: "+s(d(e.running_soh,2,10)),1)]),_:2},1032,["class"]),t(m,null,{default:n(()=>{var g;return[r("Cost Center: "+s(((g=e.cost_center)==null?void 0:g.name)??"N/a"),1)]}),_:2},1024),t(m,null,{default:n(()=>[r("Unit Cost: "+s(d(e.unit_cost,2,4)),1)]),_:2},1024),t(m,null,{default:n(()=>[r("Total Cost: "+s(d(e.total_cost,2,4)),1)]),_:2},1024),t(m,null,{default:n(()=>[r("Transaction Date: "+s(N(e.transaction_date)),1)]),_:2},1024),t(m,null,{default:n(()=>[r("Remarks: "+s(e.remarks&&e.remarks.replace(/testing/gi,"").trim()?e.remarks.replace(/testing/gi,"").trim():"None"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(M,{data:y.history},null,8,["data"])]),_:1}),t(L,{routeName:"stock-management.index"})]),_:1},8,["heading"])}}};export{$ as default};
