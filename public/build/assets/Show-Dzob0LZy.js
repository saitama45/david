import{K as Te,L as we,G as He,f as Be,x as H,T as le,y as Le,r as p,o as f,c as V,w as t,a as e,b as u,t as a,h as L,d as w,e as K,u as o,F as W,g as J,X as je,E as Pe,N as Ze}from"./app-Drfr7wPO.js";import{d as h}from"./dayjs.min-FtbEs81H.js";import{u as Qe}from"./useBackButton-CnvTWR2a.js";var Ae={exports:{}};(function(_,O){(function(j,S){_.exports=S()})(Te,function(){var j="minute",S=/[+-]\d\d(?::?\d\d)?/g,me=/([+-]|\d\d)/g;return function(ee,A,N){var k=A.prototype;N.utc=function(r){var y={date:r,utc:!0,args:arguments};return new A(y)},k.utc=function(r){var y=N(this.toDate(),{locale:this.$L,utc:!0});return r?y.add(this.utcOffset(),j):y},k.local=function(){return N(this.toDate(),{locale:this.$L,utc:!1})};var U=k.parse;k.parse=function(r){r.utc&&(this.$u=!0),this.$utils().u(r.$offset)||(this.$offset=r.$offset),U.call(this,r)};var z=k.init;k.init=function(){if(this.$u){var r=this.$d;this.$y=r.getUTCFullYear(),this.$M=r.getUTCMonth(),this.$D=r.getUTCDate(),this.$W=r.getUTCDay(),this.$H=r.getUTCHours(),this.$m=r.getUTCMinutes(),this.$s=r.getUTCSeconds(),this.$ms=r.getUTCMilliseconds()}else z.call(this)};var Q=k.utcOffset;k.utcOffset=function(r,y){var $=this.$utils().u;if($(r))return this.$u?0:$(this.$offset)?Q.call(this):this.$offset;if(typeof r=="string"&&(r=function(I){I===void 0&&(I="");var X=I.match(S);if(!X)return null;var C=(""+X[0]).match(me)||["-",0,0],E=C[0],R=60*+C[1]+ +C[2];return R===0?0:E==="+"?R:-R}(r),r===null))return this;var x=Math.abs(r)<=16?60*r:r,M=this;if(y)return M.$offset=x,M.$u=r===0,M;if(r!==0){var Y=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(M=this.local().add(x+Y,j)).$offset=x,M.$x.$localOffset=Y}else M=this.utc();return M};var D=k.format;k.format=function(r){var y=r||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return D.call(this,y)},k.valueOf=function(){var r=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*r},k.isUTC=function(){return!!this.$u},k.toISOString=function(){return this.toDate().toISOString()},k.toString=function(){return this.toDate().toUTCString()};var T=k.toDate;k.toDate=function(r){return r==="s"&&this.$offset?N(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():T.call(this)};var s=k.diff;k.diff=function(r,y,$){if(r&&this.$u===r.$u)return s.call(this,r,y,$);var x=this.local(),M=N(r).local();return s.call(x,M,y,$)}}})})(Ae);var Xe=Ae.exports;const Ge=we(Xe);var Ie={exports:{}};(function(_,O){(function(j,S){_.exports=S()})(Te,function(){var j={year:0,month:1,day:2,hour:3,minute:4,second:5},S={};return function(me,ee,A){var N,k=function(D,T,s){s===void 0&&(s={});var r=new Date(D),y=function($,x){x===void 0&&(x={});var M=x.timeZoneName||"short",Y=$+"|"+M,I=S[Y];return I||(I=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:$,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:M}),S[Y]=I),I}(T,s);return y.formatToParts(r)},U=function(D,T){for(var s=k(D,T),r=[],y=0;y<s.length;y+=1){var $=s[y],x=$.type,M=$.value,Y=j[x];Y>=0&&(r[Y]=parseInt(M,10))}var I=r[3],X=I===24?0:I,C=r[0]+"-"+r[1]+"-"+r[2]+" "+X+":"+r[4]+":"+r[5]+":000",E=+D;return(A.utc(C).valueOf()-(E-=E%1e3))/6e4},z=ee.prototype;z.tz=function(D,T){D===void 0&&(D=N);var s,r=this.utcOffset(),y=this.toDate(),$=y.toLocaleString("en-US",{timeZone:D}),x=Math.round((y-new Date($))/1e3/60),M=15*-Math.round(y.getTimezoneOffset()/15)-x;if(!Number(M))s=this.utcOffset(0,T);else if(s=A($,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(M,!0),T){var Y=s.utcOffset();s=s.add(r-Y,"minute")}return s.$x.$timezone=D,s},z.offsetName=function(D){var T=this.$x.$timezone||A.tz.guess(),s=k(this.valueOf(),T,{timeZoneName:D}).find(function(r){return r.type.toLowerCase()==="timezonename"});return s&&s.value};var Q=z.startOf;z.startOf=function(D,T){if(!this.$x||!this.$x.$timezone)return Q.call(this,D,T);var s=A(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return Q.call(s,D,T).tz(this.$x.$timezone,!0)},A.tz=function(D,T,s){var r=s&&T,y=s||T||N,$=U(+A(),y);if(typeof D!="string")return A(D).tz(y);var x=function(X,C,E){var R=X-60*C*1e3,G=U(R,E);if(C===G)return[R,C];var ue=U(R-=60*(G-C)*1e3,E);return G===ue?[R,G]:[X-60*Math.min(G,ue)*1e3,Math.max(G,ue)]}(A.utc(D,r).valueOf(),$,y),M=x[0],Y=x[1],I=A(M).utcOffset(Y);return I.$x.$timezone=y,I},A.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},A.tz.setDefault=function(D){N=D}}})})(Ie);var Ke=Ie.exports;const We=we(Ke),Je=["onClick"],he=["href"],et=["src"],tt={class:"space-y-3"},lt={class:"space-y-3"},ut={class:"space-y-3"},nt={class:"space-y-3"},at={class:"space-y-4"},rt={key:0,class:"mt-4 max-h-64 overflow-y-auto"},st=["src"],ot={key:0},it={key:1},vt={__name:"Show",props:{order:{type:Object,required:!0},orderedItems:{type:Object,required:!0},receiveDatesHistory:{type:Array,required:!0},images:{type:Object,required:!0}},setup(_){h.extend(Ge),h.extend(We),h.tz.setDefault("Asia/Manila");const O=He(),j=Be();Qe(route("orders-receiving.index"));const S=_,me=H(S.order.order_status),ee=H(!1),A=()=>{ee.value=!0},N=H(null),k=H(null),U=le({quantity_received:null,received_date:new Date().toISOString().slice(0,16),expiry_date:null,remarks:null}),z=le({image:null}),Q=H(null),D=m=>{const l=m.target.files[0];l&&(z.image=l,Q.value=URL.createObjectURL(l))},T=()=>{z.post(route("orders-receiving.attach-image",S.order.id),{onSuccess:()=>{O.add({severity:"success",summary:"Success",detail:"Image attached successfully.",life:3e3}),ee.value=!1,z.reset(),Q.value=null},onError:m=>{const l=Object.values(m)[0];O.add({severity:"error",summary:"Upload Error",detail:l||"Failed to attach image.",life:5e3})}})},s=le({id:null,store_order_id:S.order.id,delivery_receipt_number:null,sap_so_number:null,remarks:null}),r=H(!1);k.value=S.orderedItems.length>0?S.orderedItems[0]:null;const y=m=>{const l=S.orderedItems.findIndex(i=>i.id===m);k.value=S.orderedItems[l],r.value=!0},$=H(!1),x=H(!1),M=m=>{N.value=m,$.value=!0},Y=()=>{C.value=!0,U.post(route("orders-receiving.receive",N.value),{onSuccess:()=>{O.add({severity:"success",summary:"Success",detail:"Your receive request has been successfully submitted. Please wait for approval.",life:5e3}),$.value=!1,C.value=!1,U.reset()},onError:m=>{console.log(m),O.add({severity:"error",summary:"Error",detail:"Failed to submit receive request.",life:5e3}),C.value=!1}})},I=()=>{C.value=!0,s.id?Ye():s.post(route("orders-receiving.add-delivery-receipt-number"),{onSuccess:()=>{O.add({severity:"success",summary:"Success",detail:"Delivery Receipt Added Successfully.",life:5e3}),x.value=!1,C.value=!1,s.reset()},onError:m=>{console.log(m),O.add({severity:"error",summary:"Error",detail:"Failed to add delivery receipt.",life:5e3}),x.value=!1,C.value=!1}})},X=S.order.order_status!=="received",C=H(!1),E=H(!1);Le(E,m=>{m||(R.reset(),R.clearErrors(),C.value=!1)});const R=le({id:null,quantity_received:null,remarks:null}),G=m=>{const l=S.receiveDatesHistory,i=l.findIndex(v=>v.id===m),d=l[i];R.id=d.id,R.quantity_received=d.quantity_received,R.remarks=d.remarks,E.value=!0},ue=()=>{C.value=!0,R.post(route("orders-receiving.update-receiving-history"),{onSuccess:m=>{O.add({severity:"success",summary:"Success",detail:"Updated Successfully.",life:5e3}),C.value=!1,E.value=!1},onError:m=>{C.value=!1,O.add({severity:"error",summary:"Error",detail:m.message||"Failed to update receive details.",life:5e3})}})},ve=H(!1),q=H(),$e=m=>{const l=S.receiveDatesHistory,i=l.findIndex(v=>v.id===m),d=l[i];q.value=d,ve.value=!0},Me=le({id:null}),Ve=()=>{j.require({message:"Are you sure you want to delete this image?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove",severity:"danger"},accept:()=>{Me.post(route("destroy"),{onSuccess:()=>{O.add({severity:"success",summary:"Success",detail:"Image deleted successfully.",life:5e3}),C.value=!1},onError:m=>{C.value=!1,console.log(m),O.add({severity:"error",summary:"Error",detail:m.message||"Failed to delete image.",life:5e3})}})}})},Se=(m,l,i,d)=>{s.id=m,s.delivery_receipt_number=l,s.sap_so_number=i,s.remarks=d,x.value=!0},Ye=()=>{s.put(route("orders-receiving.update-delivery-receipt-number",s.id),{onSuccess:()=>{O.add({severity:"success",summary:"Success",detail:"Delivery Receipt Updated Successfully.",life:5e3}),x.value=!1,C.value=!1,s.reset()},onError:m=>{console.log(m),O.add({severity:"error",summary:"Error",detail:"Failed to update delivery receipt.",life:5e3}),C.value=!1}})},Re=m=>{j.require({message:"Are you sure you want to delete this delivery receipt?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove",severity:"danger"},accept:()=>{Ze.delete(route("orders-receiving.delete-delivery-receipt-number",m),{},{onSuccess:()=>{O.add({severity:"success",summary:"Success",detail:"Delivery Receipt Deleted Successfully.",life:5e3})},onError:l=>{O.add({severity:"error",summary:"Error",detail:l.message||"An error occurred.",life:5e3})}})}})},Ee=()=>{le({store_order_id:S.order.id}).put(route("orders-receiving.confirm-receive",S.order.id),{onSuccess:()=>{O.add({severity:"success",summary:"Success",detail:"Action Completed.",life:5e3})},onError:l=>{O.add({severity:"error",summary:"Error",detail:"Error confirming receive: "+(l.message||"An unknown error occurred."),life:5e3})}})},Fe=()=>{j.require({message:"Are you sure you want to confirm all pending received items? This action cannot be undone.",header:"Confirm Receiving",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{Ee()}})};return(m,l)=>{const i=p("LabelXS"),d=p("SpanBold"),v=p("InputContainer"),Ue=p("Card"),De=p("TableHeader"),g=p("TH"),pe=p("TableHead"),c=p("TD"),_e=p("EditButton"),Oe=p("DeleteButton"),te=p("DivFlexCenter"),ye=p("TableBody"),ge=p("Table"),ce=p("MobileTableHeading"),be=p("MobileTableRow"),xe=p("MobileTableContainer"),Ce=p("TableContainer"),ke=p("ShowButton"),F=p("Button"),ze=p("CardTitle"),Ne=p("DivFlexCol"),ne=p("DialogTitle"),ae=p("DialogDescription"),re=p("DialogHeader"),B=p("Label"),P=p("Input"),Z=p("FormError"),se=p("DialogFooter"),oe=p("DialogContent"),ie=p("Dialog"),qe=p("Layout");return f(),V(qe,{heading:"Order Details"},{default:t(()=>[e(Ne,{class:"gap-3"},{default:t(()=>[e(Ue,{class:"p-5 grid sm:grid-cols-4 gap-5"},{default:t(()=>[e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[20]||(l[20]=[u("Encoder: ")])),_:1}),e(d,null,{default:t(()=>[u(a(_.order.encoder.first_name)+" "+a(_.order.encoder.last_name),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[21]||(l[21]=[u("Order Number: ")])),_:1}),e(d,null,{default:t(()=>[u(a(_.order.order_number),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[22]||(l[22]=[u("Order Date: ")])),_:1}),e(d,null,{default:t(()=>[u(a(_.order.order_date),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[23]||(l[23]=[u("Order Status: ")])),_:1}),e(d,null,{default:t(()=>[u(a(_.order.order_status.toUpperCase()),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[24]||(l[24]=[u("Approver: ")])),_:1}),e(d,null,{default:t(()=>{var n,b;return[u(a((n=_.order.approver)==null?void 0:n.first_name)+" "+a((b=_.order.approver)==null?void 0:b.last_name),1)]}),_:1}),_.order.approver?L("",!0):(f(),V(d,{key:0},{default:t(()=>l[25]||(l[25]=[u("N/a")])),_:1}))]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[26]||(l[26]=[u("Variant: ")])),_:1}),e(d,null,{default:t(()=>[u(a(_.order.variant.toUpperCase()),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[27]||(l[27]=[u("Approval Action Date: ")])),_:1}),e(d,null,{default:t(()=>[u(a(_.order.approval_action_date),1)]),_:1})]),_:1})]),_:1}),e(Ce,null,{default:t(()=>[e(De,null,{default:t(()=>[e(d,{class:"text-xs"},{default:t(()=>l[28]||(l[28]=[u("Delivery Receipts")])),_:1})]),_:1}),e(ge,null,{default:t(()=>[e(pe,null,{default:t(()=>[e(g,null,{default:t(()=>l[29]||(l[29]=[u("Id")])),_:1}),e(g,null,{default:t(()=>l[30]||(l[30]=[u("Number")])),_:1}),e(g,null,{default:t(()=>l[31]||(l[31]=[u("SAP SO Number")])),_:1}),e(g,null,{default:t(()=>l[32]||(l[32]=[u("Remarks")])),_:1}),e(g,null,{default:t(()=>l[33]||(l[33]=[u("Created at")])),_:1}),e(g,null,{default:t(()=>l[34]||(l[34]=[u("Actions")])),_:1})]),_:1}),e(ye,null,{default:t(()=>[(f(!0),w(W,null,K(_.order.delivery_receipts,n=>(f(),w("tr",{key:n.id},[e(c,null,{default:t(()=>[u(a(n.id),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.delivery_receipt_number),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.sap_so_number),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.remarks),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(o(h).utc(n.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024),e(c,null,{default:t(()=>[e(te,{class:"gap-3"},{default:t(()=>[e(_e,{onClick:b=>Se(n.id,n.delivery_receipt_number,n.sap_so_number,n.remarks)},null,8,["onClick"]),e(Oe,{onClick:b=>Re(n.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(xe,null,{default:t(()=>[(f(!0),w(W,null,K(_.order.delivery_receipts,n=>(f(),V(be,{key:n.id},{default:t(()=>[e(ce,{title:`${n.delivery_receipt_number}`},{default:t(()=>[e(_e,{onClick:b=>Se(n.id,n.delivery_receipt_number,n.sap_so_number,n.remarks)},null,8,["onClick"]),e(Oe,{onClick:b=>Re(n.id)},null,8,["onClick"])]),_:2},1032,["title"]),e(i,null,{default:t(()=>[u("SAP SO Number: "+a(n.sap_so_number??"N/a"),1)]),_:2},1024),e(i,null,{default:t(()=>[u("Remarks: "+a(n.remarks??"N/a"),1)]),_:2},1024),e(i,null,{default:t(()=>[u("Created at: "+a(o(h).utc(n.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]),_:2},1024))),128)),_.order.delivery_receipts.length<1?(f(),V(d,{key:0},{default:t(()=>l[35]||(l[35]=[u("None")])),_:1})):L("",!0)]),_:1})]),_:1}),e(Ce,null,{default:t(()=>[e(De,null,{default:t(()=>[e(d,{class:"text-xs"},{default:t(()=>l[36]||(l[36]=[u("Remarks")])),_:1})]),_:1}),e(ge,null,{default:t(()=>[e(pe,null,{default:t(()=>[e(g,null,{default:t(()=>l[37]||(l[37]=[u(" Id ")])),_:1}),e(g,null,{default:t(()=>l[38]||(l[38]=[u(" Remarks By")])),_:1}),e(g,null,{default:t(()=>l[39]||(l[39]=[u("Action")])),_:1}),e(g,null,{default:t(()=>l[40]||(l[40]=[u("Remarks")])),_:1}),e(g,null,{default:t(()=>l[41]||(l[41]=[u("Created At")])),_:1})]),_:1}),e(ye,null,{default:t(()=>[(f(!0),w(W,null,K(_.order.store_order_remarks,n=>(f(),w("tr",{key:n.id},[e(c,null,{default:t(()=>[u(a(n.id),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.user.first_name)+" "+a(n.user.last_name),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.action.toUpperCase()),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.remarks),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(o(h)(n.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(xe,null,{default:t(()=>[(f(!0),w(W,null,K(_.order.store_order_remarks,n=>(f(),V(be,{key:n.id},{default:t(()=>[e(ce,{title:`${n.action.toUpperCase()}`},{default:t(()=>[e(ke)]),_:2},1032,["title"]),e(i,null,{default:t(()=>[u("Remarks: "+a(n.remarks),1)]),_:2},1024),e(i,null,{default:t(()=>[u("Created at: "+a(o(h)(n.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]),_:2},1024))),128)),_.order.store_order_remarks.length<1?(f(),V(d,{key:0},{default:t(()=>l[42]||(l[42]=[u("None")])),_:1})):L("",!0)]),_:1})]),_:1}),e(Ue,{class:"p-5"},{default:t(()=>[e(v,{class:"col-span-4"},{default:t(()=>[e(i,null,{default:t(()=>l[43]||(l[43]=[u("Image Attachments: ")])),_:1}),e(te,{class:"gap-4 overflow-auto overflow-x-auto scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-gray-300 hover:scrollbar-thumb-gray-400"},{default:t(()=>[(f(!0),w(W,null,K(_.images,n=>(f(),w("div",{key:n.id,class:"relative"},[J("button",{onClick:b=>{o(Me).id=n.id,Ve()},class:"absolute -right-2 -top-2 text-white size-5 rounded-full bg-red-500"},[e(o(je),{class:"size-5"})],8,Je),J("a",{href:n.image_url,target:"_blank",rel:"noopener noreferrer"},[J("img",{src:n.image_url,class:"size-24 cursor-pointer hover:opacity-80 transition-opacity"},null,8,et)],8,he)]))),128))]),_:1}),_.images.length<1?(f(),V(d,{key:0},{default:t(()=>l[44]||(l[44]=[u("None")])),_:1})):L("",!0)]),_:1})]),_:1}),e(Ce,{class:"col-span-2 min-w-fit"},{default:t(()=>[e(te,{class:"justify-between"},{default:t(()=>[e(d,{class:"text-xs"},{default:t(()=>l[45]||(l[45]=[u("Ordered Items")])),_:1}),e(te,{class:"gap-3"},{default:t(()=>[e(F,{class:"text-xs px-2 sm:px-4",onClick:A},{default:t(()=>l[46]||(l[46]=[u("Attach Image")])),_:1}),e(F,{class:"text-xs px-2 sm:px-4",onClick:l[0]||(l[0]=n=>x.value=!0)},{default:t(()=>l[47]||(l[47]=[u("Add Delivery Number")])),_:1})]),_:1})]),_:1}),e(ge,null,{default:t(()=>[e(pe,null,{default:t(()=>[e(g,null,{default:t(()=>l[48]||(l[48]=[u(" Item Code ")])),_:1}),e(g,null,{default:t(()=>l[49]||(l[49]=[u(" Name ")])),_:1}),e(g,null,{default:t(()=>l[50]||(l[50]=[u("BaseUOM")])),_:1}),e(g,null,{default:t(()=>l[51]||(l[51]=[u("UOM")])),_:1}),e(g,null,{default:t(()=>l[52]||(l[52]=[u(" Ordered ")])),_:1}),e(g,null,{default:t(()=>l[53]||(l[53]=[u("Approved")])),_:1}),e(g,null,{default:t(()=>l[54]||(l[54]=[u(" Commited")])),_:1}),e(g,null,{default:t(()=>l[55]||(l[55]=[u(" Received")])),_:1}),e(g,null,{default:t(()=>l[56]||(l[56]=[u(" Actions ")])),_:1})]),_:1}),e(ye,null,{default:t(()=>[(f(!0),w(W,null,K(_.orderedItems,n=>(f(),w("tr",{key:n.id},[e(c,null,{default:t(()=>[u(a(n.supplier_item.ItemCode),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.supplier_item.item_name),1)]),_:2},1024),e(c,null,{default:t(()=>{var b;return[u(a((b=n.supplier_item.sap_master_file)==null?void 0:b.BaseUOM),1)]}),_:2},1024),e(c,{class:"text-xs"},{default:t(()=>[u(a(n.supplier_item.uom),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.quantity_ordered),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.quantity_approved),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.quantity_commited),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.quantity_received),1)]),_:2},1024),e(c,{class:"w-[90px]"},{default:t(()=>[e(te,{class:"gap-1"},{default:t(()=>[e(ke,{onClick:b=>y(n.id)},{default:t(()=>[e(o(Pe))]),_:2},1032,["onClick"]),me.value==="incomplete"?(f(),V(F,{key:0,onClick:b=>M(n.id),class:"text-green-500",variant:"link"},{default:t(()=>l[57]||(l[57]=[u(" Receive ")])),_:2},1032,["onClick"])):L("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(xe,null,{default:t(()=>[(f(!0),w(W,null,K(_.orderedItems,n=>(f(),V(be,{key:n.id},{default:t(()=>[e(ce,{title:`${n.supplier_item.item_name} (${n.supplier_item.ItemCode})`},{default:t(()=>[X?(f(),V(F,{key:0,onClick:b=>M(n.id),class:"text-green-500",variant:"link"},{default:t(()=>l[58]||(l[58]=[u(" Receive ")])),_:2},1032,["onClick"])):L("",!0)]),_:2},1032,["title"]),e(i,null,{default:t(()=>{var b;return[u("BaseUOM: "+a((b=n.supplier_item.sap_master_file)==null?void 0:b.BaseUOM),1)]}),_:2},1024),e(i,null,{default:t(()=>[u("UOM: "+a(n.uom),1)]),_:2},1024),e(i,null,{default:t(()=>[u("Quantity Received: "+a(n.quantity_received),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(Ce,null,{default:t(()=>[e(De,null,{default:t(()=>[e(ze,null,{default:t(()=>l[59]||(l[59]=[u("Receiving History")])),_:1}),_.order.order_status!="received"?(f(),V(F,{key:0,onClick:Fe},{default:t(()=>l[60]||(l[60]=[u(" Confirm Receive ")])),_:1})):L("",!0)]),_:1}),e(ge,null,{default:t(()=>[e(pe,null,{default:t(()=>[e(g,null,{default:t(()=>l[61]||(l[61]=[u(" Id ")])),_:1}),e(g,null,{default:t(()=>l[62]||(l[62]=[u(" Item ")])),_:1}),e(g,null,{default:t(()=>l[63]||(l[63]=[u(" Item Code ")])),_:1}),e(g,null,{default:t(()=>l[64]||(l[64]=[u(" Quantity Received")])),_:1}),e(g,null,{default:t(()=>l[65]||(l[65]=[u(" Received At")])),_:1}),e(g,null,{default:t(()=>l[66]||(l[66]=[u(" Status")])),_:1}),e(g,null,{default:t(()=>l[67]||(l[67]=[u("Actions")])),_:1})]),_:1}),e(ye,null,{default:t(()=>[(f(!0),w(W,null,K(_.receiveDatesHistory,n=>(f(),w("tr",{key:n.id},[e(c,null,{default:t(()=>[u(a(n.id),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.store_order_item.supplier_item.item_name),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.store_order_item.supplier_item.ItemCode),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.quantity_received),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(o(h)(n.received_date).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024),e(c,null,{default:t(()=>[u(a(n.status),1)]),_:2},1024),e(c,null,{default:t(()=>[e(te,{class:"gap-3"},{default:t(()=>[e(ke,{onClick:b=>$e(n.id)},null,8,["onClick"]),n.status==="pending"?(f(),V(_e,{key:0,onClick:b=>G(n.id)},null,8,["onClick"])):L("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(xe,null,{default:t(()=>[(f(!0),w(W,null,K(_.receiveDatesHistory,n=>(f(),V(be,{key:n.id},{default:t(()=>[e(ce,{title:`${n.store_order_item.supplier_item.item_name} (${n.store_order_item.supplier_item.ItemCode})`},{default:t(()=>[e(ke,{class:"size-5 gap mr-0",onClick:b=>$e(n.id)},null,8,["onClick"]),n.status==="pending"?(f(),V(_e,{key:0,class:"size-5 gap mr-1",onClick:b=>G(n.id)},null,8,["onClick"])):L("",!0)]),_:2},1032,["title"]),e(i,null,{default:t(()=>[u("Received: "+a(n.quantity_received),1)]),_:2},1024),e(i,null,{default:t(()=>[u("Status: "+a(n.status.toUpperCase()),1)]),_:2},1024)]),_:2},1024))),128)),_.receiveDatesHistory.length<1?(f(),V(d,{key:0},{default:t(()=>l[68]||(l[68]=[u("None")])),_:1})):L("",!0)]),_:1})]),_:1})]),_:1}),e(ie,{open:x.value,"onUpdate:open":l[5]||(l[5]=n=>x.value=n)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[69]||(l[69]=[u("Delivery Receipt Form")])),_:1}),e(ae,null,{default:t(()=>l[70]||(l[70]=[u("Input all the important details")])),_:1})]),_:1}),J("div",tt,[e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[71]||(l[71]=[u("Delivery Receipt Number")])),_:1}),e(P,{modelValue:o(s).delivery_receipt_number,"onUpdate:modelValue":l[1]||(l[1]=n=>o(s).delivery_receipt_number=n)},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(s).errors.delivery_receipt_number),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[72]||(l[72]=[u("SAP SO Number")])),_:1}),e(P,{modelValue:o(s).sap_so_number,"onUpdate:modelValue":l[2]||(l[2]=n=>o(s).sap_so_number=n)},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(s).errors.sap_so_number),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[73]||(l[73]=[u("Remarks")])),_:1}),e(P,{modelValue:o(s).remarks,"onUpdate:modelValue":l[3]||(l[3]=n=>o(s).remarks=n)},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(s).errors.remarks),1)]),_:1})]),_:1})]),e(se,null,{default:t(()=>[e(F,{variant:"ghost",onClick:l[4]||(l[4]=n=>x.value=!1)},{default:t(()=>l[74]||(l[74]=[u("Cancel")])),_:1}),e(F,{onClick:I},{default:t(()=>l[75]||(l[75]=[u("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(ie,{open:$.value,"onUpdate:open":l[11]||(l[11]=n=>$.value=n)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[76]||(l[76]=[u("Receive Form")])),_:1}),e(ae,null,{default:t(()=>l[77]||(l[77]=[u("Input all the important details")])),_:1})]),_:1}),J("div",lt,[e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[78]||(l[78]=[u("Quantity Received")])),_:1}),e(P,{modelValue:o(U).quantity_received,"onUpdate:modelValue":l[6]||(l[6]=n=>o(U).quantity_received=n),type:"number"},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(U).errors.quantity_received),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[79]||(l[79]=[u("Received Date")])),_:1}),e(P,{modelValue:o(U).received_date,"onUpdate:modelValue":l[7]||(l[7]=n=>o(U).received_date=n),type:"datetime-local"},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(U).errors.received_date),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[80]||(l[80]=[u("Expiry Date")])),_:1}),e(P,{modelValue:o(U).expiry_date,"onUpdate:modelValue":l[8]||(l[8]=n=>o(U).expiry_date=n),type:"date"},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(U).errors.expiry_date),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[81]||(l[81]=[u("Remarks")])),_:1}),e(P,{modelValue:o(U).remarks,"onUpdate:modelValue":l[9]||(l[9]=n=>o(U).remarks=n)},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(U).errors.remarks),1)]),_:1})]),_:1})]),e(se,null,{default:t(()=>[e(F,{variant:"ghost",onClick:l[10]||(l[10]=n=>$.value=!1)},{default:t(()=>l[82]||(l[82]=[u("Cancel")])),_:1}),e(F,{onClick:Y},{default:t(()=>l[83]||(l[83]=[u("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(ie,{open:E.value,"onUpdate:open":l[15]||(l[15]=n=>E.value=n)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[84]||(l[84]=[u("Edit Receive Details")])),_:1}),e(ae,null,{default:t(()=>l[85]||(l[85]=[u("Update the receive information below.")])),_:1})]),_:1}),J("div",ut,[e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[86]||(l[86]=[u("Quantity Received")])),_:1}),e(P,{modelValue:o(R).quantity_received,"onUpdate:modelValue":l[12]||(l[12]=n=>o(R).quantity_received=n),type:"number"},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(R).errors.quantity_received),1)]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[87]||(l[87]=[u("Remarks")])),_:1}),e(P,{modelValue:o(R).remarks,"onUpdate:modelValue":l[13]||(l[13]=n=>o(R).remarks=n)},null,8,["modelValue"]),e(Z,null,{default:t(()=>[u(a(o(R).errors.remarks),1)]),_:1})]),_:1})]),e(se,null,{default:t(()=>[e(F,{variant:"ghost",onClick:l[14]||(l[14]=n=>E.value=!1)},{default:t(()=>l[88]||(l[88]=[u("Cancel")])),_:1}),e(F,{onClick:ue},{default:t(()=>l[89]||(l[89]=[u("Update")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(ie,{open:ve.value,"onUpdate:open":l[17]||(l[17]=n=>ve.value=n)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[90]||(l[90]=[u("Receive History Details")])),_:1}),e(ae,null,{default:t(()=>l[91]||(l[91]=[u("View the details of the received item.")])),_:1})]),_:1}),J("div",nt,[e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[92]||(l[92]=[u("Item Name:")])),_:1}),e(d,null,{default:t(()=>{var n;return[u(a((n=q.value)==null?void 0:n.store_order_item.supplier_item.item_name),1)]}),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[93]||(l[93]=[u("Item Code:")])),_:1}),e(d,null,{default:t(()=>{var n;return[u(a((n=q.value)==null?void 0:n.store_order_item.supplier_item.ItemCode),1)]}),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[94]||(l[94]=[u("Quantity Received:")])),_:1}),e(d,null,{default:t(()=>{var n;return[u(a((n=q.value)==null?void 0:n.quantity_received),1)]}),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[95]||(l[95]=[u("Received By:")])),_:1}),e(d,null,{default:t(()=>{var n,b,de,fe;return[u(a((b=(n=q.value)==null?void 0:n.received_by_user)==null?void 0:b.first_name)+" "+a((fe=(de=q.value)==null?void 0:de.received_by_user)==null?void 0:fe.last_name),1)]}),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[96]||(l[96]=[u("Received Date:")])),_:1}),e(d,null,{default:t(()=>{var n;return[u(a(o(h)((n=q.value)==null?void 0:n.received_date).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]}),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[97]||(l[97]=[u("Expiry Date:")])),_:1}),e(d,null,{default:t(()=>{var n;return[u(a((n=q.value)==null?void 0:n.expiry_date),1)]}),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[98]||(l[98]=[u("Remarks:")])),_:1}),e(d,null,{default:t(()=>{var n;return[u(a((n=q.value)==null?void 0:n.remarks),1)]}),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[99]||(l[99]=[u("Status:")])),_:1}),e(d,null,{default:t(()=>{var n;return[u(a((n=q.value)==null?void 0:n.status),1)]}),_:1})]),_:1}),e(v,null,{default:t(()=>[e(i,null,{default:t(()=>l[100]||(l[100]=[u("Approval Action By:")])),_:1}),e(d,null,{default:t(()=>{var n,b,de,fe;return[u(a((b=(n=q.value)==null?void 0:n.approval_action_by_user)==null?void 0:b.first_name)+" "+a((fe=(de=q.value)==null?void 0:de.approval_action_by_user)==null?void 0:fe.last_name),1)]}),_:1})]),_:1})]),e(se,null,{default:t(()=>[e(F,{variant:"ghost",onClick:l[16]||(l[16]=n=>ve.value=!1)},{default:t(()=>l[101]||(l[101]=[u("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(ie,{open:ee.value,"onUpdate:open":l[19]||(l[19]=n=>ee.value=n)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[102]||(l[102]=[u("Attach Image")])),_:1}),e(ae,null,{default:t(()=>l[103]||(l[103]=[u(" Select an image file to upload for this order. ")])),_:1})]),_:1}),J("div",at,[e(v,null,{default:t(()=>[e(B,{class:"text-xs"},{default:t(()=>l[104]||(l[104]=[u("Image File")])),_:1}),e(P,{type:"file",onChange:D,accept:"image/png, image/jpeg, image/jpg",class:"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),e(Z,null,{default:t(()=>[u(a(o(z).errors.image),1)]),_:1})]),_:1}),Q.value?(f(),w("div",rt,[e(B,{class:"text-xs"},{default:t(()=>l[105]||(l[105]=[u("Preview")])),_:1}),J("img",{src:Q.value,class:"mt-2 max-w-full h-auto rounded-md border object-contain"},null,8,st)])):L("",!0)]),e(se,null,{default:t(()=>[e(F,{variant:"ghost",onClick:l[18]||(l[18]=n=>ee.value=!1)},{default:t(()=>l[106]||(l[106]=[u("Cancel")])),_:1}),e(F,{onClick:T,disabled:o(z).processing},{default:t(()=>[o(z).processing?(f(),w("span",ot,"Uploading...")):(f(),w("span",it,"Upload"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}};export{vt as default};
