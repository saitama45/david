import{l as L}from"./lodash-KmyjfxIh.js";import{x as i,l as w,y as T,r as A,o as n,c as st,w as U,g as t,a,u as r,C as ot,d,t as l,h as _,n as p,br as lt,b,e as O,F as $,N as at}from"./app-Bp7xdNcv.js";import{u as rt}from"./useAuth-Bvg2Md3x.js";import{C as E,B as H,_ as z,a as nt}from"./SearchableSelect-_7FH9SlL.js";import{S as dt}from"./search-RtaD5aad.js";import{R as M}from"./rotate-ccw-BVWVL-fj.js";import{P as j}from"./package-8PI2OvT-.js";const it={class:"lg:hidden mb-4"},ut={class:"flex items-center gap-3"},ct={key:0,class:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-700 rounded-full"},pt={class:"p-6"},xt={class:"mb-6"},mt={class:"relative"},gt={key:0,class:"absolute right-4 top-1/2 transform -translate-y-1/2"},yt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4"},vt={class:"space-y-2"},ft={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},_t={class:"space-y-2"},bt={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},ht={class:"space-y-2"},wt={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},St={class:"space-y-2"},Vt={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},kt={class:"space-y-2"},Ct={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},At={class:"space-y-2"},Nt={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},Ft={class:"flex items-center justify-between mt-6 pt-6 border-t border-gray-200"},It={class:"text-sm text-gray-600"},Dt={class:"flex items-center gap-3"},jt={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Pt={key:0,class:"absolute inset-0 bg-white/80 flex items-center justify-center z-10"},Rt={class:"hidden lg:block"},qt={class:"overflow-x-auto"},Bt={class:"min-w-full"},Lt={class:"bg-white divide-y divide-gray-100"},Tt={key:0,class:"hover:bg-gray-50"},Ut={colspan:"15",class:"text-center py-12 text-gray-500"},Ot={class:"flex flex-col items-center"},$t={class:"px-6 py-4 text-sm font-mono text-gray-900"},Et=["title"],Ht={class:"px-6 py-4 text-sm text-center font-medium text-gray-900"},zt={class:"px-6 py-4 text-sm text-gray-600"},Mt={class:"px-6 py-4 text-sm text-gray-600"},Wt=["title"],Qt=["title"],Xt=["title"],Gt={class:"px-6 py-4 text-sm font-mono text-gray-900"},Jt={class:"px-6 py-4 text-center"},Kt=["title"],Yt={class:"px-6 py-4 text-sm text-right font-medium text-gray-900"},Zt={class:"px-6 py-4 text-sm text-right font-semibold text-gray-900"},te={class:"px-6 py-4 text-sm text-gray-600"},ee=["title"],se={class:"lg:hidden"},oe={key:0,class:"p-8 text-center"},le={class:"divide-y divide-gray-100"},ae={class:"flex items-center justify-between mb-3"},re={class:"flex items-center gap-3"},ne={class:"flex flex-col"},de={class:"text-sm font-mono text-gray-900"},ie={class:"text-xs text-gray-500"},ue={class:"text-right"},ce={class:"text-sm font-semibold text-gray-900"},pe={class:"text-xs text-gray-500"},xe={class:"mb-3"},me={class:"text-sm text-gray-900 line-clamp-2"},ge={class:"grid grid-cols-2 gap-3 mb-3"},ye=["title"],ve=["title"],fe={class:"space-y-2"},_e={class:"flex items-center justify-between"},be={class:"text-xs text-gray-900"},he={key:0,class:"flex items-center justify-between"},we={class:"text-xs text-gray-900"},Se={key:1,class:"flex items-center justify-between"},Ve={class:"text-xs text-gray-900"},ke={class:"bg-white px-6 py-4 border-t border-gray-200 mt-6 rounded-b-xl"},Pe={__name:"Index",props:{lineItems:{type:Array,required:!0},orders:{type:Object,required:!0},filters:{type:Object,required:!0},stores:{type:Array,required:!0},statusOptions:{type:Array,required:!0},assignedStoreIds:{type:Array,required:!0}},setup(x){const u=x,S=i(!1),N=i(!1),F=i(!1),W=[{label:"25 rows",value:25},{label:"50 rows",value:50},{label:"100 rows",value:100},{label:"200 rows",value:200}],P=w(()=>u.stores.map(o=>({label:`${o.name} (${o.brand_name})`,value:o.id,searchTerms:[o.name,o.brand_name].join(" ").toLowerCase()}))),Q=w(()=>u.statusOptions.map(o=>({label:o.label,value:o.value}))),m=i(u.filters.date_from||""),g=i(u.filters.date_to||""),y=i(u.filters.sending_store_id||""),v=i(u.filters.receiving_store_id||""),f=i(u.filters.interco_status||"received"),c=i(u.filters.search||""),V=i(u.filters.per_page||50);rt();const R=()=>{N.value=!0,at.get(route("reports.interco-report.index"),{date_from:m.value,date_to:g.value,sending_store_id:y.value||null,receiving_store_id:v.value||null,interco_status:f.value||null,search:c.value,per_page:V.value},{preserveState:!0,preserveScroll:!0,replace:!0,onStart:()=>N.value=!0,onFinish:()=>N.value=!1})};T([m,g,y,v,f,V],L.throttle(R,300)),T(c,L.throttle(R,500));const X=()=>{S.value=!S.value},q=w(()=>{let o=0;return m.value&&o++,g.value&&o++,y.value&&o++,v.value&&o++,f.value&&o++,c.value&&o++,o}),G=w(()=>q.value>0);w(()=>!S.value||window.innerWidth>=1024);const J=()=>{m.value="",g.value="",y.value="",v.value="",f.value="received",c.value="",V.value=50},K=w(()=>route("reports.interco-report.export",{date_from:m.value,date_to:g.value,sending_store_id:y.value||null,receiving_store_id:v.value||null,interco_status:f.value||null,search:c.value})),k=o=>o?new Date(o).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):"N/A",C=o=>!o||o.length===0?"N/A":o.map(s=>k(s)).join(", "),h=o=>{const s={open:{bg:"bg-gray-50 border-gray-200",text:"text-gray-700",dot:"bg-gray-400",icon:"Clock"},approved:{bg:"bg-blue-50 border-blue-200",text:"text-blue-700",dot:"bg-blue-400",icon:"CheckCircle"},disapproved:{bg:"bg-red-50 border-red-200",text:"text-red-700",dot:"bg-red-400",icon:"XCircle"},committed:{bg:"bg-amber-50 border-amber-200",text:"text-amber-700",dot:"bg-amber-400",icon:"Package"},in_transit:{bg:"bg-purple-50 border-purple-200",text:"text-purple-700",dot:"bg-purple-400",icon:"Truck"},received:{bg:"bg-emerald-50 border-emerald-200",text:"text-emerald-700",dot:"bg-emerald-400",icon:"CheckBadge"}};return s[o]||s.open},I=o=>o?new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(o):"â‚±0.00";return(o,s)=>{const D=A("Input"),B=A("Select"),Y=A("Button"),Z=A("Pagination"),tt=A("Layout");return n(),st(tt,{heading:"Interco Report",hasExcelDownload:!0,exportRoute:K.value},{default:U(()=>[t("div",it,[t("button",{onClick:X,class:"flex items-center justify-between w-full p-4 bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow"},[t("div",ut,[a(r(ot),{class:"w-5 h-5 text-gray-600"}),s[10]||(s[10]=t("span",{class:"font-medium text-gray-900"},"Filters",-1)),G.value?(n(),d("span",ct,l(q.value),1)):_("",!0)]),a(r(lt),{class:p(["w-5 h-5 text-gray-400 transition-transform",S.value?"rotate-180":""])},null,8,["class"])])]),t("div",{class:p(["bg-white rounded-xl border border-gray-200 shadow-sm mb-6 transition-all duration-300",S.value&&o.window.innerWidth<1024?"hidden":"block"])},[t("div",pt,[t("div",xt,[t("div",mt,[a(r(dt),{class:p(["w-5 h-5 text-gray-400 absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors",F.value?"text-blue-500":""])},null,8,["class"]),a(D,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),onFocus:s[1]||(s[1]=e=>F.value=!0),onBlur:s[2]||(s[2]=e=>F.value=!1),placeholder:"Search by item code, description, interco number, or stores...",class:"pl-12 pr-4 py-3 w-full text-base border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg"},null,8,["modelValue"]),c.value?(n(),d("div",gt,[t("button",{onClick:s[3]||(s[3]=e=>c.value=""),class:"text-gray-400 hover:text-gray-600 transition-colors"},[a(r(M),{class:"w-4 h-4"})])])):_("",!0)])]),t("div",yt,[t("div",vt,[t("label",ft,[a(r(E),{class:"w-4 h-4"}),s[11]||(s[11]=b(" From Date "))]),a(D,{type:"date",modelValue:m.value,"onUpdate:modelValue":s[4]||(s[4]=e=>m.value=e),class:"w-full border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg"},null,8,["modelValue"])]),t("div",_t,[t("label",bt,[a(r(E),{class:"w-4 h-4"}),s[12]||(s[12]=b(" To Date "))]),a(D,{type:"date",modelValue:g.value,"onUpdate:modelValue":s[5]||(s[5]=e=>g.value=e),class:"w-full border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg"},null,8,["modelValue"])]),t("div",ht,[t("label",wt,[a(r(H),{class:"w-4 h-4"}),s[13]||(s[13]=b(" From Store "))]),a(z,{modelValue:y.value,"onUpdate:modelValue":s[6]||(s[6]=e=>y.value=e),placeholder:"All Stores",options:P.value,optionLabel:"label",optionValue:"value",class:"w-full",clearable:""},null,8,["modelValue","options"])]),t("div",St,[t("label",Vt,[a(r(H),{class:"w-4 h-4"}),s[14]||(s[14]=b(" To Store "))]),a(z,{modelValue:v.value,"onUpdate:modelValue":s[7]||(s[7]=e=>v.value=e),placeholder:"All Stores",options:P.value,optionLabel:"label",optionValue:"value",class:"w-full",clearable:""},null,8,["modelValue","options"])]),t("div",kt,[t("label",Ct,[a(r(nt),{class:"w-4 h-4"}),s[15]||(s[15]=b(" Status "))]),a(B,{modelValue:f.value,"onUpdate:modelValue":s[8]||(s[8]=e=>f.value=e),placeholder:"All Status",options:Q.value,optionLabel:"label",optionValue:"value",class:"w-full",clearable:""},null,8,["modelValue","options"])]),t("div",At,[t("label",Nt,[a(r(j),{class:"w-4 h-4"}),s[16]||(s[16]=b(" Per Page "))]),a(B,{modelValue:V.value,"onUpdate:modelValue":s[9]||(s[9]=e=>V.value=e),options:W,optionLabel:"label",optionValue:"value",class:"w-full",clearable:!1},null,8,["modelValue"])])]),t("div",Ft,[t("div",It," Showing "+l(x.lineItems.length)+" of "+l(x.orders.total)+" results ",1),t("div",Dt,[a(Y,{onClick:J,variant:"outline",class:"flex items-center gap-2 px-4 py-2 border-gray-300 hover:bg-gray-50 transition-colors"},{default:U(()=>[a(r(M),{class:"w-4 h-4"}),s[17]||(s[17]=b(" Reset Filters "))]),_:1})])])])],2),t("div",jt,[N.value?(n(),d("div",Pt,s[18]||(s[18]=[t("div",{class:"flex items-center gap-3 text-gray-600"},[t("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t("span",null,"Loading...")],-1)]))):_("",!0),t("div",Rt,[t("div",qt,[t("table",Bt,[s[21]||(s[21]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",{class:"text-xs text-gray-500 uppercase tracking-wider"},[t("th",{class:"px-6 py-4 text-left font-medium"},"Item Code"),t("th",{class:"px-6 py-4 text-left font-medium"},"Item Description"),t("th",{class:"px-6 py-4 text-center font-medium"},"Received Qty"),t("th",{class:"px-6 py-4 text-left font-medium"},"UoM"),t("th",{class:"px-6 py-4 text-left font-medium"},"Requested Date"),t("th",{class:"px-6 py-4 text-left font-medium"},"Reason"),t("th",{class:"px-6 py-4 text-left font-medium"},"From Store"),t("th",{class:"px-6 py-4 text-left font-medium"},"To Store"),t("th",{class:"px-6 py-4 text-left font-medium"},"Interco #"),t("th",{class:"px-6 py-4 text-center font-medium"},"Status"),t("th",{class:"px-6 py-4 text-left font-medium"},"Expiry Dates"),t("th",{class:"px-6 py-4 text-right font-medium"},"Unit Cost"),t("th",{class:"px-6 py-4 text-right font-medium"},"Total Cost"),t("th",{class:"px-6 py-4 text-left font-medium"},"Shipped Date"),t("th",{class:"px-6 py-4 text-left font-medium"},"Received Dates")])],-1)),t("tbody",Lt,[x.lineItems.length===0?(n(),d("tr",Tt,[t("td",Ut,[t("div",Ot,[a(r(j),{class:"w-12 h-12 text-gray-300 mb-3"}),s[19]||(s[19]=t("span",{class:"text-lg font-medium"},"No data available",-1)),s[20]||(s[20]=t("span",{class:"text-sm text-gray-400 mt-1"},"Try adjusting your filters or search criteria",-1))])])])):_("",!0),(n(!0),d($,null,O(x.lineItems,(e,et)=>(n(),d("tr",{key:e.id,class:"hover:bg-gray-50 transition-colors"},[t("td",$t,l(e.item_code||"N/A"),1),t("td",{class:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",title:e.item_description},l(e.item_description||"N/A"),9,Et),t("td",Ht,l(e.received_qty||0),1),t("td",zt,l(e.uom||"N/A"),1),t("td",Mt,l(k(e.requested_delivery_date)),1),t("td",{class:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",title:e.interco_reason},l(e.interco_reason||"N/A"),9,Wt),t("td",{class:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",title:e.from_store},l(e.from_store||"N/A"),9,Qt),t("td",{class:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",title:e.to_store},l(e.to_store||"N/A"),9,Xt),t("td",Gt,l(e.interco_number||"N/A"),1),t("td",Jt,[t("div",{class:p(["inline-flex items-center gap-2 px-3 py-1 rounded-full border text-xs font-medium",h(e.status).bg])},[t("div",{class:p(["w-2 h-2 rounded-full",h(e.status).dot])},null,2),t("span",{class:p(h(e.status).text)},l(e.status?e.status.replace("_"," ").toUpperCase():"N/A"),3)],2)]),t("td",{class:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",title:C(e.expiry_dates)},l(C(e.expiry_dates)),9,Kt),t("td",Yt,l(I(e.unit_cost)),1),t("td",Zt,l(I(e.total_cost)),1),t("td",te,l(k(e.shipped_date)),1),t("td",{class:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",title:C(e.received_dates)},l(C(e.received_dates)),9,ee)]))),128))])])])]),t("div",se,[x.lineItems.length===0?(n(),d("div",oe,[a(r(j),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s[22]||(s[22]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No data available",-1)),s[23]||(s[23]=t("p",{class:"text-sm text-gray-500"},"Try adjusting your filters or search criteria",-1))])):_("",!0),t("div",le,[(n(!0),d($,null,O(x.lineItems,(e,et)=>(n(),d("div",{key:e.id,class:"p-4 hover:bg-gray-50 transition-colors"},[t("div",ae,[t("div",re,[t("div",ne,[t("span",de,l(e.item_code||"N/A"),1),t("span",ie,l(e.interco_number||"N/A"),1)]),t("div",{class:p(["inline-flex items-center gap-1 px-2 py-1 rounded-full border text-xs font-medium",h(e.status).bg])},[t("div",{class:p(["w-1.5 h-1.5 rounded-full",h(e.status).dot])},null,2),t("span",{class:p(h(e.status).text)},l(e.status?e.status.replace("_"," ").toUpperCase():"N/A"),3)],2)]),t("div",ue,[t("div",ce,l(I(e.total_cost)),1),t("div",pe,l(e.received_qty||0)+" "+l(e.uom||"N/A"),1)])]),t("div",xe,[t("p",me,l(e.item_description||"N/A"),1)]),t("div",ge,[t("div",null,[s[24]||(s[24]=t("span",{class:"text-xs text-gray-500 block"},"From Store:",-1)),t("span",{class:"text-sm text-gray-900 block truncate",title:e.from_store},l(e.from_store||"N/A"),9,ye)]),t("div",null,[s[25]||(s[25]=t("span",{class:"text-xs text-gray-500 block"},"To Store:",-1)),t("span",{class:"text-sm text-gray-900 block truncate",title:e.to_store},l(e.to_store||"N/A"),9,ve)])]),t("div",fe,[t("div",_e,[s[26]||(s[26]=t("span",{class:"text-xs text-gray-500"},"Requested:",-1)),t("span",be,l(k(e.requested_delivery_date)),1)]),e.shipped_date?(n(),d("div",he,[s[27]||(s[27]=t("span",{class:"text-xs text-gray-500"},"Shipped:",-1)),t("span",we,l(k(e.shipped_date)),1)])):_("",!0),e.received_dates&&e.received_dates.length>0?(n(),d("div",Se,[s[28]||(s[28]=t("span",{class:"text-xs text-gray-500"},"Received:",-1)),t("span",Ve,l(C(e.received_dates)),1)])):_("",!0)])]))),128))])])]),t("div",ke,[a(Z,{data:x.orders},null,8,["data"])])]),_:1},8,["exportRoute"])}}};export{Pe as default};
