import{G as J,f as K,x as h,T as W,l as Y,r as m,o as a,c as _,w as n,a as r,g as t,b as u,u as o,t as d,h as y,s as M,n as k,d as p,e as F,F as I}from"./app-DPA7xop8.js";import{u as T}from"./useSelectOptions-DqOryH05.js";const Z={class:"flex flex-col gap-5 p-5"},ee={class:"bg-white border rounded-md shadow-sm w-full"},te={class:"overflow-x-auto"},se={class:"min-w-full table-fixed",style:{"table-layout":"fixed"}},oe={class:"bg-white"},le={class:"text-sm text-gray-600"},ne={class:"flex items-center justify-between"},re={key:0,class:"ml-2 flex-shrink-0"},ae={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ue={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ie={class:"flex items-center justify-between"},de={key:0,class:"ml-2 flex-shrink-0"},pe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ce={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},me={class:"flex items-center justify-between"},ye={key:0,class:"ml-2 flex-shrink-0"},ve={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},fe={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},we={class:"flex items-center justify-between"},ge={key:0,class:"ml-2 flex-shrink-0"},be={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ke={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},_e={class:"flex items-center justify-between"},xe={key:0,class:"ml-2 flex-shrink-0"},Ce={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Se={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Pe={class:"text-sm text-gray-700"},Ve=["title"],he={class:"md:hidden p-4 space-y-3"},Be={class:"font-semibold truncate"},De={class:"text-sm font-normal"},Oe={class:"text-sm text-gray-600"},je={class:"text-sm text-gray-600"},Ne={class:"text-sm text-gray-600"},Me={class:"px-4 py-3 text-sm text-gray-700"},Fe={class:"font-bold"},Ue={__name:"Edit",props:{item:{type:Object,required:!0},categories:{type:Array,default:()=>[]},products:{type:Array,default:()=>[]},existingIngredients:{type:Array,default:()=>[]}},setup(U){const j=J(),A=K(),B=U,L=h(!1),b=B.item,l=W({POSCode:b.POSCode??null,POSDescription:b.POSDescription??null,Category:b.Category??null,SubCategory:b.SubCategory??null,SRP:b.SRP??0,DeliveryPrice:b.DeliveryPrice??0,TableVibePrice:b.TableVibePrice??0,is_active:b.is_active!==null?Number(b.is_active):null}),D=h([]);B.existingIngredients.forEach(c=>{D.value.push({id:c.id,sap_masterfile_id:c.sap_masterfile_id??null,inventory_code:c.inventory_code,name:c.name,quantity:Number(c.quantity),uom:c.uom,assembly:c.assembly??null,unit_cost:c.unit_cost??null,total_cost:c.total_cost??null})}),T(B.products);const{options:q}=T(B.categories),E=h([{label:"Active",value:1},{label:"Inactive",value:0}]),i=h(null),v=h("asc"),N=Y(()=>i.value?[...D.value].sort((e,O)=>{let x=e[i.value],C=O[i.value];x==null&&(x=typeof C=="number"?0:""),C==null&&(C=typeof x=="number"?0:"");const V=parseFloat(x),f=parseFloat(C);if(!Number.isNaN(V)&&!Number.isNaN(f))return v.value==="asc"?V-f:f-V;const w=String(x).toLowerCase(),g=String(C).toLowerCase();return w<g?v.value==="asc"?-1:1:w>g?v.value==="asc"?1:-1:0}):D.value),P=c=>{i.value===c?v.value=v.value==="asc"?"desc":"asc":(i.value=c,v.value="asc")},R=()=>{A.require({message:"Are you sure you want to update this product's FG Details?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{l.put(route("POSMasterfile.update",b.id),{preserveScroll:!0,onSuccess:()=>{j.add({severity:"success",summary:"Success",detail:"FG Details Successfully Updated",life:3e3})},onError:c=>{console.error(c),j.add({severity:"error",summary:"Error",detail:"An error occurred while updating the FG details.",life:3e3})}})}})};return(c,e)=>{const O=m("BackButton"),x=m("CardTitle"),C=m("CardDescription"),V=m("CardHeader"),f=m("Label"),S=m("Input"),w=m("FormError"),g=m("InputContainer"),G=m("LabelXS"),$=m("CardContent"),H=m("Button"),Q=m("CardFooter"),X=m("Card"),z=m("Layout");return a(),_(z,{heading:"Edit BOM Details"},{"header-actions":n(()=>[r(O)]),default:n(()=>[t("div",Z,[r(X,{class:"w-full"},{default:n(()=>[r(V,null,{default:n(()=>[r(x,null,{default:n(()=>e[13]||(e[13]=[u("FG Details")])),_:1}),r(C,null,{default:n(()=>e[14]||(e[14]=[u("Input all the important fields")])),_:1})]),_:1}),r($,{class:"grid sm:grid-cols-2 gap-5"},{default:n(()=>[r(g,null,{default:n(()=>[r(f,null,{default:n(()=>e[15]||(e[15]=[u("POS Code")])),_:1}),r(S,{modelValue:o(l).POSCode,"onUpdate:modelValue":e[0]||(e[0]=s=>o(l).POSCode=s)},null,8,["modelValue"]),o(l).errors.POSCode?(a(),_(w,{key:0},{default:n(()=>[u(d(o(l).errors.POSCode),1)]),_:1})):y("",!0)]),_:1}),r(g,null,{default:n(()=>[r(f,null,{default:n(()=>e[16]||(e[16]=[u("POS Desc")])),_:1}),r(S,{modelValue:o(l).POSDescription,"onUpdate:modelValue":e[1]||(e[1]=s=>o(l).POSDescription=s)},null,8,["modelValue"]),o(l).errors.POSDescription?(a(),_(w,{key:0},{default:n(()=>[u(d(o(l).errors.POSDescription),1)]),_:1})):y("",!0)]),_:1}),r(g,null,{default:n(()=>[r(f,null,{default:n(()=>e[17]||(e[17]=[u("Category")])),_:1}),r(o(M),{modelValue:o(l).Category,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).Category=s),options:o(q),optionLabel:"label",optionValue:"value",placeholder:"Select a Category"},null,8,["modelValue","options"]),o(l).errors.Category?(a(),_(w,{key:0},{default:n(()=>[u(d(o(l).errors.Category),1)]),_:1})):y("",!0)]),_:1}),r(g,null,{default:n(()=>[r(f,null,{default:n(()=>e[18]||(e[18]=[u("Sub Category")])),_:1}),r(S,{modelValue:o(l).SubCategory,"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).SubCategory=s)},null,8,["modelValue"]),o(l).errors.SubCategory?(a(),_(w,{key:0},{default:n(()=>[u(d(o(l).errors.SubCategory),1)]),_:1})):y("",!0)]),_:1}),r(g,null,{default:n(()=>[r(f,null,{default:n(()=>e[19]||(e[19]=[u("SRP")])),_:1}),r(S,{modelValue:o(l).SRP,"onUpdate:modelValue":e[4]||(e[4]=s=>o(l).SRP=s),type:"number"},null,8,["modelValue"]),o(l).errors.SRP?(a(),_(w,{key:0},{default:n(()=>[u(d(o(l).errors.SRP),1)]),_:1})):y("",!0)]),_:1}),r(g,null,{default:n(()=>[r(f,null,{default:n(()=>e[20]||(e[20]=[u("Delivery Price")])),_:1}),r(S,{modelValue:o(l).DeliveryPrice,"onUpdate:modelValue":e[5]||(e[5]=s=>o(l).DeliveryPrice=s),type:"number"},null,8,["modelValue"]),o(l).errors.DeliveryPrice?(a(),_(w,{key:0},{default:n(()=>[u(d(o(l).errors.DeliveryPrice),1)]),_:1})):y("",!0)]),_:1}),r(g,null,{default:n(()=>[r(f,null,{default:n(()=>e[21]||(e[21]=[u("Table Vibe Price")])),_:1}),r(S,{modelValue:o(l).TableVibePrice,"onUpdate:modelValue":e[6]||(e[6]=s=>o(l).TableVibePrice=s),type:"number"},null,8,["modelValue"]),o(l).errors.TableVibePrice?(a(),_(w,{key:0},{default:n(()=>[u(d(o(l).errors.TableVibePrice),1)]),_:1})):y("",!0)]),_:1}),r(g,null,{default:n(()=>[r(G,null,{default:n(()=>e[22]||(e[22]=[u("Active Status")])),_:1}),r(o(M),{modelValue:o(l).is_active,"onUpdate:modelValue":e[7]||(e[7]=s=>o(l).is_active=s),options:E.value,optionLabel:"label",optionValue:"value",placeholder:"Select a Status"},null,8,["modelValue","options"]),o(l).errors.is_active?(a(),_(w,{key:0},{default:n(()=>[u(d(o(l).errors.is_active),1)]),_:1})):y("",!0)]),_:1})]),_:1}),r(Q,{class:"justify-end"},{default:n(()=>[r(H,{onClick:R,loading:L.value},{default:n(()=>e[23]||(e[23]=[u("Update FG Details")])),_:1},8,["loading"])]),_:1})]),_:1}),t("div",ee,[e[41]||(e[41]=t("div",{class:"px-4 py-3 border-b"},[t("span",{class:"font-semibold text-gray-700"},"Ingredients")],-1)),t("div",te,[t("table",se,[e[39]||(e[39]=t("colgroup",null,[t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"33.3333%"}}),t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"16.6666%"}})],-1)),t("thead",oe,[t("tr",le,[t("th",{class:k(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="inventory_code"}]),onClick:e[8]||(e[8]=s=>P("inventory_code"))},[t("div",ne,[e[26]||(e[26]=t("span",{class:"truncate"},"Item Code",-1)),i.value==="inventory_code"?(a(),p("span",re,[v.value==="asc"?(a(),p("svg",ae,e[24]||(e[24]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",ue,e[25]||(e[25]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):y("",!0)])],2),t("th",{class:k(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="name"}]),onClick:e[9]||(e[9]=s=>P("name"))},[t("div",ie,[e[29]||(e[29]=t("span",{class:"truncate"},"Name",-1)),i.value==="name"?(a(),p("span",de,[v.value==="asc"?(a(),p("svg",pe,e[27]||(e[27]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",ce,e[28]||(e[28]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):y("",!0)])],2),t("th",{class:k(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="assembly"}]),onClick:e[10]||(e[10]=s=>P("assembly"))},[t("div",me,[e[32]||(e[32]=t("span",{class:"truncate"},"Assembly",-1)),i.value==="assembly"?(a(),p("span",ye,[v.value==="asc"?(a(),p("svg",ve,e[30]||(e[30]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",fe,e[31]||(e[31]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):y("",!0)])],2),t("th",{class:k(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="quantity"}]),onClick:e[11]||(e[11]=s=>P("quantity"))},[t("div",we,[e[35]||(e[35]=t("span",{class:"truncate"},"Quantity",-1)),i.value==="quantity"?(a(),p("span",ge,[v.value==="asc"?(a(),p("svg",be,e[33]||(e[33]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",ke,e[34]||(e[34]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):y("",!0)])],2),t("th",{class:k(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":i.value==="uom"}]),onClick:e[12]||(e[12]=s=>P("uom"))},[t("div",_e,[e[38]||(e[38]=t("span",{class:"truncate"},"UOM",-1)),i.value==="uom"?(a(),p("span",xe,[v.value==="asc"?(a(),p("svg",Ce,e[36]||(e[36]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(a(),p("svg",Se,e[37]||(e[37]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):y("",!0)])],2)])]),t("tbody",Pe,[(a(!0),p(I,null,F(N.value,s=>(a(),p("tr",{key:s.id,class:"border-t"},[t("td",{class:k(["px-4 py-3 align-top whitespace-nowrap overflow-hidden text-ellipsis",{"bg-gray-50":i.value==="inventory_code"}])},d(s.inventory_code),3),t("td",{class:k(["px-4 py-3 align-top",{"bg-gray-50":i.value==="name"}])},[t("div",{class:"truncate",title:s.name},d(s.name),9,Ve)],2),t("td",{class:k(["px-4 py-3 align-top whitespace-nowrap overflow-hidden text-ellipsis",{"bg-gray-50":i.value==="assembly"}])},d(s.assembly??"-"),3),t("td",{class:k(["px-4 py-3 align-top whitespace-nowrap",{"bg-gray-50":i.value==="quantity"}])},d(s.quantity),3),t("td",{class:k(["px-4 py-3 align-top whitespace-nowrap",{"bg-gray-50":i.value==="uom"}])},d(s.uom),3)]))),128))])])]),t("div",he,[(a(!0),p(I,null,F(N.value,s=>(a(),p("div",{key:"m-"+s.id,class:"border rounded p-3"},[t("div",Be,[u(d(s.name)+" ",1),t("span",De,"("+d(s.inventory_code)+")",1)]),t("div",Oe,"Assembly: "+d(s.assembly??"-"),1),t("div",je,"UOM: "+d(s.uom),1),t("div",Ne,"Quantity: "+d(s.quantity),1)]))),128))]),t("div",Me,[t("p",null,[e[40]||(e[40]=u("Total Items: ")),t("span",Fe,d(D.value.length),1)])])])])]),_:1})}}};export{Ue as default};
