import{u as ie}from"./useSelectOptions-Ci2WUICq.js";import{f as Le,x as M,Q as z,y as L,N as G,T as me,l as Oe,r as d,o as p,d as w,a as t,w as l,b as n,u as s,F as q,e as $,t as u,g as o,h as V,i as Be,c as h}from"./app-p8ycGfai.js";import{l as Fe}from"./lodash-Z9yJD-f9.js";import{u as je}from"./useToast-BAk2IYqi.js";import{u as He}from"./useAuth-CsB0rIGq.js";const Ie=["href"],qe=["href"],Ae=["href"],Ee={key:0,class:"ml-1"},$e={key:0,class:"mb-8"},Pe={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-50 via-white to-indigo-50 border border-gray-200/50 shadow-xl hover:shadow-2xl transition-all duration-500 ease-out"},Qe={class:"relative p-8 md:p-10"},Re={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"},Ne={class:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-gray-900 via-blue-800 to-purple-800 bg-clip-text text-transparent mb-2"},ze={class:"mt-4 md:mt-0 flex items-center gap-2 bg-white/60 backdrop-blur-sm rounded-full px-4 py-2 border border-gray-200/50"},Ge={class:"text-sm font-semibold text-gray-700"},Xe={class:"mb-8 p-4 bg-white/40 backdrop-blur-sm rounded-xl border border-gray-200/50"},Je={class:"flex items-center gap-3 mb-2"},Ke={class:"text-lg font-semibold text-gray-900 truncate"},We={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ye={class:"relative group"},Ze={class:"relative bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-blue-200/50 hover:border-blue-300/70 transition-all duration-300"},et={class:"text-2xl font-bold text-gray-900"},tt={class:"text-xs text-gray-500 mt-1"},lt={class:"relative group"},ot={class:"relative bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-purple-200/50 hover:border-purple-300/70 transition-all duration-300"},at={class:"flex items-center justify-between mb-3"},nt={class:"flex items-center gap-1"},st={class:"text-xs font-medium text-purple-600"},rt={class:"text-2xl font-bold text-gray-900"},ut={class:"relative group"},dt={class:"relative bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-green-200/50 hover:border-green-300/70 transition-all duration-300"},it={class:"text-2xl font-bold text-gray-900"},mt={class:"text-xs text-gray-500 mt-1"},ft={class:"relative group"},pt={class:"relative bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-amber-200/50 hover:border-amber-300/70 transition-all duration-300"},gt={class:"text-2xl font-bold text-gray-900"},bt={class:"mt-8 p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200/50"},ct={class:"flex flex-wrap items-center justify-between gap-4"},xt={class:"flex items-center gap-6"},vt={class:"flex items-center gap-2"},yt={class:"text-sm font-semibold text-gray-900"},_t={class:"flex items-center gap-2"},kt={class:"text-sm font-semibold text-gray-900"},St={class:"text-xs text-gray-500"},Mt={__name:"Index",props:{products:{type:Object,required:!0},branches:{type:Object,required:!0},costCenters:{type:Object,required:!0},storeSummary:{type:Object,default:null}},setup(m){Le();const{toast:v}=je(),{options:O}=ie(m.branches),{options:fe}=ie(m.costCenters),b=M(z().props.filters.branchId||O.value[0].value);let U=M(z().props.filters.search);L(b,i=>{console.log(z()),G.get(route("stock-management.index"),{branchId:i,search:U.value,page:1},{preserveScroll:!0,preserveState:!0,replace:!0})}),L(U,Fe.throttle(function(i){G.get(route("stock-management.index"),{search:i,branchId:b.value,page:1},{preserveScroll:!0,preserveState:!0,replace:!0})},500));const B=M(!1),F=M(!1),r=me({id:null,store_branch_id:null,cost_center_id:null,quantity:null,unit_cost:null,transaction_date:null,remarks:null});L(B,i=>{i||(r.reset(),r.clearErrors())}),L(F,i=>{i||(r.reset(),r.clearErrors())});const X=i=>{r.id=i,r.store_branch_id=b.value,B.value=!0},J=i=>{r.id=i,r.store_branch_id=b.value,F.value=!0},pe=()=>{r.post(route("stock-management.log-usage"),{onSuccess:()=>{v.add({severity:"success",summary:"Success",detail:"Usage logged Successfully.",life:5e3}),B.value=!1},onError:()=>{v.add({severity:"error",summary:"Error",detail:"An error occurred while trying to log the usage.",life:5e3})}})},ge=()=>{r.post(route("stock-management.add-quantity"),{onSuccess:()=>{v.add({severity:"success",summary:"Success",detail:"Quantity added Successfully.",life:1e4}),F.value=!1},onError:()=>{v.add({severity:"error",summary:"Error",detail:"An error occurred while trying to add quantity.",life:1e4})}})},K=(i,e)=>{G.get(route("stock-management.show",i),{branchId:e},{})},{hasAccess:T}=He(),be=Oe(()=>route("stock-management.export",{search:U.value,branchId:b.value})),j=M(!1),ce=()=>{j.value=!0},xe=[{label:"Add Quantity",value:"add-quantity"},{label:"Log Usage",value:"log-usage"},{label:"SOH Update",value:"soh-update"}],c=me({action:null,branch:b.value,file:null});M(null),L(()=>c.action,i=>{console.log(i)});const A=M(!1),ve=()=>{const i=c.action=="add-quantity"?"stock-management.import-add":c.action=="log-usage"?"stock-management.import-log-usage":"stock-management.import-soh-update";c.branch=b.value,A.value=!0,axios.post(route(i),c,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{console.log(e),e.data.errors&&e.data.errors.length>0?(e.data.errors.forEach(y=>{v.add({severity:"error",summary:"Import Error",detail:y,life:5e3})}),e.data.imported&&e.data.imported.length>0&&v.add({severity:"warning",summary:"Partial Import",detail:`Successfully imported ${e.data.imported.length} rows`,life:3e3})):v.add({severity:"success",summary:"Success",detail:"Stock Updated Successfully.",life:3e3})}).catch(e=>{var y,D;console.log(e),v.add({severity:"error",summary:"Error",detail:((D=(y=e.response)==null?void 0:y.data)==null?void 0:D.message)||"An unexpected error occurred during import.",life:3e3})}).finally(()=>{j.value=!1,A.value=!1})};L(j,i=>{i||(c.reset(),c.clearErrors())});const W=i=>(console.log(`Product ID: ${i.id}, SOH: ${i.stock_on_hand}, Name: ${i.name}`),parseFloat(i.stock_on_hand).toFixed(2)),Y=i=>(console.log(`Product ID: ${i.id}, Recorded Used: ${i.recorded_used}, Name: ${i.name}`),parseFloat(i.recorded_used).toFixed(2)),Z=i=>parseFloat(i.total_base_uom_soh||0).toFixed(2);return(i,e)=>{const y=d("DialogTitle"),D=d("DialogDescription"),P=d("DialogHeader"),Q=d("Label"),ee=d("SelectValue"),te=d("SelectTrigger"),ye=d("SelectLabel"),le=d("SelectItem"),oe=d("SelectGroup"),ae=d("SelectContent"),ne=d("SelectShad"),g=d("InputContainer"),E=d("Select"),C=d("Input"),f=d("LabelXS"),_e=d("Loading"),_=d("Button"),H=d("DivFlexCenter"),R=d("DialogContent"),N=d("Dialog"),ke=d("SearchBar"),k=d("TH"),Se=d("TableHead"),S=d("TD"),se=d("ShowButton"),we=d("TableBody"),Ve=d("Table"),he=d("MobileTableHeading"),Ue=d("MobileTableRow"),Ce=d("MobileTableContainer"),Me=d("Pagination"),Te=d("TableContainer"),x=d("FormError"),re=d("Textarea"),ue=d("DivFlexCol"),de=d("DialogFooter"),De=d("Layout");return p(),w(q,null,[t(N,{open:j.value,"onUpdate:open":e[3]||(e[3]=a=>j.value=a)},{default:l(()=>[t(R,{class:"sm:max-w-[600px]"},{default:l(()=>[t(P,null,{default:l(()=>[t(y,null,{default:l(()=>e[18]||(e[18]=[n("Update Stock")])),_:1}),t(D,null,{default:l(()=>e[19]||(e[19]=[n(" Please input all the required fields. ")])),_:1})]),_:1}),t(g,null,{default:l(()=>[t(Q,null,{default:l(()=>e[20]||(e[20]=[n("Action")])),_:1}),t(ne,{modelValue:s(c).action,"onUpdate:modelValue":e[0]||(e[0]=a=>s(c).action=a)},{default:l(()=>[t(te,null,{default:l(()=>[t(ee,{placeholder:"Select from options"})]),_:1}),t(ae,null,{default:l(()=>[t(oe,null,{default:l(()=>[t(ye,null,{default:l(()=>e[21]||(e[21]=[n("Options")])),_:1}),(p(),w(q,null,$(xe,a=>t(le,{value:a.value},{default:l(()=>[n(u(a.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(g,null,{default:l(()=>[t(Q,null,{default:l(()=>e[22]||(e[22]=[n("Store Branch")])),_:1}),t(E,{filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:s(O),optionLabel:"label",optionValue:"value",modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=a=>b.value=a),disabled:""},null,8,["options","modelValue"])]),_:1}),t(g,null,{default:l(()=>[t(Q,null,{default:l(()=>e[23]||(e[23]=[n("Excel File")])),_:1}),t(C,{type:"file",onInput:e[2]||(e[2]=a=>s(c).file=a.target.files[0])})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[24]||(e[24]=[n("Accepted Excel File Format: ")])),_:1}),o("a",{href:i.route("stock-management.export-add"),class:"text-xs text-blue-500 underline"},"Add Quantity",8,Ie),o("a",{href:i.route("stock-management.export-log"),class:"text-xs text-blue-500 underline"},"Log Usage",8,qe),o("a",{href:i.route("stock-management.export-soh"),class:"text-xs text-blue-500 underline"},"SOH Update",8,Ae)]),_:1}),t(H,{class:"justify-end"},{default:l(()=>[t(_,{disabled:A.value,onClick:ve},{default:l(()=>[e[25]||(e[25]=n("Submit ")),A.value?(p(),w("span",Ee,[t(_e)])):V("",!0)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),t(De,{heading:"Stock Management",hasExcelDownload:!0,exportRoute:be.value},{default:l(()=>[t(Te,null,{default:l(()=>[t(H,{class:"justify-between sm:flex-row flex-col gap-3"},{default:l(()=>[t(ke,null,{default:l(()=>[t(C,{class:"pl-10",placeholder:"Search...",modelValue:s(U),"onUpdate:modelValue":e[4]||(e[4]=a=>Be(U)?U.value=a:U=a)},null,8,["modelValue"])]),_:1}),t(H,{class:"gap-3"},{default:l(()=>[t(E,{filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:s(O),optionLabel:"label",optionValue:"value",modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=a=>b.value=a)},null,8,["options","modelValue"]),t(_,{onClick:ce},{default:l(()=>e[26]||(e[26]=[n("Update Stock")])),_:1})]),_:1})]),_:1}),m.storeSummary?(p(),w("div",$e,[o("div",Pe,[e[50]||(e[50]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-400/5 to-purple-400/5 backdrop-blur-3xl"},null,-1)),e[51]||(e[51]=o("div",{class:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"},null,-1)),e[52]||(e[52]=o("div",{class:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-green-400/10 to-blue-400/10 rounded-full blur-2xl transform -translate-x-1/4 translate-y-1/4"},null,-1)),o("div",Qe,[o("div",Re,[o("div",null,[o("h2",Ne,u(m.storeSummary.store),1),e[27]||(e[27]=o("div",{class:"flex items-center gap-2"},[o("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o("span",{class:"text-sm font-medium text-gray-600"},"Primary BaseUOM Analysis")],-1))]),o("div",ze,[e[28]||(e[28]=o("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),o("span",Ge,u(m.storeSummary.base_uom),1)])]),o("div",Xe,[o("div",Je,[e[30]||(e[30]=o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),o("div",null,[e[29]||(e[29]=o("h3",{class:"text-sm font-medium text-gray-600"},"Primary Item",-1)),o("p",Ke,u(m.storeSummary.primary_item.formatted_name),1)])])]),o("div",We,[o("div",Ye,[e[33]||(e[33]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl transform scale-95 group-hover:scale-100 transition-transform duration-300 opacity-10"},null,-1)),o("div",Ze,[e[31]||(e[31]=o("div",{class:"flex items-center justify-between mb-3"},[o("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])]),o("div",{class:"flex items-center gap-1"},[o("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),o("span",{class:"text-xs font-medium text-green-600"},"Active")])],-1)),e[32]||(e[32]=o("h4",{class:"text-sm font-medium text-gray-600 mb-1"},"Total SOH",-1)),o("p",et,u(parseFloat(m.storeSummary.total_soh).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),o("p",tt,u(m.storeSummary.item_count)+" items",1)])]),o("div",lt,[e[38]||(e[38]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl transform scale-95 group-hover:scale-100 transition-transform duration-300 opacity-10"},null,-1)),o("div",ot,[o("div",at,[e[35]||(e[35]=o("div",{class:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})])],-1)),o("div",nt,[e[34]||(e[34]=o("div",{class:"w-2 h-2 bg-purple-500 rounded-full"},null,-1)),o("span",st,u(m.storeSummary.base_uom),1)])]),e[36]||(e[36]=o("h4",{class:"text-sm font-medium text-gray-600 mb-1"},"Total BaseUOM SOH",-1)),o("p",rt,u(parseFloat(m.storeSummary.total_base_uom_soh).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),e[37]||(e[37]=o("p",{class:"text-xs text-gray-500 mt-1"},"Base units",-1))])]),o("div",ut,[e[41]||(e[41]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-green-500 to-green-600 rounded-xl transform scale-95 group-hover:scale-100 transition-transform duration-300 opacity-10"},null,-1)),o("div",dt,[e[39]||(e[39]=o("div",{class:"flex items-center justify-between mb-3"},[o("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])]),o("div",{class:"flex items-center gap-1"},[o("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),o("span",{class:"text-xs font-medium text-blue-600"},"Current")])],-1)),e[40]||(e[40]=o("h4",{class:"text-sm font-medium text-gray-600 mb-1"},"Items Found",-1)),o("p",it,u(m.storeSummary.dashboard_stats.total_items.toLocaleString()),1),o("p",mt,"In "+u(m.storeSummary.dashboard_stats.total_unique_base_uoms)+" BaseUOMs",1)])]),o("div",ft,[e[45]||(e[45]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl transform scale-95 group-hover:scale-100 transition-transform duration-300 opacity-10"},null,-1)),o("div",pt,[e[42]||(e[42]=o("div",{class:"flex items-center justify-between mb-3"},[o("div",{class:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),o("div",{class:"flex items-center gap-1"},[o("div",{class:"w-2 h-2 bg-amber-500 rounded-full"}),o("span",{class:"text-xs font-medium text-amber-600"},"Live")])],-1)),e[43]||(e[43]=o("h4",{class:"text-sm font-medium text-gray-600 mb-1"},"Coverage",-1)),o("p",gt,u(Math.round(m.storeSummary.total_base_uom_soh/Math.max(m.storeSummary.dashboard_stats.overall_total_base_uom_soh,1)*100))+"%",1),e[44]||(e[44]=o("p",{class:"text-xs text-gray-500 mt-1"},"Of total inventory",-1))])])]),o("div",bt,[o("div",ct,[o("div",xt,[o("div",vt,[e[46]||(e[46]=o("div",{class:"w-3 h-3 bg-blue-500 rounded-full"},null,-1)),e[47]||(e[47]=o("span",{class:"text-sm text-gray-600"},"Total Items:",-1)),o("span",yt,u(m.storeSummary.dashboard_stats.total_items.toLocaleString()),1)]),o("div",_t,[e[48]||(e[48]=o("div",{class:"w-3 h-3 bg-purple-500 rounded-full"},null,-1)),e[49]||(e[49]=o("span",{class:"text-sm text-gray-600"},"BaseUOMs:",-1)),o("span",kt,u(m.storeSummary.dashboard_stats.total_unique_base_uoms),1)])]),o("div",St," Last updated: "+u(new Date().toLocaleTimeString()),1)])])])])])):V("",!0),t(Ve,null,{default:l(()=>[t(Se,null,{default:l(()=>[t(k,null,{default:l(()=>e[53]||(e[53]=[n("Name")])),_:1}),t(k,null,{default:l(()=>e[54]||(e[54]=[n("Code")])),_:1}),t(k,null,{default:l(()=>e[55]||(e[55]=[n("UOM")])),_:1}),t(k,null,{default:l(()=>e[56]||(e[56]=[n("Alt UOM")])),_:1}),t(k,null,{default:l(()=>e[57]||(e[57]=[n("SOH")])),_:1}),t(k,null,{default:l(()=>e[58]||(e[58]=[n("Total BaseUOM SOH")])),_:1}),t(k,null,{default:l(()=>e[59]||(e[59]=[n("Recorded Used")])),_:1}),t(k,null,{default:l(()=>e[60]||(e[60]=[n("Actions")])),_:1})]),_:1}),t(we,null,{default:l(()=>[(p(!0),w(q,null,$(m.products.data,a=>(p(),w("tr",{key:a.id},[t(S,null,{default:l(()=>[n(u(a.name),1)]),_:2},1024),t(S,null,{default:l(()=>[n(u(a.inventory_code),1)]),_:2},1024),t(S,null,{default:l(()=>[n(u(a.uom),1)]),_:2},1024),t(S,null,{default:l(()=>[n(u(a.alt_uom),1)]),_:2},1024),t(S,null,{default:l(()=>[n(u(W(a)),1)]),_:2},1024),t(S,null,{default:l(()=>[n(u(Z(a)),1)]),_:2},1024),t(S,null,{default:l(()=>[n(u(Y(a)),1)]),_:2},1024),t(S,null,{default:l(()=>[t(H,{class:"gap-3"},{default:l(()=>[s(T)("view stock management history")?(p(),h(se,{key:0,onClick:I=>K(a.id,b.value)},null,8,["onClick"])):V("",!0),s(T)("log stock usage")?(p(),h(_,{key:1,onClick:I=>X(a.id),variant:"link",class:"text-xs text-orange-500"},{default:l(()=>e[61]||(e[61]=[n("Log Usage")])),_:2},1032,["onClick"])):V("",!0),s(T)("add stock quantity")?(p(),h(_,{key:2,onClick:I=>J(a.id),variant:"link",class:"text-xs text-green-500"},{default:l(()=>e[62]||(e[62]=[n("Add Quantity")])),_:2},1032,["onClick"])):V("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(Ce,null,{default:l(()=>[(p(!0),w(q,null,$(m.products.data,a=>(p(),h(Ue,{key:a.id},{default:l(()=>[t(he,{title:`${a.name} (${a.inventory_code})`},{default:l(()=>[s(T)("view stock management history")?(p(),h(se,{key:0,onClick:I=>K(a.id,b.value)},null,8,["onClick"])):V("",!0)]),_:2},1032,["title"]),t(f,null,{default:l(()=>[n("UOM: "+u(a.uom),1)]),_:2},1024),t(f,null,{default:l(()=>[n("Alt UOM: "+u(a.alt_uom),1)]),_:2},1024),t(f,null,{default:l(()=>[n("SOH: "+u(W(a)),1)]),_:2},1024),t(f,null,{default:l(()=>[n("Total BaseUOM SOH: "+u(Z(a)),1)]),_:2},1024),t(f,null,{default:l(()=>[n("Estimated Used: "+u(a.estimated_used)+" "+u(a.ingredient_units),1)]),_:2},1024),t(f,null,{default:l(()=>[n("Recorded Used: "+u(Y(a)),1)]),_:2},1024),t(H,{class:"gap-3"},{default:l(()=>[s(T)("log stock usage")?(p(),h(_,{key:0,onClick:I=>X(a.id),variant:"link",class:"text-xs text-orange-500 p-0"},{default:l(()=>e[63]||(e[63]=[n("Log Usage")])),_:2},1032,["onClick"])):V("",!0),s(T)("add stock quantity")?(p(),h(_,{key:1,onClick:I=>J(a.id),variant:"link",class:"text-xs teMNaxt-green-500 p-0"},{default:l(()=>e[64]||(e[64]=[n("Add Quantity")])),_:2},1032,["onClick"])):V("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Me,{data:m.products},null,8,["data"])]),_:1}),t(N,{open:B.value,"onUpdate:open":e[11]||(e[11]=a=>B.value=a)},{default:l(()=>[t(R,{class:"sm:max-w-[600px]"},{default:l(()=>[t(P,null,{default:l(()=>[t(y,null,{default:l(()=>e[65]||(e[65]=[n("Log Usage")])),_:1}),t(D,null,{default:l(()=>e[66]||(e[66]=[n(" Please input all the required fields. ")])),_:1})]),_:1}),t(ue,{class:"gap-3"},{default:l(()=>[t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[67]||(e[67]=[n("Store Branch")])),_:1}),t(E,{disabled:"",filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:s(O),optionLabel:"label",optionValue:"value",modelValue:s(r).store_branch_id,"onUpdate:modelValue":e[6]||(e[6]=a=>s(r).store_branch_id=a)},null,8,["options","modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.store_branch_id),1)]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[68]||(e[68]=[n("Cost Center")])),_:1}),t(ne,{modelValue:s(r).cost_center_id,"onUpdate:modelValue":e[7]||(e[7]=a=>s(r).cost_center_id=a)},{default:l(()=>[t(te,null,{default:l(()=>[t(ee,{placeholder:"Select from choices"})]),_:1}),t(ae,null,{default:l(()=>[t(oe,null,{default:l(()=>[(p(!0),w(q,null,$(s(fe),a=>(p(),h(le,{value:a.value},{default:l(()=>[n(u(a.label),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.cost_center_id),1)]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[69]||(e[69]=[n("Quantity Used")])),_:1}),t(C,{type:"number",modelValue:s(r).quantity,"onUpdate:modelValue":e[8]||(e[8]=a=>s(r).quantity=a)},null,8,["modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.quantity),1)]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[70]||(e[70]=[n("Transaction Date")])),_:1}),t(C,{type:"date",modelValue:s(r).transaction_date,"onUpdate:modelValue":e[9]||(e[9]=a=>s(r).transaction_date=a)},null,8,["modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.transaction_date),1)]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[71]||(e[71]=[n("Remarks")])),_:1}),t(re,{type:"number",modelValue:s(r).remarks,"onUpdate:modelValue":e[10]||(e[10]=a=>s(r).remarks=a)},null,8,["modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.remarks),1)]),_:1})]),_:1})]),_:1}),t(de,{class:"justify-end"},{default:l(()=>[t(_,{onClick:pe},{default:l(()=>e[72]||(e[72]=[n("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(N,{open:F.value,"onUpdate:open":e[17]||(e[17]=a=>F.value=a)},{default:l(()=>[t(R,{class:"sm:max-w-[600px]"},{default:l(()=>[t(P,null,{default:l(()=>[t(y,null,{default:l(()=>e[73]||(e[73]=[n("Add Quantity")])),_:1}),t(D,null,{default:l(()=>e[74]||(e[74]=[n(" Please input all the required fields. ")])),_:1})]),_:1}),t(ue,{class:"gap-3"},{default:l(()=>[t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[75]||(e[75]=[n("Store Branch")])),_:1}),t(E,{disabled:"",filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:s(O),optionLabel:"label",optionValue:"value",modelValue:s(r).store_branch_id,"onUpdate:modelValue":e[12]||(e[12]=a=>s(r).store_branch_id=a)},null,8,["options","modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.store_branch_id),1)]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[76]||(e[76]=[n("Quantity")])),_:1}),t(C,{type:"number",modelValue:s(r).quantity,"onUpdate:modelValue":e[13]||(e[13]=a=>s(r).quantity=a)},null,8,["modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.quantity),1)]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[77]||(e[77]=[n("Unit Cost")])),_:1}),t(C,{type:"number",modelValue:s(r).unit_cost,"onUpdate:modelValue":e[14]||(e[14]=a=>s(r).unit_cost=a)},null,8,["modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.unit_cost),1)]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[78]||(e[78]=[n("Transaction Date")])),_:1}),t(C,{type:"date",modelValue:s(r).transaction_date,"onUpdate:modelValue":e[15]||(e[15]=a=>s(r).transaction_date=a)},null,8,["modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.transaction_date),1)]),_:1})]),_:1}),t(g,null,{default:l(()=>[t(f,null,{default:l(()=>e[79]||(e[79]=[n("Remarks")])),_:1}),t(re,{type:"number",modelValue:s(r).remarks,"onUpdate:modelValue":e[16]||(e[16]=a=>s(r).remarks=a)},null,8,["modelValue"]),t(x,null,{default:l(()=>[n(u(s(r).errors.remarks),1)]),_:1})]),_:1})]),_:1}),t(de,{class:"justify-end"},{default:l(()=>[t(_,{onClick:ge},{default:l(()=>e[80]||(e[80]=[n("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["exportRoute"])],64)}}};export{Mt as default};
