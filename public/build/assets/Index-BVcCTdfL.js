import{u as le}from"./useSelectOptions-BcktnHf_.js";import{f as Ue,bn as Ce,x as M,Q,y as F,N as oe,T as ae,l as Me,r as i,o as p,c as x,w as l,a as t,b as s,d as T,h as y,g as o,u as n,e as E,t as d,F as A,j as R,i as Te,p as se,E as ne}from"./app-Bw_fMWAP.js";import{l as Le}from"./lodash-Cj3gZpb5.js";import{u as Oe}from"./useToast-CgNL_wIh.js";import{u as Be}from"./useAuth-CBAjI_yz.js";const je={class:"space-y-4"},Fe=["href"],Ie=["href"],qe=["href"],De={key:0,class:"ml-1"},He={key:0,class:"mb-8"},Ee={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-50 via-white to-indigo-50 border border-gray-200/50 shadow-xl hover:shadow-2xl transition-all duration-500 ease-out"},Ae={class:"relative p-8 md:p-10"},Pe={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"},Qe={class:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-gray-900 via-blue-800 to-purple-800 bg-clip-text text-transparent mb-2"},Re={class:"mt-4 md:mt-0 flex items-center gap-2 bg-white/60 backdrop-blur-sm rounded-full px-4 py-2 border border-gray-200/50"},$e={class:"text-sm font-semibold text-gray-700"},Ne={class:"mb-8 p-4 bg-white/40 backdrop-blur-sm rounded-xl border border-gray-200/50"},ze={class:"flex items-center gap-3 mb-2"},Ge={class:"text-lg font-semibold text-gray-900 truncate"},Xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Je={class:"relative group"},Ke={class:"relative bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-blue-200/50 hover:border-blue-300/70 transition-all duration-300"},We={class:"text-2xl font-bold text-gray-900"},Ye={class:"text-xs text-gray-500 mt-1"},Ze={class:"relative group"},et={class:"relative bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-purple-200/50 hover:border-purple-300/70 transition-all duration-300"},tt={class:"flex items-center justify-between mb-3"},lt={class:"flex items-center gap-1"},ot={class:"text-xs font-medium text-purple-600"},at={class:"text-2xl font-bold text-gray-900"},st={class:"relative group"},nt={class:"relative bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-green-200/50 hover:border-green-300/70 transition-all duration-300"},rt={class:"text-2xl font-bold text-gray-900"},dt={class:"text-xs text-gray-500 mt-1"},ut={class:"relative group"},it={class:"relative bg-white/60 backdrop-blur-sm rounded-xl p-6 border border-amber-200/50 hover:border-amber-300/70 transition-all duration-300"},mt={class:"text-2xl font-bold text-gray-900"},ft={class:"mt-8 p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl border border-gray-200/50"},pt={class:"flex flex-wrap items-center justify-between gap-4"},bt={class:"flex items-center gap-6"},gt={class:"flex items-center gap-2"},vt={class:"text-sm font-semibold text-gray-900"},ct={class:"flex items-center gap-2"},xt={class:"text-sm font-semibold text-gray-900"},yt={class:"text-xs text-gray-500"},_t={class:"space-y-4"},kt={class:"space-y-4"},Ct={__name:"Index",props:{products:{type:Object,required:!0},branches:{type:Object,required:!0},costCenters:{type:Object,required:!0},storeSummary:{type:Object,default:null}},setup(m){Ue();const{toast:_}=Oe();Ce(()=>{j.value=!1,L.value=!1,O.value=!1});const{options:I}=le(m.branches),{options:re}=le(m.costCenters),g=M(Q().props.filters.branchId||I.value[0].value);let V=M(Q().props.filters.search);F(g,u=>{console.log(Q()),oe.get(route("stock-management.index"),{branchId:u,search:V.value,page:1},{preserveScroll:!0,preserveState:!0,replace:!0})}),F(V,Le.throttle(function(u){oe.get(route("stock-management.index"),{search:u,branchId:g.value,page:1},{preserveScroll:!0,preserveState:!0,replace:!0})},500));const L=M(!1),O=M(!1),r=ae({id:null,store_branch_id:null,cost_center_id:null,quantity:null,unit_cost:null,transaction_date:null,remarks:null});F(L,u=>{u||(r.reset(),r.clearErrors())}),F(O,u=>{u||(r.reset(),r.clearErrors())});const $=u=>{r.id=u,r.store_branch_id=g.value,L.value=!0},N=u=>{r.id=u,r.store_branch_id=g.value,O.value=!0},de=()=>{r.post(route("stock-management.log-usage"),{onSuccess:()=>{_.add({severity:"success",summary:"Success",detail:"Usage logged Successfully.",life:5e3}),L.value=!1},onError:()=>{_.add({severity:"error",summary:"Error",detail:"An error occurred while trying to log the usage.",life:5e3})}})},ue=()=>{r.post(route("stock-management.add-quantity"),{onSuccess:()=>{_.add({severity:"success",summary:"Success",detail:"Quantity added Successfully.",life:1e4}),O.value=!1},onError:()=>{_.add({severity:"error",summary:"Error",detail:"An error occurred while trying to add quantity.",life:1e4})}})},{hasAccess:B}=Be(),ie=Me(()=>route("stock-management.export",{search:V.value,branchId:g.value})),j=M(!1),me=()=>{j.value=!0},fe=[{label:"Add Quantity",value:"add-quantity"},{label:"Log Usage",value:"log-usage"},{label:"SOH Update",value:"soh-update"}],v=ae({action:null,branch:g.value,file:null});M(null),F(()=>v.action,u=>{console.log(u)});const D=M(!1),pe=()=>{const u=v.action=="add-quantity"?"stock-management.import-add":v.action=="log-usage"?"stock-management.import-log-usage":"stock-management.import-soh-update";v.branch=g.value,D.value=!0,axios.post(route(u),v,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{console.log(e),e.data.errors&&e.data.errors.length>0?(e.data.errors.forEach(k=>{_.add({severity:"error",summary:"Import Error",detail:k,life:5e3})}),e.data.imported&&e.data.imported.length>0&&_.add({severity:"warning",summary:"Partial Import",detail:`Successfully imported ${e.data.imported.length} rows`,life:3e3})):_.add({severity:"success",summary:"Success",detail:"Stock Updated Successfully.",life:3e3})}).catch(e=>{var k,q;console.log(e),_.add({severity:"error",summary:"Error",detail:((q=(k=e.response)==null?void 0:k.data)==null?void 0:q.message)||"An unexpected error occurred during import.",life:3e3})}).finally(()=>{j.value=!1,D.value=!1})};F(j,u=>{u||(v.reset(),v.clearErrors())});const z=u=>(console.log(`Product ID: ${u.id}, SOH: ${u.stock_on_hand}, Name: ${u.name}`),parseFloat(u.stock_on_hand).toFixed(2)),G=u=>(console.log(`Product ID: ${u.id}, Recorded Used: ${u.recorded_used}, Name: ${u.name}`),parseFloat(u.recorded_used).toFixed(2)),X=u=>parseFloat(u.total_base_uom_soh||0).toFixed(2);return(u,e)=>{const k=i("Label"),q=i("SelectValue"),J=i("SelectTrigger"),be=i("SelectLabel"),K=i("SelectItem"),W=i("SelectGroup"),Y=i("SelectContent"),Z=i("SelectShad"),b=i("InputContainer"),H=i("Select"),U=i("Input"),f=i("LabelXS"),ge=i("Loading"),w=i("Button"),C=i("DivFlexCenter"),ve=i("SearchBar"),S=i("TH"),ce=i("TableHead"),h=i("TD"),xe=i("TableBody"),ye=i("Table"),_e=i("MobileTableHeading"),ke=i("MobileTableRow"),we=i("MobileTableContainer"),Se=i("Pagination"),he=i("TableContainer"),c=i("FormError"),ee=i("Textarea"),te=i("DivFlexCol"),Ve=i("Layout");return p(),x(Ve,{heading:"Stock Management",hasExcelDownload:!0,exportRoute:ie.value},{default:l(()=>[t(n(R),{visible:j.value,"onUpdate:visible":e[3]||(e[3]=a=>j.value=a),modal:"",header:"Update Stock",style:{width:"600px"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{footer:l(()=>[t(C,{class:"justify-end"},{default:l(()=>[t(w,{disabled:D.value,onClick:pe},{default:l(()=>[e[24]||(e[24]=s("Submit ")),D.value?(p(),T("span",De,[t(ge)])):y("",!0)]),_:1},8,["disabled"])]),_:1})]),default:l(()=>[o("div",je,[e[23]||(e[23]=o("p",{class:"text-sm text-gray-600"},"Please input all the required fields.",-1)),t(b,null,{default:l(()=>[t(k,null,{default:l(()=>e[18]||(e[18]=[s("Action")])),_:1}),t(Z,{modelValue:n(v).action,"onUpdate:modelValue":e[0]||(e[0]=a=>n(v).action=a)},{default:l(()=>[t(J,null,{default:l(()=>[t(q,{placeholder:"Select from options"})]),_:1}),t(Y,null,{default:l(()=>[t(W,null,{default:l(()=>[t(be,null,{default:l(()=>e[19]||(e[19]=[s("Options")])),_:1}),(p(),T(A,null,E(fe,a=>t(K,{value:a.value},{default:l(()=>[s(d(a.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:l(()=>[t(k,null,{default:l(()=>e[20]||(e[20]=[s("Store Branch")])),_:1}),t(H,{filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:n(I),optionLabel:"label",optionValue:"value",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value=a),disabled:""},null,8,["options","modelValue"])]),_:1}),t(b,null,{default:l(()=>[t(k,null,{default:l(()=>e[21]||(e[21]=[s("Excel File")])),_:1}),t(U,{type:"file",onInput:e[2]||(e[2]=a=>n(v).file=a.target.files[0])})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[22]||(e[22]=[s("Accepted Excel File Format: ")])),_:1}),o("a",{href:u.route("stock-management.export-add"),class:"text-xs text-blue-500 underline"},"Add Quantity",8,Fe),o("a",{href:u.route("stock-management.export-log"),class:"text-xs text-blue-500 underline"},"Log Usage",8,Ie),o("a",{href:u.route("stock-management.export-soh"),class:"text-xs text-blue-500 underline"},"SOH Update",8,qe)]),_:1})])]),_:1},8,["visible"]),t(he,null,{default:l(()=>[t(C,{class:"justify-between sm:flex-row flex-col gap-3"},{default:l(()=>[t(ve,null,{default:l(()=>[t(U,{class:"pl-10",placeholder:"Search...",modelValue:n(V),"onUpdate:modelValue":e[4]||(e[4]=a=>Te(V)?V.value=a:V=a)},null,8,["modelValue"])]),_:1}),t(C,{class:"gap-3"},{default:l(()=>[t(H,{filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:n(I),optionLabel:"label",optionValue:"value",modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=a=>g.value=a)},null,8,["options","modelValue"]),t(w,{onClick:me},{default:l(()=>e[25]||(e[25]=[s("Update Stock")])),_:1})]),_:1})]),_:1}),m.storeSummary?(p(),T("div",He,[o("div",Ee,[e[49]||(e[49]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-400/5 to-purple-400/5 backdrop-blur-3xl"},null,-1)),e[50]||(e[50]=o("div",{class:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"},null,-1)),e[51]||(e[51]=o("div",{class:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-green-400/10 to-blue-400/10 rounded-full blur-2xl transform -translate-x-1/4 translate-y-1/4"},null,-1)),o("div",Ae,[o("div",Pe,[o("div",null,[o("h2",Qe,d(m.storeSummary.store),1),e[26]||(e[26]=o("div",{class:"flex items-center gap-2"},[o("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o("span",{class:"text-sm font-medium text-gray-600"},"Primary BaseUOM Analysis")],-1))]),o("div",Re,[e[27]||(e[27]=o("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),o("span",$e,d(m.storeSummary.base_uom),1)])]),o("div",Ne,[o("div",ze,[e[29]||(e[29]=o("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center"},[o("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),o("div",null,[e[28]||(e[28]=o("h3",{class:"text-sm font-medium text-gray-600"},"Primary Item",-1)),o("p",Ge,d(m.storeSummary.primary_item.formatted_name),1)])])]),o("div",Xe,[o("div",Je,[e[32]||(e[32]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl transform scale-95 group-hover:scale-100 transition-transform duration-300 opacity-10"},null,-1)),o("div",Ke,[e[30]||(e[30]=o("div",{class:"flex items-center justify-between mb-3"},[o("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])]),o("div",{class:"flex items-center gap-1"},[o("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),o("span",{class:"text-xs font-medium text-green-600"},"Active")])],-1)),e[31]||(e[31]=o("h4",{class:"text-sm font-medium text-gray-600 mb-1"},"Total SOH",-1)),o("p",We,d(parseFloat(m.storeSummary.total_soh).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),o("p",Ye,d(m.storeSummary.item_count)+" items",1)])]),o("div",Ze,[e[37]||(e[37]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl transform scale-95 group-hover:scale-100 transition-transform duration-300 opacity-10"},null,-1)),o("div",et,[o("div",tt,[e[34]||(e[34]=o("div",{class:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})])],-1)),o("div",lt,[e[33]||(e[33]=o("div",{class:"w-2 h-2 bg-purple-500 rounded-full"},null,-1)),o("span",ot,d(m.storeSummary.base_uom),1)])]),e[35]||(e[35]=o("h4",{class:"text-sm font-medium text-gray-600 mb-1"},"Total BaseUOM SOH",-1)),o("p",at,d(parseFloat(m.storeSummary.total_base_uom_soh).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),e[36]||(e[36]=o("p",{class:"text-xs text-gray-500 mt-1"},"Base units",-1))])]),o("div",st,[e[40]||(e[40]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-green-500 to-green-600 rounded-xl transform scale-95 group-hover:scale-100 transition-transform duration-300 opacity-10"},null,-1)),o("div",nt,[e[38]||(e[38]=o("div",{class:"flex items-center justify-between mb-3"},[o("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})])]),o("div",{class:"flex items-center gap-1"},[o("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),o("span",{class:"text-xs font-medium text-blue-600"},"Current")])],-1)),e[39]||(e[39]=o("h4",{class:"text-sm font-medium text-gray-600 mb-1"},"Items Found",-1)),o("p",rt,d(m.storeSummary.dashboard_stats.total_items.toLocaleString()),1),o("p",dt,"In "+d(m.storeSummary.dashboard_stats.total_unique_base_uoms)+" BaseUOMs",1)])]),o("div",ut,[e[44]||(e[44]=o("div",{class:"absolute inset-0 bg-gradient-to-r from-amber-500 to-orange-600 rounded-xl transform scale-95 group-hover:scale-100 transition-transform duration-300 opacity-10"},null,-1)),o("div",it,[e[41]||(e[41]=o("div",{class:"flex items-center justify-between mb-3"},[o("div",{class:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"},[o("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),o("div",{class:"flex items-center gap-1"},[o("div",{class:"w-2 h-2 bg-amber-500 rounded-full"}),o("span",{class:"text-xs font-medium text-amber-600"},"Live")])],-1)),e[42]||(e[42]=o("h4",{class:"text-sm font-medium text-gray-600 mb-1"},"Coverage",-1)),o("p",mt,d(Math.round(m.storeSummary.total_base_uom_soh/Math.max(m.storeSummary.dashboard_stats.overall_total_base_uom_soh,1)*100))+"%",1),e[43]||(e[43]=o("p",{class:"text-xs text-gray-500 mt-1"},"Of total inventory",-1))])])]),o("div",ft,[o("div",pt,[o("div",bt,[o("div",gt,[e[45]||(e[45]=o("div",{class:"w-3 h-3 bg-blue-500 rounded-full"},null,-1)),e[46]||(e[46]=o("span",{class:"text-sm text-gray-600"},"Total Items:",-1)),o("span",vt,d(m.storeSummary.dashboard_stats.total_items.toLocaleString()),1)]),o("div",ct,[e[47]||(e[47]=o("div",{class:"w-3 h-3 bg-purple-500 rounded-full"},null,-1)),e[48]||(e[48]=o("span",{class:"text-sm text-gray-600"},"BaseUOMs:",-1)),o("span",xt,d(m.storeSummary.dashboard_stats.total_unique_base_uoms),1)])]),o("div",yt," Last updated: "+d(new Date().toLocaleTimeString()),1)])])])])])):y("",!0),t(ye,null,{default:l(()=>[t(ce,null,{default:l(()=>[t(S,null,{default:l(()=>e[52]||(e[52]=[s("Name")])),_:1}),t(S,null,{default:l(()=>e[53]||(e[53]=[s("Code")])),_:1}),t(S,null,{default:l(()=>e[54]||(e[54]=[s("UOM")])),_:1}),t(S,null,{default:l(()=>e[55]||(e[55]=[s("Alt UOM")])),_:1}),t(S,null,{default:l(()=>e[56]||(e[56]=[s("SOH")])),_:1}),t(S,null,{default:l(()=>e[57]||(e[57]=[s("Total BaseUOM SOH")])),_:1}),t(S,null,{default:l(()=>e[58]||(e[58]=[s("Recorded Used")])),_:1}),t(S,null,{default:l(()=>e[59]||(e[59]=[s("Actions")])),_:1})]),_:1}),t(xe,null,{default:l(()=>[(p(!0),T(A,null,E(m.products.data,a=>(p(),T("tr",{key:a.id},[t(h,null,{default:l(()=>[s(d(a.name),1)]),_:2},1024),t(h,null,{default:l(()=>[s(d(a.inventory_code),1)]),_:2},1024),t(h,null,{default:l(()=>[s(d(a.uom),1)]),_:2},1024),t(h,null,{default:l(()=>[s(d(a.alt_uom),1)]),_:2},1024),t(h,null,{default:l(()=>[s(d(z(a)),1)]),_:2},1024),t(h,null,{default:l(()=>[s(d(X(a)),1)]),_:2},1024),t(h,null,{default:l(()=>[s(d(G(a)),1)]),_:2},1024),t(h,null,{default:l(()=>[t(C,{class:"gap-3"},{default:l(()=>[n(B)("view stock management history")&&a.id?(p(),x(n(se),{key:0,href:u.route("stock-management.show",{id:a.id,branchId:g.value}),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded-md",title:"View Details"},{default:l(()=>[t(n(ne),{class:"h-5 w-5"})]),_:2},1032,["href"])):y("",!0),n(B)("log stock usage")?(p(),x(w,{key:1,onClick:P=>$(a.id),variant:"link",class:"text-xs text-orange-500"},{default:l(()=>e[60]||(e[60]=[s("Log Usage")])),_:2},1032,["onClick"])):y("",!0),n(B)("add stock quantity")?(p(),x(w,{key:2,onClick:P=>N(a.id),variant:"link",class:"text-xs text-green-500"},{default:l(()=>e[61]||(e[61]=[s("Add Quantity")])),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(we,null,{default:l(()=>[(p(!0),T(A,null,E(m.products.data,a=>(p(),x(ke,{key:a.id},{default:l(()=>[t(_e,{title:`${a.name} (${a.inventory_code})`},{default:l(()=>[n(B)("view stock management history")&&a.id?(p(),x(n(se),{key:0,href:u.route("stock-management.show",{id:a.id,branchId:g.value}),class:"p-1.5 text-gray-600 hover:bg-gray-100 rounded-md",title:"View Details"},{default:l(()=>[t(n(ne),{class:"h-5 w-5"})]),_:2},1032,["href"])):y("",!0)]),_:2},1032,["title"]),t(f,null,{default:l(()=>[s("UOM: "+d(a.uom),1)]),_:2},1024),t(f,null,{default:l(()=>[s("Alt UOM: "+d(a.alt_uom),1)]),_:2},1024),t(f,null,{default:l(()=>[s("SOH: "+d(z(a)),1)]),_:2},1024),t(f,null,{default:l(()=>[s("Total BaseUOM SOH: "+d(X(a)),1)]),_:2},1024),a.estimated_used&&a.ingredient_units?(p(),x(f,{key:0},{default:l(()=>[s("Estimated Used: "+d(a.estimated_used)+" "+d(a.ingredient_units),1)]),_:2},1024)):y("",!0),t(f,null,{default:l(()=>[s("Recorded Used: "+d(G(a)),1)]),_:2},1024),t(C,{class:"gap-3"},{default:l(()=>[n(B)("log stock usage")?(p(),x(w,{key:0,onClick:P=>$(a.id),variant:"link",class:"text-xs text-orange-500 p-0"},{default:l(()=>e[62]||(e[62]=[s("Log Usage")])),_:2},1032,["onClick"])):y("",!0),n(B)("add stock quantity")?(p(),x(w,{key:1,onClick:P=>N(a.id),variant:"link",class:"text-xs teMNaxt-green-500 p-0"},{default:l(()=>e[63]||(e[63]=[s("Add Quantity")])),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Se,{data:m.products},null,8,["data"])]),_:1}),t(n(R),{visible:L.value,"onUpdate:visible":e[11]||(e[11]=a=>L.value=a),modal:"",header:"Log Usage",style:{width:"600px"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{footer:l(()=>[t(C,{class:"justify-end"},{default:l(()=>[t(w,{onClick:de},{default:l(()=>e[70]||(e[70]=[s("Submit")])),_:1})]),_:1})]),default:l(()=>[o("div",_t,[e[69]||(e[69]=o("p",{class:"text-sm text-gray-600"},"Please input all the required fields.",-1)),t(te,{class:"gap-3"},{default:l(()=>[t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[64]||(e[64]=[s("Store Branch")])),_:1}),t(H,{disabled:"",filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:n(I),optionLabel:"label",optionValue:"value",modelValue:n(r).store_branch_id,"onUpdate:modelValue":e[6]||(e[6]=a=>n(r).store_branch_id=a)},null,8,["options","modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.store_branch_id),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[65]||(e[65]=[s("Cost Center")])),_:1}),t(Z,{modelValue:n(r).cost_center_id,"onUpdate:modelValue":e[7]||(e[7]=a=>n(r).cost_center_id=a)},{default:l(()=>[t(J,null,{default:l(()=>[t(q,{placeholder:"Select from choices"})]),_:1}),t(Y,null,{default:l(()=>[t(W,null,{default:l(()=>[(p(!0),T(A,null,E(n(re),a=>(p(),x(K,{value:a.value},{default:l(()=>[s(d(a.label),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.cost_center_id),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[66]||(e[66]=[s("Quantity Used")])),_:1}),t(U,{type:"number",modelValue:n(r).quantity,"onUpdate:modelValue":e[8]||(e[8]=a=>n(r).quantity=a)},null,8,["modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.quantity),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[67]||(e[67]=[s("Transaction Date")])),_:1}),t(U,{type:"date",modelValue:n(r).transaction_date,"onUpdate:modelValue":e[9]||(e[9]=a=>n(r).transaction_date=a)},null,8,["modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.transaction_date),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[68]||(e[68]=[s("Remarks")])),_:1}),t(ee,{type:"number",modelValue:n(r).remarks,"onUpdate:modelValue":e[10]||(e[10]=a=>n(r).remarks=a)},null,8,["modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.remarks),1)]),_:1})]),_:1})]),_:1})])]),_:1},8,["visible"]),t(n(R),{visible:O.value,"onUpdate:visible":e[17]||(e[17]=a=>O.value=a),modal:"",header:"Add Quantity",style:{width:"600px"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{footer:l(()=>[t(C,{class:"justify-end"},{default:l(()=>[t(w,{onClick:ue},{default:l(()=>e[77]||(e[77]=[s("Submit")])),_:1})]),_:1})]),default:l(()=>[o("div",kt,[e[76]||(e[76]=o("p",{class:"text-sm text-gray-600"},"Please input all the required fields.",-1)),t(te,{class:"gap-3"},{default:l(()=>[t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[71]||(e[71]=[s("Store Branch")])),_:1}),t(H,{disabled:"",filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:n(I),optionLabel:"label",optionValue:"value",modelValue:n(r).store_branch_id,"onUpdate:modelValue":e[12]||(e[12]=a=>n(r).store_branch_id=a)},null,8,["options","modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.store_branch_id),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[72]||(e[72]=[s("Quantity")])),_:1}),t(U,{type:"number",modelValue:n(r).quantity,"onUpdate:modelValue":e[13]||(e[13]=a=>n(r).quantity=a)},null,8,["modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.quantity),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[73]||(e[73]=[s("Unit Cost")])),_:1}),t(U,{type:"number",modelValue:n(r).unit_cost,"onUpdate:modelValue":e[14]||(e[14]=a=>n(r).unit_cost=a)},null,8,["modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.unit_cost),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[74]||(e[74]=[s("Transaction Date")])),_:1}),t(U,{type:"date",modelValue:n(r).transaction_date,"onUpdate:modelValue":e[15]||(e[15]=a=>n(r).transaction_date=a)},null,8,["modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.transaction_date),1)]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(f,null,{default:l(()=>e[75]||(e[75]=[s("Remarks")])),_:1}),t(ee,{type:"number",modelValue:n(r).remarks,"onUpdate:modelValue":e[16]||(e[16]=a=>n(r).remarks=a)},null,8,["modelValue"]),t(c,null,{default:l(()=>[s(d(n(r).errors.remarks),1)]),_:1})]),_:1})]),_:1})])]),_:1},8,["visible"])]),_:1},8,["exportRoute"])}}};export{Ct as default};
