import{_ as y,s as h}from"./index-cucdHoy7.js";import{N as $,r as a,o as m,c as V,w as o,g as b,a as t,u,i as A,b as n,d as C,e as T,t as c,F as w}from"./app-DZB5krWT.js";import{u as E}from"./useSelectOptions-BNQxcMe3.js";import{C as X}from"./check-CkbaCn4Y.js";import{C as Z,B as z}from"./clock-arrow-up-IVTq2QzF.js";const G={class:"grid grid-cols-3 gap-5"},J={class:"sm:grid sm:grid-cols-3 gap-5"},te={__name:"Index",props:{branches:{type:Object,required:!0},orderCounts:{type:Object,required:!0},highStockProducts:{type:Object,required:!0},mostUsedProducts:{type:Object,required:!0},filters:{type:Object,default:{}},lowOnStockItems:{type:Object,default:{}},auth:{type:Object,required:!0}},setup(s){const d=s;console.log(d.mostUsedProducts);const{options:S}=E(d.branches);onMounted(()=>{k.value=B(),P.value=I(),f.value=U()});const k=ref(),P=ref(),f=ref(),B=()=>{const l=getComputedStyle(document.body);return{labels:d.highStockProducts.map(e=>e.name),datasets:[{data:d.highStockProducts.map(e=>e.stock),backgroundColor:[l.getPropertyValue("--p-blue-500"),l.getPropertyValue("--p-yellow-500"),l.getPropertyValue("--p-green-500"),l.getPropertyValue("--p-orange-500")],hoverBackgroundColor:[l.getPropertyValue("--p-blue-400"),l.getPropertyValue("--p-yellow-400"),l.getPropertyValue("--p-green-400"),l.getPropertyValue("--p-orange-400")]}]}},I=()=>{const l=getComputedStyle(document.body);return{labels:d.mostUsedProducts.map(e=>e.name),datasets:[{label:"Usage Count",data:d.mostUsedProducts.map(e=>e.used),backgroundColor:l.getPropertyValue("--p-blue-500"),hoverBackgroundColor:l.getPropertyValue("--p-blue-400")}]}},U=()=>{const l=getComputedStyle(document.documentElement),e=l.getPropertyValue("--p-text-color");return{plugins:{legend:{labels:{usePointStyle:!0,color:e}}},scales:{y:{beginAtZero:!0,ticks:{color:e},grid:{color:l.getPropertyValue("--surface-border")}},x:{ticks:{color:e},grid:{color:l.getPropertyValue("--surface-border")}}}}},g=ref(d.filters.branchId??Object.values(S.value)[0].value+"");return watch(g,l=>{$.get(route("dashboard"),{branchId:l},{})}),(l,e)=>{const j=a("Select"),_=a("SpanBold"),v=a("DivFlexCol"),O=a("TableHead"),i=a("TH"),p=a("TD"),x=a("TableBody"),H=a("Table"),D=a("MobileTableHeading"),M=a("LabelXS"),L=a("MobileTableRow"),N=a("MobileTableContainer"),q=a("Pagination"),R=a("TableContainer"),F=a("Layout");return m(),V(F,{heading:`Hello, ${s.auth.user.first_name}.`},{default:o(()=>[b("section",null,[t(j,{filter:"",placeholder:"Select a Supplier",options:u(S),optionLabel:"label",optionValue:"value",modelValue:u(g),"onUpdate:modelValue":e[0]||(e[0]=r=>A(g)?g.value=r:null)},null,8,["options","modelValue"])]),b("section",G,[t(y,{heading:"Approved Orders",value:s.orderCounts.approved,subheading:"",icon:u(X)},null,8,["value","icon"]),t(y,{heading:"Pending Orders",value:s.orderCounts.pending,subheading:"",icon:u(Z)},null,8,["value","icon"]),t(y,{heading:"Rejected Orders",value:s.orderCounts.rejected,subheading:"",icon:u(z)},null,8,["value","icon"])]),b("section",J,[t(v,{class:"gap-3"},{default:o(()=>[t(_,null,{default:o(()=>e[1]||(e[1]=[n("High Stock Items")])),_:1}),t(u(h),{type:"pie",data:u(k),options:u(f),class:"w-full"},null,8,["data","options"])]),_:1}),t(v,{class:"gap-3 col-span-2"},{default:o(()=>[t(_,null,{default:o(()=>e[2]||(e[2]=[n("Most Used Items")])),_:1}),t(u(h),{type:"bar",data:u(P),options:u(f)},null,8,["data","options"])]),_:1})]),b("section",null,[t(R,null,{default:o(()=>[t(O,null,{default:o(()=>[t(_,null,{default:o(()=>e[3]||(e[3]=[n("Low on stock items")])),_:1})]),_:1}),t(H,null,{default:o(()=>[t(O,null,{default:o(()=>[t(i,null,{default:o(()=>e[4]||(e[4]=[n("Name")])),_:1}),t(i,null,{default:o(()=>e[5]||(e[5]=[n("Inventory Code")])),_:1}),t(i,null,{default:o(()=>e[6]||(e[6]=[n("UOM")])),_:1}),t(i,null,{default:o(()=>e[7]||(e[7]=[n("Stock On Hand")])),_:1}),t(i,null,{default:o(()=>e[8]||(e[8]=[n("System Estimated Used")])),_:1}),t(i,null,{default:o(()=>e[9]||(e[9]=[n("Recorded Used")])),_:1})]),_:1}),t(x,null,{default:o(()=>[(m(!0),C(w,null,T(s.lowOnStockItems.data,r=>(m(),C("tr",null,[t(p,null,{default:o(()=>[n(c(r.name),1)]),_:2},1024),t(p,null,{default:o(()=>[n(c(r.inventory_code),1)]),_:2},1024),t(p,null,{default:o(()=>[n(c(r.uom),1)]),_:2},1024),t(p,null,{default:o(()=>[n(c(r.stock_on_hand),1)]),_:2},1024),t(p,null,{default:o(()=>[n(c(r.estimated_used),1)]),_:2},1024),t(p,null,{default:o(()=>[n(c(r.recorded_used),1)]),_:2},1024)]))),256))]),_:1})]),_:1}),t(N,null,{default:o(()=>[(m(!0),C(w,null,T(s.lowOnStockItems.data,r=>(m(),V(L,null,{default:o(()=>[t(D,{title:`${r.name} (${r.inventory_code})`},null,8,["title"]),t(M,null,{default:o(()=>[n("Stock On Hand: "+c(r.stock_on_hand),1)]),_:2},1024)]),_:2},1024))),256))]),_:1}),t(q,{data:s.lowOnStockItems},null,8,["data"])]),_:1})])]),_:1},8,["heading"])}}};export{te as default};
