import{f as K,x as L,Q as A,y as E,N as w,r,o as f,c as v,w as e,a as t,n as m,b as n,t as s,u as T,i as Y,d as h,e as H,E as Z,h as F,F as P}from"./app-Bw_fMWAP.js";import{u as ee}from"./useToast-CgNL_wIh.js";import{l as te}from"./lodash-Cj3gZpb5.js";import{u as le}from"./useAuth-CBAjI_yz.js";const se={__name:"Index",props:{wastages:{type:Object,required:!0},counts:{type:Object,required:!0},stores:{type:Array,required:!0}},setup(_){K(),ee();const{hasAccess:B}=le();let g=L(A().props.filters.currentFilter||"pending"),b=L(A().props.filters.search);E(g,function(o){w.get(route("wastage-approval-lvl1.index"),{currentFilter:o,search:b.value},{preserveState:!0,replace:!0})}),E(b,te.throttle(function(o){w.get(route("wastage-approval-lvl1.index"),{search:o,currentFilter:g.value},{preserveState:!0,replace:!0})},500));const C=o=>{g.value=o},x=o=>g.value==o?"bg-primary text-white":"",I=o=>{switch(o.toUpperCase()){case"APPROVED_LVL1":return"bg-blue-500 text-white";case"CANCELLED":return"bg-red-400 text-white";case"PENDING":return"bg-yellow-500 text-white";default:return"bg-gray-500 text-white"}},k=o=>{w.get(`/wastage-approval-level1/show/${o}`)},N=o=>o?new Date(o).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",S=o=>{var l,i,c;return o.store_branch_name||((l=o.storeBranch)==null?void 0:l.name)||((i=o.storeBranch)==null?void 0:i.branch_name)||((c=o.storeBranch)==null?void 0:c.brand_name)||"Unknown Store"},D=o=>o?new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(o):"â‚±0.00";return(o,l)=>{const i=r("Badge"),c=r("Button"),V=r("FilterTab"),M=r("Input"),q=r("SearchBar"),R=r("TableHeader"),u=r("TH"),U=r("TableHead"),d=r("TD"),$=r("TableBody"),W=r("Table"),O=r("ShowButton"),j=r("MobileTableHeading"),y=r("LabelXS"),G=r("MobileTableRow"),Q=r("MobileTableContainer"),X=r("Pagination"),z=r("TableContainer"),J=r("Layout");return f(),v(J,{heading:"Wastage Approval 1st Level",hasExcelDownload:!1},{default:e(()=>[t(V,null,{default:e(()=>[t(c,{class:m(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("all")]),onClick:l[0]||(l[0]=a=>C("all"))},{default:e(()=>[l[4]||(l[4]=n("ALL ")),t(i,{class:m(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("all")])},{default:e(()=>[n(s(_.counts.all),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(c,{class:m(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("pending")]),onClick:l[1]||(l[1]=a=>C("pending"))},{default:e(()=>[l[5]||(l[5]=n("PENDING ")),t(i,{class:m(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("pending")])},{default:e(()=>[n(s(_.counts.pending),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(c,{class:m(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("cancelled")]),onClick:l[2]||(l[2]=a=>C("cancelled"))},{default:e(()=>[l[6]||(l[6]=n("CANCELLED ")),t(i,{class:m(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("cancelled")])},{default:e(()=>[n(s(_.counts.cancelled),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),t(z,null,{default:e(()=>[t(R,null,{default:e(()=>[t(q,null,{default:e(()=>[t(M,{class:"pl-10",modelValue:T(b),"onUpdate:modelValue":l[3]||(l[3]=a=>Y(b)?b.value=a:b=a),placeholder:"Search by Wastage Number, Reason, or Store"},null,8,["modelValue"])]),_:1})]),_:1}),t(W,null,{default:e(()=>[t(U,null,{default:e(()=>[t(u,null,{default:e(()=>l[7]||(l[7]=[n("Id")])),_:1}),t(u,null,{default:e(()=>l[8]||(l[8]=[n("Wastage #")])),_:1}),t(u,null,{default:e(()=>l[9]||(l[9]=[n("Store")])),_:1}),t(u,null,{default:e(()=>l[10]||(l[10]=[n("Total Qty")])),_:1}),t(u,null,{default:e(()=>l[11]||(l[11]=[n("Items")])),_:1}),t(u,null,{default:e(()=>l[12]||(l[12]=[n("Total Cost")])),_:1}),t(u,null,{default:e(()=>l[13]||(l[13]=[n("Status")])),_:1}),t(u,null,{default:e(()=>l[14]||(l[14]=[n("Date")])),_:1}),t(u,null,{default:e(()=>l[15]||(l[15]=[n("Actions")])),_:1})]),_:1}),t($,null,{default:e(()=>[(f(!0),h(P,null,H(_.wastages.data,a=>(f(),h("tr",{key:a.id},[t(d,null,{default:e(()=>[n(s(a.id),1)]),_:2},1024),t(d,null,{default:e(()=>[n(s(a.wastage_no),1)]),_:2},1024),t(d,null,{default:e(()=>[n(s(S(a)),1)]),_:2},1024),t(d,null,{default:e(()=>[n(s(a.total_quantity||0),1)]),_:2},1024),t(d,null,{default:e(()=>[n(s(a.items_count||0),1)]),_:2},1024),t(d,null,{default:e(()=>[n(s(D(a.total_cost)),1)]),_:2},1024),t(d,null,{default:e(()=>[t(i,{class:m([I(a.wastage_status),"font-bold"])},{default:e(()=>{var p;return[n(s(((p=a.wastage_status)==null?void 0:p.toUpperCase().replace("_"," "))??"N/A"),1)]}),_:2},1032,["class"])]),_:2},1024),t(d,null,{default:e(()=>[n(s(N(a.created_at)),1)]),_:2},1024),t(d,{class:"flex"},{default:e(()=>[T(B)("view wastage approval level 1")?(f(),v(c,{key:0,onClick:p=>k(a.id),variant:"link"},{default:e(()=>[t(T(Z))]),_:2},1032,["onClick"])):F("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(Q,null,{default:e(()=>[(f(!0),h(P,null,H(_.wastages.data,a=>(f(),v(G,{key:a.id},{default:e(()=>[t(j,{title:a.wastage_no},{default:e(()=>[T(B)("view wastage approval level 1")?(f(),v(O,{key:0,onClick:p=>k(a.id)},null,8,["onClick"])):F("",!0)]),_:2},1032,["title"]),t(y,null,{default:e(()=>[n("Store: "+s(S(a)),1)]),_:2},1024),t(y,null,{default:e(()=>{var p;return[n("Status: "+s((p=a.wastage_status)==null?void 0:p.toUpperCase().replace("_"," ")),1)]}),_:2},1024),t(y,null,{default:e(()=>[n("Total: "+s(D(a.total_cost))+" ("+s(a.total_quantity||0)+" items)",1)]),_:2},1024),t(y,null,{default:e(()=>[n("Date: "+s(N(a.created_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(X,{data:_.wastages},null,8,["data"])]),_:1})]),_:1})}}};export{se as default};
