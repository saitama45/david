import{X as E,l as i,r as L,o as c,c as v,w as s,a as o,u as t,b as l,N as w,aj as A,h as N,g as d,au as I,av as T,aw as q,d as M,e as R,t as m,aG as U,F,az as C}from"./app-Bw_fMWAP.js";import{_ as h,a as z,b as D,c as _,d as G,e as f}from"./TableHeader-CuUfzgBx.js";import P from"./TransferSummary-CbgI8Dkt.js";import X from"./TransferTimeline-DneuHTV4.js";import{A as H}from"./arrow-left-D4hae3WF.js";import{S as J}from"./square-pen-9SUWVdac.js";import"./TransferStatusBadge-CENtskFI.js";import"./TooltipTrigger-Ddsvj8Ve.js";import"./clock-DsuBE0vk.js";import"./circle-x-Bf0oHHlB.js";import"./package-B7IKRS5Q.js";import"./check-CDHR8V18.js";import"./calendar-DBmwDqo5.js";import"./user-DRUPNnu4.js";const K={class:"grid gap-6"},W={class:"grid lg:grid-cols-1 gap-6"},Y={class:"lg:col-span-3 space-y-6"},Z={class:"font-medium"},ee={class:"font-medium"},te={class:"font-medium"},re={class:"font-medium"},se={class:"font-medium"},oe={class:"font-medium"},ne={class:"mt-4 pt-4 border-t"},ae={class:"flex justify-between items-center"},de={class:"text-sm font-medium"},ie={class:"text-sm"},le={key:0},ue={class:"text-sm"},me={__name:"Show",props:{order:Object,permissions:Object},setup(p){const n=p;i(()=>n.order.interco_number||"N/A");const g=i(()=>n.order.interco_status||"open");i(()=>{var r,e,u;return console.log("Show.vue order data:",{from_store_name:n.order.from_store_name,sendingStore:n.order.sendingStore,has_serialized_name:!!n.order.from_store_name}),n.order.from_store_name||((r=n.order.sendingStore)==null?void 0:r.name)||((e=n.order.sendingStore)==null?void 0:e.branch_name)||((u=n.order.sendingStore)==null?void 0:u.brand_name)||"Unknown Sending Store"}),i(()=>{var r,e;return n.order.to_store_name||((r=n.order.store_branch)==null?void 0:r.name)||((e=n.order.store_branch)==null?void 0:e.branch_name)||"Unknown Receiving Store"}),i(()=>n.order.created_at);const B=i(()=>n.order.interco_reason||"No reason provided"),y=i(()=>n.order.remarks||"No remarks"),b=i(()=>{var e;if(!((e=n.order)!=null&&e.store_order_items)||!Array.isArray(n.order.store_order_items))return 0;const r=n.order.store_order_items.reduce((u,a)=>u+(Number(a.quantity_ordered)||0),0);return Number(r)||0}),k=i(()=>{var e;if(!((e=n.order)!=null&&e.store_order_items)||!Array.isArray(n.order.store_order_items))return 0;const r=n.order.store_order_items.reduce((u,a)=>u+(Number(a.quantity_received)||0),0);return Number(r)||0});i(()=>{const r=b.value||0,e=k.value||0;return Math.max(0,r-e)}),i(()=>{const r=b.value||0,e=k.value||0;return r===0?0:e/r*100});const O=i(()=>n.permissions.can_edit&&g.value==="open");i(()=>n.permissions.can_approve&&g.value==="open"),i(()=>n.permissions.can_commit&&g.value==="approved");const Q=(r,e=2)=>r==null||isNaN(r)?"0.00":Number(r).toFixed(e),V=r=>{var e,u;return console.log("Getting description for item:",r.item_code,"UOM:",r.uom),console.log("Available description data:",{item_description:r.item_description,sapMasterfile:r.sapMasterfile}),r.item_description||((e=r.sapMasterfile)==null?void 0:e.ItemDescription)||((u=r.sapMasterfile)==null?void 0:u.ItemName)||"Description not available"},x=r=>r.item_uom||r.uom||"",j=()=>{w.get(route("interco.edit",n.order.id))};return(r,e)=>{const u=L("Layout");return c(),v(u,{heading:"Transfer Details"},{actions:s(()=>[o(t(A),{variant:"outline",onClick:e[0]||(e[0]=a=>t(w).get(r.route("interco.index")))},{default:s(()=>[o(t(H),{class:"w-4 h-4 mr-2"}),e[1]||(e[1]=l(" Back to Transfers "))]),_:1}),O.value?(c(),v(t(A),{key:0,onClick:j},{default:s(()=>[o(t(J),{class:"w-4 h-4 mr-2"}),e[2]||(e[2]=l(" Edit Transfer "))]),_:1})):N("",!0)]),default:s(()=>[d("div",K,[o(P,{transfer:p.order},null,8,["transfer"]),d("div",W,[d("div",Y,[o(t(C),null,{default:s(()=>[o(t(I),null,{default:s(()=>[o(t(T),null,{default:s(()=>e[3]||(e[3]=[l("Transfer Items")])),_:1})]),_:1}),o(t(q),null,{default:s(()=>[o(t(h),null,{default:s(()=>[o(t(z),null,{default:s(()=>[o(t(D),null,{default:s(()=>[o(t(_),null,{default:s(()=>e[4]||(e[4]=[l("Item Code")])),_:1}),o(t(_),null,{default:s(()=>e[5]||(e[5]=[l("Description")])),_:1}),o(t(_),null,{default:s(()=>e[6]||(e[6]=[l("Ordered Qty")])),_:1}),o(t(_),null,{default:s(()=>e[7]||(e[7]=[l("Approved Qty")])),_:1}),o(t(_),null,{default:s(()=>e[8]||(e[8]=[l("Committed Qty")])),_:1}),o(t(_),null,{default:s(()=>e[9]||(e[9]=[l("Received Qty")])),_:1}),o(t(_),null,{default:s(()=>e[10]||(e[10]=[l("Variance")])),_:1})]),_:1})]),_:1}),o(t(G),null,{default:s(()=>[(c(!0),M(F,null,R(p.order.store_order_items,a=>(c(),v(t(D),{key:a.id},{default:s(()=>[o(t(f),{class:"font-medium"},{default:s(()=>{var S,$;return[l(m(((S=a.sapMasterfile)==null?void 0:S.ItemCode)||(($=a.sapMasterfile)==null?void 0:$.item_code)||a.item_code||"N/A"),1)]}),_:2},1024),o(t(f),null,{default:s(()=>[d("div",null,[d("p",Z,m(V(a)),1),x(a)?(c(),v(t(U),{key:0,variant:"outline",class:"text-xs mt-1"},{default:s(()=>[l(m(x(a)),1)]),_:2},1024)):N("",!0)])]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",ee,m(a.quantity_ordered||0),1)]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",te,m(a.quantity_approved||0),1)]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",re,m(a.quantity_commited||0),1)]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",se,m(a.quantity_received||0),1)]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",oe,m((a.quantity_commited||0)-(a.quantity_received||0)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),d("div",ne,[d("div",ae,[d("span",de,"Total Quantity: "+m(Q(b.value)),1)])])]),_:1})]),_:1}),o(t(C),null,{default:s(()=>[o(t(I),null,{default:s(()=>[o(t(T),null,{default:s(()=>e[11]||(e[11]=[l("Additional Information")])),_:1})]),_:1}),o(t(q),{class:"space-y-4"},{default:s(()=>[d("div",null,[e[12]||(e[12]=d("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Reason for Transfer",-1)),d("p",ie,m(B.value),1)]),y.value&&y.value!=="No remarks"?(c(),M("div",le,[e[13]||(e[13]=d("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Remarks",-1)),d("p",ue,m(y.value),1)])):N("",!0)]),_:1})]),_:1}),o(X,{transfer:p.order},null,8,["transfer"])])])])]),_:1})}}},Ae=E(me,[["__scopeId","data-v-62942d59"]]);export{Ae as default};
