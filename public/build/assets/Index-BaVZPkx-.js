import{f as W,x as E,Q as I,y as A,N as v,l as Y,r,o as f,c as w,w as e,a as t,n as _,b as o,t as s,u as y,i as Z,d as h,e as R,E as ee,h as F,F as H}from"./app-Bw_fMWAP.js";import{u as te}from"./useToast-CgNL_wIh.js";import{l as ne}from"./lodash-Cj3gZpb5.js";import{u as ae}from"./useAuth-CBAjI_yz.js";const ue={__name:"Index",props:{orders:{type:Object,required:!0},counts:{type:Object,required:!0}},setup(b){W(),te();const{hasAccess:C}=ae();let g=E(I().props.filters.currentFilter||"approved"),i=E(I().props.filters.search);A(g,function(a){v.get(route("store-commits.index"),{currentFilter:a,search:i.value},{preserveState:!0,replace:!0})}),A(i,ne.throttle(function(a){v.get(route("store-commits.index"),{search:a,currentFilter:g.value},{preserveState:!0,replace:!0})},500));const S=a=>{g.value=a},x=a=>g.value==a?"bg-primary text-white":"",L=a=>{switch(a==null?void 0:a.toUpperCase()){case"APPROVED":return"bg-blue-500 text-white";case"COMMITTED":return"bg-yellow-500 text-white";case"IN_TRANSIT":return"bg-purple-500 text-white";case"PENDING":return"bg-gray-500 text-white";case"DECLINED":return"bg-red-500 text-white";case"OPEN":return"bg-gray-500 text-white";case"IN_TRANSIT":return"bg-purple-500 text-white";case"RECEIVED":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},N=a=>{v.get(`/store-commits/show/${a}`)};Y(()=>route("store-commits.export",{search:i.value,filter:g.value}));const k=a=>a?new Date(a).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):"N/A",D=a=>{var n,u,d;return a.from_store_name||((n=a.sendingStore)==null?void 0:n.name)||((u=a.sendingStore)==null?void 0:u.branch_name)||((d=a.sendingStore)==null?void 0:d.brand_name)||"Unknown Sending Store"},B=a=>{var n,u;return a.to_store_name||((n=a.store_branch)==null?void 0:n.name)||((u=a.store_branch)==null?void 0:u.branch_name)||"Unknown Receiving Store"};return(a,n)=>{const u=r("Badge"),d=r("Button"),P=r("FilterTab"),V=r("Input"),M=r("SearchBar"),O=r("TableHeader"),c=r("TH"),U=r("TableHead"),m=r("TD"),$=r("TableBody"),j=r("Table"),q=r("ShowButton"),X=r("MobileTableHeading"),T=r("LabelXS"),z=r("MobileTableRow"),G=r("MobileTableContainer"),Q=r("Pagination"),J=r("TableContainer"),K=r("Layout");return f(),w(K,{heading:"Store Commits",hasExcelDownload:!0},{default:e(()=>[t(P,null,{default:e(()=>[t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("all")]),onClick:n[0]||(n[0]=l=>S("all"))},{default:e(()=>[n[4]||(n[4]=o("ALL ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("all")])},{default:e(()=>[o(s(b.counts.all),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("approved")]),onClick:n[1]||(n[1]=l=>S("approved"))},{default:e(()=>[n[5]||(n[5]=o("APPROVED ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("approved")])},{default:e(()=>[o(s(b.counts.approved),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("in_transit")]),onClick:n[2]||(n[2]=l=>S("in_transit"))},{default:e(()=>[n[6]||(n[6]=o("IN TRANSIT ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("in_transit")])},{default:e(()=>[o(s(b.counts.in_transit),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),t(J,null,{default:e(()=>[t(O,null,{default:e(()=>[t(M,null,{default:e(()=>[t(V,{class:"pl-10",modelValue:y(i),"onUpdate:modelValue":n[3]||(n[3]=l=>Z(i)?i.value=l:i=l),placeholder:"Search by Order Number, Batch Reference, Remarks, Store or Supplier"},null,8,["modelValue"])]),_:1})]),_:1}),t(j,null,{default:e(()=>[t(U,null,{default:e(()=>[t(c,null,{default:e(()=>n[7]||(n[7]=[o("Id")])),_:1}),t(c,null,{default:e(()=>n[8]||(n[8]=[o("From Store")])),_:1}),t(c,null,{default:e(()=>n[9]||(n[9]=[o("To Store")])),_:1}),t(c,null,{default:e(()=>n[10]||(n[10]=[o("Interco #")])),_:1}),t(c,null,{default:e(()=>n[11]||(n[11]=[o("Transfer Date")])),_:1}),t(c,null,{default:e(()=>n[12]||(n[12]=[o("Status")])),_:1}),t(c,null,{default:e(()=>n[13]||(n[13]=[o("Actions")])),_:1})]),_:1}),t($,null,{default:e(()=>[(f(!0),h(H,null,R(b.orders.data,l=>(f(),h("tr",{key:l.id},[t(m,null,{default:e(()=>[o(s(l.id),1)]),_:2},1024),t(m,null,{default:e(()=>[o(s(D(l)),1)]),_:2},1024),t(m,null,{default:e(()=>[o(s(B(l)),1)]),_:2},1024),t(m,null,{default:e(()=>[o(s(l.interco_number),1)]),_:2},1024),t(m,null,{default:e(()=>[o(s(k(l.order_date)),1)]),_:2},1024),t(m,null,{default:e(()=>[t(u,{class:_([L(l.interco_status),"font-bold"])},{default:e(()=>{var p;return[o(s(((p=l.interco_status)==null?void 0:p.toUpperCase())??"N/A"),1)]}),_:2},1032,["class"])]),_:2},1024),t(m,{class:"flex"},{default:e(()=>[y(C)("view store commits")?(f(),w(d,{key:0,onClick:p=>N(l.id),variant:"link"},{default:e(()=>[t(y(ee))]),_:2},1032,["onClick"])):F("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(G,null,{default:e(()=>[(f(!0),h(H,null,R(b.orders.data,l=>(f(),w(z,{key:l.id},{default:e(()=>[t(X,{title:l.interco_number},{default:e(()=>[y(C)("view store commits")?(f(),w(q,{key:0,onClick:p=>N(l.id)},null,8,["onClick"])):F("",!0)]),_:2},1032,["title"]),t(T,null,{default:e(()=>[o("From: "+s(D(l)),1)]),_:2},1024),t(T,null,{default:e(()=>[o("To: "+s(B(l)),1)]),_:2},1024),t(T,null,{default:e(()=>{var p;return[o("Status: "+s((p=l.interco_status)==null?void 0:p.toUpperCase()),1)]}),_:2},1024),t(T,null,{default:e(()=>[o("Transfer Date: "+s(k(l.order_date)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(Q,{data:b.orders},null,8,["data"])]),_:1})]),_:1})}}};export{ue as default};
