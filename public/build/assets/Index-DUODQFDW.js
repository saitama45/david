import{G as le,f as ne,x as p,l as oe,y as ae,N as B,r as u,o as f,c as y,b2 as ue,u as _,w as e,a as t,b as n,g as I,d as k,e as M,t as a,h as T,F as L,j as re}from"./app-Bw_fMWAP.js";import{l as se}from"./lodash-Cj3gZpb5.js";import{u as de}from"./useAuth-CBAjI_yz.js";import{u as ie}from"./useReferenceDelete-DwjgMHj7.js";const fe={class:"flex items-center justify-between w-full"},me={key:0},ve={__name:"Index",props:{templates:{type:Object,required:!0},filters:{type:Object,required:!0}},setup(b){const{hasAccess:v}=de(),A=le();ne();let U=p(b.filters.search);const g=p(U.value),C=p(!1),m=p(!1),c=p(null),$=oe(()=>route("month-end-count-templates.export",{search:g.value}));ae(g,se.throttle(function(d){B.get(route("month-end-count-templates.index"),{search:d},{preserveState:!0,replace:!0})},500));const H=()=>{C.value=!0},D=()=>{C.value=!1,c.value=null},V=d=>{c.value=d.target.files[0]},O=()=>{if(!c.value){A.add({severity:"error",summary:"Error",detail:"Please select a file to import.",life:3e3});return}const d=new FormData;d.append("file",c.value),m.value=!0,B.post(route("month-end-count-templates.import"),d,{onSuccess:()=>{A.add({severity:"success",summary:"Success",detail:"Templates imported successfully.",life:3e3}),D(),m.value=!1},onError:l=>{A.add({severity:"error",summary:"Import Error",detail:l.file||"Failed to import file.",life:3e3}),m.value=!1},onFinish:()=>{m.value=!1}})},{deleteModel:h}=ie(),j=()=>{B.get("/month-end-count-templates/create")},w=d=>{if(!d)return"N/A";const l=new Date(d);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).format(l)};return(d,l)=>{const x=u("Button"),P=u("Input"),R=u("SearchBar"),q=u("TableHeader"),r=u("TH"),X=u("TableHead"),s=u("TD"),F=u("EditButton"),S=u("DeleteButton"),E=u("DivFlexCenter"),G=u("TableBody"),z=u("Table"),J=u("MobileTableHeading"),i=u("LabelXS"),N=u("DivFlexCol"),K=u("Pagination"),Q=u("TableContainer"),W=u("SpanBold"),Y=u("FormError"),Z=u("InputContainer"),ee=u("Layout");return f(),y(ee,{heading:"Month End Count Templates",hasButton:_(v)("create month end count templates"),buttonName:"Create New Template",handleClick:j,hasExcelDownload:!0,exportRoute:$.value},ue({default:e(()=>[t(Q,null,{default:e(()=>[t(q,null,{default:e(()=>[I("div",fe,[t(R,null,{default:e(()=>[t(P,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=o=>g.value=o),class:"pl-10",placeholder:"Search templates..."},null,8,["modelValue"])]),_:1})])]),_:1}),t(z,{class:"sm:table hidden"},{default:e(()=>[t(X,null,{default:e(()=>[t(r,null,{default:e(()=>l[3]||(l[3]=[n("Id")])),_:1}),t(r,null,{default:e(()=>l[4]||(l[4]=[n("Item Code")])),_:1}),t(r,null,{default:e(()=>l[5]||(l[5]=[n("Item Name")])),_:1}),t(r,null,{default:e(()=>l[6]||(l[6]=[n("Category 1")])),_:1}),t(r,null,{default:e(()=>l[7]||(l[7]=[n("Area")])),_:1}),t(r,null,{default:e(()=>l[8]||(l[8]=[n("Category 2")])),_:1}),t(r,null,{default:e(()=>l[9]||(l[9]=[n("Packaging")])),_:1}),t(r,null,{default:e(()=>l[10]||(l[10]=[n("Conversion")])),_:1}),t(r,null,{default:e(()=>l[11]||(l[11]=[n("Bulk UOM")])),_:1}),t(r,null,{default:e(()=>l[12]||(l[12]=[n("Loose UOM")])),_:1}),t(r,null,{default:e(()=>l[13]||(l[13]=[n("Created By")])),_:1}),t(r,null,{default:e(()=>l[14]||(l[14]=[n("Created At")])),_:1}),t(r,null,{default:e(()=>l[15]||(l[15]=[n("Actions")])),_:1})]),_:1}),t(G,null,{default:e(()=>[(f(!0),k(L,null,M(b.templates.data,o=>(f(),k("tr",null,[t(s,null,{default:e(()=>[n(a(o.id),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.item_code),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.item_name),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.category||"N/A"),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.area||"N/A"),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.category_2||"N/A"),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.packaging_config||"N/A"),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.config||"N/A"),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.uom||"N/A"),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.loose_uom||"N/A"),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(o.created_by?`${o.created_by.first_name} ${o.created_by.last_name}`:"N/A"),1)]),_:2},1024),t(s,null,{default:e(()=>[n(a(w(o.created_at)),1)]),_:2},1024),t(s,null,{default:e(()=>[t(E,{class:"sm:gap-3"},{default:e(()=>[_(v)("edit month end count templates")?(f(),y(F,{key:0,isLink:!0,href:`/month-end-count-templates/edit/${o.id}`},null,8,["href"])):T("",!0),t(S,{onClick:te=>_(h)(d.route("month-end-count-templates.destroy",o.id),"template")},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),256))]),_:1})]),_:1}),t(N,{class:"sm:hidden gap-3"},{default:e(()=>[(f(!0),k(L,null,M(b.templates.data,o=>(f(),y(N,{class:"rounded-lg border min-h-20 p-3"},{default:e(()=>[t(J,{title:o.item_name||`Template #${o.id}`},{default:e(()=>[_(v)("edit month end count templates")?(f(),y(F,{key:0,isLink:!0,href:`/month-end-count-templates/edit/${o.id}`},null,8,["href"])):T("",!0),t(S,{onClick:te=>_(h)(d.route("month-end-count-templates.destroy",o.id),"template")},null,8,["onClick"])]),_:2},1032,["title"]),t(i,null,{default:e(()=>[n("Item Code: "+a(o.item_code),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Category 1: "+a(o.category||"N/A"),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Area: "+a(o.area||"N/A"),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Category 2: "+a(o.category_2||"N/A"),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Packaging: "+a(o.packaging_config||"N/A"),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Conversion: "+a(o.config||"N/A"),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Bulk UOM: "+a(o.uom||"N/A"),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Loose UOM: "+a(o.loose_uom||"N/A"),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Created By: "+a(o.created_by?`${o.created_by.first_name} ${o.created_by.last_name}`:"N/A"),1)]),_:2},1024),t(i,null,{default:e(()=>[n("Created At: "+a(w(o.created_at)),1)]),_:2},1024)]),_:2},1024))),256))]),_:1}),t(K,{data:b.templates},null,8,["data"])]),_:1}),t(_(re),{visible:C.value,"onUpdate:visible":l[1]||(l[1]=o=>C.value=o),modal:"",style:{width:"30rem"}},{header:e(()=>[t(N,null,{default:e(()=>[t(W,null,{default:e(()=>l[16]||(l[16]=[n("Import Templates")])),_:1}),t(i,null,{default:e(()=>l[17]||(l[17]=[n("Upload Excel file to import templates")])),_:1})]),_:1})]),default:e(()=>[t(N,null,{default:e(()=>[t(Z,null,{default:e(()=>[I("input",{type:"file",onChange:V,accept:".xlsx,.csv,.txt",class:"w-full p-2 border border-gray-300 rounded-md"},null,32),c.value?(f(),y(Y,{key:0},{default:e(()=>[n(" Selected: "+a(c.value.name),1)]),_:1})):T("",!0)]),_:1}),t(E,{class:"justify-end mt-5 gap-3"},{default:e(()=>[t(x,{onClick:D,variant:"outline",disabled:m.value},{default:e(()=>l[18]||(l[18]=[n(" Cancel ")])),_:1},8,["disabled"]),t(x,{onClick:O,disabled:m.value||!c.value},{default:e(()=>[m.value?(f(),k("span",me,l[19]||(l[19]=[I("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},null,-1)]))):T("",!0),l[20]||(l[20]=n(" Import "))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["visible"])]),_:2},[_(v)("import month end count templates")?{name:"header-actions",fn:e(()=>[t(x,{onClick:H,class:"sm:text-normal text-xs"},{default:e(()=>l[2]||(l[2]=[n(" Upload ")])),_:1})]),key:"0"}:void 0]),1032,["hasButton","exportRoute"])}}};export{ve as default};
