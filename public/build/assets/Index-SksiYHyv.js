import{Y as X,x as A,l as S,y as Z,r as z,o as i,c,w as a,g as o,u as t,aA as x,N as _,a as s,P as B,b as r,h,d as b,e as $,aQ as j,t as u,n as tt,bp as E,aN as V,F as C,aL as Q,aM as U,_ as et,aB as st,aF as at,aG as lt,aH as nt,aK as q,E as G,bu as ot}from"./app-p8ycGfai.js";import{_ as rt,a as ut,b as H,c as v,d as it,e as g}from"./TableHeader-a0F1Zfhh.js";import M from"./TransferStatusBadge-Cy3bUJcI.js";import{S as dt}from"./search-Czf2XZZ_.js";import{R as mt}from"./rotate-ccw-JUU7RYek.js";import{S as K}from"./square-pen-CI0P5sG9.js";import"./TooltipTrigger-Cad37LXI.js";import"./VisuallyHidden-Bjfqgrx1.js";import"./clock-DPi-gFdQ.js";import"./circle-x-BrjzfYpA.js";import"./package-WwDcP9-w.js";const ft={class:"flex gap-2"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6"},_t={class:"flex items-center justify-between"},vt={class:"text-sm font-medium text-muted-foreground"},gt={class:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center"},pt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xt={class:"relative"},bt={class:"flex gap-2"},yt={class:"text-sm text-muted-foreground"},ht={class:"hidden md:block"},kt={class:"flex justify-end gap-2"},wt={class:"flex items-center justify-between"},St={class:"flex items-center gap-2"},$t={class:"font-semibold text-sm"},Ct={class:"flex gap-1"},Tt={class:"grid grid-cols-2 gap-3 text-sm"},Nt={class:"font-medium"},At={class:"font-medium"},jt={class:"grid grid-cols-2 gap-3 text-sm"},Vt={class:"font-medium"},Ft={class:"font-medium"},Dt={class:"flex items-center justify-between text-sm"},Ot={class:"font-medium"},It={key:0,class:"text-center py-12"},Lt={class:"text-muted-foreground mb-4"},Pt={key:1,class:"mt-6"},Rt={__name:"Index",props:{orders:Object,statistics:Object,filters:Object,statusOptions:Array,permissions:Object},setup(d){const y=d,p=A(y.filters.search||""),f=A(y.filters.status||"open"),k=A(""),T=S(()=>p.value||f.value&&f.value!=="all"||k.value),Y=S(()=>{const n=y.statistics?y.statistics:{};return[{label:"Total Transfers",value:n.total?n.total:0,color:"text-blue-600"},{label:"Open",value:n.open?n.open:0,color:"text-gray-600"},{label:"In Transit",value:n.in_transit?n.in_transit:0,color:"text-purple-600"},{label:"Approved",value:n.approved?n.approved:0,color:"text-orange-600"},{label:"Received",value:n.received?n.received:0,color:"text-green-600"}]}),J=()=>{const n={};p.value&&(n.search=p.value),f.value&&(n.status=f.value),k.value&&(n.date_range=k.value),_.get(route("interco.index"),n,{preserveState:!0,preserveScroll:!0})},W=()=>{p.value="",f.value="all",k.value="",_.get(route("interco.index"),{},{preserveState:!0,preserveScroll:!0})},F=n=>n?new Date(n).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):"N/A",D=n=>{var e,m,w;return n.from_store_name||((e=n.sendingStore)==null?void 0:e.name)||((m=n.sendingStore)==null?void 0:m.branch_name)||((w=n.sendingStore)==null?void 0:w.brand_name)||"Unknown Sending Store"},O=n=>{var e,m;return n.to_store_name||((e=n.store_branch)==null?void 0:e.name)||((m=n.store_branch)==null?void 0:m.branch_name)||"Unknown Receiving Store"},I=n=>!n||!Array.isArray(n)?0:n.reduce((e,m)=>e+(Number(m.quantity_ordered)||0),0),L=S(()=>y.permissions.can_create),P=S(()=>y.permissions.can_edit);Z([p,f,k],()=>{clearTimeout(R),R=setTimeout(()=>{J()},500)});let R;return(n,e)=>{const m=z("Pagination"),w=z("Layout");return i(),c(w,{heading:"Store-to-Store Transfers",hasExcelDownload:!0},{"header-actions":a(()=>[o("div",ft,[L.value?(i(),c(t(x),{key:0,onClick:e[0]||(e[0]=l=>t(_).get(n.route("interco.create")))},{default:a(()=>[s(t(B),{class:"w-4 h-4 mr-2"}),e[4]||(e[4]=r(" New Transfer "))]),_:1})):h("",!0)])]),default:a(()=>[o("div",ct,[(i(!0),b(C,null,$(Y.value,l=>(i(),c(t(j),{key:l.label},{default:a(()=>[s(t(V),{class:"p-4"},{default:a(()=>[o("div",_t,[o("div",null,[o("p",vt,u(l.label),1),o("p",{class:tt(["text-2xl font-bold",l.color])},u(l.value),3)]),o("div",gt,[s(t(E),{class:"w-4 h-4 text-primary"})])])]),_:2},1024)]),_:2},1024))),128))]),s(t(j),{class:"mb-6"},{default:a(()=>[s(t(Q),null,{default:a(()=>[s(t(U),{class:"text-lg"},{default:a(()=>e[5]||(e[5]=[r("Filters")])),_:1})]),_:1}),s(t(V),null,{default:a(()=>[o("div",pt,[o("div",xt,[s(t(dt),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s(t(et),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value=l),placeholder:"Search transfers...",class:"pl-10"},null,8,["modelValue"])]),s(t(st),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l)},{default:a(()=>[s(t(at),null,{default:a(()=>[s(t(lt),{placeholder:"All Statuses"})]),_:1}),s(t(nt),null,{default:a(()=>[s(t(q),{value:"all"},{default:a(()=>e[6]||(e[6]=[r("All Statuses")])),_:1}),(i(!0),b(C,null,$(d.statusOptions,l=>(i(),c(t(q),{key:l.value,value:l.value},{default:a(()=>[r(u(l.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),o("div",bt,[s(t(x),{variant:"outline",onClick:W,disabled:!T.value},{default:a(()=>[s(t(mt),{class:"w-4 h-4 mr-2"}),e[7]||(e[7]=r(" Clear "))]),_:1},8,["disabled"])])])]),_:1})]),_:1}),s(t(j),null,{default:a(()=>[s(t(Q),null,{default:a(()=>[s(t(U),null,{default:a(()=>e[8]||(e[8]=[r("Transfers")])),_:1}),o("p",yt," Showing "+u(d.orders.from)+" to "+u(d.orders.to)+" of "+u(d.orders.total)+" transfers ",1)]),_:1}),s(t(V),null,{default:a(()=>[o("div",ht,[s(t(rt),null,{default:a(()=>[s(t(ut),null,{default:a(()=>[s(t(H),null,{default:a(()=>[s(t(v),null,{default:a(()=>e[9]||(e[9]=[r("Transfer #")])),_:1}),s(t(v),null,{default:a(()=>e[10]||(e[10]=[r("From Store")])),_:1}),s(t(v),null,{default:a(()=>e[11]||(e[11]=[r("To Store")])),_:1}),s(t(v),null,{default:a(()=>e[12]||(e[12]=[r("Items")])),_:1}),s(t(v),null,{default:a(()=>e[13]||(e[13]=[r("Quantity")])),_:1}),s(t(v),null,{default:a(()=>e[14]||(e[14]=[r("Status")])),_:1}),s(t(v),null,{default:a(()=>e[15]||(e[15]=[r("Date")])),_:1}),s(t(v),{class:"text-right"},{default:a(()=>e[16]||(e[16]=[r("Actions")])),_:1})]),_:1})]),_:1}),s(t(it),null,{default:a(()=>[(i(!0),b(C,null,$(d.orders.data,l=>(i(),c(t(H),{key:l.id},{default:a(()=>[s(t(g),{class:"font-medium"},{default:a(()=>[r(u(l.interco_number),1)]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(D(l)),1)]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(O(l)),1)]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(l.store_order_items?l.store_order_items.length:0),1)]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(I(l.store_order_items)),1)]),_:2},1024),s(t(g),null,{default:a(()=>[s(M,{status:l.interco_status},null,8,["status"])]),_:2},1024),s(t(g),null,{default:a(()=>[r(u(F(l.order_date)),1)]),_:2},1024),s(t(g),{class:"text-right"},{default:a(()=>[o("div",kt,[s(t(x),{variant:"ghost",size:"sm",onClick:N=>t(_).get(n.route("interco.show",l.id))},{default:a(()=>[s(t(G),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),P.value&&l.interco_status==="open"?(i(),c(t(x),{key:0,variant:"ghost",size:"sm",onClick:N=>t(_).get(n.route("interco.edit",l.id))},{default:a(()=>[s(t(K),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):h("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),s(ot,{class:"md:hidden"},{default:a(()=>[(i(!0),b(C,null,$(d.orders.data,l=>(i(),b("div",{key:l.id,class:"border-b last:border-b-0 p-4 space-y-3"},[o("div",wt,[o("div",St,[o("span",$t,u(l.interco_number),1),s(M,{status:l.interco_status},null,8,["status"])]),o("div",Ct,[s(t(x),{variant:"ghost",size:"sm",onClick:N=>t(_).get(n.route("interco.show",l.id))},{default:a(()=>[s(t(G),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),P.value&&l.interco_status==="open"?(i(),c(t(x),{key:0,variant:"ghost",size:"sm",onClick:N=>t(_).get(n.route("interco.edit",l.id))},{default:a(()=>[s(t(K),{class:"w-4 h-4"})]),_:2},1032,["onClick"])):h("",!0)])]),o("div",Tt,[o("div",null,[e[17]||(e[17]=o("span",{class:"text-muted-foreground text-xs"},"From:",-1)),o("div",Nt,u(D(l)),1)]),o("div",null,[e[18]||(e[18]=o("span",{class:"text-muted-foreground text-xs"},"To:",-1)),o("div",At,u(O(l)),1)])]),o("div",jt,[o("div",null,[e[19]||(e[19]=o("span",{class:"text-muted-foreground text-xs"},"Items:",-1)),o("div",Vt,u(l.store_order_items?l.store_order_items.length:0),1)]),o("div",null,[e[20]||(e[20]=o("span",{class:"text-muted-foreground text-xs"},"Quantity:",-1)),o("div",Ft,u(I(l.store_order_items)),1)])]),o("div",Dt,[o("div",null,[e[21]||(e[21]=o("span",{class:"text-muted-foreground text-xs"},"Date:",-1)),o("div",Ot,u(F(l.order_date)),1)])])]))),128))]),_:1}),d.orders.data.length===0?(i(),b("div",It,[s(t(E),{class:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e[23]||(e[23]=o("h3",{class:"text-lg font-medium mb-2"},"No transfers found",-1)),o("p",Lt,u(T.value?"Try adjusting your filters":"Get started by creating your first transfer"),1),L.value&&!T.value?(i(),c(t(x),{key:0,onClick:e[3]||(e[3]=l=>t(_).get(n.route("interco.create")))},{default:a(()=>[s(t(B),{class:"w-4 h-4 mr-2"}),e[22]||(e[22]=r(" Create Transfer "))]),_:1})):h("",!0)])):h("",!0),d.orders.data.length>0?(i(),b("div",Pt,[s(m,{data:d.orders},null,8,["data"])])):h("",!0)]),_:1})]),_:1})]),_:1})}}},Jt=X(Rt,[["__scopeId","data-v-4c91b8b5"]]);export{Jt as default};
