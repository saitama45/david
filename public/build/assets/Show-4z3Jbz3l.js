import{l as I,r as a,o as _,c as w,w as n,a as t,b as r,d as p,e as C,t as s,n as T,F as h,g as L}from"./app-rjK1ng7o.js";const q=["href"],F={key:1},A=["href"],V={key:1},j={__name:"Show",props:{branches:{type:Object,required:!0},history:{type:Object,required:!0}},setup(y){console.log("StockManagement Show Vue - History Data:",y.history);const f=l=>l==="add"||l==="add_quantity"?"IN":l==="out"||l==="deduct"||l==="log_usage"?"OUT":l.replace(/_/g," ").toUpperCase(),d=(l,o=2,i=10)=>{if(l==null||isNaN(l))return"N/a";const c=parseFloat(l);if(isNaN(c))return"N/a";let u=c.toFixed(i);u=u.replace(/\.?0+$/,"");const b=u.split(".");return!b[1]||b[1].length<o?c.toFixed(o):u},N=l=>{if(!l)return"N/a";try{return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(o){return console.error("Error formatting date:",l,o),l}},D=I(()=>{var o,i;const l=(i=(o=y.history)==null?void 0:o.data)==null?void 0:i[0];if(l&&l.sap_masterfile){const c=l.sap_masterfile.ItemDescription,u=l.sap_masterfile.AltUOM;return`${c} with AltUOM: ${u}`}return"Stock Details"});return(l,o)=>{const i=a("TH"),c=a("TableHead"),u=a("TD"),b=a("TableBody"),O=a("Table"),U=a("MobileTableHeading"),m=a("LabelXS"),H=a("MobileTableRow"),B=a("MobileTableContainer"),M=a("Pagination"),x=a("TableContainer"),R=a("BackButton"),S=a("Layout");return _(),w(S,{heading:D.value},{default:n(()=>[t(x,null,{default:n(()=>[t(O,null,{default:n(()=>[t(c,null,{default:n(()=>[t(i,null,{default:n(()=>o[0]||(o[0]=[r("Id")])),_:1}),t(i,null,{default:n(()=>o[1]||(o[1]=[r("Ref No.")])),_:1}),t(i,null,{default:n(()=>o[2]||(o[2]=[r("Quantity Change")])),_:1}),t(i,null,{default:n(()=>o[3]||(o[3]=[r("Action")])),_:1}),t(i,null,{default:n(()=>o[4]||(o[4]=[r("Cost Center")])),_:1}),t(i,null,{default:n(()=>o[5]||(o[5]=[r("Unit Cost")])),_:1}),t(i,null,{default:n(()=>o[6]||(o[6]=[r("Total Cost")])),_:1}),t(i,null,{default:n(()=>o[7]||(o[7]=[r("Transaction Date")])),_:1}),t(i,null,{default:n(()=>o[8]||(o[8]=[r("Running SOH")])),_:1}),t(i,null,{default:n(()=>o[9]||(o[9]=[r("Remarks")])),_:1})]),_:1}),t(b,null,{default:n(()=>[(_(!0),p(h,null,C(y.history.data,(e,k)=>(_(),p("tr",{key:e.id},[t(u,null,{default:n(()=>[r(s(e.id),1)]),_:2},1024),t(u,null,{default:n(()=>[e.is_link_ref&&e.display_ref_no!=="N/a"?(_(),p("a",{key:0,href:e.ref_type==="interco"?l.route("interco.show",e.display_ref_no):e.ref_type==="wastage"?l.route("wastage.show.by-number",e.display_ref_no):l.route("store-orders.show",e.display_ref_no),target:"_blank",class:"text-blue-600 hover:underline"},s(e.display_ref_no),9,q)):(_(),p("span",F,s(e.display_ref_no??"N/a"),1))]),_:2},1024),t(u,{class:T({"text-red-500":f(e.action)==="OUT","text-green-500":f(e.action)==="IN"})},{default:n(()=>[r(s(f(e.action)==="OUT"?"-":"+")+s(d(e.quantity,2,10)),1)]),_:2},1032,["class"]),t(u,null,{default:n(()=>[r(s(f(e.action)),1)]),_:2},1024),t(u,null,{default:n(()=>{var g;return[r(s(((g=e.cost_center)==null?void 0:g.name)??"N/a"),1)]}),_:2},1024),t(u,null,{default:n(()=>[r(s(d(e.unit_cost,2,4)),1)]),_:2},1024),t(u,null,{default:n(()=>[r(s(d(e.total_cost,2,4)),1)]),_:2},1024),t(u,null,{default:n(()=>[r(s(N(e.transaction_date)),1)]),_:2},1024),t(u,{class:T({"font-bold text-green-600":k===0})},{default:n(()=>[r(s(d(e.running_soh,2,10)),1)]),_:2},1032,["class"]),t(u,null,{default:n(()=>[r(s(e.remarks&&e.remarks.replace(/testing/gi,"").trim()?e.remarks.replace(/testing/gi,"").trim():"None"),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(B,null,{default:n(()=>[(_(!0),p(h,null,C(y.history.data,(e,k)=>(_(),w(H,{key:e.id},{default:n(()=>[t(U,{title:`${f(e.action)}`},null,8,["title"]),t(m,null,{default:n(()=>[o[10]||(o[10]=r("Ref No.: ")),e.is_link_ref&&e.display_ref_no!=="N/a"?(_(),p("a",{key:0,href:e.ref_type==="interco"?l.route("interco.show",e.display_ref_no):e.ref_type==="wastage"?l.route("wastage.show.by-number",e.display_ref_no):l.route("store-orders.show",e.display_ref_no),target:"_blank",class:"text-blue-600 hover:underline"},s(e.display_ref_no),9,A)):(_(),p("span",V,s(e.display_ref_no??"N/a"),1))]),_:2},1024),t(m,null,{default:n(()=>[o[11]||(o[11]=r("Quantity Change: ")),L("span",{class:T({"text-red-500":f(e.action)==="OUT","text-green-500":f(e.action)==="IN"})},s(f(e.action)==="OUT"?"-":"+")+s(d(e.quantity,2,10)),3)]),_:2},1024),t(m,{class:T({"font-bold text-green-600":k===0})},{default:n(()=>[r("Running SOH: "+s(d(e.running_soh,2,10)),1)]),_:2},1032,["class"]),t(m,null,{default:n(()=>{var g;return[r("Cost Center: "+s(((g=e.cost_center)==null?void 0:g.name)??"N/a"),1)]}),_:2},1024),t(m,null,{default:n(()=>[r("Unit Cost: "+s(d(e.unit_cost,2,4)),1)]),_:2},1024),t(m,null,{default:n(()=>[r("Total Cost: "+s(d(e.total_cost,2,4)),1)]),_:2},1024),t(m,null,{default:n(()=>[r("Transaction Date: "+s(N(e.transaction_date)),1)]),_:2},1024),t(m,null,{default:n(()=>[r("Remarks: "+s(e.remarks&&e.remarks.replace(/testing/gi,"").trim()?e.remarks.replace(/testing/gi,"").trim():"None"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(M,{data:y.history},null,8,["data"])]),_:1}),t(R,{routeName:"stock-management.index"})]),_:1},8,["heading"])}}};export{j as default};
