import{x as v,T as D,G as W,f as Y,y as Z,r,o as S,c as b,w as o,a as l,b as a,u as t,t as i,h as U,g}from"./app-p8ycGfai.js";const $={class:"space-y-5"},h={class:"flex flex-col space-y-1"},ee={class:"flex flex-col space-y-1"},le={class:"text-xs"},oe=["href"],ne={__name:"Edit",props:{item:{type:Object,required:!0}},setup(x){const V=v(!1),C=D({products_file:null}),k=()=>{_.value=!0,C.post(route("SupplierItems.import"),{onSuccess:()=>{y.add({severity:"success",summary:"Success",detail:"Products Updated Successfully.",life:3e3}),_.value=!1,V.value=!1},onError:c=>{_.value=!1;const e=c.message||"An error occurred while trying to import. Please check file format and logs.";y.add({severity:"error",summary:"Error",detail:e,life:3e3}),console.error("Import Error:",c)},onFinish:()=>{_.value=!1}})},y=W(),F=Y(),E=x,_=v(!1);Z(V,c=>{c||(C.reset(),C.clearErrors(),_.value=!1)});const s=E.item,n=D({ItemCode:s.ItemCode??null,item_name:s.item_name??"",SupplierCode:s.SupplierCode??null,category:s.category??"",brand:s.brand??"",classification:s.classification??"",packaging_config:s.packaging_config??"",config:s.config??0,uom:s.uom??"",cost:s.cost??0,srp:s.srp??0,is_active:s.is_active!==null?Number(s.is_active):null}),P=()=>{F.require({message:"Are you sure you want to update this product?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{n.put(route("SupplierItems.update",s.id),{preserveScroll:!0,onSuccess:()=>{y.add({severity:"success",summary:"Success",detail:"Product Successfully Updated",life:3e3})},onError:c=>{console.error("Update Error:",c),y.add({severity:"error",summary:"Error",detail:"Failed to update product. Please check the form data.",life:3e3})}})}})},B=v([{label:"Active",value:1},{label:"Inactive",value:0}]);return(c,e)=>{const L=r("CardTitle"),w=r("CardDescription"),T=r("CardHeader"),p=r("Label"),m=r("Input"),d=r("FormError"),f=r("InputContainer"),N=r("LabelXS"),A=r("Select"),H=r("CardContent"),j=r("BackButton"),I=r("Button"),M=r("CardFooter"),q=r("Card"),O=r("DialogTitle"),X=r("DialogDescription"),G=r("DialogHeader"),R=r("Loading"),z=r("DialogFooter"),J=r("DialogContent"),K=r("Dialog"),Q=r("Layout");return S(),b(Q,{heading:"Edit Supplier Items Details"},{default:o(()=>[l(q,null,{default:o(()=>[l(T,null,{default:o(()=>[l(L,null,{default:o(()=>e[14]||(e[14]=[a("Supplier Items Details")])),_:1}),l(w,null,{default:o(()=>e[15]||(e[15]=[a("Input all the important fields")])),_:1})]),_:1}),l(H,{class:"grid sm:grid-cols-2 gap-5"},{default:o(()=>[l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[16]||(e[16]=[a("Item Code")])),_:1}),l(m,{modelValue:t(n).ItemCode,"onUpdate:modelValue":e[0]||(e[0]=u=>t(n).ItemCode=u)},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.ItemCode),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[17]||(e[17]=[a("Item Name")])),_:1}),l(m,{modelValue:t(n).item_name,"onUpdate:modelValue":e[1]||(e[1]=u=>t(n).item_name=u)},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.item_name),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[18]||(e[18]=[a("Supplier Code")])),_:1}),l(m,{modelValue:t(n).SupplierCode,"onUpdate:modelValue":e[2]||(e[2]=u=>t(n).SupplierCode=u)},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.SupplierCode),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[19]||(e[19]=[a("Category")])),_:1}),l(m,{modelValue:t(n).category,"onUpdate:modelValue":e[3]||(e[3]=u=>t(n).category=u)},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.category),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[20]||(e[20]=[a("Brand")])),_:1}),l(m,{modelValue:t(n).brand,"onUpdate:modelValue":e[4]||(e[4]=u=>t(n).brand=u)},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.brand),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[21]||(e[21]=[a("Classification")])),_:1}),l(m,{modelValue:t(n).classification,"onUpdate:modelValue":e[5]||(e[5]=u=>t(n).classification=u)},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.classification),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[22]||(e[22]=[a("Packaging Config")])),_:1}),l(m,{modelValue:t(n).packaging_config,"onUpdate:modelValue":e[6]||(e[6]=u=>t(n).packaging_config=u)},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.packaging_config),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[23]||(e[23]=[a("Config")])),_:1}),l(m,{type:"number",modelValue:t(n).config,"onUpdate:modelValue":e[7]||(e[7]=u=>t(n).config=u),step:"0.01"},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.config),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[24]||(e[24]=[a("UOM")])),_:1}),l(m,{modelValue:t(n).uom,"onUpdate:modelValue":e[8]||(e[8]=u=>t(n).uom=u)},null,8,["modelValue"]),l(d,null,{default:o(()=>[a(i(t(n).errors.uom),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[25]||(e[25]=[a("Cost")])),_:1}),l(m,{type:"number",modelValue:t(n).cost,"onUpdate:modelValue":e[9]||(e[9]=u=>t(n).cost=u),step:"0.01"},null,8,["modelValue"]),e[26]||(e[26]=a()),l(d,null,{default:o(()=>[a(i(t(n).errors.cost),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(p,null,{default:o(()=>e[27]||(e[27]=[a("SRP")])),_:1}),l(m,{type:"number",modelValue:t(n).srp,"onUpdate:modelValue":e[10]||(e[10]=u=>t(n).srp=u),step:"0.01"},null,8,["modelValue"]),e[28]||(e[28]=a()),l(d,null,{default:o(()=>[a(i(t(n).errors.srp),1)]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(N,null,{default:o(()=>e[29]||(e[29]=[a("Active Status")])),_:1}),l(A,{modelValue:t(n).is_active,"onUpdate:modelValue":e[11]||(e[11]=u=>t(n).is_active=u),options:B.value,optionLabel:"label",optionValue:"value",placeholder:"Select a Status"},null,8,["modelValue","options"]),t(n).errors.is_active?(S(),b(d,{key:0},{default:o(()=>[a(i(t(n).errors.is_active),1)]),_:1})):U("",!0)]),_:1})]),_:1}),l(M,{class:"justify-end gap-3"},{default:o(()=>[l(j),l(I,{onClick:P},{default:o(()=>e[30]||(e[30]=[a("Update")])),_:1})]),_:1})]),_:1}),l(K,{open:V.value,"onUpdate:open":e[13]||(e[13]=u=>V.value=u)},{default:o(()=>[l(J,{class:"sm:max-w-[600px]"},{default:o(()=>[l(G,null,{default:o(()=>[l(O,null,{default:o(()=>e[31]||(e[31]=[a("Import Products")])),_:1}),l(X,null,{default:o(()=>e[32]||(e[32]=[a(" Import the excel file of the products. ")])),_:1})]),_:1}),g("div",$,[g("div",h,[l(m,{type:"file",onInput:e[12]||(e[12]=u=>t(C).products_file=u.target.files[0])}),l(d,null,{default:o(()=>[a(i(t(C).errors.products_file),1)]),_:1})]),g("div",ee,[l(p,{class:"text-xs"},{default:o(()=>e[33]||(e[33]=[a("Accepted Products File Format")])),_:1}),g("ul",null,[g("li",le,[g("a",{class:"text-blue-500 underline",href:c.route("excel.SupplierItems-template")},"Click to download",8,oe)])])])]),l(z,null,{default:o(()=>[l(I,{disabled:_.value,onClick:k,type:"submit",class:"gap-2"},{default:o(()=>[e[34]||(e[34]=a(" Proceed ")),g("span",null,[_.value?(S(),b(R,{key:0})):U("",!0)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}};export{ne as default};
