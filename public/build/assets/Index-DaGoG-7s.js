import{l as L}from"./lodash-DqVvdaAw.js";import{x as y,l as f,y as U,r as C,o as u,c as K,w as R,g as t,a as l,u as r,C as Z,d as g,t as a,h as w,n as I,aX as tt,b as V,ak as O,b6 as et,b7 as A,aV as st,e as q,F as E,N as at}from"./app-rjK1ng7o.js";import{u as ot}from"./useAuth-DN4uYPJg.js";import{S as lt}from"./search-1D3z8Z95.js";import{R as $}from"./rotate-ccw-AmYMTH22.js";import{C as M,B as nt}from"./calendar-days-BOVgMW5B.js";import{P as N}from"./package-Dr2_9bTP.js";const rt={class:"lg:hidden mb-4"},it={class:"flex items-center gap-3"},dt={key:0,class:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-700 rounded-full"},ut={class:"p-6"},ct={class:"mb-6"},gt={class:"relative"},pt={key:0,class:"absolute right-4 top-1/2 transform -translate-y-1/2"},xt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},mt={class:"space-y-2"},yt={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},vt={class:"space-y-2"},bt={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},ft={class:"space-y-2"},ht={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},_t={class:"space-y-2"},wt={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},Vt={class:"flex items-center justify-between mt-6 pt-6 border-t border-gray-200"},Ft={class:"text-sm text-gray-600"},Ct={class:"flex items-center gap-3"},Dt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},kt={class:"bg-white rounded-lg border border-gray-200 p-4"},It={class:"flex items-center justify-between"},At={class:"text-2xl font-bold text-gray-900"},Nt={class:"text-sm text-gray-500"},jt={class:"bg-white rounded-lg border border-gray-200 p-4"},St={class:"flex items-center justify-between"},Bt={class:"text-2xl font-bold text-gray-900"},Pt={class:"text-sm text-gray-500"},Lt={class:"bg-white rounded-lg border border-gray-200 p-4"},Ut={class:"flex items-center justify-between"},Rt={class:"text-2xl font-bold text-gray-900"},Ot={class:"text-sm text-gray-500"},qt={class:"bg-white rounded-lg border border-gray-200 p-4"},Et={class:"flex items-center justify-between"},$t={class:"text-2xl font-bold text-gray-900"},Mt={class:"text-sm text-gray-500"},Tt={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},Qt={key:0,class:"absolute inset-0 bg-white/80 flex items-center justify-center z-10"},Ht={class:"hidden lg:block overflow-x-auto"},Yt={class:"min-w-full"},zt={class:"bg-white divide-y divide-gray-100"},Wt={key:0,class:"hover:bg-gray-50"},Gt={colspan:"14",class:"text-center py-12 text-gray-500"},Xt={class:"flex flex-col items-center"},Jt={class:"px-4 py-3 text-sm text-gray-900"},Kt={class:"px-4 py-3 text-sm font-mono text-gray-900"},Zt=["title"],te={class:"px-4 py-3 text-sm text-gray-600"},ee={class:"px-4 py-3 text-sm text-right font-medium text-gray-900"},se={class:"px-3 py-3 text-sm text-center font-medium text-gray-900 bg-blue-50"},ae={class:"px-3 py-3 text-sm text-right font-medium text-gray-900 bg-blue-50"},oe={class:"px-3 py-3 text-sm text-center font-medium text-gray-900 bg-green-50"},le={class:"px-3 py-3 text-sm text-right font-medium text-gray-900 bg-green-50"},ne={class:"px-3 py-3 text-sm text-center font-medium text-gray-900 bg-purple-50"},re={class:"px-3 py-3 text-sm text-right font-medium text-gray-900 bg-purple-50"},ie={class:"px-3 py-3 text-sm text-center font-medium text-gray-900 bg-amber-50"},de={class:"px-3 py-3 text-sm text-right font-medium text-gray-900 bg-amber-50"},ue={class:"px-4 py-3 text-sm text-right font-semibold text-gray-900"},ce={class:"lg:hidden"},ge={key:0,class:"p-8 text-center"},pe={class:"divide-y divide-gray-100"},xe={class:"flex items-center justify-between mb-3"},me={class:"flex flex-col"},ye={class:"text-sm font-mono text-gray-900"},ve={class:"text-xs text-gray-500"},be={class:"text-right"},fe={class:"text-sm font-semibold text-gray-900"},he={class:"text-xs text-gray-500"},_e={class:"mb-3"},we={class:"text-sm text-gray-900 line-clamp-2"},Ve={class:"grid grid-cols-2 gap-3 mb-3"},Fe={class:"text-sm text-gray-900 block"},Ce={class:"text-sm text-gray-900 block"},De={class:"space-y-2"},ke={class:"flex items-center justify-between text-sm"},Ie={class:"font-medium"},Ae={class:"flex items-center justify-between text-sm"},Ne={class:"font-medium"},je={class:"flex items-center justify-between text-sm"},Se={class:"font-medium"},Be={class:"flex items-center justify-between text-sm"},Pe={class:"font-medium"},Le={class:"bg-white px-6 py-4 border-t border-gray-200 mt-6 rounded-b-xl"},Te={__name:"Index",props:{reportData:{type:Array,required:!0},paginatedData:{type:Object,required:!0},filters:{type:Object,required:!0},stores:{type:Array,required:!0},assignedStoreIds:{type:Array,required:!0},monthOptions:{type:Array,required:!0}},setup(d){const p=d,h=y(!1),F=y(!1),D=y(!1),T=[{label:"25 rows",value:25},{label:"50 rows",value:50},{label:"100 rows",value:100},{label:"200 rows",value:200}],Q=f(()=>p.stores.map(o=>({label:`${o.name} (${o.brand_code})`,value:o.id,searchTerms:[o.name,o.brand_code].join(" ").toLowerCase()}))),v=y(p.filters.year||new Date().getFullYear()),b=y(p.filters.month||new Date().getMonth()+1),x=y(p.filters.store_ids||[]),c=y(p.filters.search||""),_=y(p.filters.per_page||50);ot();const j=()=>{F.value=!0,at.get(route("reports.actual-cost-cogs-report.index"),{year:v.value,month:b.value,store_ids:x.value,search:c.value,per_page:_.value},{preserveState:!0,preserveScroll:!0,replace:!0,onStart:()=>F.value=!0,onFinish:()=>F.value=!1})};U([v,b,x,_],L.throttle(j,300)),U(c,L.throttle(j,500));const H=()=>{h.value=!h.value},S=f(()=>{let o=0;return v.value&&o++,b.value&&o++,x.value&&x.value.length>0&&o++,c.value&&o++,o}),Y=f(()=>S.value>0);f(()=>!h.value||window.innerWidth>=1024);const z=()=>{v.value=new Date().getFullYear(),b.value=new Date().getMonth()+1,x.value=p.assignedStoreIds,c.value="",_.value=50},W=f(()=>route("reports.actual-cost-cogs-report.export",{year:v.value,month:b.value,store_ids:x.value,search:c.value})),n=o=>o?new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(o):"â‚±0.00",i=o=>o?new Intl.NumberFormat("en-PH").format(o):"0",m=f(()=>{const o={beginningInventory:0,beginningValue:0,deliveries:0,deliveriesValue:0,interco:0,intercoValue:0,endingInventory:0,endingValue:0,actualCost:0};return p.reportData.forEach(e=>{o.beginningInventory+=parseFloat(e.beginning_inventory||0),o.beginningValue+=parseFloat(e.beginning_value||0),o.deliveries+=parseFloat(e.deliveries||0),o.deliveriesValue+=parseFloat(e.deliveries_value||0),o.interco+=parseFloat(e.interco||0),o.intercoValue+=parseFloat(e.interco_value||0),o.endingInventory+=parseFloat(e.ending_inventory||0),o.endingValue+=parseFloat(e.ending_value||0),o.actualCost+=parseFloat(e.actual_cost||0)}),o});return(o,e)=>{const B=C("Input"),G=C("Button"),X=C("Pagination"),J=C("Layout");return u(),K(J,{heading:"Actual Cost / COGS Report",hasExcelDownload:!0,exportRoute:W.value},{default:R(()=>{var P;return[t("div",rt,[t("button",{onClick:H,class:"flex items-center justify-between w-full p-4 bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow"},[t("div",it,[l(r(Z),{class:"w-5 h-5 text-gray-600"}),e[8]||(e[8]=t("span",{class:"font-medium text-gray-900"},"Filters",-1)),Y.value?(u(),g("span",dt,a(S.value),1)):w("",!0)]),l(r(tt),{class:I(["w-5 h-5 text-gray-400 transition-transform",h.value?"rotate-180":""])},null,8,["class"])])]),t("div",{class:I(["bg-white rounded-xl border border-gray-200 shadow-sm mb-6 transition-all duration-300",h.value&&o.window.innerWidth<1024?"hidden":"block"])},[t("div",ut,[t("div",ct,[t("div",gt,[l(r(lt),{class:I(["w-5 h-5 text-gray-400 absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors",D.value?"text-blue-500":""])},null,8,["class"]),l(B,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),onFocus:e[1]||(e[1]=s=>D.value=!0),onBlur:e[2]||(e[2]=s=>D.value=!1),placeholder:"Search by item code, description, or store...",class:"pl-12 pr-4 py-3 w-full text-base border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg"},null,8,["modelValue"]),c.value?(u(),g("div",pt,[t("button",{onClick:e[3]||(e[3]=s=>c.value=""),class:"text-gray-400 hover:text-gray-600 transition-colors"},[l(r($),{class:"w-4 h-4"})])])):w("",!0)])]),t("div",xt,[t("div",mt,[t("label",yt,[l(r(M),{class:"w-4 h-4"}),e[9]||(e[9]=V(" Year "))]),l(B,{type:"number",modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=s=>v.value=s),min:"2000",max:"2099",class:"w-full border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg"},null,8,["modelValue"])]),t("div",vt,[t("label",bt,[l(r(M),{class:"w-4 h-4"}),e[10]||(e[10]=V(" Month "))]),l(O,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=s=>b.value=s),options:d.monthOptions,optionLabel:"label",optionValue:"value",class:"w-full",clearable:!1},null,8,["modelValue","options"])]),t("div",ft,[t("label",ht,[l(r(nt),{class:"w-4 h-4"}),e[11]||(e[11]=V(" Stores "))]),l(r(et),{filter:"",placeholder:"All Stores",modelValue:x.value,"onUpdate:modelValue":e[6]||(e[6]=s=>x.value=s),options:Q.value,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue","options"])]),t("div",_t,[t("label",wt,[l(r(N),{class:"w-4 h-4"}),e[12]||(e[12]=V(" Per Page "))]),l(O,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=s=>_.value=s),options:T,optionLabel:"label",optionValue:"value",class:"w-full",clearable:!1},null,8,["modelValue"])])]),t("div",Vt,[t("div",Ft," Showing "+a(((P=d.paginatedData.data)==null?void 0:P.length)||0)+" of "+a(d.paginatedData.total||0)+" results ",1),t("div",Ct,[l(G,{onClick:z,variant:"outline",class:"flex items-center gap-2 px-4 py-2 border-gray-300 hover:bg-gray-50 transition-colors"},{default:R(()=>[l(r($),{class:"w-4 h-4"}),e[13]||(e[13]=V(" Reset Filters "))]),_:1})])])])],2),t("div",Dt,[t("div",kt,[t("div",It,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm text-gray-600"},"Beginning Inventory",-1)),t("p",At,a(i(m.value.beginningInventory)),1),t("p",Nt,a(n(m.value.beginningValue)),1)]),l(r(N),{class:"w-8 h-8 text-blue-500"})])]),t("div",jt,[t("div",St,[t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-600"},"Deliveries",-1)),t("p",Bt,a(i(m.value.deliveries)),1),t("p",Pt,a(n(m.value.deliveriesValue)),1)]),l(r(A),{class:"w-8 h-8 text-green-500"})])]),t("div",Lt,[t("div",Ut,[t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm text-gray-600"},"Interco",-1)),t("p",Rt,a(i(m.value.interco)),1),t("p",Ot,a(n(m.value.intercoValue)),1)]),l(r(st),{class:"w-8 h-8 text-purple-500"})])]),t("div",qt,[t("div",Et,[t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm text-gray-600"},"Ending Inventory",-1)),t("p",$t,a(i(m.value.endingInventory)),1),t("p",Mt,a(n(m.value.endingValue)),1)]),l(r(N),{class:"w-8 h-8 text-amber-500"})])])]),t("div",Tt,[F.value?(u(),g("div",Qt,e[18]||(e[18]=[t("div",{class:"flex items-center gap-3 text-gray-600"},[t("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t("span",null,"Loading...")],-1)]))):w("",!0),t("div",Ht,[t("table",Yt,[e[21]||(e[21]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",{class:"text-xs text-gray-500 uppercase tracking-wider"},[t("th",{class:"px-4 py-3 text-left font-medium"},"Store Branch"),t("th",{class:"px-4 py-3 text-left font-medium"},"Item Code"),t("th",{class:"px-4 py-3 text-left font-medium"},"Item Description"),t("th",{class:"px-4 py-3 text-left font-medium"},"UoM"),t("th",{class:"px-4 py-3 text-right font-medium"},"Unit Cost"),t("th",{class:"px-4 py-3 text-center font-medium bg-blue-50",colspan:"2"},"Beginning Inventory"),t("th",{class:"px-4 py-3 text-center font-medium bg-green-50",colspan:"2"},"Deliveries"),t("th",{class:"px-4 py-3 text-center font-medium bg-purple-50",colspan:"2"},"Interco"),t("th",{class:"px-4 py-3 text-center font-medium bg-amber-50",colspan:"2"},"Ending Inventory"),t("th",{class:"px-4 py-3 text-right font-medium"},"Actual Cost")]),t("tr",{class:"text-xs text-gray-500 uppercase tracking-wider"},[t("th",{class:"px-3 py-2"}),t("th",{class:"px-3 py-2"}),t("th",{class:"px-3 py-2"}),t("th",{class:"px-3 py-2"}),t("th",{class:"px-3 py-2"}),t("th",{class:"px-3 py-2 text-center font-medium text-gray-600 bg-blue-50"},"Qty"),t("th",{class:"px-3 py-2 text-right font-medium text-gray-600 bg-blue-50"},"Value"),t("th",{class:"px-3 py-2 text-center font-medium text-gray-600 bg-green-50"},"Qty"),t("th",{class:"px-3 py-2 text-right font-medium text-gray-600 bg-green-50"},"Value"),t("th",{class:"px-3 py-2 text-center font-medium text-gray-600 bg-purple-50"},"Qty"),t("th",{class:"px-3 py-2 text-right font-medium text-gray-600 bg-purple-50"},"Value"),t("th",{class:"px-3 py-2 text-center font-medium text-gray-600 bg-amber-50"},"Qty"),t("th",{class:"px-3 py-2 text-right font-medium text-gray-600 bg-amber-50"},"Value")])],-1)),t("tbody",zt,[!d.paginatedData.data||d.paginatedData.data.length===0?(u(),g("tr",Wt,[t("td",Gt,[t("div",Xt,[l(r(A),{class:"w-12 h-12 text-gray-300 mb-3"}),e[19]||(e[19]=t("span",{class:"text-lg font-medium"},"No data available",-1)),e[20]||(e[20]=t("span",{class:"text-sm text-gray-400 mt-1"},"Try adjusting your filters or search criteria",-1))])])])):w("",!0),(u(!0),g(E,null,q(d.paginatedData.data||[],(s,k)=>(u(),g("tr",{key:k,class:"hover:bg-gray-50 transition-colors"},[t("td",Jt,a(s.store_branch||"N/A"),1),t("td",Kt,a(s.item_code||"N/A"),1),t("td",{class:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",title:s.item_description},a(s.item_description||"N/A"),9,Zt),t("td",te,a(s.uom||"N/A"),1),t("td",ee,a(n(s.unit_cost)),1),t("td",se,a(i(s.beginning_inventory)),1),t("td",ae,a(n(s.beginning_value)),1),t("td",oe,a(i(s.deliveries)),1),t("td",le,a(n(s.deliveries_value)),1),t("td",ne,a(i(s.interco)),1),t("td",re,a(n(s.interco_value)),1),t("td",ie,a(i(s.ending_inventory)),1),t("td",de,a(n(s.ending_value)),1),t("td",ue,a(n(s.actual_cost)),1)]))),128))])])]),t("div",ce,[!d.paginatedData.data||d.paginatedData.data.length===0?(u(),g("div",ge,[l(r(A),{class:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e[22]||(e[22]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No data available",-1)),e[23]||(e[23]=t("p",{class:"text-sm text-gray-500"},"Try adjusting your filters or search criteria",-1))])):w("",!0),t("div",pe,[(u(!0),g(E,null,q(d.paginatedData.data||[],(s,k)=>(u(),g("div",{key:k,class:"p-4 hover:bg-gray-50 transition-colors"},[t("div",xe,[t("div",me,[t("span",ye,a(s.item_code||"N/A"),1),t("span",ve,a(s.store_branch||"N/A"),1)]),t("div",be,[t("div",fe,a(n(s.ending_value)),1),t("div",he,a(i(s.ending_inventory))+" units ",1)])]),t("div",_e,[t("p",we,a(s.item_description||"N/A"),1)]),t("div",Ve,[t("div",null,[e[24]||(e[24]=t("span",{class:"text-xs text-gray-500 block"},"Unit Cost:",-1)),t("span",Fe,a(n(s.unit_cost)),1)]),t("div",null,[e[25]||(e[25]=t("span",{class:"text-xs text-gray-500 block"},"UoM:",-1)),t("span",Ce,a(s.uom||"N/A"),1)])]),t("div",De,[t("div",ke,[e[26]||(e[26]=t("span",{class:"text-gray-600 bg-blue-50 px-2 py-1 rounded"},"Beginning:",-1)),t("span",Ie,a(i(s.beginning_inventory))+" ("+a(n(s.beginning_value))+")",1)]),t("div",Ae,[e[27]||(e[27]=t("span",{class:"text-gray-600 bg-green-50 px-2 py-1 rounded"},"Deliveries:",-1)),t("span",Ne,a(i(s.deliveries))+" ("+a(n(s.deliveries_value))+")",1)]),t("div",je,[e[28]||(e[28]=t("span",{class:"text-gray-600 bg-purple-50 px-2 py-1 rounded"},"Interco:",-1)),t("span",Se,a(i(s.interco))+" ("+a(n(s.interco_value))+")",1)]),t("div",Be,[e[29]||(e[29]=t("span",{class:"text-gray-600 bg-gray-100 px-2 py-1 rounded"},"Actual Cost:",-1)),t("span",Pe,a(n(s.actual_cost)),1)])])]))),128))])])]),t("div",Le,[l(X,{data:d.paginatedData},null,8,["data"])])]}),_:1},8,["exportRoute"])}}};export{Te as default};
