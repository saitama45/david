import{X as Te,f as je,T as ne,V as Me,W as ie,x as h,aW as Ue,l as w,ai as le,y as Fe,r as de,o as v,c as ue,w as m,a as l,u as o,b,N as ce,aj as A,g as s,n as V,aX as z,m as Q,O as G,ay as N,d as y,t as f,h as x,_ as T,aY as _e,P as Le,z as Qe,e as Y,ah as H,F as W,aZ as Pe,i as Be}from"./app-rjK1ng7o.js";import{I as Re}from"./ItemAutoComplete-95Pbgfq4.js";import{u as ze}from"./useToast-DBCD-RTl.js";import{u as Ge}from"./useEditQuantity-BCpCvMmE.js";import{_ as me,a as fe}from"./AlertDescription-B6smwBW-.js";import{d as Ye,_ as He,a as We,b as Xe,c as Ze,e as Je}from"./DialogTitle-B5P0ImB3.js";import pe from"./StockIndicator-DP0m4Ibx.js";/* empty css                                                                          */import{A as Ke}from"./arrow-left-CawIyKRQ.js";import{P}from"./package-Dr2_9bTP.js";import{T as ve}from"./triangle-alert-wjSEt5KL.js";import{S as ye}from"./square-pen-r0X0rD3O.js";import{C as et}from"./chevron-left-CEk8dY0_.js";import"./lodash-DqVvdaAw.js";import"./circle-x-M_usABET.js";import"./trending-up-XZiWa48v.js";const tt={class:"space-y-4"},st={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},rt={class:"flex items-center gap-3"},ot={class:"p-2 bg-blue-600 rounded-lg"},at={class:"px-4 sm:px-6 py-4"},nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},it={class:"space-y-2"},lt={key:0,class:"text-sm text-red-600"},dt={key:1,class:"text-sm text-muted-foreground"},ut={class:"space-y-2"},ct={key:0,class:"text-sm text-red-600"},_t={class:"space-y-2"},mt={key:0,class:"text-sm text-red-600"},ft={class:"space-y-2 md:col-span-3"},pt={key:0,class:"text-sm text-red-600"},vt={class:"space-y-2 md:col-span-3"},yt={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},bt={class:"flex items-center gap-3"},gt={class:"p-2 bg-green-600 rounded-lg"},ht={class:"px-4 sm:px-6 py-4"},xt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},kt={class:"space-y-2"},wt={key:0,class:"text-sm text-red-600"},St={class:"space-y-2"},Ct={class:"space-y-2"},qt={class:"space-y-2"},It={key:0,class:"text-sm text-red-600"},Nt={class:"flex justify-end mt-4"},$t={key:1,class:"text-sm text-muted-foreground mt-2"},Et={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Vt={class:"flex items-center gap-3"},Ot={class:"p-2 bg-purple-600 rounded-lg"},Dt={class:"text-lg font-semibold text-gray-900"},At={class:"p-4 sm:p-6 space-y-4"},Tt={class:"flex flex-col gap-3"},jt={class:"relative"},Mt={class:"flex flex-wrap gap-2"},Ut={class:"flex items-center gap-2"},Ft={class:"font-bold text-lg"},Lt={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 text-sm text-gray-600"},Qt={class:"flex items-center gap-2"},Pt={class:"block md:hidden space-y-2"},Bt={class:"flex items-start justify-between mb-2"},Rt={class:"flex-1"},zt={class:"font-medium text-gray-900"},Gt=["onClick"],Yt={class:"grid grid-cols-2 gap-2 text-sm"},Ht={class:"mt-1 flex items-center gap-1"},Wt={class:"font-medium"},Xt=["onClick"],Zt={class:"mt-1"},Jt={class:"mt-2 pt-2 border-t border-gray-100"},Kt=["onClick"],es={key:0,class:"text-center py-8 text-gray-500"},ts={class:"hidden md:block"},ss={class:"overflow-x-auto border border-gray-200 rounded-lg"},rs={class:"w-full text-sm"},os={class:"divide-y divide-gray-200"},as={class:"px-4 py-3 text-gray-900"},ns={class:"font-medium"},is={class:"px-4 py-3 text-center"},ls={class:"flex items-center justify-center gap-2"},ds={class:"font-medium"},us=["onClick"],cs={key:0,class:"text-xs text-red-600 text-center"},_s={key:1,class:"text-xs text-red-600 text-center"},ms={class:"px-4 py-3 text-gray-900"},fs={class:"px-4 py-3 text-center"},ps={class:"flex justify-center gap-1"},vs=["onClick"],ys={key:0},bs={colspan:"4",class:"px-4 py-8 text-center text-gray-500"},gs={class:"flex flex-col items-center"},hs={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-3 pt-4 border-t border-gray-200"},xs={class:"text-sm text-gray-700"},ks={class:"flex items-center gap-1"},ws=["disabled"],Ss=["onClick","disabled"],Cs=["disabled"],qs={key:1,class:"mt-4"},Is={class:"flex flex-col sm:flex-row gap-3 justify-end pt-4 border-t border-gray-200"},Ns={class:"flex gap-2"},$s={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Es={class:"grid gap-4 py-4"},Vs={class:"grid grid-cols-4 items-center gap-4"},Os={__name:"Edit",props:{myStoreOptions:Array,sendingStoreOptions:Array,items:Array,user_store_branch_id:Number,order:Object},setup(be){var te,se,re,oe,ae;const u=be,X=je(),{toast:p}=ze(),n=ne({store_branch_id:(te=u.order)!=null&&te.store_branch_id?Number(u.order.store_branch_id):u.user_store_branch_id,sending_store_branch_id:(se=u.order)!=null&&se.sending_store_branch_id?Number(u.order.sending_store_branch_id):null,transfer_date:(re=u.order)!=null&&re.order_date?new Date(u.order.order_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],interco_reason:((oe=u.order)==null?void 0:oe.interco_reason)||"",remarks:((ae=u.order)==null?void 0:ae.remarks)||"",items:[]});Me(()=>{u.order&&ie(()=>{if(u.order.sending_store_branch_id){const t=Number(u.order.sending_store_branch_id);n.sending_store_branch_id=t,ie(()=>{if(u.order.store_branch_id){const e=Number(u.order.store_branch_id);n.store_branch_id=e}u.order.order_date&&(n.transfer_date=new Date(u.order.order_date).toISOString().split("T")[0]),u.order.interco_reason&&(n.interco_reason=u.order.interco_reason),u.order.remarks&&(n.remarks=u.order.remarks),branchesOptions.value&&branchesOptions.value.length>0&&Oe()})}}),u.order&&u.order.store_order_items&&(c.value=u.order.store_order_items.map(t=>{var e,d,a,r,_,I;return{id:Date.now()+Math.random(),original_id:t.id,item_code:String(((e=t.sapMasterfile)==null?void 0:e.ItemCode)||t.item_code),description:t.item_description||((d=t.sapMasterfile)==null?void 0:d.ItemDescription)||((a=t.sapMasterfile)==null?void 0:a.ItemName)||"No description",unit_of_measurement:String(t.uom||"PCS"),alt_uom:String(((r=t.sapMasterfile)==null?void 0:r.AltUOM)||t.uom||"PCS"),quantity_ordered:parseFloat(Number(t.quantity_ordered||0)),cost_per_quantity:Number(t.cost_per_quantity||0),uom:((_=t.sapMasterfile)==null?void 0:_.BaseUOM)||t.uom||"PCS",stock:0,total_cost:parseFloat((Number(t.quantity_ordered||0)*Number(t.cost_per_quantity||0)).toFixed(2)),remarks:t.remarks||"",sap_masterfile_id:t.sap_masterfile_id||((I=t.sapMasterfile)==null?void 0:I.id)||null}}),Ve(),n.sending_store_branch_id&&K(n.sending_store_branch_id))});const c=h([]);h(null),h(!1),h(null),h([]),h([]);const g=h({}),$=h(!1),Z=h(null),D=h(null),j=h(!1),M=h([]),i=Ue({id:null,inventory_code:null,name:null,description:null,unit_of_measurement:null,base_uom:null,base_qty:null,quantity:null,cost:null,total_cost:null,uom:null}),S=ne({item:null}),{isEditQuantityModalOpen:U,formQuantity:q,openEditQuantityModal:ge}=Ge(n,c,null),E=h({transferDetails:!0,addItem:!0,items:!0}),B=t=>{E.value[t]=!E.value[t]},F=h(""),C=h(1),k=h(10),O=w(()=>{if(!F.value)return c.value;const t=F.value.toLowerCase();return c.value.filter(e=>e.description.toLowerCase().includes(t)||e.item_code.toLowerCase().includes(t)||e.uom&&e.uom.toLowerCase().includes(t))}),J=w(()=>Math.ceil(O.value.length/k.value)),L=w(()=>{const t=(C.value-1)*k.value,e=t+k.value;return O.value.slice(t,e)}),he=w(()=>{const t=J.value,e=C.value,d=2,a=[];for(let r=Math.max(2,e-d);r<=Math.min(t-1,e+d);r++)a.push(r);return e-d>2&&a.unshift("..."),e+d<t-1&&a.push("..."),t>1&&a.unshift(1),t>1&&t!==1&&a.push(t),a.filter(r=>r!=="..."||a.indexOf(r)===a.lastIndexOf(r))});w(()=>u.branches.find(t=>t.id===n.sending_store_branch_id)),w(()=>u.branches.find(t=>t.id===n.store_branch_id));const xe=w(()=>c.value.reduce((t,e)=>t+(e.quantity_ordered||0),0));w(()=>c.value.reduce((t,e)=>t+(e.quantity_ordered||0)*(e.cost_per_quantity||0),0)),w(()=>n.sending_store_branch_id&&n.store_branch_id&&n.sending_store_branch_id!==n.store_branch_id);const ke=w(()=>n.sending_store_branch_id&&n.store_branch_id&&n.sending_store_branch_id!==n.store_branch_id),we=w(()=>{if(!n.sending_store_branch_id)return[];const t=u.myStoreOptions.filter(e=>e.value!==n.sending_store_branch_id);if(n.store_branch_id&&!t.some(e=>e.value===n.store_branch_id)){const e=u.myStoreOptions.find(d=>d.value===n.store_branch_id);e&&t.push(e)}return t}),Se=w(()=>!n.sending_store_branch_id),K=async t=>{if(!t){M.value=[];return}j.value=!0;try{const d=(await le.get(route("interco.get-available-items",{sending_store_id:t}))).data.items.filter(a=>a&&a.item_code&&a.item_code.trim()!==""&&a.alt_uom&&a.alt_uom.trim()!=="");M.value=d.map(a=>{const r={value:`${a.item_code}|${a.alt_uom}`,label:`${a.item_code} - ${a.description} (${a.alt_uom})`,_originalData:{item_code:a.item_code,description:a.description,alt_uom:a.alt_uom,uom:a.uom,cost_per_quantity:a.cost_per_quantity}};return a.item_code==="916A2C"&&console.log("ðŸ” DEBUG: Processing 916A2C in fetchSendingStoreItems:",{item_code:a.item_code,description:a.description,alt_uom:a.alt_uom,final_label:r.label,original_data_description:r._originalData.description}),r}),c.value.forEach(a=>{if(!a.description||a.description==="No description"){const r=d.find(_=>_.item_code===a.item_code&&_.alt_uom&&a.unit_of_measurement&&_.alt_uom.trim().toLowerCase()===a.unit_of_measurement.trim().toLowerCase());r&&r.description&&(a.description=r.description,a.item_code==="916A2C"&&console.log("ðŸŽ¯ DEBUG: Reactively updated 916A2C item description:",{item_code:a.item_code,old_description:a.description,new_description:r.description,matched_uom:a.unit_of_measurement}))}}),c.value=[...c.value]}catch{p.add({severity:"error",summary:"Error",detail:"Failed to load items for the selected sending store.",life:5e3}),M.value=[]}finally{j.value=!1}},Ce=()=>{var r;if(S.clearErrors(),!S.item){S.setError("item","Item field is required");return}if(isNaN(Number(i.quantity))||Number(i.quantity)<1){S.setError("quantity","Quantity must be at least 1 and a valid number");return}if(i.cost===null||Number(i.cost)===0){p.add({severity:"error",summary:"Validation Error",detail:"Item cost cannot be zero or empty.",life:5e3});return}const t=[];if(i.inventory_code||t.push("Item code is missing"),i.unit_of_measurement||t.push("UOM is missing"),(!i.quantity||Number(i.quantity)<1)&&t.push("Valid quantity is required"),(i.cost===null||isNaN(Number(i.cost)))&&t.push("Item cost is invalid"),i.description||(i.description="No description"),t.length>0){p.add({severity:"error",summary:"Validation Error",detail:t.join("; "),life:5e3});return}const e=c.value.findIndex(_=>_.item_code===i.inventory_code),d=Number(i.quantity),a=Number(i.cost);if(e!==-1){const _=c.value[e],I=_.quantity_ordered+d,Ae=parseFloat((I*a).toFixed(2));_.quantity_ordered=I,_.total_cost=Ae,_.stock===void 0&&i.stock!==void 0&&(_.stock=i.stock)}else{const _={id:Date.now(),item_code:String(i.inventory_code),description:i.description||"No description",unit_of_measurement:i.unit_of_measurement,alt_uom:i.unit_of_measurement,quantity_ordered:parseFloat(Number(i.quantity).toFixed(2)),cost_per_quantity:Number(i.cost),uom:i.uom,stock:i.stock||0,total_cost:parseFloat((Number(i.quantity)*Number(i.cost)).toFixed(2)),sap_masterfile_id:i.id||((r=D.value)==null?void 0:r.id)||null};c.value.push(_)}Object.keys(i).forEach(_=>{i[_]=null}),Z.value=null,p.add({severity:"success",summary:"Success",detail:"Item added successfully.",life:5e3}),S.item=null,S.clearErrors()},ee=t=>{c.value.splice(t,1)},R=(t,e)=>{ge(t.id,t.quantity_ordered)},qe=()=>{let t=c.value.findIndex(e=>e.id===q.id);if(t===-1&&(t=c.value.findIndex(e=>e.item_code===q.item_code||e.description===q.description)),t!==-1){const e=Number(q.quantity),d=c.value[t];if(isNaN(e)||e<=0){q.errors.quantity="Quantity must be a positive number.",p.add({severity:"error",summary:"Validation Error",detail:"Quantity must be a positive number.",life:3e3});return}const a=Number(d.cost_per_quantity);if(isNaN(a)){p.add({severity:"error",summary:"Calculation Error",detail:"Item cost is invalid. Cannot update total cost.",life:3e3});return}d.quantity_ordered=parseFloat(e.toFixed(2)),d.total_cost=parseFloat((e*a).toFixed(2)),c.value=[...c.value],p.add({severity:"success",summary:"Success",detail:"Quantity Updated.",life:3e3}),U.value=!1}else p.add({severity:"error",summary:"Error",detail:`Item not found in transfer list. Looking for ID: ${q.id}, Item Code: ${q.item_code}, Description: ${q.description}`,life:5e3})},Ie=()=>{const t={};return n.sending_store_branch_id||(t.sending_store_branch_id="Sending store is required"),n.store_branch_id||(t.store_branch_id="Receiving store is required"),n.sending_store_branch_id===n.store_branch_id&&(t.store_selection="Sending and receiving stores must be different"),n.transfer_date||(t.transfer_date="Transfer date is required"),(!n.interco_reason||!n.interco_reason.trim())&&(t.interco_reason="Reason for transfer is required"),c.value.length===0&&(t.items="At least one item is required"),c.value.forEach((e,d)=>{(!e.quantity_ordered||e.quantity_ordered<1)&&(t[`item_${d}_quantity`]="Quantity must be at least 1"),e.quantity_ordered>(e.stock||0)&&(t[`item_${d}_stock`]=`Insufficient stock. Only ${e.stock||0} available`)}),g.value=t,Object.keys(t).length===0},Ne=()=>{if(!Ie()){p.add({severity:"error",summary:"Validation Error",detail:"Please fix all validation errors before submitting.",life:5e3});return}if(c.value.length===0){p.add({severity:"error",summary:"No Items",detail:"Please add at least one item to the transfer before submitting.",life:5e3});return}X.require({message:"Are you sure you want to update this interco transfer?",header:"Confirm Interco Transfer Update",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-danger",rejectLabel:"No",acceptLabel:"Yes",acceptClass:"p-button-success",accept:()=>{$e()},reject:()=>{p.add({severity:"info",summary:"Cancelled",detail:"Interco transfer update was cancelled.",life:3e3})}})},$e=()=>{const t={store_branch_id:n.store_branch_id,sending_store_branch_id:n.sending_store_branch_id,transfer_date:n.transfer_date,interco_reason:n.interco_reason,remarks:n.remarks||"",items:c.value.map((e,d)=>({id:e.original_id||null,item_code:String(e.item_code),quantity_ordered:parseInt(Number(e.quantity_ordered)),quantity_committed:parseInt(Number(e.quantity_ordered)),cost_per_quantity:Number(e.cost_per_quantity||1),uom:String(e.unit_of_measurement||e.uom||"PCS"),remarks:e.remarks||""}))};$.value=!0,ce.put(route("interco.update",u.order.id),t,{onSuccess:e=>{$.value=!1,p.add({severity:"success",summary:"Success",detail:"Interco transfer request updated successfully!",life:5e3})},onError:e=>{if(g.value=e,e.error)p.add({severity:"error",summary:"Submission Failed",detail:e.error,life:8e3});else if(e.items)p.add({severity:"error",summary:"Item Validation Error",detail:`Issue with items: ${e.items}`,life:8e3});else if(e.store_branch_id)p.add({severity:"error",summary:"Store Selection Error",detail:`Receiving store: ${e.store_branch_id}`,life:8e3});else if(e.sending_store_branch_id)p.add({severity:"error",summary:"Store Selection Error",detail:`Sending store: ${e.sending_store_branch_id}`,life:8e3});else{const d=Object.entries(e).map(([a,r])=>`${a}: ${r}`).join("; ");p.add({severity:"error",summary:"Validation Failed",detail:d,life:1e4})}$.value=!1},onCancel:()=>{$.value=!1},onFinish:()=>{$.value=!1},preserveState:!0,preserveScroll:!0})},Ee=()=>{try{if(c.value.length===0){p.add({severity:"info",summary:"Info",detail:"No items to clear.",life:3e3});return}X.require({message:"Are you sure you want to remove ALL items from the transfer?",header:"Confirm Clear All",icon:"pi pi-exclamation-triangle",rejectClass:"p-button-secondary p-button-outlined",rejectLabel:"Cancel",acceptLabel:"Clear All",acceptClass:"p-button-danger",accept:()=>{c.value=[],p.add({severity:"success",summary:"Success",detail:"All items have been removed from the transfer.",life:3e3})},reject:()=>{}})}catch{window.confirm("Are you sure you want to remove ALL items from the transfer?")&&(c.value=[])}},Ve=async()=>{if(!(!n.sending_store_branch_id||c.value.length===0))try{const t=c.value.map(d=>d.item_code).filter(d=>d).join(",");if(!t)return;const e=await le.get("/interco/branch-inventory",{params:{branch_id:n.sending_store_branch_id,item_codes:t}});if(e.data&&e.data.items){const d=e.data.items;c.value.forEach(a=>{const r=d.find(_=>_.item_code===a.item_code||_.ItemCode===a.item_code);r?a.stock=parseFloat(r.quantity||r.Quantity||0):a.stock=0})}else c.value.forEach(d=>{d.stock=0})}catch(t){t.response&&t.response.status===405?p.add({severity:"warn",summary:"Stock Data Unavailable",detail:"Unable to fetch current stock levels. Using default values.",life:5e3}):t.response&&t.response.status===403?p.add({severity:"warn",summary:"Access Restricted",detail:"You don't have permission to view stock levels for this branch.",life:5e3}):p.add({severity:"error",summary:"Stock Data Error",detail:"Failed to load stock information. Items will show 0 stock.",life:5e3}),c.value.forEach(e=>{e.stock=0})}},Oe=()=>{const t=[];if(u.order){if(u.order.sending_store_branch_id||t.push("Sending store ID is missing from order data"),u.order.store_branch_id||t.push("Receiving store ID is missing from order data"),u.order.sending_store_branch_id===u.order.store_branch_id&&t.push("Sending and receiving stores cannot be the same"),!u.order.order_date)t.push("Order date is missing from order data");else{const e=new Date(u.order.order_date);isNaN(e.getTime())&&t.push("Order date is invalid")}if(!(!branchesOptions.value||branchesOptions.value.length===0)){{const e=branchesOptions.value.some(a=>a.value===n.sending_store_branch_id),d=branchesOptions.value.some(a=>a.value===n.store_branch_id);!e&&u.order.sending_store_branch_id&&t.push(`You may not have permission to access sending store ${u.order.sending_store_branch_id}`),!d&&u.order.store_branch_id&&t.push(`You may not have permission to access receiving store ${u.order.store_branch_id}`)}if(t.length>0){const e=t.filter(d=>d.includes("missing")||d.includes("invalid")||d.includes("same"));e.length>0&&p.add({severity:"warn",summary:"Data Quality Warning",detail:`Some data may need attention: ${e.slice(0,2).join(", ")}`,life:6e3})}}}};Fe(()=>n.sending_store_branch_id,t=>{t?(c.value=c.value.filter(e=>e.stock>0),K(t)):M.value=[],Z.value=null,Object.keys(i).forEach(e=>{i[e]=null}),n.store_branch_id===t&&(n.store_branch_id=null)});const De=t=>{if(!t){Object.keys(i).forEach(e=>{i[e]=null}),D.value=null;return}console.log("ðŸŽ¯ DEBUG: Auto-complete item selected:",{item_code:t.item_code,description:t.description,alt_uom:t.alt_uom,stock:t.stock}),i.id=t.id,i.inventory_code=String(t.item_code),i.description=t.description||"No description",i.unit_of_measurement=t.alt_uom||t.uom,i.cost=Number(t.cost_per_quantity||1),i.uom=t.uom,i.stock=t.stock||0,D.value=t,S.item=t.item_code,(t.item_code==="916A2C"||t.item_code==="397A2D")&&console.log(`ðŸŽ¯ DEBUG: ${t.item_code} auto-complete selected - Product details set:`,{inventory_code:i.inventory_code,description:i.description,unit_of_measurement:i.unit_of_measurement,stock:i.stock,item_code:t.item_code}),console.log("âœ… DEBUG: Auto-complete product details set:",{inventory_code:i.inventory_code,description:i.description,unit_of_measurement:i.unit_of_measurement,stock:i.stock})};return(t,e)=>{const d=de("Select"),a=de("Layout");return v(),ue(a,{heading:"Edit Store Transfer"},{"header-actions":m(()=>[l(o(A),{variant:"outline",onClick:e[0]||(e[0]=r=>o(ce).get(t.route("interco.index")))},{default:m(()=>[l(o(Ke),{class:"w-4 h-4 mr-2"}),e[20]||(e[20]=b(" Back to Transfers "))]),_:1})]),default:m(()=>[s("div",tt,[s("div",st,[s("button",{onClick:e[1]||(e[1]=r=>B("transferDetails")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-blue-50 to-blue-100 border-b border-blue-200 flex items-center justify-between text-left hover:from-blue-100 hover:to-blue-200 transition-colors"},[s("div",rt,[s("div",ot,[l(o(P),{class:"w-5 h-5 text-white"})]),e[21]||(e[21]=s("div",null,[s("h2",{class:"text-lg font-semibold text-gray-900"},"Transfer Details"),s("p",{class:"text-sm text-gray-600"},"Basic transfer information")],-1))]),l(o(z),{class:V(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":E.value.transferDetails}])},null,8,["class"])]),Q(s("div",at,[s("div",nt,[s("div",it,[l(o(N),{for:"receiving_store"},{default:m(()=>e[22]||(e[22]=[b("My Store *")])),_:1}),l(d,{filter:"",placeholder:"Select your store",modelValue:o(n).store_branch_id,"onUpdate:modelValue":e[2]||(e[2]=r=>o(n).store_branch_id=r),options:we.value,disabled:Se.value,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue","options","disabled"]),g.value.store_branch_id?(v(),y("p",lt,f(g.value.store_branch_id),1)):x("",!0),o(n).sending_store_branch_id?x("",!0):(v(),y("p",dt," Select a sending store first "))]),s("div",ut,[l(o(N),{for:"sending_store"},{default:m(()=>e[23]||(e[23]=[b("Sending Store *")])),_:1}),l(d,{filter:"",placeholder:"Select sending store",modelValue:o(n).sending_store_branch_id,"onUpdate:modelValue":e[3]||(e[3]=r=>o(n).sending_store_branch_id=r),options:u.sendingStoreOptions,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue","options"]),g.value.sending_store_branch_id?(v(),y("p",ct,f(g.value.sending_store_branch_id),1)):x("",!0)]),s("div",_t,[l(o(N),{for:"transfer_date"},{default:m(()=>e[24]||(e[24]=[b("Transfer Date")])),_:1}),l(o(T),{id:"transfer_date",type:"date",modelValue:o(n).transfer_date,"onUpdate:modelValue":e[4]||(e[4]=r=>o(n).transfer_date=r),class:"w-full"},null,8,["modelValue"]),g.value.transfer_date?(v(),y("p",mt,f(g.value.transfer_date),1)):x("",!0)]),s("div",ft,[l(o(N),{for:"reason"},{default:m(()=>e[25]||(e[25]=[b("Reason for Transfer *")])),_:1}),l(o(_e),{id:"reason",modelValue:o(n).interco_reason,"onUpdate:modelValue":e[5]||(e[5]=r=>o(n).interco_reason=r),placeholder:"Explain why this transfer is needed...",rows:"3"},null,8,["modelValue"]),g.value.interco_reason?(v(),y("p",pt,f(g.value.interco_reason),1)):x("",!0)]),s("div",vt,[l(o(N),{for:"remarks"},{default:m(()=>e[26]||(e[26]=[b("Remarks (Optional)")])),_:1}),l(o(_e),{id:"remarks",modelValue:o(n).remarks,"onUpdate:modelValue":e[6]||(e[6]=r=>o(n).remarks=r),placeholder:"Additional notes or instructions...",rows:"2"},null,8,["modelValue"])])])],512),[[G,E.value.transferDetails]])]),s("div",yt,[s("button",{onClick:e[7]||(e[7]=r=>B("addItem")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-green-50 to-green-100 border-b border-green-200 flex items-center justify-between text-left hover:from-green-100 hover:to-green-200 transition-colors"},[s("div",bt,[s("div",gt,[l(o(Le),{class:"w-5 h-5 text-white"})]),e[27]||(e[27]=s("div",null,[s("h3",{class:"text-lg font-semibold text-gray-900"},"Add Items"),s("p",{class:"text-sm text-gray-600"},"Add items to your transfer")],-1))]),l(o(z),{class:V(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":E.value.addItem}])},null,8,["class"])]),Q(s("div",ht,[g.value.store_selection?(v(),ue(o(me),{key:0,class:"mb-4"},{default:m(()=>[l(o(ve),{class:"w-4 h-4"}),l(o(fe),null,{default:m(()=>[b(f(g.value.store_selection),1)]),_:1})]),_:1})):x("",!0),s("div",xt,[s("div",kt,[l(o(N),{class:"text-sm font-medium text-gray-700"},{default:m(()=>e[28]||(e[28]=[b("Item")])),_:1}),l(Re,{modelValue:D.value,"onUpdate:modelValue":e[8]||(e[8]=r=>D.value=r),"sending-store-id":o(n).sending_store_branch_id,placeholder:"Type at least 3 characters to search for items...",disabled:!o(n).sending_store_branch_id||j.value,onItemSelected:De},null,8,["modelValue","sending-store-id","disabled"]),o(S).errors.item?(v(),y("p",wt,f(o(S).errors.item),1)):x("",!0)]),s("div",St,[l(o(N),{class:"text-sm font-medium text-gray-700"},{default:m(()=>e[29]||(e[29]=[b("UOM")])),_:1}),l(o(T),{type:"text",disabled:"",modelValue:i.unit_of_measurement,"onUpdate:modelValue":e[9]||(e[9]=r=>i.unit_of_measurement=r),class:"flex h-10 w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm"},null,8,["modelValue"])]),s("div",Ct,[l(o(N),{class:"text-sm font-medium text-gray-700"},{default:m(()=>e[30]||(e[30]=[b("SOH Stock")])),_:1}),l(o(T),{type:"text",disabled:"",value:i.stock||0,class:"flex h-10 w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm"},null,8,["value"])]),s("div",qt,[l(o(N),{class:"text-sm font-medium text-gray-700"},{default:m(()=>e[31]||(e[31]=[b("Quantity")])),_:1}),l(o(T),{type:"number",modelValue:i.quantity,"onUpdate:modelValue":e[10]||(e[10]=r=>i.quantity=r),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm"},null,8,["modelValue"]),o(S).errors.quantity?(v(),y("p",It,f(o(S).errors.quantity),1)):x("",!0)])]),s("div",Nt,[l(o(A),{onClick:Ce,disabled:j.value||!o(n).sending_store_branch_id},{default:m(()=>e[32]||(e[32]=[b(" Add to Transfer ")])),_:1},8,["disabled"])]),o(n).sending_store_branch_id?x("",!0):(v(),y("p",$t," Select a sending store to add items "))],512),[[G,E.value.addItem]])]),s("div",Et,[s("button",{onClick:e[11]||(e[11]=r=>B("items")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200 flex items-center justify-between text-left hover:from-purple-100 hover:to-purple-200 transition-colors"},[s("div",Vt,[s("div",Ot,[l(o(P),{class:"w-5 h-5 text-white"})]),s("div",null,[s("h3",Dt,"Transfer Items ("+f(c.value.length)+")",1),e[33]||(e[33]=s("p",{class:"text-sm text-gray-600"},"Manage your transfer items and quantities",-1))])]),l(o(z),{class:V(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":E.value.items}])},null,8,["class"])]),Q(s("div",At,[s("div",Tt,[s("div",jt,[Q(s("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=r=>F.value=r),placeholder:"Search items by code or description...",class:"w-full h-10 pl-10 pr-4 rounded-md border border-gray-300 bg-white text-sm shadow-sm transition-colors placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500"},null,512),[[Qe,F.value]]),e[34]||(e[34]=s("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),s("div",Mt,[s("div",Ut,[e[35]||(e[35]=s("span",{class:"text-sm text-gray-600"},"Total Quantity:",-1)),s("span",Ft,f(xe.value),1)])])]),s("div",Lt,[s("span",null,f(O.value.length)+" items found",1),s("div",Qt,[e[36]||(e[36]=s("span",null,"Items per page:",-1)),s("button",{onClick:e[13]||(e[13]=r=>k.value=10),class:V(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===10?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 10 ",2),s("button",{onClick:e[14]||(e[14]=r=>k.value=25),class:V(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===25?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 25 ",2),s("button",{onClick:e[15]||(e[15]=r=>k.value=50),class:V(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===50?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 50 ",2)])]),s("div",Pt,[(v(!0),y(W,null,Y(L.value,(r,_)=>(v(),y("div",{key:r.id,class:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow"},[s("div",Bt,[s("div",Rt,[s("div",zt,f(r.item_code)+" - "+f(r.description)+" ("+f(r.alt_uom||r.uom)+")",1)]),s("button",{onClick:I=>ee(_),class:"h-8 w-8 p-0 hover:bg-red-50 hover:text-red-600 hover:border-red-300 flex-shrink-0 ml-2 rounded-md border border-gray-300"},[l(o(H),{class:"w-4 h-4"})],8,Gt)]),s("div",Yt,[s("div",null,[e[37]||(e[37]=s("span",{class:"text-gray-600"},"Quantity:",-1)),s("div",Ht,[s("span",Wt,f(r.quantity_ordered),1),s("button",{onClick:I=>R(r,_),class:"text-blue-600 hover:text-blue-800"},[l(o(ye),{class:"w-3 h-3"})],8,Xt)])]),s("div",null,[e[38]||(e[38]=s("span",{class:"text-gray-600"},"SOH Stock:",-1)),s("div",Zt,[l(pe,{available:Number(r.stock||0),requested:r.quantity_ordered,size:"small"},null,8,["available","requested"])])])]),s("div",Jt,[s("button",{onClick:I=>R(r,_),class:"w-full text-sm text-blue-600 hover:text-blue-800 font-medium"}," Edit Quantity ",8,Kt)])]))),128)),L.value.length===0?(v(),y("div",es,[l(o(P),{class:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e[39]||(e[39]=s("p",null,"No items found. Try searching or add items manually.",-1))])):x("",!0)]),s("div",ts,[s("div",ss,[s("table",rs,[e[41]||(e[41]=s("thead",{class:"bg-gray-50 border-b border-gray-200"},[s("tr",null,[s("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"Description"),s("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Quantity"),s("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"SOH Stock"),s("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Actions")])],-1)),s("tbody",os,[(v(!0),y(W,null,Y(L.value,(r,_)=>(v(),y("tr",{key:r.id,class:"hover:bg-gray-50"},[s("td",as,[s("div",null,[s("p",ns,f(r.item_code)+" - "+f(r.description)+" ("+f(r.alt_uom||r.uom)+")",1)])]),s("td",is,[s("div",ls,[s("span",ds,f(r.quantity_ordered),1),s("button",{onClick:I=>R(r,_),class:"text-blue-600 hover:text-blue-800"},[l(o(ye),{class:"w-3 h-3"})],8,us)]),g.value[`item_${_}_quantity`]?(v(),y("p",cs,f(g.value[`item_${_}_quantity`]),1)):x("",!0),g.value[`item_${_}_stock`]?(v(),y("p",_s,f(g.value[`item_${_}_stock`]),1)):x("",!0)]),s("td",ms,[l(pe,{available:Number(r.stock||0),requested:r.quantity_ordered,size:"small"},null,8,["available","requested"])]),s("td",fs,[s("div",ps,[s("button",{onClick:I=>ee(_),class:"text-red-600 hover:text-red-800"},[l(o(H),{class:"w-4 h-4"})],8,vs)])])]))),128)),L.value.length===0?(v(),y("tr",ys,[s("td",bs,[s("div",gs,[l(o(P),{class:"w-12 h-12 text-gray-400 mb-2"}),e[40]||(e[40]=s("p",null,"No items found. Try searching or add items manually.",-1))])])])):x("",!0)])])])]),O.value.length>k.value?(v(),y("div",hs,[s("div",xs," Showing "+f((C.value-1)*k.value+1)+" to "+f(Math.min(C.value*k.value,O.value.length))+" of "+f(O.value.length)+" items ",1),s("div",ks,[s("button",{onClick:e[16]||(e[16]=r=>C.value--),disabled:C.value===1,class:"h-8 w-8 p-0 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[l(o(et),{class:"w-4 h-4"})],8,ws),(v(!0),y(W,null,Y(he.value,r=>(v(),y("button",{key:r,onClick:_=>C.value=r==="..."?null:C.value=r,disabled:r==="...",class:V(["h-8 w-8 p-0 rounded-md text-sm font-medium transition-colors",C.value===r?"bg-blue-600 text-white":r==="..."?"text-gray-500 cursor-default":"border border-gray-300 hover:bg-gray-50"])},f(r),11,Ss))),128)),s("button",{onClick:e[17]||(e[17]=r=>C.value++),disabled:C.value===J.value,class:"h-8 w-8 p-0 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[l(o(Pe),{class:"w-4 h-4"})],8,Cs)])])):x("",!0),g.value.items?(v(),y("div",qs,[l(o(me),{variant:"destructive"},{default:m(()=>[l(o(ve),{class:"w-4 h-4"}),l(o(fe),null,{default:m(()=>[b(f(g.value.items),1)]),_:1})]),_:1})])):x("",!0),s("div",Is,[s("div",Ns,[l(o(A),{onClick:Ee,variant:"outline",class:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:c.value.length===0},{default:m(()=>[l(o(H),{class:"w-4 h-4 mr-2"}),e[42]||(e[42]=b(" Clear All "))]),_:1},8,["disabled"])]),l(o(A),{onClick:Ne,disabled:$.value||!ke.value,class:"min-w-[120px]"},{default:m(()=>[$.value?(v(),y("svg",$s,e[43]||(e[43]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):x("",!0),b(" "+f($.value?"Updating...":"Update Transfer"),1)]),_:1},8,["disabled"])])],512),[[G,E.value.items]])])]),l(o(Je),{open:o(U),"onUpdate:open":e[19]||(e[19]=r=>Be(U)?U.value=r:null)},{default:m(()=>[l(o(Ye),{class:"sm:max-w-[425px]"},{default:m(()=>[l(o(He),null,{default:m(()=>[l(o(We),null,{default:m(()=>e[44]||(e[44]=[b("Edit Quantity")])),_:1}),l(o(Xe),null,{default:m(()=>e[45]||(e[45]=[b(" Make changes to the quantity here. Click save when you're done. ")])),_:1})]),_:1}),s("div",Es,[s("div",Vs,[l(o(N),{for:"quantity",class:"text-right"},{default:m(()=>e[46]||(e[46]=[b(" Quantity ")])),_:1}),l(o(T),{id:"quantity",type:"number",class:"col-span-3",modelValue:o(q).quantity,"onUpdate:modelValue":e[18]||(e[18]=r=>o(q).quantity=r)},null,8,["modelValue"])])]),l(o(Ze),null,{default:m(()=>[l(o(A),{onClick:qe},{default:m(()=>e[47]||(e[47]=[b("Save changes")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}},Ws=Te(Os,[["__scopeId","data-v-4cc31124"]]);export{Ws as default};
