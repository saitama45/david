import{G as K,T as Q,r as o,o as T,d as x,a as e,w as t,u as i,i as C,b as n,F as E,e as Y,t as d,g as f}from"./app-DZB5krWT.js";import{u as Z}from"./useSearch-BA-540Ma.js";import"./lodash-gd7BEsaJ.js";const le={__name:"Index",props:{wips:{type:Object,required:!0}},setup(D){const p=K(),{search:v}=Z("wip-list.index"),m=ref(!1),_=ref(!1),r=Q({file:null}),u=ref(!1),H=()=>{m.value=!0},U=()=>{_.value=!0},V=()=>{console.log("list"),u.value=!0,r.post(route("wip-list.import-wip-list"),{onSuccess:()=>{m.value=!1,r.reset(),p.add({severity:"success",summary:"Success",detail:"New WIPs Successfully Created",life:3e3})},onError:s=>{console.log(s)},onFinish:()=>{u.value=!1}})},N=()=>{u.value=!0,r.post(route("wip-list.import-wip-ingredients"),{onSuccess:()=>{_.value=!1,r.reset(),p.add({severity:"success",summary:"Success",detail:"Updated Successfully Created",life:3e3})},onError:s=>{console.log("Import errors:",s),s.validation_errors&&Array.isArray(s.validation_errors)?s.validation_errors.forEach((l,g)=>{setTimeout(()=>{p.add({severity:"error",summary:"Validation Error",detail:l,life:6e3})},g*100)}):s.message?p.add({severity:"error",summary:"Import Failed",detail:s.message,life:5e3}):s.file?p.add({severity:"error",summary:"File Error",detail:s.file,life:5e3}):p.add({severity:"error",summary:"Import Failed",detail:s.validation_errors,life:1e4})},onFinish:()=>{u.value=!1}})};return(s,l)=>{const g=o("Input"),A=o("SearchBar"),y=o("Button"),M=o("DivFlexCenter"),O=o("TableHeader"),c=o("TH"),R=o("TableHead"),I=o("TD"),X=o("ShowButton"),j=o("TableBody"),q=o("Table"),G=o("Pagination"),z=o("TableContainer"),J=o("Layout"),w=o("DialogTitle"),S=o("DialogDescription"),L=o("DialogHeader"),F=o("LabelXS"),k=o("FormError"),b=o("InputContainer"),B=o("DialogFooter"),W=o("DialogContent"),P=o("Dialog");return T(),x(E,null,[e(J,{heading:"WIP List"},{default:t(()=>[e(z,null,{default:t(()=>[e(O,null,{default:t(()=>[e(A,null,{default:t(()=>[e(g,{class:"pl-10",placeholder:"Search...",modelValue:i(v),"onUpdate:modelValue":l[0]||(l[0]=a=>C(v)?v.value=a:null)},null,8,["modelValue"])]),_:1}),e(M,{class:"gap-2"},{default:t(()=>[e(y,{onClick:U},{default:t(()=>l[5]||(l[5]=[n("Update WIP Ingredients")])),_:1}),e(y,{onClick:H},{default:t(()=>l[6]||(l[6]=[n("Update List")])),_:1})]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(R,null,{default:t(()=>[e(c,null,{default:t(()=>l[7]||(l[7]=[n("Id")])),_:1}),e(c,null,{default:t(()=>l[8]||(l[8]=[n("SAP Code")])),_:1}),e(c,null,{default:t(()=>l[9]||(l[9]=[n("Name")])),_:1}),e(c,null,{default:t(()=>l[10]||(l[10]=[n("Remarks")])),_:1}),e(c,null,{default:t(()=>l[11]||(l[11]=[n("Actions")])),_:1})]),_:1}),e(j,null,{default:t(()=>[(T(!0),x(E,null,Y(D.wips.data,a=>(T(),x("tr",{key:a.id},[e(I,null,{default:t(()=>[n(d(a.id),1)]),_:2},1024),e(I,null,{default:t(()=>[n(d(a.sap_code),1)]),_:2},1024),e(I,null,{default:t(()=>[n(d(a.name),1)]),_:2},1024),e(I,null,{default:t(()=>[n(d(a.remarks??"none"),1)]),_:2},1024),e(I,null,{default:t(()=>[e(X,{isLink:!0,href:s.route("wip-list.show",a.id)},null,8,["href"])]),_:2},1024)]))),128))]),_:1})]),_:1}),e(G,{data:D.wips},null,8,["data"])]),_:1})]),_:1}),e(P,{open:i(m),"onUpdate:open":l[2]||(l[2]=a=>C(m)?m.value=a:null)},{default:t(()=>[e(W,{class:"sm:max-w-[600px]"},{default:t(()=>[e(L,null,{default:t(()=>[e(w,null,{default:t(()=>l[12]||(l[12]=[n("Import WIP List")])),_:1}),e(S,null,{default:t(()=>l[13]||(l[13]=[n(" Import the excel file here. ")])),_:1})]),_:1}),e(b,null,{default:t(()=>[e(F,null,{default:t(()=>l[14]||(l[14]=[n(" List ")])),_:1}),e(g,{disabled:i(u),type:"file",onInput:l[1]||(l[1]=a=>i(r).file=a.target.files[0])},null,8,["disabled"]),e(k,null,{default:t(()=>[n(d(i(r).errors.file),1)]),_:1})]),_:1}),e(b,null,{default:t(()=>l[15]||(l[15]=[f("ul",null,[f("li",{class:"text-xs"},[n(" Template: "),f("a",{class:"text-blue-500 underline",href:"/excel/wip-list-template"},"Click to download")])],-1)])),_:1}),e(B,null,{default:t(()=>[e(y,{disabled:i(u),onClick:V},{default:t(()=>[n(d(i(u)?"Proccessing":"Upload"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),e(P,{open:i(_),"onUpdate:open":l[4]||(l[4]=a=>C(_)?_.value=a:null)},{default:t(()=>[e(W,{class:"sm:max-w-[600px]"},{default:t(()=>[e(L,null,{default:t(()=>[e(w,null,{default:t(()=>l[16]||(l[16]=[n("Import WIP Ingredients List")])),_:1}),e(S,null,{default:t(()=>l[17]||(l[17]=[n(" Import the excel file here. ")])),_:1})]),_:1}),e(b,null,{default:t(()=>[e(F,null,{default:t(()=>l[18]||(l[18]=[n(" List ")])),_:1}),e(g,{disabled:i(u),type:"file",onInput:l[3]||(l[3]=a=>i(r).file=a.target.files[0])},null,8,["disabled"]),e(k,null,{default:t(()=>[n(d(i(r).errors.file),1)]),_:1})]),_:1}),e(b,null,{default:t(()=>l[19]||(l[19]=[f("ul",null,[f("li",{class:"text-xs"},[n(" Template: "),f("a",{class:"text-blue-500 underline",href:"/excel/wip-ingredients-template"},"Click to download")])],-1)])),_:1}),l[20]||(l[20]=n(" `` ")),e(B,null,{default:t(()=>[e(y,{disabled:i(u),onClick:N},{default:t(()=>[n(d(i(u)?"Proccessing":"Upload"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64)}}};export{le as default};
