import{u as ie}from"./useSearch-BA-540Ma.js";import{G as de,f as ce,Q as me,N as H,T as fe,r as l,o as u,c as d,w as o,a as e,u as r,i as N,b as s,d as x,e as P,t as i,h as v,F as $,g as c}from"./app-DZB5krWT.js";import{u as pe}from"./useAuth-D0qVILHh.js";import{u as _e}from"./useReferenceDelete-Cl6cgyVS.js";import"./lodash-gd7BEsaJ.js";const be={class:"space-y-5"},ge={class:"flex flex-col space-y-1"},ve={class:"flex flex-col space-y-1"},xe={__name:"Index",props:{items:{type:Object,required:!0}},setup(T){const w=de();ce();const E=()=>{H.get(route("items.create"))};let m=ref(me().props.filter||"all");const{search:y}=ie("items.index"),C=a=>{m.value=a};watch(m,function(a){H.get(route("items.index"),{filter:a},{preserveState:!0,replace:!0})});const{hasAccess:b}=pe(),{deleteModel:D}=_e(),V=computed(()=>route("items.export",{search:y.value,filter:m.value})),g=ref(!1),k=fe({products_file:null}),R=()=>{f.value=!0,k.post(route("items.import"),{onSuccess:()=>{w.add({severity:"success",summary:"Success",detail:"Products Updated Successfully.",life:3e3}),f.value=!1,g.value=!1},onError:a=>{f.value=!1,w.add({severity:"error",summary:"Error",detail:"An error occured while trying to update products. Please make sure that you are using the correct format.",life:3e3})},onFinish:()=>{f.value=!1}})},A=()=>g.value=!0,f=ref(!1);return(a,t)=>{const F=l("FilterTabButton"),U=l("FilterTab"),B=l("Input"),O=l("SearchBar"),L=l("Button"),W=l("TableHeader"),p=l("TH"),X=l("TableHead"),_=l("TD"),S=l("ShowButton"),h=l("EditButton"),I=l("DeleteButton"),j=l("TableBody"),q=l("Table"),G=l("MobileTableHeading"),M=l("LabelXS"),Q=l("MobileTableRow"),z=l("MobileTableContainer"),J=l("Pagination"),K=l("TableContainer"),Y=l("DialogTitle"),Z=l("DialogDescription"),ee=l("DialogHeader"),te=l("FormError"),oe=l("Label"),le=l("Loading"),ne=l("DialogFooter"),se=l("DialogContent"),re=l("Dialog"),ue=l("Layout");return u(),d(ue,{heading:"Items List",hasButton:r(b)("create new items"),buttonName:"Create New Item",handleClick:E,hasExcelDownload:!0,exportRoute:r(V)},{default:o(()=>[e(U,null,{default:o(()=>[e(F,{label:"All",filter:"all",currentFilter:r(m),onClick:t[0]||(t[0]=n=>C("all"))},null,8,["currentFilter"]),e(F,{label:"With Cost",filter:"with_cost",currentFilter:r(m),onClick:t[1]||(t[1]=n=>C("with_cost"))},null,8,["currentFilter"]),e(F,{label:"Without Cost",filter:"without_cost",currentFilter:r(m),onClick:t[2]||(t[2]=n=>C("without_cost"))},null,8,["currentFilter"])]),_:1}),e(K,null,{default:o(()=>[e(W,null,{default:o(()=>[e(O,null,{default:o(()=>[e(B,{class:"pl-10",modelValue:r(y),"onUpdate:modelValue":t[3]||(t[3]=n=>N(y)?y.value=n:null),placeholder:"Search..."},null,8,["modelValue"])]),_:1}),e(L,{onClick:A},{default:o(()=>t[6]||(t[6]=[s("Update List")])),_:1})]),_:1}),e(q,null,{default:o(()=>[e(X,null,{default:o(()=>[e(p,null,{default:o(()=>t[7]||(t[7]=[s("Id")])),_:1}),e(p,null,{default:o(()=>t[8]||(t[8]=[s("Name")])),_:1}),e(p,null,{default:o(()=>t[9]||(t[9]=[s("Inventory Code")])),_:1}),e(p,null,{default:o(()=>t[10]||(t[10]=[s("UOM")])),_:1}),e(p,null,{default:o(()=>t[11]||(t[11]=[s("Cost")])),_:1}),e(p,null,{default:o(()=>t[12]||(t[12]=[s("Actions")])),_:1})]),_:1}),e(j,null,{default:o(()=>[(u(!0),x($,null,P(T.items.data,n=>(u(),x("tr",null,[e(_,null,{default:o(()=>[s(i(n.id),1)]),_:2},1024),e(_,null,{default:o(()=>[s(i(n.name),1)]),_:2},1024),e(_,null,{default:o(()=>[s(i(n.inventory_code),1)]),_:2},1024),e(_,null,{default:o(()=>[s(i(n.unit_of_measurement.name),1)]),_:2},1024),e(_,null,{default:o(()=>[s(i(n.cost),1)]),_:2},1024),e(_,{class:"flex items-center gap-2"},{default:o(()=>[r(b)("view item")?(u(),d(S,{key:0,isLink:!0,href:`items-list/show/${n.inventory_code}`},null,8,["href"])):v("",!0),r(b)("edit items")?(u(),d(h,{key:1,isLink:!0,href:a.route("items.edit",n.id)},null,8,["href"])):v("",!0),e(I,{onClick:ae=>r(D)(a.route("items.destroy",n.id),"Product")},null,8,["onClick"])]),_:2},1024)]))),256))]),_:1})]),_:1}),e(z,null,{default:o(()=>[(u(!0),x($,null,P(T.items.data,n=>(u(),d(Q,null,{default:o(()=>[e(G,{title:`${n.name} (${n.inventory_code})`},{default:o(()=>[r(b)("view item")?(u(),d(S,{key:0,isLink:!0,href:`items-list/show/${n.inventory_code}`},null,8,["href"])):v("",!0),r(b)("edit items")?(u(),d(h,{key:1,isLink:!0,href:a.route("items.edit",n.id)},null,8,["href"])):v("",!0),e(I,{onClick:ae=>r(D)(a.route("items.destroy",n.id),"Product")},null,8,["onClick"])]),_:2},1032,["title"]),e(M,null,{default:o(()=>[s("UOM: "+i(n.unit_of_measurement.name),1)]),_:2},1024),e(M,null,{default:o(()=>[s("Cost: "+i(n.cost),1)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(J,{data:T.items},null,8,["data"])]),_:1}),e(re,{open:r(g),"onUpdate:open":t[5]||(t[5]=n=>N(g)?g.value=n:null)},{default:o(()=>[e(se,{class:"sm:max-w-[600px]"},{default:o(()=>[e(ee,null,{default:o(()=>[e(Y,null,{default:o(()=>t[13]||(t[13]=[s("Import Products")])),_:1}),e(Z,null,{default:o(()=>t[14]||(t[14]=[s(" Import the excel file of the products. ")])),_:1})]),_:1}),c("div",be,[c("div",ge,[e(B,{type:"file",onInput:t[4]||(t[4]=n=>r(k).products_file=n.target.files[0])}),e(te,null,{default:o(()=>[s(i(r(k).errors.products_file),1)]),_:1})]),c("div",ve,[e(oe,{class:"text-xs"},{default:o(()=>t[15]||(t[15]=[s("Accepted Products File Format")])),_:1}),t[16]||(t[16]=c("ul",null,[c("li",{class:"text-xs"},[c("a",{class:"text-blue-500 underline",href:"/excel/products-template"},"Click to download")])],-1))])]),e(ne,null,{default:o(()=>[e(L,{disabled:r(f),onClick:R,type:"submit",class:"gap-2"},{default:o(()=>[t[17]||(t[17]=s(" Proceed ")),c("span",null,[r(f)?(u(),d(le,{key:0})):v("",!0)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["hasButton","exportRoute"])}}};export{xe as default};
