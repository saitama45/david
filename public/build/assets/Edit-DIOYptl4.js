import{x,l as B,f as Je,bv as Ge,T as fe,V as Ke,y as R,bq as Xe,az as z,a4 as Ze,r as q,o as b,c as Oe,w as p,d as h,g as t,F as K,e as X,t as m,h as H,a as d,n as P,u,br as ve,m as j,O as ie,s as xe,b as _,k as be,z as de,bw as et,ay as ge,bt as tt,i as ot,N as rt}from"./app-Bp7xdNcv.js";import{u as st}from"./useSelectOptions-DNoqVwQ-.js";import{u as at}from"./useToast-BYf4YE8m.js";import{u as nt}from"./useBackButton-B5cTAtmc.js";import{u as lt}from"./useEditQuantity-DLPB5BXZ.js";import{C as it}from"./calendar-iIJQHMiE.js";import{U as dt}from"./upload-LYjXrdQi.js";import{C as ut}from"./chevron-left-CG0IIGB9.js";const mt={key:0,class:"mb-4 p-4 rounded-lg bg-yellow-100 text-yellow-800 border border-yellow-200"},pt={class:"list-disc list-inside"},ct={class:"space-y-4"},yt={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},ft={class:"px-4 sm:px-6 py-4"},vt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xt={class:"space-y-2"},bt={class:"space-y-2"},gt={class:"relative"},ht=["value","disabled"],_t={class:"flex justify-between items-center mb-4"},wt={class:"text-lg font-semibold"},kt={class:"grid grid-cols-7 gap-2"},Ct=["onClick"],It={class:"space-y-2"},Ft={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},qt={class:"px-4 sm:px-6 py-4"},Dt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},St={class:"space-y-2"},Nt={key:0,class:"p-4 text-center text-gray-500"},Ot={key:1,class:"p-4 text-center text-gray-500"},Et={class:"space-y-2"},Bt={class:"space-y-2"},Pt={class:"space-y-2"},Mt={class:"flex justify-end mt-4"},Ut={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Qt={class:"flex items-center gap-3"},Vt={class:"text-lg font-semibold text-gray-900"},Tt={class:"p-4 sm:p-6 space-y-4"},$t={class:"flex flex-col gap-3"},jt={class:"relative"},Lt={class:"flex flex-wrap gap-2"},At={class:"relative"},Rt={class:"flex items-center gap-2 ml-auto"},zt={class:"font-bold text-lg"},Ht={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 text-sm text-gray-600"},Yt={class:"flex items-center gap-2"},Wt={class:"block md:hidden space-y-2"},Jt={class:"flex items-start justify-between mb-2"},Gt={class:"flex-1"},Kt={class:"font-medium text-gray-900"},Xt={class:"text-sm text-gray-600 mt-1"},Zt={class:"text-xs text-gray-500 mt-1"},eo=["onClick"],to={class:"grid grid-cols-2 gap-2 text-sm"},oo={class:"font-medium ml-1"},ro={class:"font-medium ml-1"},so={class:"font-medium ml-1"},ao={class:"font-medium ml-1"},no={class:"mt-2 pt-2 border-t border-gray-100"},lo=["onClick"],io={key:0,class:"text-center py-8 text-gray-500"},uo={class:"hidden md:block"},mo={class:"overflow-x-auto border border-gray-200 rounded-lg"},po={class:"w-full text-sm"},co={class:"divide-y divide-gray-200"},yo={class:"px-4 py-3 text-gray-900 font-medium"},fo={class:"px-4 py-3 text-gray-900"},vo={class:"px-4 py-3 text-gray-900"},xo={class:"px-4 py-3 text-center"},bo={class:"px-4 py-3 text-center"},go={class:"px-4 py-3 text-center"},ho={class:"px-4 py-3 text-center"},_o={class:"px-4 py-3 text-center"},wo={class:"flex justify-center gap-1"},ko=["onClick"],Co=["onClick"],Io={key:0},Fo={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-3 pt-4 border-t border-gray-200"},qo={class:"text-sm text-gray-700"},Do={class:"flex items-center gap-1"},So=["disabled"],No=["onClick","disabled"],Oo=["disabled"],Eo={class:"flex flex-col sm:flex-row gap-3 justify-end pt-4 border-t border-gray-200"},Bo={class:"flex gap-2"},Po={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Mo={class:"space-y-5"},Uo={class:"flex flex-col space-y-1"},Qo={class:"flex flex-col space-y-1"},Vo={class:"text-xs"},To={class:"grid gap-4 py-4"},$o={class:"grid grid-cols-4 items-center gap-4"},jo=`
    /* Force override PrimeVue dropdown styles */
    .p-dropdown-panel {
        z-index: 99999 !important;
        max-height: 200px !important;
        overflow-y: auto !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
        border-radius: 6px !important;
    }

    /* Force all dropdown variants to use proper positioning */
    .p-dropdown-panel[style*="position: absolute"] {
        position: fixed !important;
        top: auto !important;
        bottom: auto !important;
        left: auto !important;
        right: auto !important;
    }

    /* Small desktop and tablet landscape - force positioning */
    @media (max-width: 1024px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            max-height: 180px !important;
            min-width: 250px !important;
            width: auto !important;
            max-width: 90vw !important;
        }
    }

    /* Tablet portrait - force center positioning */
    @media (max-width: 768px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 85vw !important;
            max-width: 320px !important;
            max-height: 50vh !important;
            min-width: 280px !important;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3) !important;
            border-radius: 8px !important;
        }

        /* Override inline styles that PrimeVue might set */
        .p-dropdown-panel[style] {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 85vw !important;
            max-width: 320px !important;
            max-height: 50vh !important;
            min-width: 280px !important;
        }
    }

    /* Large mobile - force positioning */
    @media (max-width: 640px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 90vw !important;
            max-width: 300px !important;
            max-height: 55vh !important;
            min-width: 260px !important;
        }

        /* Override inline styles */
        .p-dropdown-panel[style] {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 90vw !important;
            max-width: 300px !important;
            max-height: 55vh !important;
            min-width: 260px !important;
        }
    }

    /* Small mobile - force positioning */
    @media (max-width: 480px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 95vw !important;
            max-width: 280px !important;
            max-height: 60vh !important;
            min-width: 240px !important;
        }

        /* Override inline styles */
        .p-dropdown-panel[style] {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 95vw !important;
            max-width: 280px !important;
            max-height: 60vh !important;
            min-width: 240px !important;
        }
    }

    /* Extra small mobile - force positioning */
    @media (max-width: 360px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 98vw !important;
            max-width: 260px !important;
            max-height: 65vh !important;
            min-width: 220px !important;
        }

        /* Override inline styles */
        .p-dropdown-panel[style] {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 98vw !important;
            max-width: 260px !important;
            max-height: 65vh !important;
            min-width: 220px !important;
        }
    }

    /* Ensure dropdown items are properly styled */
    .p-dropdown-items-wrapper {
        overflow-y: auto !important;
        max-height: inherit !important;
    }

    .p-dropdown-item {
        padding: 0.75rem 1rem !important;
        font-size: 0.875rem !important;
        line-height: 1.25rem !important;
    }

    @media (max-width: 640px) {
        .p-dropdown-item {
            padding: 1rem !important;
            font-size: 0.9rem !important;
        }
    }

    /* Fix dropdown container positioning */
    .p-dropdown {
        position: relative !important;
    }

    /* Prevent body scroll when dropdown is open on mobile */
    @media (max-width: 768px) {
        body.p-overflow-hidden {
            touch-action: none;
            -webkit-overflow-scrolling: touch;
        }
    }

    /* Ensure any dropdown that appears gets forced to center */
    .p-dropdown-panel:not(.p-hidden-accessible) {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
    }
`,Go={__name:"Edit",props:{order:{type:Object,required:!0},orderedItems:{type:Object,required:!0},branches:{type:Object,required:!0},suppliers:{type:Object,required:!0},enabledDates:{type:Array,required:!0}},setup(Ee){nt(route("mass-orders.index"));const M=x({orderInfo:!0,items:!0,addItem:!0}),ue=o=>{M.value[o]=!M.value[o]},Z=x(""),D=x(1),F=x(10),A=B(()=>{if(!Z.value)return C.value;const o=Z.value.toLowerCase();return C.value.filter(e=>e.name.toLowerCase().includes(o)||e.inventory_code.toLowerCase().includes(o)||e.unit_of_measurement.toLowerCase().includes(o))}),he=B(()=>Math.ceil(A.value.length/F.value)),ee=B(()=>{const o=(D.value-1)*F.value,e=o+F.value;return A.value.slice(o,e)}),Be=B(()=>{const o=he.value,e=D.value,s=2,l=[];for(let n=Math.max(2,e-s);n<=Math.min(o-1,e+s);n++)l.push(n);return e-s>2&&l.unshift("..."),e+s<o-1&&l.push("..."),o>1&&l.unshift(1),o>1&&o!==1&&l.push(o),l.filter(n=>n!=="..."||l.indexOf(n)===l.lastIndexOf(n))});let _e=()=>{console.log("Download template function not yet assigned")},we=()=>{console.log("Open file dialog function not yet assigned")};const Pe=o=>{const e=o.target.files[0];e&&(V.orders_file=e,Se())},g=Ee,te=Je(),{toast:y}=at(),U=x(null),ke=x(null);Ge(()=>{const o=localStorage.getItem("editStoreOrderDraft"),e=localStorage.getItem("previoustoreOrderNumber");o&&(U.value=JSON.parse(o)),e&&(ke.value=e)});const oe=x(!1),a=fe({supplier_id:g.order.supplier.supplier_code+"",order_date:g.order.order_date,branch_id:g.order.store_branch_id?String(g.order.store_branch_id):null,orders:[]}),C=x([]),re=async o=>{if(!o){ae.value=[];return}w.value=!0;try{const e=await z.get(route("store-orders.get-supplier-items",o));ae.value=e.data.items}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load items for the selected supplier.",life:5e3}),ae.value=[]}finally{w.value=!1}};Ke(()=>{const o=document.createElement("style");o.textContent=jo,o.id="mass-orders-dropdown-fixes",document.head.appendChild(o);const e=new MutationObserver(s=>{document.querySelectorAll(".p-dropdown-panel").forEach(n=>{n.getBoundingClientRect();const c=window.innerWidth;c<=1024&&(n.style.setProperty("position","fixed","important"),n.style.setProperty("top","50%","important"),n.style.setProperty("left","50%","important"),n.style.setProperty("transform","translate(-50%, -50%)","important"),n.style.setProperty("z-index","99999","important"),c<=768?(n.style.setProperty("width","85vw","important"),n.style.setProperty("max-width","320px","important"),n.style.setProperty("max-height","50vh","important")):c<=640?(n.style.setProperty("width","90vw","important"),n.style.setProperty("max-width","300px","important"),n.style.setProperty("max-height","55vh","important")):c<=480?(n.style.setProperty("width","95vw","important"),n.style.setProperty("max-width","280px","important"),n.style.setProperty("max-height","60vh","important")):(n.style.setProperty("width","auto","important"),n.style.setProperty("max-width","90vw","important"),n.style.setProperty("max-height","180px","important")))})});e.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),window.massOrdersDropdownObserver=e,U.value&&ke.value===g.order.order_number?te.require({message:"You have an unfinished draft. Would you like to continue where you left off or discard the draft?",header:"Unfinished Draft Detected",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Discard",severity:"danger"},acceptProps:{label:"Continue",severity:"primary"},accept:()=>{a.supplier_id=U.value.supplier_id,a.branch_id=U.value.branch_id,a.order_date=U.value.order_date!==null&&U.value.order_date!==void 0?U.value.order_date:g.order.order_date,a.orders=U.value.orders||[],C.value=a.orders,re(a.supplier_id)},reject:()=>{Ce(),re(g.order.supplier.supplier_code)}}):(Ce(),re(g.order.supplier.supplier_code)),oe.value=!0});const Ce=()=>{const o=[];g.orderedItems.forEach((e,s)=>{let l=1,n=null;const c=e.supplier_item;if(c&&c.sap_master_file){const T=c.sap_master_file;if(Object.prototype.hasOwnProperty.call(T,"BaseQty")){const O=T.BaseQty;l=Number(O),(isNaN(l)||l<=0)&&(l=1),n=T.BaseUOM}}const v=Number(e.quantity_ordered),f=Number(e.cost_per_quantity),k=parseFloat((v*l).toFixed(2)),I=parseFloat((k*f).toFixed(2)),S={id:e.id,inventory_code:String(e.supplier_item.ItemCode),name:e.supplier_item.item_name,unit_of_measurement:e.supplier_item.uom,base_uom:n,base_qty:l,base_uom_qty:k,quantity:v,cost:f,total_cost:I,uom:e.supplier_item.uom};o.push(S)}),a.orders=o,C.value=a.orders},se=x(g.branches),{options:Me}=st(g.suppliers),Ue=B(()=>Object.entries(se.value||{}).map(([o,e])=>({value:o,label:e}))),ae=x([]),Y=x(null),w=x(!1),W=x([]),ne=x(!1),me=x(g.enabledDates),J=x(!1),Q=x(new Date(g.order.order_date+"T00:00:00")),pe=x(null),ce=x("top-full mt-2");R(J,o=>{if(o&&pe.value){const e=pe.value.getBoundingClientRect(),s=400;window.innerHeight-e.bottom<s&&e.top>s?ce.value="bottom-full mb-2":ce.value="top-full mt-2"}});const Qe=()=>{const o=[],e=Q.value||new Date,s=e.getFullYear(),l=e.getMonth(),n=new Date(s,l,1).getDay(),c=new Date(s,l+1,0).getDate(),v=new Set(me.value);for(let f=0;f<n;f++)o.push(null);for(let f=1;f<=c;f++){const k=new Date(s,l,f),I=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`,S=!v.has(I);o.push({day:f,date:k,isDisabled:S})}return o},Ve=()=>Q.value=new Date(Q.value.getFullYear(),Q.value.getMonth()-1,1),Te=()=>Q.value=new Date(Q.value.getFullYear(),Q.value.getMonth()+1,1),$e=o=>{if(o&&!o.isDisabled){const e=o.date,s=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");a.order_date=`${s}-${l}-${n}`,J.value=!1}};R(a,o=>{if(!oe.value)return;const e=JSON.stringify(o);localStorage.setItem("editStoreOrderDraft",e),localStorage.setItem("previoustoreOrderNumber",g.order.order_number)},{deep:!0});const E=fe({item:null}),i=Xe({id:null,inventory_code:null,name:null,unit_of_measurement:null,base_uom:null,base_qty:null,quantity:null,cost:null,total_cost:null,uom:null}),Ie=o=>{te.require({message:"Are you sure you want to remove this item from your orders?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove",severity:"danger"},accept:()=>{a.orders=a.orders.filter(e=>e.id!==o),C.value=C.value.filter(e=>e.id!==o),y.add({severity:"success",summary:"Confirmed",detail:"Item Removed",life:3e3})}})},je=()=>{te.require({message:"Are you sure you want to remove ALL items from your orders?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove All",severity:"danger"},accept:()=>{a.orders=[],C.value=[],y.add({severity:"success",summary:"Confirmed",detail:"All items removed.",life:3e3})}})},Le=()=>{if(E.clearErrors(),!E.item){E.setError("item","Item field is required");return}if(isNaN(Number(i.quantity))||Number(i.quantity)<.1){E.setError("quantity","Quantity must be at least 0.1 and a valid number");return}if(i.cost===null||Number(i.cost)===0){y.add({severity:"error",summary:"Validation Error",detail:"Item cost cannot be zero or empty.",life:5e3});return}if(!i.inventory_code||!i.name||!i.unit_of_measurement||!i.quantity||i.cost===null){y.add({severity:"error",summary:"Validation Error",detail:"Please ensure all item details are loaded (name, code, UOM, quantity, cost).",life:5e3});return}const o=a.orders.findIndex(n=>n.inventory_code===i.inventory_code),e=Number(i.base_qty)>0?Number(i.base_qty):1,s=Number(i.quantity),l=Number(i.cost);if(o!==-1){const n=a.orders[o],c=n.quantity+s,v=Number(n.base_qty)>0?Number(n.base_qty):1,f=parseFloat((c*v).toFixed(2)),k=parseFloat((f*l).toFixed(2));n.quantity=c,n.base_uom_qty=f,n.total_cost=k;const I=C.value.findIndex(S=>S.inventory_code===n.inventory_code);I!==-1&&(C.value[I]={...n})}else{i.base_uom_qty=parseFloat((s*e).toFixed(2)),i.total_cost=parseFloat((i.base_uom_qty*l).toFixed(2));const n={id:null,inventory_code:String(i.inventory_code),name:i.name,unit_of_measurement:i.unit_of_measurement,base_uom:i.base_uom,base_qty:i.base_qty,base_uom_qty:i.base_uom_qty,quantity:parseFloat(Number(i.quantity).toFixed(2)),cost:Number(i.cost),uom:i.uom,total_cost:i.total_cost};a.orders.push(n),C.value.push({...n})}Object.keys(i).forEach(n=>{i[n]=null}),Y.value=null,y.add({severity:"success",summary:"Success",detail:"Item added successfully.",life:5e3}),E.item=null,E.clearErrors()},Ae=()=>{if(a.orders.length<1){y.add({severity:"error",summary:"Error",detail:"Please select at least one item before proceeding.",life:5e3});return}const o=e=>{if(!e)return null;if(typeof e=="string")return e;const s=new Date(e),l=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");return`${s.getFullYear()}-${l}-${n}`};a.order_date=o(a.order_date);try{te.require({message:"Are you sure you want to update the order details?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"info"},accept:()=>{a.put(route("mass-orders.update",g.order.order_number),{onSuccess:()=>{y.add({severity:"success",summary:"Success",detail:"Order Updated Successfully.",life:5e3}),localStorage.removeItem("editStoreOrderDraft"),localStorage.removeItem("previoustoreOrderNumber"),rt.visit(route("mass-orders.index"))},onError:e=>{y.add({severity:"error",summary:"Error",detail:e.error||e.message||"Can't place update the order.",life:5e3})}})}})}catch{y.add({severity:"error",summary:"Error",detail:"An unexpected error occurred with the confirmation dialog.",life:5e3})}};R(Y,async o=>{if(o){w.value=!0,E.item=o;try{const e=a.supplier_id;if(!e){y.add({severity:"error",summary:"Error",detail:"Failed to determine supplier code.",life:5e3}),w.value=!1;return}const l=(await z.get(route("SupplierItems.get-details-by-code",{itemCode:o,supplierCode:e}))).data.item;if(l){i.inventory_code=String(l.ItemCode),i.name=l.item_name,i.unit_of_measurement=l.uom,i.cost=Number(l.cost),i.uom=l.uom;let n=null,c=1;const v=l.sap_master_file;if(v&&Object.prototype.hasOwnProperty.call(v,"BaseQty")){const f=v.BaseQty;c=Number(f),(isNaN(c)||c<=0)&&(c=1),n=v.BaseUOM}i.base_uom=n,i.base_qty=c}else y.add({severity:"error",summary:"Error",detail:"Item details not found.",life:5e3})}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load item details.",life:5e3})}finally{w.value=!1}}else Object.keys(i).forEach(e=>{i[e]=null})},{deep:!0});const Re=B(()=>a.orders.reduce((o,e)=>o+parseFloat(e.total_cost),0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}));R(()=>a.supplier_id,async o=>{if(oe.value){if(a.order_date=null,a.branch_id=null,se.value={},Y.value=null,Object.keys(i).forEach(e=>{i[e]=null}),re(o),me.value=[],!o){ne.value=!0;return}ne.value=!0;try{const e=await z.get(route("mass-orders.available-dates",{supplier_code:o}));me.value=e.data,ne.value=!1}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load available dates.",life:5e3})}}}),R(()=>a.order_date,async o=>{if(oe.value)if(a.branch_id=null,o&&a.supplier_id)try{const e=await z.get(route("mass-orders.get-branches",{order_date:o,supplier_code:a.supplier_id}));se.value=e.data}catch(e){console.error("Error fetching branches:",e),y.add({severity:"error",summary:"Error",detail:"Failed to load store branches for the selected date.",life:5e3})}else se.value={}});const ze=B(()=>a.supplier_id!==null&&a.supplier_id!==""),ye=B(()=>a.orders.length>0),He=B(()=>a.orders.length===0&&a.supplier_id!==null&&a.supplier_id!==""&&a.branch_id!==null&&a.branch_id!==""&&a.order_date!==null),{isEditQuantityModalOpen:le,formQuantity:N,openEditQuantityModal:Fe}=lt(a,C,g.order),Ye=()=>{let o=a.orders.findIndex(e=>e.id===N.id);if(o===-1&&(o=a.orders.findIndex(e=>e.inventory_code===N.inventory_code||e.name===N.name)),o!==-1){const e=Number(N.quantity),s=a.orders[o];if(isNaN(e)||e<=0){N.errors.quantity="Quantity must be a positive number.",y.add({severity:"error",summary:"Validation Error",detail:"Quantity must be a positive number.",life:3e3});return}const l=Number(s.cost);if(isNaN(l)){y.add({severity:"error",summary:"Calculation Error",detail:"Item cost is invalid. Cannot update total cost.",life:3e3});return}const n=Number(s.base_qty)>0?Number(s.base_qty):1;s.quantity=parseFloat(e.toFixed(2)),s.base_uom_qty=parseFloat((e*n).toFixed(2)),s.total_cost=parseFloat(Number(s.base_uom_qty)*Number(s.cost)).toFixed(2),a.orders=[...a.orders];const c=C.value.findIndex(v=>v.id===s.id||v.inventory_code===s.inventory_code);c!==-1&&(C.value[c]={...s}),y.add({severity:"success",summary:"Success",detail:"Quantity Updated.",life:3e3}),le.value=!1}else y.add({severity:"error",summary:"Error",detail:`Item not found in order list. Looking for ID: ${N.id}, Inventory Code: ${N.inventory_code}, Name: ${N.name}`,life:5e3})},We=`Edit Order #${g.order.order_number}`,V=fe({orders_file:null}),G=x(!1);R(G,o=>{o||(V.reset(),V.clearErrors())});const qe=()=>{G.value=!0,W.value=[]};we=qe;const De=async()=>{const o=a.supplier_id;if(!o){y.add({severity:"warn",summary:"Warning",detail:"Please select a supplier first to download the template.",life:5e3});return}try{const e=await z.get(route("store-orders.download-supplier-order-template",{supplierCode:o}),{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=s,l.setAttribute("download",`supplier_order_template_${o}.xlsx`),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s),y.add({severity:"success",summary:"Success",detail:"Template download started.",life:3e3})}catch(e){console.error("Error downloading template:",e),y.add({severity:"error",summary:"Error",detail:"Failed to download template. Please try again.",life:5e3})}};_e=De;const Se=()=>{w.value=!0,W.value=[];const o=new FormData;o.append("orders_file",V.orders_file),o.append("supplier_id",a.supplier_id),z.post(route("store-orders.imported-file"),o,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{e.data.orders.forEach(s=>{const l=s.item_code||s.ItemCode||s.inventory_code,n=s.item_name||s.ItemName||s.name,c=s.qty||s.Qty||s.quantity,v=Number(c),f=Number(s.cost||s.Cost),k=s.unit||s.UOM||s.unit_of_measurement,I=Number(s.base_qty||s.BaseQTY);if(isNaN(f)||f===0){y.add({severity:"error",summary:"Validation Error",detail:`Imported item '${n||l||"Unknown Item"}' has a cost of zero or is invalid and will be skipped.`,life:7e3});return}if(isNaN(v)||v<.1)return;if(isNaN(I)||I<=0){y.add({severity:"error",summary:"Validation Error",detail:`Imported item '${n||l||"Unknown Item"}' has an invalid BaseQTY and will be skipped. BaseQTY must be a positive number.`,life:7e3});return}const S=parseFloat((v*I).toFixed(2)),T=parseFloat((S*f).toFixed(2)),O=a.orders.findIndex($=>$.inventory_code===l);if(O!==-1){const $=Number(a.orders[O].quantity)+v,r=parseFloat(($*I).toFixed(2));a.orders[O].quantity=$,a.orders[O].base_uom_qty=r,a.orders[O].total_cost=parseFloat(r*f).toFixed(2)}else{const $={id:null,inventory_code:String(l),name:n,unit_of_measurement:k,base_uom:s.base_uom||null,base_qty:I,base_uom_qty:S,quantity:parseFloat(v.toFixed(2)),cost:f,uom:k,total_cost:T};a.orders.push($)}}),G.value=!1,y.add({severity:"success",summary:"Success",detail:"Items added successfully.",life:5e3}),V.orders_file=null,e.data.skipped_items&&e.data.skipped_items.length>0&&(W.value=e.data.skipped_items.map(s=>`Item '${s.item_name||s.item_code||"Unknown"}' was skipped: ${s.reason}`))}).catch(e=>{y.add({severity:"error",summary:"Error",detail:e.response.data.message||"An error occurred while trying to get the imported orders. Please make sure that you are using the correct format.",life:5e3}),V.setError("orders_file",e.response.data.message||"Unknown error during import.")}).finally(()=>w.value=!1)};return Ze(()=>{const o=document.getElementById("mass-orders-dropdown-fixes");o&&document.head.removeChild(o),window.massOrdersDropdownObserver&&(window.massOrdersDropdownObserver.disconnect(),delete window.massOrdersDropdownObserver)}),(o,e)=>{const s=q("FormError"),l=q("Button"),n=q("DialogTitle"),c=q("DialogDescription"),v=q("DialogHeader"),f=q("Input"),k=q("Label"),I=q("Loading"),S=q("DialogFooter"),T=q("DialogContent"),O=q("Dialog"),$=q("Layout");return b(),Oe($,{heading:We,hasButton:He.value,buttonName:"Import Orders",handleClick:qe},{default:p(()=>[W.value.length>0?(b(),h("div",mt,[e[22]||(e[22]=t("p",{class:"font-bold mb-2"},"Skipped Items:",-1)),t("ul",pt,[(b(!0),h(K,null,X(W.value,(r,L)=>(b(),h("li",{key:L},m(r),1))),128))])])):H("",!0),t("div",ct,[t("div",yt,[t("button",{onClick:e[0]||(e[0]=r=>ue("orderInfo")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-blue-50 to-blue-100 border-b border-blue-200 flex items-center justify-between text-left hover:from-blue-100 hover:to-blue-200 transition-colors"},[e[23]||(e[23]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"p-2 bg-blue-600 rounded-lg"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),t("div",null,[t("h2",{class:"text-lg font-semibold text-gray-900"},"Order Information"),t("p",{class:"text-sm text-gray-600"},"Basic order details")])],-1)),d(u(ve),{class:P(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":M.value.orderInfo}])},null,8,["class"])]),j(t("div",ft,[t("div",vt,[t("div",xt,[e[24]||(e[24]=t("label",{class:"text-sm font-medium text-gray-700"},"Supplier",-1)),d(u(xe),{filter:"",placeholder:"Select a Supplier",modelValue:u(a).supplier_id,"onUpdate:modelValue":e[1]||(e[1]=r=>u(a).supplier_id=r),options:u(Me),optionLabel:"label",optionValue:"value",disabled:ye.value,class:"w-full"},null,8,["modelValue","options","disabled"]),d(s,null,{default:p(()=>[_(m(u(a).errors.supplier_id),1)]),_:1})]),t("div",bt,[e[26]||(e[26]=t("label",{class:"text-sm font-medium text-gray-700"},"Order Date",-1)),t("div",{class:"relative",ref_key:"dateInputRef",ref:pe},[t("div",gt,[t("input",{id:"order_date",type:"text",readonly:"",value:u(a).order_date,onClick:e[2]||(e[2]=r=>J.value=!J.value),disabled:ne.value||ye.value,class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm transition-colors placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-400 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",placeholder:"Select a date"},null,8,ht),d(u(it),{class:"absolute right-3 top-1/2 -translate-y-1/2 size-4 text-gray-500 pointer-events-none"})]),j(t("div",{class:P(["absolute z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 w-full min-w-[300px]",ce.value])},[t("div",_t,[t("button",{type:"button",onClick:e[3]||(e[3]=be(r=>Ve(),["stop"])),class:"p-2 rounded-full hover:bg-gray-100"},"<"),t("h2",wt,m((Q.value||new Date).toLocaleString("default",{month:"long",year:"numeric"})),1),t("button",{type:"button",onClick:e[4]||(e[4]=be(r=>Te(),["stop"])),class:"p-2 rounded-full hover:bg-gray-100"},">")]),e[25]||(e[25]=t("div",{class:"grid grid-cols-7 gap-1 text-center text-xs font-medium text-gray-500 mb-2"},[t("span",null,"Su"),t("span",null,"Mo"),t("span",null,"Tu"),t("span",null,"We"),t("span",null,"Th"),t("span",null,"Fr"),t("span",null,"Sa")],-1)),t("div",kt,[(b(!0),h(K,null,X(Qe(),(r,L)=>(b(),h("div",{key:L,class:P(["text-center py-1.5 rounded-full text-sm cursor-pointer",[r?r.isDisabled?"text-gray-300 line-through cursor-not-allowed":u(a).order_date&&r.date.toDateString()===new Date(u(a).order_date+"T00:00:00").toDateString()?"bg-blue-600 text-white font-bold shadow-md":"bg-gray-100 text-gray-800 font-semibold hover:bg-blue-100":""]]),onClick:Ne=>$e(r)},m(r?r.day:""),11,Ct))),128))])],2),[[ie,J.value]])],512),d(s,null,{default:p(()=>[_(m(u(a).errors.order_date),1)]),_:1})]),t("div",It,[e[27]||(e[27]=t("label",{class:"text-sm font-medium text-gray-700"},"Store Branch",-1)),d(u(xe),{filter:"",placeholder:"Select a Store",modelValue:u(a).branch_id,"onUpdate:modelValue":e[5]||(e[5]=r=>u(a).branch_id=r),options:Ue.value,optionLabel:"label",optionValue:"value",disabled:ye.value,class:"w-full"},null,8,["modelValue","options","disabled"]),d(s,null,{default:p(()=>[_(m(u(a).errors.branch_id),1)]),_:1})])])],512),[[ie,M.value.orderInfo]])]),t("div",Ft,[t("button",{onClick:e[6]||(e[6]=r=>ue("addItem")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-green-50 to-green-100 border-b border-green-200 flex items-center justify-between text-left hover:from-green-100 hover:to-green-200 transition-colors"},[e[28]||(e[28]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"p-2 bg-green-600 rounded-lg"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])]),t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"Add Item"),t("p",{class:"text-sm text-gray-600"},"Add items to your order")])],-1)),d(u(ve),{class:P(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":M.value.addItem}])},null,8,["class"])]),j(t("div",qt,[t("div",Dt,[t("div",St,[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-gray-700"},"Item",-1)),d(u(xe),{filter:"",placeholder:"Select an Item",modelValue:Y.value,"onUpdate:modelValue":e[7]||(e[7]=r=>Y.value=r),options:ae.value,optionLabel:"label",optionValue:"value",disabled:!ze.value||w.value,class:"w-full"},{empty:p(()=>[w.value?(b(),h("div",Nt," Loading items... ")):(b(),h("div",Ot," No items available for this supplier. "))]),_:1},8,["modelValue","options","disabled"]),d(s,null,{default:p(()=>[_(m(u(E).errors.item),1)]),_:1})]),t("div",Et,[e[30]||(e[30]=t("label",{class:"text-sm font-medium text-gray-700"},"UOM",-1)),j(t("input",{type:"text",disabled:"","onUpdate:modelValue":e[8]||(e[8]=r=>i.unit_of_measurement=r),class:"flex h-10 w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm"},null,512),[[de,i.unit_of_measurement]])]),t("div",Bt,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-gray-700"},"Cost",-1)),j(t("input",{type:"text",disabled:"","onUpdate:modelValue":e[9]||(e[9]=r=>i.cost=r),class:"flex h-10 w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm"},null,512),[[de,i.cost]])]),t("div",Pt,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-gray-700"},"Quantity",-1)),j(t("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=r=>i.quantity=r),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm"},null,512),[[de,i.quantity]]),d(s,null,{default:p(()=>[_(m(u(E).errors.quantity),1)]),_:1})])]),t("div",Mt,[d(l,{onClick:Le,disabled:w.value},{default:p(()=>e[33]||(e[33]=[_(" Add to Orders ")])),_:1},8,["disabled"])])],512),[[ie,M.value.addItem]])]),t("div",Ut,[t("button",{onClick:e[11]||(e[11]=r=>ue("items")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200 flex items-center justify-between text-left hover:from-purple-100 hover:to-purple-200 transition-colors"},[t("div",Qt,[e[35]||(e[35]=t("div",{class:"p-2 bg-purple-600 rounded-lg"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),t("div",null,[t("h3",Vt,"Order Items ("+m(C.value.length)+")",1),e[34]||(e[34]=t("p",{class:"text-sm text-gray-600"},"Manage your order items and quantities",-1))])]),d(u(ve),{class:P(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":M.value.items}])},null,8,["class"])]),j(t("div",Tt,[t("div",$t,[t("div",jt,[j(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=r=>Z.value=r),placeholder:"Search items by code or name...",class:"w-full h-10 pl-10 pr-4 rounded-md border border-gray-300 bg-white text-sm shadow-sm transition-colors placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500"},null,512),[[de,Z.value]]),e[36]||(e[36]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),t("div",Lt,[d(l,{onClick:u(_e),variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:p(()=>[d(u(et),{class:"w-4 h-4"}),e[37]||(e[37]=t("span",{class:"hidden sm:inline"},"Download Template",-1)),e[38]||(e[38]=t("span",{class:"sm:hidden"},"Download",-1))]),_:1},8,["onClick"]),t("div",At,[d(l,{onClick:u(we),variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:p(()=>[d(u(dt),{class:"w-4 h-4"}),e[39]||(e[39]=t("span",{class:"hidden sm:inline"},"Upload Excel",-1)),e[40]||(e[40]=t("span",{class:"sm:hidden"},"Upload",-1))]),_:1},8,["onClick"]),t("input",{type:"file",ref:"fileInput",onChange:Pe,accept:".xlsx, .xls",class:"hidden"},null,544)]),t("div",Rt,[e[41]||(e[41]=t("span",{class:"text-sm text-gray-600"},"Total:",-1)),t("span",zt,m(Re.value),1)])])]),t("div",Ht,[t("span",null,m(A.value.length)+" items found",1),t("div",Yt,[e[42]||(e[42]=t("span",null,"Items per page:",-1)),t("button",{onClick:e[13]||(e[13]=r=>F.value=10),class:P(["px-2 py-1 rounded text-xs font-medium transition-colors",F.value===10?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 10 ",2),t("button",{onClick:e[14]||(e[14]=r=>F.value=25),class:P(["px-2 py-1 rounded text-xs font-medium transition-colors",F.value===25?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 25 ",2),t("button",{onClick:e[15]||(e[15]=r=>F.value=50),class:P(["px-2 py-1 rounded text-xs font-medium transition-colors",F.value===50?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 50 ",2)])]),t("div",Wt,[(b(!0),h(K,null,X(ee.value,(r,L)=>(b(),h("div",{key:r.id,class:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow"},[t("div",Jt,[t("div",Gt,[t("div",Kt,m(r.name),1),t("div",Xt,m(r.inventory_code),1),t("div",Zt,"UOM: "+m(r.unit_of_measurement),1)]),t("button",{onClick:Ne=>Ie(r.id),class:"h-8 w-8 p-0 hover:bg-red-50 hover:text-red-600 hover:border-red-300 flex-shrink-0 ml-2 rounded-md border border-gray-300"},[d(u(ge),{class:"w-4 h-4"})],8,eo)]),t("div",to,[t("div",null,[e[43]||(e[43]=t("span",{class:"text-gray-600"},"Qty:",-1)),t("span",oo,m(r.quantity),1)]),t("div",null,[e[44]||(e[44]=t("span",{class:"text-gray-600"},"Cost:",-1)),t("span",ro,m(Number(r.cost).toFixed(2)),1)]),t("div",null,[e[45]||(e[45]=t("span",{class:"text-gray-600"},"Base Qty:",-1)),t("span",so,m(r.base_uom_qty),1)]),t("div",null,[e[46]||(e[46]=t("span",{class:"text-gray-600"},"Total:",-1)),t("span",ao,m(Number(r.total_cost).toFixed(2)),1)])]),t("div",no,[t("button",{onClick:Ne=>u(Fe)(r.id,r.quantity),class:"w-full text-sm text-blue-600 hover:text-blue-800 font-medium"}," Edit Quantity ",8,lo)])]))),128)),ee.value.length===0?(b(),h("div",io,e[47]||(e[47]=[t("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),t("p",null,"No items found. Try searching or add items manually.",-1)]))):H("",!0)]),t("div",uo,[t("div",mo,[t("table",po,[e[49]||(e[49]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"Item Code"),t("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"Item Name"),t("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"UOM"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Quantity"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Base Qty"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Cost"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Total Cost"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Actions")])],-1)),t("tbody",co,[(b(!0),h(K,null,X(ee.value,r=>(b(),h("tr",{key:r.id,class:"hover:bg-gray-50"},[t("td",yo,m(r.inventory_code),1),t("td",fo,m(r.name),1),t("td",vo,m(r.unit_of_measurement),1),t("td",xo,m(r.quantity),1),t("td",bo,m(r.base_uom_qty),1),t("td",go,m(Number(r.cost).toFixed(2)),1),t("td",ho,m(Number(r.total_cost).toFixed(2)),1),t("td",_o,[t("div",wo,[t("button",{onClick:L=>u(Fe)(r.id,r.quantity),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Edit ",8,ko),t("button",{onClick:L=>Ie(r.id),class:"text-red-600 hover:text-red-800"},[d(u(ge),{class:"w-4 h-4"})],8,Co)])])]))),128)),ee.value.length===0?(b(),h("tr",Io,e[48]||(e[48]=[t("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"},[t("div",{class:"flex flex-col items-center"},[t("svg",{class:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})]),t("p",null,"No items found. Try searching or add items manually.")])],-1)]))):H("",!0)])])])]),A.value.length>F.value?(b(),h("div",Fo,[t("div",qo," Showing "+m((D.value-1)*F.value+1)+" to "+m(Math.min(D.value*F.value,A.value.length))+" of "+m(A.value.length)+" items ",1),t("div",Do,[t("button",{onClick:e[16]||(e[16]=r=>D.value--),disabled:D.value===1,class:"h-8 w-8 p-0 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[d(u(ut),{class:"w-4 h-4"})],8,So),(b(!0),h(K,null,X(Be.value,r=>(b(),h("button",{key:r,onClick:L=>D.value=r==="..."?null:D.value=r,disabled:r==="...",class:P(["h-8 w-8 p-0 rounded-md text-sm font-medium transition-colors",D.value===r?"bg-blue-600 text-white":r==="..."?"text-gray-500 cursor-default":"border border-gray-300 hover:bg-gray-50"])},m(r),11,No))),128)),t("button",{onClick:e[17]||(e[17]=r=>D.value++),disabled:D.value===he.value,class:"h-8 w-8 p-0 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[d(u(tt),{class:"w-4 h-4"})],8,Oo)])])):H("",!0),t("div",Eo,[t("div",Bo,[d(l,{onClick:je,variant:"outline",class:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:u(a).orders.length===0},{default:p(()=>[d(u(ge),{class:"w-4 h-4 mr-2"}),e[50]||(e[50]=_(" Clear All "))]),_:1},8,["disabled"])]),d(l,{onClick:Ae,disabled:w.value,class:"min-w-[120px]"},{default:p(()=>[w.value?(b(),h("svg",Po,e[51]||(e[51]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):H("",!0),_(" "+m(w.value?"Updating...":"Update Order"),1)]),_:1},8,["disabled"])])],512),[[ie,M.value.items]])])]),d(O,{open:G.value,"onUpdate:open":e[19]||(e[19]=r=>G.value=r)},{default:p(()=>[d(T,{class:"sm:max-w-[600px]"},{default:p(()=>[d(v,null,{default:p(()=>[d(n,null,{default:p(()=>e[52]||(e[52]=[_("Import Orders")])),_:1}),d(c,null,{default:p(()=>e[53]||(e[53]=[_(" Upload an Excel file to import orders. ")])),_:1})]),_:1}),t("div",Mo,[t("div",Uo,[d(f,{type:"file",onInput:e[18]||(e[18]=r=>u(V).orders_file=r.target.files[0])}),d(s,null,{default:p(()=>[_(m(u(V).errors.orders_file),1)]),_:1})]),t("div",Qo,[d(k,{class:"text-xs"},{default:p(()=>e[54]||(e[54]=[_("Accepted Orders File Format")])),_:1}),t("ul",null,[t("li",Vo,[t("a",{class:"text-blue-500 underline cursor-pointer",onClick:be(De,["prevent"])},"Click to download template")])])])]),d(S,null,{default:p(()=>[d(l,{disabled:w.value,onClick:Se,type:"submit",class:"gap-2"},{default:p(()=>[e[55]||(e[55]=_(" Import ")),t("span",null,[w.value?(b(),Oe(I,{key:0})):H("",!0)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),d(O,{open:u(le),"onUpdate:open":e[21]||(e[21]=r=>ot(le)?le.value=r:null)},{default:p(()=>[d(T,{class:"sm:max-w-[425px]"},{default:p(()=>[d(v,null,{default:p(()=>[d(n,null,{default:p(()=>e[56]||(e[56]=[_("Edit Quantity")])),_:1}),d(c,null,{default:p(()=>e[57]||(e[57]=[_("Make changes to the quantity here. Click save when you're done.")])),_:1})]),_:1}),t("div",To,[t("div",$o,[d(k,{for:"quantity",class:"text-right"},{default:p(()=>e[58]||(e[58]=[_(" Quantity ")])),_:1}),d(f,{id:"quantity",type:"number",class:"col-span-3",modelValue:u(N).quantity,"onUpdate:modelValue":e[20]||(e[20]=r=>u(N).quantity=r)},null,8,["modelValue"])])]),d(S,null,{default:p(()=>[d(l,{onClick:Ye},{default:p(()=>e[59]||(e[59]=[_("Save changes")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["hasButton"])}}};export{Go as default};
