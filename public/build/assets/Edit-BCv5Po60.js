import{x as v,l as N,f as ot,a$ as rt,T as ce,V as st,y as T,aW as at,ai as L,aB as nt,r as ye,o as x,c as Oe,w as p,d as g,g as t,F as J,e as X,t as m,h as A,a as u,n as O,u as i,aX as fe,m as M,O as ne,s as ve,b as h,k as xe,z as ie,aj as Q,b0 as it,ah as be,aZ as lt,_ as De,ay as Ee,i as dt,N as ut}from"./app-rjK1ng7o.js";import{d as Be,_ as Pe,a as $e,b as Me,c as Ue,e as Qe}from"./DialogTitle-B5P0ImB3.js";import{u as mt}from"./useSelectOptions-C8yZk_6t.js";import{u as pt}from"./useToast-DBCD-RTl.js";import{u as ct}from"./useBackButton-B9bUould.js";import{u as yt}from"./useEditQuantity-BCpCvMmE.js";import{C as ft}from"./calendar-Cl-zYW7L.js";import{U as vt}from"./upload-CiN_PamT.js";import{C as xt}from"./chevron-left-CEk8dY0_.js";const bt={key:0,class:"mb-4 p-4 rounded-lg bg-yellow-100 text-yellow-800 border border-yellow-200"},gt={class:"list-disc list-inside"},ht={class:"space-y-4"},_t={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},wt={class:"px-4 sm:px-6 py-4"},kt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ct={class:"space-y-2"},It={class:"space-y-2"},qt={class:"relative"},Ft=["value","disabled"],St={class:"flex justify-between items-center mb-4"},Nt={class:"text-lg font-semibold"},Ot={class:"grid grid-cols-7 gap-2"},Dt=["onClick"],Et={class:"space-y-2"},Bt={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Pt={class:"px-4 sm:px-6 py-4"},$t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Mt={class:"space-y-2"},Ut={key:0,class:"p-4 text-center text-gray-500"},Qt={key:1,class:"p-4 text-center text-gray-500"},Vt={class:"space-y-2"},jt={class:"space-y-2"},Tt={class:"space-y-2"},Lt={class:"flex justify-end mt-4"},At={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},Rt={class:"flex items-center gap-3"},zt={class:"text-lg font-semibold text-gray-900"},Ht={class:"p-4 sm:p-6 space-y-4"},Yt={class:"flex flex-col gap-3"},Wt={class:"relative"},Jt={class:"flex flex-wrap gap-2"},Xt={class:"relative"},Zt={class:"flex items-center gap-2 ml-auto"},Gt={class:"font-bold text-lg"},Kt={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 text-sm text-gray-600"},eo={class:"flex items-center gap-2"},to={class:"block md:hidden space-y-2"},oo={class:"flex items-start justify-between mb-2"},ro={class:"flex-1"},so={class:"font-medium text-gray-900"},ao={class:"text-sm text-gray-600 mt-1"},no={class:"text-xs text-gray-500 mt-1"},io=["onClick"],lo={class:"grid grid-cols-2 gap-2 text-sm"},uo={class:"font-medium ml-1"},mo={class:"font-medium ml-1"},po={class:"font-medium ml-1"},co={class:"font-medium ml-1"},yo={class:"mt-2 pt-2 border-t border-gray-100"},fo=["onClick"],vo={key:0,class:"text-center py-8 text-gray-500"},xo={class:"hidden md:block"},bo={class:"overflow-x-auto border border-gray-200 rounded-lg"},go={class:"w-full text-sm"},ho={class:"divide-y divide-gray-200"},_o={class:"px-4 py-3 text-gray-900 font-medium"},wo={class:"px-4 py-3 text-gray-900"},ko={class:"px-4 py-3 text-gray-900"},Co={class:"px-4 py-3 text-center"},Io={class:"px-4 py-3 text-center"},qo={class:"px-4 py-3 text-center"},Fo={class:"px-4 py-3 text-center"},So={class:"px-4 py-3 text-center"},No={class:"flex justify-center gap-1"},Oo=["onClick"],Do=["onClick"],Eo={key:0},Bo={key:0,class:"flex flex-col sm:flex-row items-center justify-between gap-3 pt-4 border-t border-gray-200"},Po={class:"text-sm text-gray-700"},$o={class:"flex items-center gap-1"},Mo=["disabled"],Uo=["onClick","disabled"],Qo=["disabled"],Vo={class:"flex flex-col sm:flex-row gap-3 justify-end pt-4 border-t border-gray-200"},jo={class:"flex gap-2"},To={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Lo={class:"space-y-5"},Ao={class:"flex flex-col space-y-1"},Ro={class:"flex flex-col space-y-1"},zo={class:"text-xs"},Ho={class:"grid gap-4 py-4"},Yo={class:"grid grid-cols-4 items-center gap-4"},Wo=`
    /* Force override PrimeVue dropdown styles */
    .p-dropdown-panel {
        z-index: 99999 !important;
        max-height: 200px !important;
        overflow-y: auto !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
        border-radius: 6px !important;
    }

    /* Force all dropdown variants to use proper positioning */
    .p-dropdown-panel[style*="position: absolute"] {
        position: fixed !important;
        top: auto !important;
        bottom: auto !important;
        left: auto !important;
        right: auto !important;
    }

    /* Small desktop and tablet landscape - force positioning */
    @media (max-width: 1024px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            max-height: 180px !important;
            min-width: 250px !important;
            width: auto !important;
            max-width: 90vw !important;
        }
    }

    /* Tablet portrait - force center positioning */
    @media (max-width: 768px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 85vw !important;
            max-width: 320px !important;
            max-height: 50vh !important;
            min-width: 280px !important;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3) !important;
            border-radius: 8px !important;
        }

        /* Override inline styles that PrimeVue might set */
        .p-dropdown-panel[style] {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 85vw !important;
            max-width: 320px !important;
            max-height: 50vh !important;
            min-width: 280px !important;
        }
    }

    /* Large mobile - force positioning */
    @media (max-width: 640px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 90vw !important;
            max-width: 300px !important;
            max-height: 55vh !important;
            min-width: 260px !important;
        }

        /* Override inline styles */
        .p-dropdown-panel[style] {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 90vw !important;
            max-width: 300px !important;
            max-height: 55vh !important;
            min-width: 260px !important;
        }
    }

    /* Small mobile - force positioning */
    @media (max-width: 480px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 95vw !important;
            max-width: 280px !important;
            max-height: 60vh !important;
            min-width: 240px !important;
        }

        /* Override inline styles */
        .p-dropdown-panel[style] {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 95vw !important;
            max-width: 280px !important;
            max-height: 60vh !important;
            min-width: 240px !important;
        }
    }

    /* Extra small mobile - force positioning */
    @media (max-width: 360px) {
        .p-dropdown-panel {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 98vw !important;
            max-width: 260px !important;
            max-height: 65vh !important;
            min-width: 220px !important;
        }

        /* Override inline styles */
        .p-dropdown-panel[style] {
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 98vw !important;
            max-width: 260px !important;
            max-height: 65vh !important;
            min-width: 220px !important;
        }
    }

    /* Ensure dropdown items are properly styled */
    .p-dropdown-items-wrapper {
        overflow-y: auto !important;
        max-height: inherit !important;
    }

    .p-dropdown-item {
        padding: 0.75rem 1rem !important;
        font-size: 0.875rem !important;
        line-height: 1.25rem !important;
    }

    @media (max-width: 640px) {
        .p-dropdown-item {
            padding: 1rem !important;
            font-size: 0.9rem !important;
        }
    }

    /* Fix dropdown container positioning */
    .p-dropdown {
        position: relative !important;
    }

    /* Prevent body scroll when dropdown is open on mobile */
    @media (max-width: 768px) {
        body.p-overflow-hidden {
            touch-action: none;
            -webkit-overflow-scrolling: touch;
        }
    }

    /* Ensure any dropdown that appears gets forced to center */
    .p-dropdown-panel:not(.p-hidden-accessible) {
        position: fixed !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
    }
`,sr={__name:"Edit",props:{order:{type:Object,required:!0},orderedItems:{type:Object,required:!0},branches:{type:Object,required:!0},suppliers:{type:Object,required:!0},enabledDates:{type:Array,required:!0}},setup(Ve){ct(route("mass-orders.index"));const D=v({orderInfo:!0,items:!0,addItem:!0}),le=r=>{D.value[r]=!D.value[r]},Z=v(""),q=v(1),k=v(10),V=N(()=>{if(!Z.value)return w.value;const r=Z.value.toLowerCase();return w.value.filter(e=>e.name.toLowerCase().includes(r)||e.inventory_code.toLowerCase().includes(r)||e.unit_of_measurement.toLowerCase().includes(r))}),ge=N(()=>Math.ceil(V.value.length/k.value)),G=N(()=>{const r=(q.value-1)*k.value,e=r+k.value;return V.value.slice(r,e)}),je=N(()=>{const r=ge.value,e=q.value,s=2,l=[];for(let n=Math.max(2,e-s);n<=Math.min(r-1,e+s);n++)l.push(n);return e-s>2&&l.unshift("..."),e+s<r-1&&l.push("..."),r>1&&l.unshift(1),r>1&&r!==1&&l.push(r),l.filter(n=>n!=="..."||l.indexOf(n)===l.lastIndexOf(n))});let he=()=>{console.log("Download template function not yet assigned")},_e=()=>{console.log("Open file dialog function not yet assigned")};const Te=r=>{const e=r.target.files[0];e&&(P.orders_file=e,Se())},b=Ve,K=ot(),{toast:y}=pt(),E=v(null),we=v(null);rt(()=>{const r=localStorage.getItem("editStoreOrderDraft"),e=localStorage.getItem("previoustoreOrderNumber");r&&(E.value=JSON.parse(r)),e&&(we.value=e)});const ee=v(!1),a=ce({supplier_id:b.order.supplier.supplier_code+"",order_date:b.order.order_date,branch_id:b.order.store_branch_id?String(b.order.store_branch_id):null,orders:[]}),w=v([]),te=async r=>{if(!r){re.value=[];return}_.value=!0;try{const e=await L.get(route("store-orders.get-supplier-items",r));re.value=e.data.items}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load items for the selected supplier.",life:5e3}),re.value=[]}finally{_.value=!1}};st(()=>{const r=document.createElement("style");r.textContent=Wo,r.id="mass-orders-dropdown-fixes",document.head.appendChild(r);const e=new MutationObserver(s=>{document.querySelectorAll(".p-dropdown-panel").forEach(n=>{n.getBoundingClientRect();const o=window.innerWidth;o<=1024&&(n.style.setProperty("position","fixed","important"),n.style.setProperty("top","50%","important"),n.style.setProperty("left","50%","important"),n.style.setProperty("transform","translate(-50%, -50%)","important"),n.style.setProperty("z-index","99999","important"),o<=768?(n.style.setProperty("width","85vw","important"),n.style.setProperty("max-width","320px","important"),n.style.setProperty("max-height","50vh","important")):o<=640?(n.style.setProperty("width","90vw","important"),n.style.setProperty("max-width","300px","important"),n.style.setProperty("max-height","55vh","important")):o<=480?(n.style.setProperty("width","95vw","important"),n.style.setProperty("max-width","280px","important"),n.style.setProperty("max-height","60vh","important")):(n.style.setProperty("width","auto","important"),n.style.setProperty("max-width","90vw","important"),n.style.setProperty("max-height","180px","important")))})});e.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),window.massOrdersDropdownObserver=e,E.value&&we.value===b.order.order_number?K.require({message:"You have an unfinished draft. Would you like to continue where you left off or discard the draft?",header:"Unfinished Draft Detected",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Discard",severity:"danger"},acceptProps:{label:"Continue",severity:"primary"},accept:()=>{a.supplier_id=E.value.supplier_id,a.branch_id=E.value.branch_id,a.order_date=E.value.order_date!==null&&E.value.order_date!==void 0?E.value.order_date:b.order.order_date,a.orders=E.value.orders||[],w.value=a.orders,te(a.supplier_id)},reject:()=>{ke(),te(b.order.supplier.supplier_code)}}):(ke(),te(b.order.supplier.supplier_code)),ee.value=!0});const ke=()=>{const r=[];b.orderedItems.forEach((e,s)=>{let l=1,n=null;const o=e.supplier_item;if(o&&o.sap_master_file){const W=o.sap_master_file;if(Object.prototype.hasOwnProperty.call(W,"BaseQty")){const U=W.BaseQty;l=Number(U),(isNaN(l)||l<=0)&&(l=1),n=W.BaseUOM}}const c=Number(e.quantity_ordered),f=Number(e.cost_per_quantity),C=parseFloat((c*l).toFixed(2)),I=parseFloat((C*f).toFixed(2)),$={id:e.id,inventory_code:String(e.supplier_item.ItemCode),name:e.supplier_item.item_name,unit_of_measurement:e.supplier_item.uom,base_uom:n,base_qty:l,base_uom_qty:C,quantity:c,cost:f,total_cost:I,uom:e.supplier_item.uom};r.push($)}),a.orders=r,w.value=a.orders},oe=v(b.branches),{options:Le}=mt(b.suppliers),Ae=N(()=>Object.entries(oe.value||{}).map(([r,e])=>({value:r,label:e}))),re=v([]),R=v(null),_=v(!1),z=v([]),se=v(!1),de=v(b.enabledDates),H=v(!1),B=v(new Date(b.order.order_date+"T00:00:00")),ue=v(null),me=v("top-full mt-2");T(H,r=>{if(r&&ue.value){const e=ue.value.getBoundingClientRect(),s=400;window.innerHeight-e.bottom<s&&e.top>s?me.value="bottom-full mb-2":me.value="top-full mt-2"}});const Re=()=>{const r=[],e=B.value||new Date,s=e.getFullYear(),l=e.getMonth(),n=new Date(s,l,1).getDay(),o=new Date(s,l+1,0).getDate(),c=new Set(de.value);for(let f=0;f<n;f++)r.push(null);for(let f=1;f<=o;f++){const C=new Date(s,l,f),I=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}-${String(C.getDate()).padStart(2,"0")}`,$=!c.has(I);r.push({day:f,date:C,isDisabled:$})}return r},ze=()=>B.value=new Date(B.value.getFullYear(),B.value.getMonth()-1,1),He=()=>B.value=new Date(B.value.getFullYear(),B.value.getMonth()+1,1),Ye=r=>{if(r&&!r.isDisabled){const e=r.date,s=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");a.order_date=`${s}-${l}-${n}`,H.value=!1}};T(a,r=>{if(!ee.value)return;const e=JSON.stringify(r);localStorage.setItem("editStoreOrderDraft",e),localStorage.setItem("previoustoreOrderNumber",b.order.order_number)},{deep:!0});const S=ce({item:null}),d=at({id:null,inventory_code:null,name:null,unit_of_measurement:null,base_uom:null,base_qty:null,quantity:null,cost:null,total_cost:null,uom:null}),Ce=r=>{K.require({message:"Are you sure you want to remove this item from your orders?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove",severity:"danger"},accept:()=>{a.orders=a.orders.filter(e=>e.id!==r),w.value=w.value.filter(e=>e.id!==r),y.add({severity:"success",summary:"Confirmed",detail:"Item Removed",life:3e3})}})},We=()=>{K.require({message:"Are you sure you want to remove ALL items from your orders?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove All",severity:"danger"},accept:()=>{a.orders=[],w.value=[],y.add({severity:"success",summary:"Confirmed",detail:"All items removed.",life:3e3})}})},Je=()=>{if(S.clearErrors(),!S.item){S.setError("item","Item field is required");return}if(isNaN(Number(d.quantity))||Number(d.quantity)<.1){S.setError("quantity","Quantity must be at least 0.1 and a valid number");return}if(d.cost===null||Number(d.cost)===0){y.add({severity:"error",summary:"Validation Error",detail:"Item cost cannot be zero or empty.",life:5e3});return}if(!d.inventory_code||!d.name||!d.unit_of_measurement||!d.quantity||d.cost===null){y.add({severity:"error",summary:"Validation Error",detail:"Please ensure all item details are loaded (name, code, UOM, quantity, cost).",life:5e3});return}const r=a.orders.findIndex(n=>n.inventory_code===d.inventory_code),e=Number(d.base_qty)>0?Number(d.base_qty):1,s=Number(d.quantity),l=Number(d.cost);if(r!==-1){const n=a.orders[r],o=n.quantity+s,c=Number(n.base_qty)>0?Number(n.base_qty):1,f=parseFloat((o*c).toFixed(2)),C=parseFloat((f*l).toFixed(2));n.quantity=o,n.base_uom_qty=f,n.total_cost=C;const I=w.value.findIndex($=>$.inventory_code===n.inventory_code);I!==-1&&(w.value[I]={...n})}else{d.base_uom_qty=parseFloat((s*e).toFixed(2)),d.total_cost=parseFloat((d.base_uom_qty*l).toFixed(2));const n={id:null,inventory_code:String(d.inventory_code),name:d.name,unit_of_measurement:d.unit_of_measurement,base_uom:d.base_uom,base_qty:d.base_qty,base_uom_qty:d.base_uom_qty,quantity:parseFloat(Number(d.quantity).toFixed(2)),cost:Number(d.cost),uom:d.uom,total_cost:d.total_cost};a.orders.push(n)}Object.keys(d).forEach(n=>{d[n]=null}),R.value=null,y.add({severity:"success",summary:"Success",detail:"Item added successfully.",life:5e3}),S.item=null,S.clearErrors()},Xe=()=>{if(a.orders.length<1){y.add({severity:"error",summary:"Error",detail:"Please select at least one item before proceeding.",life:5e3});return}const r=e=>{if(!e)return null;if(typeof e=="string")return e;const s=new Date(e),l=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");return`${s.getFullYear()}-${l}-${n}`};a.order_date=r(a.order_date);try{K.require({message:"Are you sure you want to update the order details?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"info"},accept:()=>{a.put(route("mass-orders.update",b.order.order_number),{onSuccess:()=>{y.add({severity:"success",summary:"Success",detail:"Order Updated Successfully.",life:5e3}),localStorage.removeItem("editStoreOrderDraft"),localStorage.removeItem("previoustoreOrderNumber"),ut.visit(route("mass-orders.index"))},onError:e=>{y.add({severity:"error",summary:"Error",detail:e.error||e.message||"Can't place update the order.",life:5e3})}})}})}catch{y.add({severity:"error",summary:"Error",detail:"An unexpected error occurred with the confirmation dialog.",life:5e3})}};T(R,async r=>{if(r){_.value=!0,S.item=r;try{const e=a.supplier_id;if(!e){y.add({severity:"error",summary:"Error",detail:"Failed to determine supplier code.",life:5e3}),_.value=!1;return}const l=(await L.get(route("SupplierItems.get-details-by-code",{itemCode:r,supplierCode:e}))).data.item;if(l){d.inventory_code=String(l.ItemCode),d.name=l.item_name,d.unit_of_measurement=l.uom,d.cost=Number(l.cost),d.uom=l.uom;let n=null,o=1;const c=l.sap_master_file;if(c&&Object.prototype.hasOwnProperty.call(c,"BaseQty")){const f=c.BaseQty;o=Number(f),(isNaN(o)||o<=0)&&(o=1),n=c.BaseUOM}d.base_uom=n,d.base_qty=o}else y.add({severity:"error",summary:"Error",detail:"Item details not found.",life:5e3})}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load item details.",life:5e3})}finally{_.value=!1}}else Object.keys(d).forEach(e=>{d[e]=null})},{deep:!0});const Ze=N(()=>a.orders.reduce((r,e)=>r+parseFloat(e.total_cost),0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}));T(()=>a.supplier_id,async r=>{if(ee.value){if(a.order_date=null,a.branch_id=null,oe.value={},R.value=null,Object.keys(d).forEach(e=>{d[e]=null}),te(r),de.value=[],!r){se.value=!0;return}se.value=!0;try{const e=await L.get(route("mass-orders.available-dates",{supplier_code:r}));de.value=e.data,se.value=!1}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load available dates.",life:5e3})}}}),T(()=>a.order_date,async r=>{if(ee.value)if(a.branch_id=null,r&&a.supplier_id)try{const e=await L.get(route("mass-orders.get-branches",{order_date:r,supplier_code:a.supplier_id}));oe.value=e.data}catch(e){console.error("Error fetching branches:",e),y.add({severity:"error",summary:"Error",detail:"Failed to load store branches for the selected date.",life:5e3})}else oe.value={}});const Ge=N(()=>a.supplier_id!==null&&a.supplier_id!==""),pe=N(()=>a.orders.length>0),Ke=N(()=>a.orders.length===0&&a.supplier_id!==null&&a.supplier_id!==""&&a.branch_id!==null&&a.branch_id!==""&&a.order_date!==null),{isEditQuantityModalOpen:ae,formQuantity:F,openEditQuantityModal:Ie}=yt(a,w,b.order),et=()=>{let r=a.orders.findIndex(e=>e.id===F.id);if(r===-1&&(r=a.orders.findIndex(e=>e.inventory_code===F.inventory_code||e.name===F.name)),r!==-1){const e=Number(F.quantity),s=a.orders[r];if(isNaN(e)||e<=0){F.errors.quantity="Quantity must be a positive number.",y.add({severity:"error",summary:"Validation Error",detail:"Quantity must be a positive number.",life:3e3});return}const l=Number(s.cost);if(isNaN(l)){y.add({severity:"error",summary:"Calculation Error",detail:"Item cost is invalid. Cannot update total cost.",life:3e3});return}const n=Number(s.base_qty)>0?Number(s.base_qty):1;s.quantity=parseFloat(e.toFixed(2)),s.base_uom_qty=parseFloat((e*n).toFixed(2)),s.total_cost=parseFloat(Number(s.base_uom_qty)*Number(s.cost)).toFixed(2),a.orders=[...a.orders];const o=w.value.findIndex(c=>c.id===s.id||c.inventory_code===s.inventory_code);o!==-1&&(w.value[o]={...s}),y.add({severity:"success",summary:"Success",detail:"Quantity Updated.",life:3e3}),ae.value=!1}else y.add({severity:"error",summary:"Error",detail:`Item not found in order list. Looking for ID: ${F.id}, Inventory Code: ${F.inventory_code}, Name: ${F.name}`,life:5e3})},tt=`Edit Order #${b.order.order_number}`,P=ce({orders_file:null}),Y=v(!1);T(Y,r=>{r||(P.reset(),P.clearErrors())});const qe=()=>{Y.value=!0,z.value=[]};_e=qe;const Fe=async()=>{const r=a.supplier_id;if(!r){y.add({severity:"warn",summary:"Warning",detail:"Please select a supplier first to download the template.",life:5e3});return}try{const e=await L.get(route("store-orders.download-supplier-order-template",{supplierCode:r}),{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=s,l.setAttribute("download",`supplier_order_template_${r}.xlsx`),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s),y.add({severity:"success",summary:"Success",detail:"Template download started.",life:3e3})}catch(e){console.error("Error downloading template:",e),y.add({severity:"error",summary:"Error",detail:"Failed to download template. Please try again.",life:5e3})}};he=Fe;const Se=()=>{_.value=!0,z.value=[];const r=new FormData;r.append("orders_file",P.orders_file),r.append("supplier_id",a.supplier_id),L.post(route("store-orders.imported-file"),r,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{e.data.orders.forEach(s=>{const l=s.item_code||s.ItemCode||s.inventory_code,n=s.item_name||s.ItemName||s.name,o=s.qty||s.Qty||s.quantity,c=Number(o),f=Number(s.cost||s.Cost),C=s.unit||s.UOM||s.unit_of_measurement,I=Number(s.base_qty||s.BaseQTY);if(isNaN(f)||f===0){y.add({severity:"error",summary:"Validation Error",detail:`Imported item '${n||l||"Unknown Item"}' has a cost of zero or is invalid and will be skipped.`,life:7e3});return}if(isNaN(c)||c<.1)return;if(isNaN(I)||I<=0){y.add({severity:"error",summary:"Validation Error",detail:`Imported item '${n||l||"Unknown Item"}' has an invalid BaseQTY and will be skipped. BaseQTY must be a positive number.`,life:7e3});return}const $=parseFloat((c*I).toFixed(2)),W=parseFloat(($*f).toFixed(2)),U=a.orders.findIndex(j=>j.inventory_code===l);if(U!==-1){const j=Number(a.orders[U].quantity)+c,Ne=parseFloat((j*I).toFixed(2));a.orders[U].quantity=j,a.orders[U].base_uom_qty=Ne,a.orders[U].total_cost=parseFloat(Ne*f).toFixed(2)}else{const j={id:null,inventory_code:String(l),name:n,unit_of_measurement:C,base_uom:s.base_uom||null,base_qty:I,base_uom_qty:$,quantity:parseFloat(c.toFixed(2)),cost:f,uom:C,total_cost:W};a.orders.push(j)}}),Y.value=!1,y.add({severity:"success",summary:"Success",detail:"Items added successfully.",life:5e3}),P.orders_file=null,e.data.skipped_items&&e.data.skipped_items.length>0&&(z.value=e.data.skipped_items.map(s=>`Item '${s.item_name||s.item_code||"Unknown"}' was skipped: ${s.reason}`))}).catch(e=>{y.add({severity:"error",summary:"Error",detail:e.response.data.message||"An error occurred while trying to get the imported orders. Please make sure that you are using the correct format.",life:5e3}),P.setError("orders_file",e.response.data.message||"Unknown error during import.")}).finally(()=>_.value=!1)};return nt(()=>{const r=document.getElementById("mass-orders-dropdown-fixes");r&&document.head.removeChild(r),window.massOrdersDropdownObserver&&(window.massOrdersDropdownObserver.disconnect(),delete window.massOrdersDropdownObserver)}),(r,e)=>{const s=ye("FormError"),l=ye("Loading"),n=ye("Layout");return x(),Oe(n,{heading:tt,hasButton:Ke.value,buttonName:"Import Orders",handleClick:qe},{default:p(()=>[z.value.length>0?(x(),g("div",bt,[e[22]||(e[22]=t("p",{class:"font-bold mb-2"},"Skipped Items:",-1)),t("ul",gt,[(x(!0),g(J,null,X(z.value,(o,c)=>(x(),g("li",{key:c},m(o),1))),128))])])):A("",!0),t("div",ht,[t("div",_t,[t("button",{onClick:e[0]||(e[0]=o=>le("orderInfo")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-blue-50 to-blue-100 border-b border-blue-200 flex items-center justify-between text-left hover:from-blue-100 hover:to-blue-200 transition-colors"},[e[23]||(e[23]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"p-2 bg-blue-600 rounded-lg"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),t("div",null,[t("h2",{class:"text-lg font-semibold text-gray-900"},"Order Information"),t("p",{class:"text-sm text-gray-600"},"Basic order details")])],-1)),u(i(fe),{class:O(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":D.value.orderInfo}])},null,8,["class"])]),M(t("div",wt,[t("div",kt,[t("div",Ct,[e[24]||(e[24]=t("label",{class:"text-sm font-medium text-gray-700"},"Supplier",-1)),u(i(ve),{filter:"",placeholder:"Select a Supplier",modelValue:i(a).supplier_id,"onUpdate:modelValue":e[1]||(e[1]=o=>i(a).supplier_id=o),options:i(Le),optionLabel:"label",optionValue:"value",disabled:pe.value,class:"w-full"},null,8,["modelValue","options","disabled"]),u(s,null,{default:p(()=>[h(m(i(a).errors.supplier_id),1)]),_:1})]),t("div",It,[e[26]||(e[26]=t("label",{class:"text-sm font-medium text-gray-700"},"Order Date",-1)),t("div",{class:"relative",ref_key:"dateInputRef",ref:ue},[t("div",qt,[t("input",{id:"order_date",type:"text",readonly:"",value:i(a).order_date,onClick:e[2]||(e[2]=o=>H.value=!H.value),disabled:se.value||pe.value,class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm transition-colors placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-400 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",placeholder:"Select a date"},null,8,Ft),u(i(ft),{class:"absolute right-3 top-1/2 -translate-y-1/2 size-4 text-gray-500 pointer-events-none"})]),M(t("div",{class:O(["absolute z-50 bg-white border border-gray-200 rounded-lg shadow-lg p-4 w-full min-w-[300px]",me.value])},[t("div",St,[t("button",{type:"button",onClick:e[3]||(e[3]=xe(o=>ze(),["stop"])),class:"p-2 rounded-full hover:bg-gray-100"},"<"),t("h2",Nt,m((B.value||new Date).toLocaleString("default",{month:"long",year:"numeric"})),1),t("button",{type:"button",onClick:e[4]||(e[4]=xe(o=>He(),["stop"])),class:"p-2 rounded-full hover:bg-gray-100"},">")]),e[25]||(e[25]=t("div",{class:"grid grid-cols-7 gap-1 text-center text-xs font-medium text-gray-500 mb-2"},[t("span",null,"Su"),t("span",null,"Mo"),t("span",null,"Tu"),t("span",null,"We"),t("span",null,"Th"),t("span",null,"Fr"),t("span",null,"Sa")],-1)),t("div",Ot,[(x(!0),g(J,null,X(Re(),(o,c)=>(x(),g("div",{key:c,class:O(["text-center py-1.5 rounded-full text-sm cursor-pointer",[o?o.isDisabled?"text-gray-300 line-through cursor-not-allowed":i(a).order_date&&o.date.toDateString()===new Date(i(a).order_date+"T00:00:00").toDateString()?"bg-blue-600 text-white font-bold shadow-md":"bg-gray-100 text-gray-800 font-semibold hover:bg-blue-100":""]]),onClick:f=>Ye(o)},m(o?o.day:""),11,Dt))),128))])],2),[[ne,H.value]])],512),u(s,null,{default:p(()=>[h(m(i(a).errors.order_date),1)]),_:1})]),t("div",Et,[e[27]||(e[27]=t("label",{class:"text-sm font-medium text-gray-700"},"Store Branch",-1)),u(i(ve),{filter:"",placeholder:"Select a Store",modelValue:i(a).branch_id,"onUpdate:modelValue":e[5]||(e[5]=o=>i(a).branch_id=o),options:Ae.value,optionLabel:"label",optionValue:"value",disabled:pe.value,class:"w-full"},null,8,["modelValue","options","disabled"]),u(s,null,{default:p(()=>[h(m(i(a).errors.branch_id),1)]),_:1})])])],512),[[ne,D.value.orderInfo]])]),t("div",Bt,[t("button",{onClick:e[6]||(e[6]=o=>le("addItem")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-green-50 to-green-100 border-b border-green-200 flex items-center justify-between text-left hover:from-green-100 hover:to-green-200 transition-colors"},[e[28]||(e[28]=t("div",{class:"flex items-center gap-3"},[t("div",{class:"p-2 bg-green-600 rounded-lg"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])]),t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"Add Item"),t("p",{class:"text-sm text-gray-600"},"Add items to your order")])],-1)),u(i(fe),{class:O(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":D.value.addItem}])},null,8,["class"])]),M(t("div",Pt,[t("div",$t,[t("div",Mt,[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-gray-700"},"Item",-1)),u(i(ve),{filter:"",placeholder:"Select an Item",modelValue:R.value,"onUpdate:modelValue":e[7]||(e[7]=o=>R.value=o),options:re.value,optionLabel:"label",optionValue:"value",disabled:!Ge.value||_.value,class:"w-full"},{empty:p(()=>[_.value?(x(),g("div",Ut," Loading items... ")):(x(),g("div",Qt," No items available for this supplier. "))]),_:1},8,["modelValue","options","disabled"]),u(s,null,{default:p(()=>[h(m(i(S).errors.item),1)]),_:1})]),t("div",Vt,[e[30]||(e[30]=t("label",{class:"text-sm font-medium text-gray-700"},"UOM",-1)),M(t("input",{type:"text",disabled:"","onUpdate:modelValue":e[8]||(e[8]=o=>d.unit_of_measurement=o),class:"flex h-10 w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm"},null,512),[[ie,d.unit_of_measurement]])]),t("div",jt,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-gray-700"},"Cost",-1)),M(t("input",{type:"text",disabled:"","onUpdate:modelValue":e[9]||(e[9]=o=>d.cost=o),class:"flex h-10 w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-sm"},null,512),[[ie,d.cost]])]),t("div",Tt,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-gray-700"},"Quantity",-1)),M(t("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=o=>d.quantity=o),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm"},null,512),[[ie,d.quantity]]),u(s,null,{default:p(()=>[h(m(i(S).errors.quantity),1)]),_:1})])]),t("div",Lt,[u(i(Q),{onClick:Je,disabled:_.value},{default:p(()=>e[33]||(e[33]=[h(" Add to Orders ")])),_:1},8,["disabled"])])],512),[[ne,D.value.addItem]])]),t("div",At,[t("button",{onClick:e[11]||(e[11]=o=>le("items")),class:"w-full px-4 sm:px-6 py-4 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200 flex items-center justify-between text-left hover:from-purple-100 hover:to-purple-200 transition-colors"},[t("div",Rt,[e[35]||(e[35]=t("div",{class:"p-2 bg-purple-600 rounded-lg"},[t("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),t("div",null,[t("h3",zt,"Order Items ("+m(w.value.length)+")",1),e[34]||(e[34]=t("p",{class:"text-sm text-gray-600"},"Manage your order items and quantities",-1))])]),u(i(fe),{class:O(["w-5 h-5 text-gray-600 transition-transform duration-200",{"rotate-180":D.value.items}])},null,8,["class"])]),M(t("div",Ht,[t("div",Yt,[t("div",Wt,[M(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=o=>Z.value=o),placeholder:"Search items by code or name...",class:"w-full h-10 pl-10 pr-4 rounded-md border border-gray-300 bg-white text-sm shadow-sm transition-colors placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500"},null,512),[[ie,Z.value]]),e[36]||(e[36]=t("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),t("div",Jt,[u(i(Q),{onClick:i(he),variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:p(()=>[u(i(it),{class:"w-4 h-4"}),e[37]||(e[37]=t("span",{class:"hidden sm:inline"},"Download Template",-1)),e[38]||(e[38]=t("span",{class:"sm:hidden"},"Download",-1))]),_:1},8,["onClick"]),t("div",Xt,[u(i(Q),{onClick:i(_e),variant:"outline",size:"sm",class:"flex items-center gap-2"},{default:p(()=>[u(i(vt),{class:"w-4 h-4"}),e[39]||(e[39]=t("span",{class:"hidden sm:inline"},"Upload Excel",-1)),e[40]||(e[40]=t("span",{class:"sm:hidden"},"Upload",-1))]),_:1},8,["onClick"]),t("input",{type:"file",ref:"fileInput",onChange:Te,accept:".xlsx, .xls",class:"hidden"},null,544)]),t("div",Zt,[e[41]||(e[41]=t("span",{class:"text-sm text-gray-600"},"Total:",-1)),t("span",Gt,m(Ze.value),1)])])]),t("div",Kt,[t("span",null,m(V.value.length)+" items found",1),t("div",eo,[e[42]||(e[42]=t("span",null,"Items per page:",-1)),t("button",{onClick:e[13]||(e[13]=o=>k.value=10),class:O(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===10?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 10 ",2),t("button",{onClick:e[14]||(e[14]=o=>k.value=25),class:O(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===25?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 25 ",2),t("button",{onClick:e[15]||(e[15]=o=>k.value=50),class:O(["px-2 py-1 rounded text-xs font-medium transition-colors",k.value===50?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," 50 ",2)])]),t("div",to,[(x(!0),g(J,null,X(G.value,(o,c)=>(x(),g("div",{key:o.id,class:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow"},[t("div",oo,[t("div",ro,[t("div",so,m(o.name),1),t("div",ao,m(o.inventory_code),1),t("div",no,"UOM: "+m(o.unit_of_measurement),1)]),t("button",{onClick:f=>Ce(o.id),class:"h-8 w-8 p-0 hover:bg-red-50 hover:text-red-600 hover:border-red-300 flex-shrink-0 ml-2 rounded-md border border-gray-300"},[u(i(be),{class:"w-4 h-4"})],8,io)]),t("div",lo,[t("div",null,[e[43]||(e[43]=t("span",{class:"text-gray-600"},"Qty:",-1)),t("span",uo,m(o.quantity),1)]),t("div",null,[e[44]||(e[44]=t("span",{class:"text-gray-600"},"Cost:",-1)),t("span",mo,m(Number(o.cost).toFixed(2)),1)]),t("div",null,[e[45]||(e[45]=t("span",{class:"text-gray-600"},"Base Qty:",-1)),t("span",po,m(o.base_uom_qty),1)]),t("div",null,[e[46]||(e[46]=t("span",{class:"text-gray-600"},"Total:",-1)),t("span",co,m(Number(o.total_cost).toFixed(2)),1)])]),t("div",yo,[t("button",{onClick:f=>i(Ie)(o.id,o.quantity),class:"w-full text-sm text-blue-600 hover:text-blue-800 font-medium"}," Edit Quantity ",8,fo)])]))),128)),G.value.length===0?(x(),g("div",vo,e[47]||(e[47]=[t("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),t("p",null,"No items found. Try searching or add items manually.",-1)]))):A("",!0)]),t("div",xo,[t("div",bo,[t("table",go,[e[49]||(e[49]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"Item Code"),t("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"Item Name"),t("th",{class:"px-4 py-3 text-left font-medium text-gray-900"},"UOM"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Quantity"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Base Qty"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Cost"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Total Cost"),t("th",{class:"px-4 py-3 text-center font-medium text-gray-900"},"Actions")])],-1)),t("tbody",ho,[(x(!0),g(J,null,X(G.value,o=>(x(),g("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",_o,m(o.inventory_code),1),t("td",wo,m(o.name),1),t("td",ko,m(o.unit_of_measurement),1),t("td",Co,m(o.quantity),1),t("td",Io,m(o.base_uom_qty),1),t("td",qo,m(Number(o.cost).toFixed(2)),1),t("td",Fo,m(Number(o.total_cost).toFixed(2)),1),t("td",So,[t("div",No,[t("button",{onClick:c=>i(Ie)(o.id,o.quantity),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Edit ",8,Oo),t("button",{onClick:c=>Ce(o.id),class:"text-red-600 hover:text-red-800"},[u(i(be),{class:"w-4 h-4"})],8,Do)])])]))),128)),G.value.length===0?(x(),g("tr",Eo,e[48]||(e[48]=[t("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"},[t("div",{class:"flex flex-col items-center"},[t("svg",{class:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})]),t("p",null,"No items found. Try searching or add items manually.")])],-1)]))):A("",!0)])])])]),V.value.length>k.value?(x(),g("div",Bo,[t("div",Po," Showing "+m((q.value-1)*k.value+1)+" to "+m(Math.min(q.value*k.value,V.value.length))+" of "+m(V.value.length)+" items ",1),t("div",$o,[t("button",{onClick:e[16]||(e[16]=o=>q.value--),disabled:q.value===1,class:"h-8 w-8 p-0 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[u(i(xt),{class:"w-4 h-4"})],8,Mo),(x(!0),g(J,null,X(je.value,o=>(x(),g("button",{key:o,onClick:c=>q.value=o==="..."?null:q.value=o,disabled:o==="...",class:O(["h-8 w-8 p-0 rounded-md text-sm font-medium transition-colors",q.value===o?"bg-blue-600 text-white":o==="..."?"text-gray-500 cursor-default":"border border-gray-300 hover:bg-gray-50"])},m(o),11,Uo))),128)),t("button",{onClick:e[17]||(e[17]=o=>q.value++),disabled:q.value===ge.value,class:"h-8 w-8 p-0 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[u(i(lt),{class:"w-4 h-4"})],8,Qo)])])):A("",!0),t("div",Vo,[t("div",jo,[u(i(Q),{onClick:We,variant:"outline",class:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:i(a).orders.length===0},{default:p(()=>[u(i(be),{class:"w-4 h-4 mr-2"}),e[50]||(e[50]=h(" Clear All "))]),_:1},8,["disabled"])]),u(i(Q),{onClick:Xe,disabled:_.value,class:"min-w-[120px]"},{default:p(()=>[_.value?(x(),g("svg",To,e[51]||(e[51]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):A("",!0),h(" "+m(_.value?"Updating...":"Update Order"),1)]),_:1},8,["disabled"])])],512),[[ne,D.value.items]])])]),u(i(Qe),{open:Y.value,"onUpdate:open":e[19]||(e[19]=o=>Y.value=o)},{default:p(()=>[u(i(Be),{class:"sm:max-w-[600px]"},{default:p(()=>[u(i(Pe),null,{default:p(()=>[u(i($e),null,{default:p(()=>e[52]||(e[52]=[h("Import Orders")])),_:1}),u(i(Me),null,{default:p(()=>e[53]||(e[53]=[h(" Upload an Excel file to import orders. ")])),_:1})]),_:1}),t("div",Lo,[t("div",Ao,[u(i(De),{type:"file",onInput:e[18]||(e[18]=o=>i(P).orders_file=o.target.files[0])}),u(s,null,{default:p(()=>[h(m(i(P).errors.orders_file),1)]),_:1})]),t("div",Ro,[u(i(Ee),{class:"text-xs"},{default:p(()=>e[54]||(e[54]=[h("Accepted Orders File Format")])),_:1}),t("ul",null,[t("li",zo,[t("a",{class:"text-blue-500 underline cursor-pointer",onClick:xe(Fe,["prevent"])},"Click to download template")])])])]),u(i(Ue),null,{default:p(()=>[u(i(Q),{disabled:_.value,onClick:Se,type:"submit",class:"gap-2"},{default:p(()=>[e[55]||(e[55]=h(" Import ")),t("span",null,[_.value?(x(),Oe(l,{key:0})):A("",!0)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),u(i(Qe),{open:i(ae),"onUpdate:open":e[21]||(e[21]=o=>dt(ae)?ae.value=o:null)},{default:p(()=>[u(i(Be),{class:"sm:max-w-[425px]"},{default:p(()=>[u(i(Pe),null,{default:p(()=>[u(i($e),null,{default:p(()=>e[56]||(e[56]=[h("Edit Quantity")])),_:1}),u(i(Me),null,{default:p(()=>e[57]||(e[57]=[h("Make changes to the quantity here. Click save when you're done.")])),_:1})]),_:1}),t("div",Ho,[t("div",Yo,[u(i(Ee),{for:"quantity",class:"text-right"},{default:p(()=>e[58]||(e[58]=[h(" Quantity ")])),_:1}),u(i(De),{id:"quantity",type:"number",class:"col-span-3",modelValue:i(F).quantity,"onUpdate:modelValue":e[20]||(e[20]=o=>i(F).quantity=o)},null,8,["modelValue"])])]),u(i(Ue),null,{default:p(()=>[u(i(Q),{onClick:et},{default:p(()=>e[59]||(e[59]=[h("Save changes")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["hasButton"])}}};export{sr as default};
