import{u as se}from"./useSearch-DbS36i7w.js";import{T as ue,G as ie,r as n,o as d,d as I,a as e,w as l,u as s,i as M,aA as w,b as a,F as L,e as X,t as i,c as y,h as D,g as c,N as re}from"./app-Drfr7wPO.js";import{u as de}from"./useAuth-CGUY0YG2.js";import{u as me}from"./useReferenceDelete-Lc4jVcC1.js";import"./lodash-IPPPM5x9.js";const ge={__name:"Index",props:{menus:{type:Object,required:!0}},setup(x){const v=ref(!1),b=ref(!1),m=ue({file:null}),{search:C}=se("menu-list.index"),f=ie(),r=ref(!1),j=()=>{b.value=!0},q=()=>{re.get(route("menu-list.create"))},{hasAccess:T}=de(),{deleteModel:S}=me(),G=route("menu-list.export",{search:C.value}),z=()=>{console.log("list"),r.value=!0,m.post(route("menu-list.import-bom-list"),{onSuccess:()=>{v.value=!1,m.reset(),f.add({severity:"success",summary:"Success",detail:"New BOMs Successfully Created",life:3e3})},onError:u=>{console.log(u)},onFinish:()=>{r.value=!1}})},J=()=>{r.value=!0,m.post(route("menu-list.import-bom-ingredients"),{onSuccess:()=>{b.value=!1,m.reset(),f.add({severity:"success",summary:"Success",detail:"Updated Successfully Created",life:3e3})},onError:u=>{console.log("Import errors:",u),u.validation_errors&&Array.isArray(u.validation_errors)?u.validation_errors.forEach((t,g)=>{setTimeout(()=>{f.add({severity:"error",summary:"Validation Error",detail:t,life:6e3})},g*100)}):u.message?f.add({severity:"error",summary:"Import Failed",detail:u.message,life:5e3}):u.file?f.add({severity:"error",summary:"File Error",detail:u.file,life:5e3}):f.add({severity:"error",summary:"Import Failed",detail:u.validation_errors,life:1e4})},onFinish:()=>{r.value=!1}})};return(u,t)=>{const g=n("Input"),K=n("SearchBar"),F=n("DivFlexCenter"),Q=n("TableHeader"),p=n("TH"),W=n("TableHead"),_=n("TD"),N=n("ShowButton"),E=n("EditButton"),H=n("DeleteButton"),Y=n("TableBody"),Z=n("Table"),h=n("MobileTableHeading"),B=n("LabelXS"),ee=n("MobileTableRow"),le=n("MobileTableContainer"),te=n("Pagination"),oe=n("TableContainer"),ne=n("Layout"),O=n("DialogTitle"),R=n("DialogDescription"),V=n("DialogHeader"),U=n("FormError"),k=n("InputContainer"),A=n("DialogFooter"),P=n("DialogContent"),$=n("Dialog");return d(),I(L,null,[e(ne,{heading:"BOM List",hasButton:!1,handleClick:q,buttonName:"Create New BOM",hasExcelDownload:!0,exportRoute:s(G)},{default:l(()=>[e(oe,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(K,null,{default:l(()=>[e(g,{class:"pl-10",placeholder:"Search...",modelValue:s(C),"onUpdate:modelValue":t[0]||(t[0]=o=>M(C)?C.value=o:null)},null,8,["modelValue"])]),_:1}),e(F,{class:"gap-2"},{default:l(()=>[e(s(w),{onClick:j},{default:l(()=>t[5]||(t[5]=[a("Update BOM ")])),_:1})]),_:1})]),_:1}),e(Z,null,{default:l(()=>[e(W,null,{default:l(()=>[e(p,null,{default:l(()=>t[6]||(t[6]=[a("Id")])),_:1}),e(p,null,{default:l(()=>t[7]||(t[7]=[a("Product Id")])),_:1}),e(p,null,{default:l(()=>t[8]||(t[8]=[a("Name")])),_:1}),e(p,null,{default:l(()=>t[9]||(t[9]=[a("Ingredients Cost")])),_:1}),e(p,null,{default:l(()=>t[10]||(t[10]=[a("Remarks")])),_:1}),e(p,null,{default:l(()=>t[11]||(t[11]=[a("Actions")])),_:1})]),_:1}),e(Y,null,{default:l(()=>[(d(!0),I(L,null,X(x.menus.data,o=>(d(),I("tr",{key:o.id},[e(_,null,{default:l(()=>[a(i(o.id),1)]),_:2},1024),e(_,null,{default:l(()=>[a(i(o.product_id),1)]),_:2},1024),e(_,null,{default:l(()=>[a(i(o.name),1)]),_:2},1024),e(_,null,{default:l(()=>[a(i(o.total),1)]),_:2},1024),e(_,null,{default:l(()=>[a(i(o.remarks??"None"),1)]),_:2},1024),e(_,null,{default:l(()=>[e(F,{class:"gap-3"},{default:l(()=>[s(T)("view bom")?(d(),y(N,{key:0,isLink:!0,href:u.route("menu-list.show",o.id)},null,8,["href"])):D("",!0),s(T)("edit bom")?(d(),y(E,{key:1,isLink:!0,href:u.route("menu-list.edit",o.id)},null,8,["href"])):D("",!0),e(H,{onClick:ae=>s(S)(u.route("menu-list.destroy",o.id),"Menu")},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(le,null,{default:l(()=>[(d(!0),I(L,null,X(x.menus.data,o=>(d(),y(ee,{key:o.id},{default:l(()=>[e(h,{title:`${o.name}`},{default:l(()=>[s(T)("view menu")?(d(),y(N,{key:0,isLink:!0,href:u.route("menu-list.show",o.id)},null,8,["href"])):D("",!0),s(T)("edit menu")?(d(),y(E,{key:1,isLink:!0,href:u.route("menu-list.edit",o.id)},null,8,["href"])):D("",!0),e(H,{onClick:ae=>s(S)(u.route("menu-list.destroy",o.id),"Menu")},null,8,["onClick"])]),_:2},1032,["title"]),e(B,null,{default:l(()=>[a("Category: "+i(o.category),1)]),_:2},1024),e(B,null,{default:l(()=>[a("Price: "+i(o.price),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(te,{data:x.menus},null,8,["data"])]),_:1})]),_:1},8,["exportRoute"]),e($,{open:s(v),"onUpdate:open":t[2]||(t[2]=o=>M(v)?v.value=o:null)},{default:l(()=>[e(P,{class:"sm:max-w-[600px]"},{default:l(()=>[e(V,null,{default:l(()=>[e(O,null,{default:l(()=>t[12]||(t[12]=[a("Import BOM List")])),_:1}),e(R,null,{default:l(()=>t[13]||(t[13]=[a(" Import the excel file here. ")])),_:1})]),_:1}),e(k,null,{default:l(()=>[e(B,null,{default:l(()=>t[14]||(t[14]=[a(" List ")])),_:1}),e(g,{disabled:s(r),type:"file",onInput:t[1]||(t[1]=o=>s(m).file=o.target.files[0])},null,8,["disabled"]),e(U,null,{default:l(()=>[a(i(s(m).errors.file),1)]),_:1})]),_:1}),e(k,null,{default:l(()=>t[15]||(t[15]=[c("ul",null,[c("li",{class:"text-xs"},[a(" Template: "),c("a",{class:"text-blue-500 underline",href:"/excel/bom-list-template"},"Click to download")])],-1)])),_:1}),e(A,null,{default:l(()=>[e(s(w),{disabled:s(r),onClick:z},{default:l(()=>[a(i(s(r)?"Proccessing":"Upload"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),e($,{open:s(b),"onUpdate:open":t[4]||(t[4]=o=>M(b)?b.value=o:null)},{default:l(()=>[e(P,{class:"sm:max-w-[600px]"},{default:l(()=>[e(V,null,{default:l(()=>[e(O,null,{default:l(()=>t[16]||(t[16]=[a("Import BOM Ingredients List")])),_:1}),e(R,null,{default:l(()=>t[17]||(t[17]=[a(" Import the excel file here. ")])),_:1})]),_:1}),e(k,null,{default:l(()=>[e(B,null,{default:l(()=>t[18]||(t[18]=[a(" List ")])),_:1}),e(g,{disabled:s(r),type:"file",onInput:t[3]||(t[3]=o=>s(m).file=o.target.files[0])},null,8,["disabled"]),e(U,null,{default:l(()=>[a(i(s(m).errors.file),1)]),_:1})]),_:1}),e(k,null,{default:l(()=>t[19]||(t[19]=[c("ul",null,[c("li",{class:"text-xs"},[a(" Template: "),c("a",{class:"text-blue-500 underline",href:"/excel/bom-ingredients-template"},"Click to download")])],-1)])),_:1}),t[20]||(t[20]=a(" `` ")),e(A,null,{default:l(()=>[e(s(w),{disabled:s(r),onClick:J},{default:l(()=>[a(i(s(r)?"Proccessing":"Upload"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64)}}};export{ge as default};
