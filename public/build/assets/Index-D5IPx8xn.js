import{_ as m,s as g}from"./index-ChOaIP5g.js";import{N as p,r as h,o as ae,c as re,w as y,a as l,u as t,i as f,g as v}from"./app-Bw_fMWAP.js";import{u as T}from"./useSelectOptions-BcktnHf_.js";import{C as le}from"./chart-BZoROWVk.js";import{C as ne}from"./check-CDHR8V18.js";import{C as ue,B as V}from"./clock-arrow-up-D86K3N0b.js";const ce={class:"flex flex-col gap-5"},se={class:"grid gap-5 sm:grid-cols-5"},ie={class:"sm:grid sm:grid-cols-3 sm:grid-rows-3 gap-4"},de={class:"flex flex-col row-span-2"},fe={__name:"Index",props:{branches:{type:Object,required:!0},timePeriods:{type:Object,required:!0},filters:{type:Object,required:!0},sales:{type:String,required:!0},inventories:{type:String,required:!0},upcomingInventories:{type:String,required:!0},accountPayable:{type:String,required:!0},cogs:{type:String,required:!0},dio:{type:Number,required:!0},dpo:{type:Number,required:!0},top_10:{type:Object,required:!0}},setup(r){console.log(r.top_10);const{options:x}=T(r.branches),{options:P}=T(r.timePeriods),s=ref(parseInt(r.filters.chart_time_period??0));console.log(s);const _=[{value:0,label:"YTD"},{value:1,label:"Monthly"}],F=[{value:"quantity",label:"Quantity"},{value:"cost",label:"Cost"}];onMounted(()=>{ee(),S.value=R(),k.value=$(),D.value=J(),O.value=M(),A.value=z(),I.value=U(),w.value=j(),L.value=H(),E.value=Y(),q.value=G(),B.value=W(),N.value=X()});const S=ref(),k=ref(),R=()=>{const e=getComputedStyle(document.documentElement);return{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{type:"line",label:"Dataset 1",borderColor:e.getPropertyValue("--p-orange-500"),borderWidth:2,fill:!1,tension:.4,data:[50,25,12,48,56,76,42,42,42,42,42,42]},{type:"bar",label:"Dataset 2",backgroundColor:e.getPropertyValue("--p-gray-500"),data:[21,84,24,75,37,65,34,42,42,42,42,42],borderColor:"white",borderWidth:2},{type:"bar",label:"Dataset 3",backgroundColor:e.getPropertyValue("--p-cyan-500"),data:[41,52,24,74,23,21,32,42,42,42,42,42]}]}},$=()=>{const e=getComputedStyle(document.documentElement),o=e.getPropertyValue("--p-text-color"),a=e.getPropertyValue("--p-text-muted-color"),n=e.getPropertyValue("--p-content-border-color");return{maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:o}}},scales:{x:{ticks:{color:a},grid:{color:n}},y:{ticks:{color:a},grid:{color:n}}}}},D=ref(),O=ref(null),J=()=>{var o;const e=getComputedStyle(document.body);return{labels:[`Days Inventory Outstanding (${r.dio.toFixed(0)})`],datasets:[{data:[(o=r.dio)==null?void 0:o.toFixed(0)],backgroundColor:[e.getPropertyValue("--p-cyan-500"),e.getPropertyValue("--p-orange-500"),e.getPropertyValue("--p-gray-500")],hoverBackgroundColor:[e.getPropertyValue("--p-cyan-400"),e.getPropertyValue("--p-orange-400"),e.getPropertyValue("--p-gray-400")]}]}},M=()=>{const o=getComputedStyle(document.documentElement).getPropertyValue("--p-text-color");return{cutout:"50%",plugins:{legend:{labels:{color:o}},tooltip:{callbacks:{label:function(a){return`${a.dataset.label}: ${a.raw}`}}},doughnutlabel:{labels:[{text:r.dio.toFixed(0),font:{size:"30px",weight:"bold"},color:o}]}}}},A=ref(),I=ref(null),z=()=>{const e=getComputedStyle(document.body);return{labels:[`Days Payable Outstanding (${r.dpo.toFixed(0)})`],datasets:[{data:[r.dpo.toFixed(0)],backgroundColor:[e.getPropertyValue("--p-cyan-500"),e.getPropertyValue("--p-orange-500"),e.getPropertyValue("--p-gray-500")],hoverBackgroundColor:[e.getPropertyValue("--p-cyan-400"),e.getPropertyValue("--p-orange-400"),e.getPropertyValue("--p-gray-400")]}]}},U=()=>{const o=getComputedStyle(document.documentElement).getPropertyValue("--p-text-color");return{cutout:"50%",plugins:{legend:{labels:{color:o}},tooltip:{callbacks:{label:function(a){return`${a.dataset.label}: ${a.raw}`}}},doughnutlabel:{labels:[{text:r.dpo.toFixed(0),font:{size:"30px",weight:"bold"},color:o}]}}}},w=ref(),L=ref(),j=()=>{const e=getComputedStyle(document.documentElement);return{labels:r.top_10.map(o=>o.name),datasets:[{label:"Top 10 Inventory Value by Item",backgroundColor:e.getPropertyValue("--p-cyan-500"),borderColor:e.getPropertyValue("--p-cyan-500"),data:r.top_10.map(o=>i.value=="quantity"?o.quantity:o.total_cost)}]}};console.log(r.top_10);const H=()=>{const e=getComputedStyle(document.documentElement),o=e.getPropertyValue("--p-text-color"),a=e.getPropertyValue("--p-text-muted-color"),n=e.getPropertyValue("--p-content-border-color");return{indexAxis:"y",maintainAspectRatio:!1,aspectRatio:.8,plugins:{legend:{labels:{color:o}}},scales:{x:{ticks:{color:a,font:{weight:500}},grid:{display:!1,drawBorder:!1}},y:{ticks:{color:a},grid:{color:n,drawBorder:!1}}}}},E=ref(),q=ref(),Y=()=>{const e=getComputedStyle(document.documentElement);return{labels:["January","February","March","April","May","June","July"],datasets:[{label:"First Dataset",data:[65,59,80,81,56,55,40],fill:!1,borderColor:e.getPropertyValue("--p-cyan-500"),tension:.4},{label:"Second Dataset",data:[28,48,40,19,86,27,90],fill:!1,borderColor:e.getPropertyValue("--p-gray-500"),tension:.4}]}},G=()=>{const e=getComputedStyle(document.documentElement),o=e.getPropertyValue("--p-text-color"),a=e.getPropertyValue("--p-text-muted-color"),n=e.getPropertyValue("--p-content-border-color");return{maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:o}}},scales:{x:{ticks:{color:a},grid:{color:n}},y:{ticks:{color:a},grid:{color:n}}}}},B=ref(),N=ref(),W=()=>{const e=getComputedStyle(document.documentElement);return{labels:["January","February","March","April","May","June","July"],datasets:[{type:"bar",label:"Dataset 1",backgroundColor:e.getPropertyValue("--p-cyan-500"),data:[50,25,12,48,90,76,42]},{type:"bar",label:"Dataset 2",backgroundColor:e.getPropertyValue("--p-gray-500"),data:[21,84,24,75,37,65,34]},{type:"bar",label:"Dataset 3",backgroundColor:e.getPropertyValue("--p-orange-500"),data:[41,52,24,74,23,21,32]}]}},X=()=>{const e=getComputedStyle(document.documentElement),o=e.getPropertyValue("--p-text-color"),a=e.getPropertyValue("--p-text-muted-color"),n=e.getPropertyValue("--p-content-border-color");return{maintainAspectRatio:!1,aspectRatio:.8,plugins:{tooltips:{mode:"index",intersect:!1},legend:{labels:{color:o}}},scales:{x:{stacked:!0,ticks:{color:a},grid:{color:n}},y:{stacked:!0,ticks:{color:a},grid:{color:n}}}}},u=ref(r.filters.branch||x.value[0].value),c=ref(r.filters.time_period||P.value[0].value),i=ref(r.filters.inventory_type??"quantity");watch(u,e=>{p.get(route("dashboard"),{branch:e,time_period:c.value,chart_time_period:s.value,inventory_type:i.value})}),watch(c,e=>{p.get(route("dashboard"),{branch:u.value,time_period:e,chart_time_period:s.value,inventory_type:i.value})}),watch(s,e=>{p.get(route("dashboard"),{branch:u.value,time_period:c.value,chart_time_period:e,inventory_type:i.value})}),watch(i,e=>{p.get(route("dashboard"),{branch:u.value,time_period:c.value,chart_time_period:s.value,inventory_type:e},{preserveScroll:!0})});const Q=()=>{p.get(route("days-payable-outstanding.index"))},K=()=>{p.get(computed(()=>route("top-10-inventories.index",{branchId:u.value})).value)},Z=()=>{p.get(computed(()=>route("days-inventory-outstanding.index",{branchId:u.value})).value)},ee=()=>{le.register({id:"doughnutLabel",beforeDraw:function(e){if(e.config.type==="doughnut"){const o=e.ctx,a=e.config.options.plugins.doughnutlabel;if(a){const n=a.labels[0].font||{},b=a.labels[0].text,C=a.labels[0].color;20/100*(e.innerRadius*2),o.font=`${n.weight||"bold"} ${n.size||"30px"} ${n.family||"Arial"}`,o.textBaseline="middle",o.textAlign="center";const te=(e.chartArea.left+e.chartArea.right)/2,oe=(e.chartArea.top+e.chartArea.bottom)/2;o.fillStyle=C||"#000",o.fillText(b,te,oe)}}}})};return(e,o)=>{const a=h("Select"),n=h("InputContainer"),b=h("DivFlexCenter"),C=h("Layout");return ae(),re(C,{heading:"Dashboard"},{default:y(()=>[l(b,{class:"gap-3"},{default:y(()=>[l(n,null,{default:y(()=>[l(a,{modelValue:t(u),"onUpdate:modelValue":o[0]||(o[0]=d=>f(u)?u.value=d:null),filter:"",placeholder:"Select a branch",options:t(x),optionLabel:"label",optionValue:"value"},null,8,["modelValue","options"])]),_:1}),l(n,null,{default:y(()=>[l(a,{modelValue:t(c),"onUpdate:modelValue":o[1]||(o[1]=d=>f(c)?c.value=d:null),filter:"",placeholder:"Time Periods",options:t(P),optionLabel:"label",optionValue:"value"},null,8,["modelValue","options"])]),_:1})]),_:1}),v("section",ce,[v("div",se,[l(m,{isLink:!0,href:e.route("sales-report.index",{time_period:t(c),branchId:t(u)}),heading:"SALES",value:r.sales,icon:t(ne)},null,8,["href","value","icon"]),l(m,{isLink:!0,href:e.route("inventories-report.index",{time_period:t(c),branchId:t(u)}),heading:"INVENTORIES",value:r.inventories,icon:t(ue)},null,8,["href","value","icon"]),l(m,{isLink:!0,href:e.route("upcoming-inventories.index",{time_period:t(c),branchId:t(u)}),heading:"UPCOMING INVENTORIES",value:r.upcomingInventories,icon:t(V)},null,8,["href","value","icon"]),l(m,{isLink:!0,href:e.route("account-payable.index",{time_period:t(c),branchId:t(u)}),heading:"ACCOUNT PAYABLE",value:r.accountPayable,icon:t(V)},null,8,["href","value","icon"]),l(m,{heading:"COGS",value:r.cogs,icon:t(V),isLink:!0,href:e.route("cost-of-goods.index",{time_period:t(c),branchId:t(u)})},null,8,["value","icon","href"])]),l(b,{class:"gap-3"},{default:y(()=>[l(n,null,{default:y(()=>[l(a,{modelValue:t(s),"onUpdate:modelValue":o[2]||(o[2]=d=>f(s)?s.value=d:null),placeholder:"Time Periods",options:_,optionLabel:"label",optionValue:"value"},null,8,["modelValue"])]),_:1})]),_:1}),v("div",ie,[l(t(g),{type:"bar",data:t(S),options:t(k),class:"h-[30rem] col-span-3"},null,8,["data","options"]),l(t(g),{type:"doughnut",data:t(D),options:t(O),class:"h-[30rem]",onClick:Z},null,8,["data","options"]),v("div",de,[l(a,{modelValue:t(i),"onUpdate:modelValue":o[3]||(o[3]=d=>f(i)?i.value=d:null),placeholder:"Time Periods",options:F,optionLabel:"label",optionValue:"value"},null,8,["modelValue"]),l(t(g),{class:"w-full h-full",type:"bar",data:t(w),options:t(L),onClick:K},null,8,["data","options"])]),l(t(g),{type:"doughnut",data:t(A),options:t(I),class:"h-[30rem]",onClick:Q},null,8,["data","options"]),l(t(g),{type:"line",data:t(E),options:t(q),class:"h-[30rem]"},null,8,["data","options"]),l(t(g),{type:"bar",data:t(B),options:t(N),class:"h-[30rem]"},null,8,["data","options"])])])]),_:1})}}};export{fe as default};
