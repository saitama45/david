import{f as W,x as A,Q as P,y as E,N as S,l as Y,r,o as f,c as w,w as e,a as t,n as _,b as o,t as s,u as y,i as Z,d as h,e as F,E as ee,h as H,F as I}from"./app-DPA7xop8.js";import{u as te}from"./useToast-CL68v_82.js";import{l as ne}from"./lodash-But43GHr.js";import{u as ae}from"./useAuth-C8QnpB8L.js";const ue={__name:"Index",props:{orders:{type:Object,required:!0},counts:{type:Object,required:!0}},setup(b){W(),te();const{hasAccess:C}=ae();let g=A(P().props.filters.currentFilter||"all"),i=A(P().props.filters.search);E(g,function(a){S.get(route("interco-approval.index"),{currentFilter:a,search:i.value},{preserveState:!0,replace:!0})}),E(i,ne.throttle(function(a){S.get(route("interco-approval.index"),{search:a,currentFilter:g.value},{preserveState:!0,replace:!0})},500));const T=a=>{g.value=a},x=a=>g.value==a?"bg-primary text-white":"",R=a=>{switch(a.toUpperCase()){case"APPROVED":return"bg-green-500 text-white";case"DISAPPROVED":return"bg-red-400 text-white";case"OPEN":return"bg-blue-400 text-white";default:return"bg-yellow-500 text-white"}},k=a=>{S.get(`/interco-approval/show/${a}`)};Y(()=>route("interco-approval.export",{search:i.value,filter:g.value}));const D=a=>a?new Date(a).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):"N/A",B=a=>{var n,u,d;return a.from_store_name||((n=a.sendingStore)==null?void 0:n.name)||((u=a.sendingStore)==null?void 0:u.branch_name)||((d=a.sendingStore)==null?void 0:d.brand_name)||"Unknown Sending Store"},N=a=>{var n,u;return a.to_store_name||((n=a.store_branch)==null?void 0:n.name)||((u=a.store_branch)==null?void 0:u.branch_name)||"Unknown Receiving Store"};return(a,n)=>{const u=r("Badge"),d=r("Button"),V=r("FilterTab"),L=r("Input"),O=r("SearchBar"),M=r("TableHeader"),p=r("TH"),U=r("TableHead"),c=r("TD"),$=r("TableBody"),j=r("Table"),q=r("ShowButton"),X=r("MobileTableHeading"),v=r("LabelXS"),z=r("MobileTableRow"),Q=r("MobileTableContainer"),G=r("Pagination"),J=r("TableContainer"),K=r("Layout");return f(),w(K,{heading:"Interco Approvals",hasExcelDownload:!1},{default:e(()=>[t(V,null,{default:e(()=>[t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("all")]),onClick:n[0]||(n[0]=l=>T("all"))},{default:e(()=>[n[4]||(n[4]=o("ALL ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("all")])},{default:e(()=>[o(s(b.counts.all),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("open")]),onClick:n[1]||(n[1]=l=>T("open"))},{default:e(()=>[n[5]||(n[5]=o("OPEN ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("open")])},{default:e(()=>[o(s(b.counts.open),1)]),_:1},8,["class"])]),_:1},8,["class"]),t(d,{class:_(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("disapproved")]),onClick:n[2]||(n[2]=l=>T("disapproved"))},{default:e(()=>[n[6]||(n[6]=o("DISAPPROVED ")),t(u,{class:_(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("disapproved")])},{default:e(()=>[o(s(b.counts.disapproved),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),t(J,null,{default:e(()=>[t(M,null,{default:e(()=>[t(O,null,{default:e(()=>[t(L,{class:"pl-10",modelValue:y(i),"onUpdate:modelValue":n[3]||(n[3]=l=>Z(i)?i.value=l:i=l),placeholder:"Search by Interco Number, Reason, or Store"},null,8,["modelValue"])]),_:1})]),_:1}),t(j,null,{default:e(()=>[t(U,null,{default:e(()=>[t(p,null,{default:e(()=>n[7]||(n[7]=[o("Id")])),_:1}),t(p,null,{default:e(()=>n[8]||(n[8]=[o("Sending Store")])),_:1}),t(p,null,{default:e(()=>n[9]||(n[9]=[o("Receiving Store")])),_:1}),t(p,null,{default:e(()=>n[10]||(n[10]=[o("Interco #")])),_:1}),t(p,null,{default:e(()=>n[11]||(n[11]=[o("Transfer Date")])),_:1}),t(p,null,{default:e(()=>n[12]||(n[12]=[o("Status")])),_:1}),t(p,null,{default:e(()=>n[13]||(n[13]=[o("Actions")])),_:1})]),_:1}),t($,null,{default:e(()=>[(f(!0),h(I,null,F(b.orders.data,l=>(f(),h("tr",{key:l.id},[t(c,null,{default:e(()=>[o(s(l.id),1)]),_:2},1024),t(c,null,{default:e(()=>[o(s(B(l)),1)]),_:2},1024),t(c,null,{default:e(()=>[o(s(N(l)),1)]),_:2},1024),t(c,null,{default:e(()=>[o(s(l.interco_number),1)]),_:2},1024),t(c,null,{default:e(()=>[o(s(D(l.order_date)),1)]),_:2},1024),t(c,null,{default:e(()=>[t(u,{class:_([R(l.interco_status),"font-bold"])},{default:e(()=>{var m;return[o(s(((m=l.interco_status)==null?void 0:m.toUpperCase())??"N/A"),1)]}),_:2},1032,["class"])]),_:2},1024),t(c,{class:"flex"},{default:e(()=>[y(C)("view interco approvals")?(f(),w(d,{key:0,onClick:m=>k(l.id),variant:"link"},{default:e(()=>[t(y(ee))]),_:2},1032,["onClick"])):H("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(Q,null,{default:e(()=>[(f(!0),h(I,null,F(b.orders.data,l=>(f(),w(z,{key:l.id},{default:e(()=>[t(X,{title:l.interco_number},{default:e(()=>[y(C)("view interco approvals")?(f(),w(q,{key:0,onClick:m=>k(l.id)},null,8,["onClick"])):H("",!0)]),_:2},1032,["title"]),t(v,null,{default:e(()=>[o("From: "+s(B(l)),1)]),_:2},1024),t(v,null,{default:e(()=>[o("To: "+s(N(l)),1)]),_:2},1024),t(v,null,{default:e(()=>{var m;return[o("Status: "+s((m=l.interco_status)==null?void 0:m.toUpperCase()),1)]}),_:2},1024),t(v,null,{default:e(()=>[o("Transfer Date: "+s(D(l.order_date)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(G,{data:b.orders},null,8,["data"])]),_:1})]),_:1})}}};export{ue as default};
