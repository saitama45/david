import{x as S,Q as v,y as T,N as g,l as Y,V as z,r as l,o as B,c as G,w as o,a as e,u as y,i as I,g as h,b as n,d as D,e as J,t as f,F as K}from"./app-Bp7xdNcv.js";import{l as W}from"./lodash-KmyjfxIh.js";const X={class:"flex justify-end"},ee={__name:"Index",props:{transactions:{type:Object,required:!0},branches:{type:Object,required:!0},order_date:{type:String,required:!1}},setup(d){let i=S(v().props.filters.search),u=S(v().props.filters.from),s=S(v().props.filters.to);const m=v().props.filters.branchId;T(u,a=>{g.get(route("store-transactions.index"),{search:i.value,from:a,to:s.value,branchId:m,order_date:d.order_date},{preserveState:!0,preserveScroll:!0})}),T(s,a=>{g.get(route("store-transactions.index"),{search:i.value,from:u.value,to:a,branchId:m,order_date:d.order_date},{preserveState:!0,preserveScroll:!0})}),T(i,W.throttle(function(a){g.get(route("store-transactions.index"),{search:a,from:u.value,to:s.value,branchId:m,order_date:d.order_date},{preserveState:!0,replace:!0})},500));const V=()=>{u.value=d.order_date??new Date().toISOString().slice(0,10),s.value=new Date().toISOString().slice(0,10),i.value=null,g.get(route("store-transactions.index"),{search:i.value,from:u.value,to:s.value,branchId:m,order_date:d.order_date},{preserveState:!0,preserveScroll:!0,replace:!0})},C=Y(()=>route("store-transactions.export",{search:i.value,branchId:m,from:u.value,to:s.value,order_date:d.order_date})),k=a=>{if(!a)return"N/a";try{const t=new Date(a),_=String(t.getMonth()+1).padStart(2,"0"),b=String(t.getDate()).padStart(2,"0"),x=t.getFullYear();return`${_}/${b}/${x}`}catch(t){return console.error("Error formatting date:",a,t),a}};return z(()=>{console.log("StoreTransaction/Index.vue onMounted:"),console.log("  usePage().props.filters:",v().props.filters),console.log("  from.value (after init):",u.value),console.log("  to.value (after init):",s.value),console.log("  branchId (from props.filters):",m),console.log("  transactions prop:",d.transactions),console.log("  order_date prop:",d.order_date)}),(a,t)=>{const _=l("Input"),b=l("SearchBar"),x=l("Filter"),w=l("PopoverTrigger"),F=l("Button"),P=l("PopoverContent"),N=l("Popover"),R=l("DivFlexCenter"),E=l("TableHeader"),c=l("TH"),H=l("TableHead"),p=l("TD"),O=l("ShowButton"),L=l("EditButton"),j=l("TableBody"),q=l("Table"),M=l("Pagination"),U=l("TableContainer"),A=l("BackButton"),Q=l("Layout");return B(),G(Q,{heading:"Store Transactions",hasExcelDownload:!0,exportRoute:C.value},{default:o(()=>[e(U,null,{default:o(()=>[e(E,null,{default:o(()=>[e(b,null,{default:o(()=>[e(_,{class:"pl-10",placeholder:"Search by Receipt No.",modelValue:y(i),"onUpdate:modelValue":t[0]||(t[0]=r=>I(i)?i.value=r:i=r)},null,8,["modelValue"])]),_:1}),e(R,{class:"gap-5"},{default:o(()=>[e(N,null,{default:o(()=>[e(w,null,{default:o(()=>[e(x)]),_:1}),e(P,null,{default:o(()=>[h("div",X,[e(F,{onClick:V,variant:"link",class:"text-end text-red-500 text-xs"},{default:o(()=>t[3]||(t[3]=[n(" Reset Filter ")])),_:1})]),t[4]||(t[4]=h("label",{class:"text-xs"},"From",-1)),e(_,{type:"date",modelValue:y(u),"onUpdate:modelValue":t[1]||(t[1]=r=>I(u)?u.value=r:u=r)},null,8,["modelValue"]),t[5]||(t[5]=h("label",{class:"text-xs"},"To",-1)),e(_,{type:"date",modelValue:y(s),"onUpdate:modelValue":t[2]||(t[2]=r=>I(s)?s.value=r:s=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,null,{default:o(()=>[e(H,null,{default:o(()=>[e(c,null,{default:o(()=>t[6]||(t[6]=[n("Id")])),_:1}),e(c,null,{default:o(()=>t[7]||(t[7]=[n("Branch Code")])),_:1}),e(c,null,{default:o(()=>t[8]||(t[8]=[n("Store Branch")])),_:1}),e(c,null,{default:o(()=>t[9]||(t[9]=[n("Receipt No.")])),_:1}),e(c,null,{default:o(()=>t[10]||(t[10]=[n("Item Count")])),_:1}),e(c,null,{default:o(()=>t[11]||(t[11]=[n("Overall Net Total")])),_:1}),e(c,null,{default:o(()=>t[12]||(t[12]=[n("POS Sales Date")])),_:1}),e(c,null,{default:o(()=>t[13]||(t[13]=[n("Actions")])),_:1})]),_:1}),e(j,null,{default:o(()=>[(B(!0),D(K,null,J(d.transactions.data,r=>(B(),D("tr",{key:r.id},[e(p,null,{default:o(()=>[n(f(r.id),1)]),_:2},1024),e(p,null,{default:o(()=>[n(f(r.branch_code),1)]),_:2},1024),e(p,null,{default:o(()=>[n(f(r.store_branch),1)]),_:2},1024),e(p,null,{default:o(()=>[n(f(r.receipt_number),1)]),_:2},1024),e(p,null,{default:o(()=>[n(f(r.item_count),1)]),_:2},1024),e(p,null,{default:o(()=>[n(f(r.net_total),1)]),_:2},1024),e(p,null,{default:o(()=>[n(f(k(r.order_date)),1)]),_:2},1024),e(p,{class:"flex items-center"},{default:o(()=>[e(O,{isLink:!0,href:a.route("store-transactions.show",r.id)},null,8,["href"]),e(L,{isLink:!0,href:a.route("store-transactions.edit",r.id)},null,8,["href"])]),_:2},1024)]))),128))]),_:1})]),_:1}),e(M,{data:d.transactions},null,8,["data"])]),_:1}),e(A)]),_:1},8,["exportRoute"])}}};export{ee as default};
