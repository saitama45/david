import{x as g,y as R,N as F,l as d,r as c,o as t,c as j,w as x,a as m,g as l,u as w,b as A,d as s,e as n,t as f,F as i,C as E,h as L}from"./app-DPA7xop8.js";import{l as U}from"./lodash-But43GHr.js";import{u as S}from"./useSelectOptions-DqOryH05.js";const Q={class:"flex items-center gap-4"},z={class:"flex items-center gap-4"},G={class:"bg-white border rounded-md shadow-sm"},J={class:"overflow-x-auto"},K={class:"min-w-full"},M={class:"bg-white"},P={class:"text-sm text-gray-600"},W=["colspan"],X={class:"flex justify-center items-center gap-2"},Y={key:0},Z=["colspan"],se={__name:"Index",props:{report:{type:Array,required:!0},dynamicHeaders:{type:Array,required:!0},branches:{type:Object,required:!0},suppliers:{type:Object,required:!0},filters:{type:Object,required:!0},totalBranches:{type:Number,required:!0}},setup(y){const o=y;S(o.branches);const{options:k}=S(o.suppliers),u=g(o.filters.order_date||new Date().toISOString().slice(0,10)),p=g(o.filters.supplier_id||"all");R([u,p],U.throttle(()=>{F.get(route("reports.consolidated-so.index"),{order_date:u.value,supplier_id:p.value},{preserveState:!0,preserveScroll:!0,replace:!0})},300));const C=()=>{u.value=new Date().toISOString().slice(0,10),p.value="all"},V=d(()=>route("reports.consolidated-so.export",{order_date:u.value,supplier_id:p.value})),_=d(()=>o.dynamicHeaders.slice(0,4)),v=d(()=>o.dynamicHeaders.slice(4,-2)),b=d(()=>o.dynamicHeaders.slice(-2)),h=d(()=>v.value.length),H=d(()=>_.value.length+h.value+b.value.length);return($,r)=>{const N=c("Input"),B=c("Select"),I=c("Button"),O=c("TableHeader"),T=c("TableContainer"),q=c("Layout");return t(),j(q,{heading:"Consolidated SO Report",hasExcelDownload:!0,exportRoute:V.value},{default:x(()=>[m(T,null,{default:x(()=>[m(O,{class:"flex-wrap"},{default:x(()=>[l("div",Q,[r[2]||(r[2]=l("label",{for:"order_date",class:"text-sm font-medium text-gray-700"},"Date:",-1)),m(N,{id:"order_date",type:"date",modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),class:"w-48"},null,8,["modelValue"])]),l("div",z,[r[3]||(r[3]=l("label",{for:"supplier_filter",class:"text-sm font-medium text-gray-700"},"Supplier:",-1)),m(B,{id:"supplier_filter",filter:"",placeholder:"Select a Supplier",modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=e=>p.value=e),options:w(k),optionLabel:"label",optionValue:"value",class:"w-64"},null,8,["modelValue","options"])]),m(I,{onClick:C,variant:"outline",class:"ml-auto"},{default:x(()=>r[4]||(r[4]=[A(" Reset Filters ")])),_:1})]),_:1}),l("div",G,[l("div",J,[l("table",K,[l("thead",M,[l("tr",P,[(t(!0),s(i,null,n(_.value,e=>(t(),s("th",{key:e.field,rowspan:"2",class:"px-4 py-3 text-left whitespace-nowrap font-semibold"},f(e.label),1))),128)),l("th",{colspan:h.value,class:"px-4 py-3 text-center bg-gray-100"},[l("div",X,[r[5]||(r[5]=l("span",{class:"font-semibold"},"BRANCH QUANTITIES",-1)),m(w(E),{class:"w-4 h-4 text-gray-500"})])],8,W),(t(!0),s(i,null,n(b.value,e=>(t(),s("th",{key:e.field,rowspan:"2",class:"px-4 py-3 text-right whitespace-nowrap font-semibold"},f(e.label),1))),128))]),l("tr",null,[(t(!0),s(i,null,n(v.value,e=>(t(),s("th",{key:e.field,class:"px-4 py-3 text-right whitespace-nowrap font-semibold"},f(e.label.replace(" Qty","")),1))),128))])]),l("tbody",null,[y.report.length===0?(t(),s("tr",Y,[l("td",{colspan:H.value,class:"text-center p-4"},"No data available for the selected filters.",8,Z)])):L("",!0),(t(!0),s(i,null,n(y.report,(e,D)=>(t(),s("tr",{key:D,class:"border-t"},[(t(!0),s(i,null,n(_.value,a=>(t(),s("td",{key:a.field,class:"px-4 py-3 text-left whitespace-nowrap"},f(e[a.field]),1))),128)),(t(!0),s(i,null,n(v.value,a=>(t(),s("td",{key:a.field,class:"px-4 py-3 text-right whitespace-nowrap"},f(e[a.field]),1))),128)),(t(!0),s(i,null,n(b.value,a=>(t(),s("td",{key:a.field,class:"px-4 py-3 text-right whitespace-nowrap"},f(e[a.field]),1))),128))]))),128))])])])])]),_:1})]),_:1},8,["exportRoute"])}}};export{se as default};
