import{D as I,Y as U,l as $,bo as B,o as n,c as _,w as m,a as d,u as o,aM as V,b as p,aL as j,g as s,d as i,e as v,n as q,au as L,h as l,t as c,aZ as P,F as x,aN as A,aQ as F}from"./app-Bp7xdNcv.js";import{C as g}from"./clock-CRAPMzg8.js";import{C as y,a as S}from"./circle-x-ya5U_PzQ.js";import{P as z}from"./package-8PI2OvT-.js";import{C as E}from"./check-BwKSpPgY.js";import{C as H}from"./calendar-iIJQHMiE.js";/**
 * @license lucide-vue-next v0.456.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=I("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Q={class:"relative"},R={class:"space-y-6"},O={key:0,class:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center"},X={class:"flex-1 min-w-0"},Y={class:"flex items-center gap-2 mb-1"},Z={class:"font-medium"},G={class:"text-sm text-muted-foreground mb-2"},J={class:"flex items-center gap-4 mb-2"},K={class:"text-xs text-muted-foreground flex items-center gap-1"},W={key:0,class:"text-xs text-muted-foreground flex items-center gap-1"},ee={key:0,class:"mt-3 p-3 bg-muted/50 rounded-lg"},te={class:"text-muted-foreground"},re={class:"font-medium"},ae={key:1,class:"mt-3"},se={key:0,class:"text-center py-8"},ne={__name:"TransferTimeline",props:{transfer:{type:Object,required:!0},compact:{type:Boolean,default:!1}},setup(h){const e=h,u=t=>t?t.name&&t.name!==t.email?t.name:t.first_name||t.last_name?`${t.first_name||""} ${t.last_name||""}`.trim():t.email?t.email.split("@")[0].replace(/[._]/g," ").replace(/\b\w/g,r=>r.toUpperCase()):"Unknown User":"Unknown User";console.log("TransferTimeline Debug - Transfer Data:",{transfer:e.transfer,approval_action_date:e.transfer.approval_action_date,approver:e.transfer.approver,commited_action_date:e.transfer.commited_action_date,commiter:e.transfer.commiter,interco_status:e.transfer.interco_status});const b=$(()=>{const t=[];return t.push({status:"created",title:"Transfer Created",description:"Transfer request was created and submitted",date:e.transfer.created_at,user:u(e.transfer.encoder),completed:!0,icon:g,color:"gray"}),e.transfer.approval_action_date&&t.push({status:"approved",title:"Transfer Approved",description:"Transfer was approved by management",date:e.transfer.approval_action_date,user:u(e.transfer.approver),completed:["approved","committed","in_transit","received"].includes(e.transfer.interco_status),icon:y,color:"blue"}),e.transfer.commited_action_date&&t.push({status:"committed",title:"Transfer Committed",description:"Items were committed for transfer",date:e.transfer.commited_action_date,user:u(e.transfer.commiter),completed:["committed","in_transit","received"].includes(e.transfer.interco_status),icon:z,color:"yellow",details:e.transfer.store_order_items?[{label:"Total Items",value:e.transfer.store_order_items.length},{label:"Total Quantity",value:`${w()}`}]:[]}),(e.transfer.interco_status==="in_transit"||e.transfer.interco_status==="received")&&t.push({status:"in_transit",title:"In Transit",description:"Items are being transported between stores",date:T(),user:"System",completed:e.transfer.interco_status==="received",icon:B,color:"purple"}),e.transfer.interco_status==="received"&&t.push({status:"received",title:"Transfer Completed",description:"All items have been received successfully",date:k(),user:"Receiving Store",completed:!0,icon:y,color:"green",badge:{text:"Completed",variant:"default"}}),e.transfer.interco_status==="disapproved"&&t.push({status:"disapproved",title:"Transfer Disapproved",description:"Transfer was disapproved",date:e.transfer.updated_at,user:u(e.transfer.approver),completed:!0,icon:S,color:"red",badge:{text:"Disapproved",variant:"destructive"}}),t}),w=()=>e.transfer.store_order_items?e.transfer.store_order_items.reduce((t,a)=>t+(a.quantity_ordered||0)*(a.cost_per_quantity||0),0).toFixed(2):0,T=()=>{if(e.transfer.commited_action_date){const t=new Date(e.transfer.commited_action_date);return new Date(t.getTime()+24*60*60*1e3)}return new Date},k=()=>e.transfer.updated_at||new Date,C=t=>t?new Date(t).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",D=t=>{const a={created:"bg-gray-100 text-gray-600 border-gray-300",approved:"bg-blue-100 text-blue-600 border-blue-300",committed:"bg-yellow-100 text-yellow-600 border-yellow-300",in_transit:"bg-purple-100 text-purple-600 border-purple-300",received:"bg-green-100 text-green-600 border-green-300",disapproved:"bg-red-100 text-red-600 border-red-300"};return a[t]||a.created};return(t,a)=>(n(),_(o(F),null,{default:m(()=>[d(o(j),null,{default:m(()=>[d(o(V),{class:"flex items-center gap-2"},{default:m(()=>[d(o(g),{class:"w-5 h-5"}),a[0]||(a[0]=p(" Transfer Timeline "))]),_:1})]),_:1}),d(o(A),null,{default:m(()=>[s("div",Q,[a[3]||(a[3]=s("div",{class:"absolute left-6 top-0 bottom-0 w-0.5 bg-border"},null,-1)),s("div",R,[(n(!0),i(x,null,v(b.value,(r,N)=>(n(),i("div",{key:N,class:"flex items-start gap-4"},[s("div",{class:q(["relative z-10 w-12 h-12 rounded-full flex items-center justify-center border-2 border-background transition-all duration-300",D(r.status)])},[(n(),_(L(r.icon),{class:"w-5 h-5"})),r.completed?(n(),i("div",O,[d(o(E),{class:"w-3 h-3 text-white"})])):l("",!0)],2),s("div",X,[s("div",Y,[s("h4",Z,c(r.title),1),r.badge?(n(),_(o(P),{key:0,variant:r.badge.variant},{default:m(()=>[p(c(r.badge.text),1)]),_:2},1032,["variant"])):l("",!0)]),s("p",G,c(r.description),1),s("div",J,[s("span",K,[d(o(H),{class:"w-3 h-3"}),p(" "+c(C(r.date)),1)]),r.user?(n(),i("span",W,[d(o(M),{class:"w-3 h-3"}),p(" "+c(r.user),1)])):l("",!0)]),r.details&&r.details.length>0?(n(),i("div",ee,[(n(!0),i(x,null,v(r.details,f=>(n(),i("div",{key:f.label,class:"flex justify-between text-sm mb-1 last:mb-0"},[s("span",te,c(f.label)+":",1),s("span",re,c(f.value),1)]))),128))])):l("",!0),r.completed?l("",!0):(n(),i("div",ae,a[1]||(a[1]=[s("div",{class:"flex items-center gap-2 text-xs text-muted-foreground"},[s("div",{class:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),s("span",null,"In Progress")],-1)])))])]))),128))]),b.value.length===0?(n(),i("div",se,[d(o(g),{class:"w-8 h-8 mx-auto mb-2 text-muted-foreground opacity-50"}),a[2]||(a[2]=s("p",{class:"text-sm text-muted-foreground"},"No timeline events available",-1))])):l("",!0)])]),_:1})]),_:1}))}},ue=U(ne,[["__scopeId","data-v-c70b6c42"]]);export{ue as default};
