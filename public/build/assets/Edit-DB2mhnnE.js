import{G as J,f as K,x as P,T as W,l as Y,r as m,o as n,c as C,w as o,a as r,g as t,b as d,u as l,t as p,h as v,s as M,n as f,d as i,e as F,F as I}from"./app-Drfr7wPO.js";import{u as A}from"./useSelectOptions-BWAyP7Dg.js";const Z={class:"flex flex-col gap-5 p-5"},ee={class:"bg-white border rounded-md shadow-sm w-full"},te={class:"overflow-x-auto"},se={class:"min-w-full table-fixed",style:{"table-layout":"fixed"}},oe={class:"bg-white"},le={class:"text-sm text-gray-600"},ne={class:"flex items-center justify-between"},re={key:0,class:"ml-2 flex-shrink-0"},ae={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ue={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ie={class:"flex items-center justify-between"},de={key:0,class:"ml-2 flex-shrink-0"},pe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ce={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},me={class:"flex items-center justify-between"},ye={key:0,class:"ml-2 flex-shrink-0"},ve={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},fe={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},we={class:"flex items-center justify-between"},ge={key:0,class:"ml-2 flex-shrink-0"},ke={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},_e={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},xe={class:"flex items-center justify-between"},be={key:0,class:"ml-2 flex-shrink-0"},Ce={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},he={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Se={class:"text-sm text-gray-700"},Be=["title"],Pe={class:"md:hidden p-4 space-y-3"},Ve={class:"font-semibold truncate"},Oe={class:"text-sm font-normal"},je={class:"text-sm text-gray-600"},De={class:"text-sm text-gray-600"},Ne={class:"text-sm text-gray-600"},Me={class:"px-4 py-3 text-sm text-gray-700"},Fe={class:"font-bold"},Le={__name:"Edit",props:{item:{type:Object,required:!0},categories:{type:Array,default:()=>[]},products:{type:Array,default:()=>[]},existingIngredients:{type:Array,default:()=>[]}},setup(L){const D=J(),U=K(),V=L,q=P(!1),_=V.item,a=W({POSCode:_.POSCode??null,POSDescription:_.POSDescription??null,Category:_.Category??null,SubCategory:_.SubCategory??null,SRP:_.SRP??0,is_active:_.is_active!==null?Number(_.is_active):null}),O=P([]);V.existingIngredients.forEach(c=>{O.value.push({id:c.id,sap_masterfile_id:c.sap_masterfile_id??null,inventory_code:c.inventory_code,name:c.name,quantity:Number(c.quantity),uom:c.uom,assembly:c.assembly??null,unit_cost:c.unit_cost??null,total_cost:c.total_cost??null})}),A(V.products);const{options:E}=A(V.categories),R=P([{label:"Active",value:1},{label:"Inactive",value:0}]),u=P(null),y=P("asc"),N=Y(()=>u.value?[...O.value].sort((e,j)=>{let x=e[u.value],b=j[u.value];x==null&&(x=typeof b=="number"?0:""),b==null&&(b=typeof x=="number"?0:"");const S=parseFloat(x),w=parseFloat(b);if(!Number.isNaN(S)&&!Number.isNaN(w))return y.value==="asc"?S-w:w-S;const g=String(x).toLowerCase(),k=String(b).toLowerCase();return g<k?y.value==="asc"?-1:1:g>k?y.value==="asc"?1:-1:0}):O.value),h=c=>{u.value===c?y.value=y.value==="asc"?"desc":"asc":(u.value=c,y.value="asc")},G=()=>{U.require({message:"Are you sure you want to update this product's FG Details?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{a.put(route("POSMasterfile.update",_.id),{preserveScroll:!0,onSuccess:()=>{D.add({severity:"success",summary:"Success",detail:"FG Details Successfully Updated",life:3e3})},onError:c=>{console.error(c),D.add({severity:"error",summary:"Error",detail:"An error occurred while updating the FG details.",life:3e3})}})}})};return(c,e)=>{const j=m("BackButton"),x=m("CardTitle"),b=m("CardDescription"),S=m("CardHeader"),w=m("Label"),B=m("Input"),g=m("FormError"),k=m("InputContainer"),T=m("LabelXS"),$=m("CardContent"),H=m("Button"),Q=m("CardFooter"),X=m("Card"),z=m("Layout");return n(),C(z,{heading:"Edit BOM Details"},{"header-actions":o(()=>[r(j)]),default:o(()=>[t("div",Z,[r(X,{class:"w-full"},{default:o(()=>[r(S,null,{default:o(()=>[r(x,null,{default:o(()=>e[11]||(e[11]=[d("FG Details")])),_:1}),r(b,null,{default:o(()=>e[12]||(e[12]=[d("Input all the important fields")])),_:1})]),_:1}),r($,{class:"grid sm:grid-cols-2 gap-5"},{default:o(()=>[r(k,null,{default:o(()=>[r(w,null,{default:o(()=>e[13]||(e[13]=[d("POS Code")])),_:1}),r(B,{modelValue:l(a).POSCode,"onUpdate:modelValue":e[0]||(e[0]=s=>l(a).POSCode=s)},null,8,["modelValue"]),l(a).errors.POSCode?(n(),C(g,{key:0},{default:o(()=>[d(p(l(a).errors.POSCode),1)]),_:1})):v("",!0)]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>e[14]||(e[14]=[d("POS Desc")])),_:1}),r(B,{modelValue:l(a).POSDescription,"onUpdate:modelValue":e[1]||(e[1]=s=>l(a).POSDescription=s)},null,8,["modelValue"]),l(a).errors.POSDescription?(n(),C(g,{key:0},{default:o(()=>[d(p(l(a).errors.POSDescription),1)]),_:1})):v("",!0)]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>e[15]||(e[15]=[d("Category")])),_:1}),r(l(M),{modelValue:l(a).Category,"onUpdate:modelValue":e[2]||(e[2]=s=>l(a).Category=s),options:l(E),optionLabel:"label",optionValue:"value",placeholder:"Select a Category"},null,8,["modelValue","options"]),l(a).errors.Category?(n(),C(g,{key:0},{default:o(()=>[d(p(l(a).errors.Category),1)]),_:1})):v("",!0)]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>e[16]||(e[16]=[d("Sub Category")])),_:1}),r(B,{modelValue:l(a).SubCategory,"onUpdate:modelValue":e[3]||(e[3]=s=>l(a).SubCategory=s)},null,8,["modelValue"]),l(a).errors.SubCategory?(n(),C(g,{key:0},{default:o(()=>[d(p(l(a).errors.SubCategory),1)]),_:1})):v("",!0)]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>e[17]||(e[17]=[d("SRP")])),_:1}),r(B,{modelValue:l(a).SRP,"onUpdate:modelValue":e[4]||(e[4]=s=>l(a).SRP=s),type:"number"},null,8,["modelValue"]),l(a).errors.SRP?(n(),C(g,{key:0},{default:o(()=>[d(p(l(a).errors.SRP),1)]),_:1})):v("",!0)]),_:1}),r(k,null,{default:o(()=>[r(T,null,{default:o(()=>e[18]||(e[18]=[d("Active Status")])),_:1}),r(l(M),{modelValue:l(a).is_active,"onUpdate:modelValue":e[5]||(e[5]=s=>l(a).is_active=s),options:R.value,optionLabel:"label",optionValue:"value",placeholder:"Select a Status"},null,8,["modelValue","options"]),l(a).errors.is_active?(n(),C(g,{key:0},{default:o(()=>[d(p(l(a).errors.is_active),1)]),_:1})):v("",!0)]),_:1})]),_:1}),r(Q,{class:"justify-end"},{default:o(()=>[r(H,{onClick:G,loading:q.value},{default:o(()=>e[19]||(e[19]=[d("Update FG Details")])),_:1},8,["loading"])]),_:1})]),_:1}),t("div",ee,[e[37]||(e[37]=t("div",{class:"px-4 py-3 border-b"},[t("span",{class:"font-semibold text-gray-700"},"Ingredients")],-1)),t("div",te,[t("table",se,[e[35]||(e[35]=t("colgroup",null,[t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"33.3333%"}}),t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"16.6666%"}}),t("col",{style:{width:"16.6666%"}})],-1)),t("thead",oe,[t("tr",le,[t("th",{class:f(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":u.value==="inventory_code"}]),onClick:e[6]||(e[6]=s=>h("inventory_code"))},[t("div",ne,[e[22]||(e[22]=t("span",{class:"truncate"},"Item Code",-1)),u.value==="inventory_code"?(n(),i("span",re,[y.value==="asc"?(n(),i("svg",ae,e[20]||(e[20]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(n(),i("svg",ue,e[21]||(e[21]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):v("",!0)])],2),t("th",{class:f(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":u.value==="name"}]),onClick:e[7]||(e[7]=s=>h("name"))},[t("div",ie,[e[25]||(e[25]=t("span",{class:"truncate"},"Name",-1)),u.value==="name"?(n(),i("span",de,[y.value==="asc"?(n(),i("svg",pe,e[23]||(e[23]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(n(),i("svg",ce,e[24]||(e[24]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):v("",!0)])],2),t("th",{class:f(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":u.value==="assembly"}]),onClick:e[8]||(e[8]=s=>h("assembly"))},[t("div",me,[e[28]||(e[28]=t("span",{class:"truncate"},"Assembly",-1)),u.value==="assembly"?(n(),i("span",ye,[y.value==="asc"?(n(),i("svg",ve,e[26]||(e[26]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(n(),i("svg",fe,e[27]||(e[27]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):v("",!0)])],2),t("th",{class:f(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":u.value==="quantity"}]),onClick:e[9]||(e[9]=s=>h("quantity"))},[t("div",we,[e[31]||(e[31]=t("span",{class:"truncate"},"Quantity",-1)),u.value==="quantity"?(n(),i("span",ge,[y.value==="asc"?(n(),i("svg",ke,e[29]||(e[29]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(n(),i("svg",_e,e[30]||(e[30]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):v("",!0)])],2),t("th",{class:f(["px-4 py-3 text-left cursor-pointer select-none",{"bg-gray-50":u.value==="uom"}]),onClick:e[10]||(e[10]=s=>h("uom"))},[t("div",xe,[e[34]||(e[34]=t("span",{class:"truncate"},"UOM",-1)),u.value==="uom"?(n(),i("span",be,[y.value==="asc"?(n(),i("svg",Ce,e[32]||(e[32]=[t("path",{d:"M6 15l6-6 6 6"},null,-1)]))):(n(),i("svg",he,e[33]||(e[33]=[t("path",{d:"M6 9l6 6 6-6"},null,-1)])))])):v("",!0)])],2)])]),t("tbody",Se,[(n(!0),i(I,null,F(N.value,s=>(n(),i("tr",{key:s.id,class:"border-t"},[t("td",{class:f(["px-4 py-3 align-top whitespace-nowrap overflow-hidden text-ellipsis",{"bg-gray-50":u.value==="inventory_code"}])},p(s.inventory_code),3),t("td",{class:f(["px-4 py-3 align-top",{"bg-gray-50":u.value==="name"}])},[t("div",{class:"truncate",title:s.name},p(s.name),9,Be)],2),t("td",{class:f(["px-4 py-3 align-top whitespace-nowrap overflow-hidden text-ellipsis",{"bg-gray-50":u.value==="assembly"}])},p(s.assembly??"-"),3),t("td",{class:f(["px-4 py-3 align-top whitespace-nowrap",{"bg-gray-50":u.value==="quantity"}])},p(s.quantity),3),t("td",{class:f(["px-4 py-3 align-top whitespace-nowrap",{"bg-gray-50":u.value==="uom"}])},p(s.uom),3)]))),128))])])]),t("div",Pe,[(n(!0),i(I,null,F(N.value,s=>(n(),i("div",{key:"m-"+s.id,class:"border rounded p-3"},[t("div",Ve,[d(p(s.name)+" ",1),t("span",Oe,"("+p(s.inventory_code)+")",1)]),t("div",je,"Assembly: "+p(s.assembly??"-"),1),t("div",De,"UOM: "+p(s.uom),1),t("div",Ne,"Quantity: "+p(s.quantity),1)]))),128))]),t("div",Me,[t("p",null,[e[36]||(e[36]=d("Total Items: ")),t("span",Fe,p(O.value.length),1)])])])])]),_:1})}}};export{Le as default};
