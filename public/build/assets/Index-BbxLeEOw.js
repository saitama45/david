import{N as V,r as n,o as u,c as i,w as t,a as e,u as a,i as h,b as s,d as k,e as I,t as p,h as c,F as H,j as ee}from"./app-rjK1ng7o.js";import{l as te}from"./lodash-DqVvdaAw.js";import{u as le}from"./useAuth-DN4uYPJg.js";import{u as ne}from"./useSelectOptions-C8yZk_6t.js";import{u as oe}from"./useReferenceDelete-DQBdt7a9.js";const se={key:0},pe={__name:"Index",props:{users:{type:Object,required:!0},usersList:{type:Object,required:!0},filters:{type:Object,required:!0}},setup(_){const{hasAccess:m}=le(),x=_;let F=ref(x.filters.search);const f=ref(F.value),U=()=>{B.value=!0,V.get("/users/create",{templateId:v.value})},{options:j}=ne(x.usersList),b=ref(!1),E=()=>{b.value=!0};watch(f,te.throttle(function(C){V.get(route("users.index"),{search:C},{preserveState:!0,replace:!0})},500));const{deleteModel:L}=oe(),v=ref(null),R=computed(()=>route("users.export",{search:f.value})),B=ref(!1);return(C,l)=>{const $=n("Input"),M=n("SearchBar"),O=n("TableHeader"),r=n("TH"),A=n("TableHead"),d=n("TD"),S=n("ShowButton"),w=n("EditButton"),D=n("DeleteButton"),N=n("DivFlexCenter"),q=n("TableBody"),P=n("Table"),X=n("MobileTableHeading"),y=n("LabelXS"),T=n("DivFlexCol"),Y=n("Pagination"),z=n("TableContainer"),G=n("SpanBold"),J=n("Select"),K=n("InputContainer"),Q=n("Loading"),W=n("Button"),Z=n("Layout");return u(),i(Z,{heading:"Users",hasButton:a(m)("create users"),buttonName:"Create New User",handleClick:E,hasExcelDownload:!0,exportRoute:a(R)},{default:t(()=>[e(z,null,{default:t(()=>[e(O,null,{default:t(()=>[e(M,null,{default:t(()=>[e($,{modelValue:a(f),"onUpdate:modelValue":l[0]||(l[0]=o=>h(f)?f.value=o:null),class:"pl-10",placeholder:"Search..."},null,8,["modelValue"])]),_:1})]),_:1}),e(P,{class:"sm:table hidden"},{default:t(()=>[e(A,null,{default:t(()=>[e(r,null,{default:t(()=>l[3]||(l[3]=[s(" Id ")])),_:1}),e(r,null,{default:t(()=>l[4]||(l[4]=[s(" Full Name")])),_:1}),e(r,null,{default:t(()=>l[5]||(l[5]=[s(" Email")])),_:1}),e(r,null,{default:t(()=>l[6]||(l[6]=[s(" Roles")])),_:1}),e(r,null,{default:t(()=>l[7]||(l[7]=[s(" Is Active")])),_:1}),e(r,null,{default:t(()=>l[8]||(l[8]=[s(" Actions ")])),_:1})]),_:1}),e(q,null,{default:t(()=>[(u(!0),k(H,null,I(_.users.data,o=>(u(),k("tr",null,[e(d,null,{default:t(()=>[s(p(o.id),1)]),_:2},1024),e(d,null,{default:t(()=>[s(p(o.first_name+" "+o.last_name),1)]),_:2},1024),e(d,null,{default:t(()=>[s(p(o.email),1)]),_:2},1024),e(d,null,{default:t(()=>[s(p(o.roles.map(g=>g.name).join(",")),1)]),_:2},1024),e(d,null,{default:t(()=>[s(p(o.is_active==1?"Yes":"No"),1)]),_:2},1024),e(d,null,{default:t(()=>[e(N,{class:"sm:gap-3"},{default:t(()=>[a(m)("view user")?(u(),i(S,{key:0,isLink:!0,href:`/users/show/${o.id}`},null,8,["href"])):c("",!0),a(m)("edit users")?(u(),i(w,{key:1,isLink:!0,href:`/users/edit/${o.id}`},null,8,["href"])):c("",!0),e(D,{onClick:g=>a(L)(C.route("users.destroy",o.id),"user")},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),256))]),_:1})]),_:1}),e(T,{class:"sm:hidden gap-3"},{default:t(()=>[(u(!0),k(H,null,I(_.users.data,o=>(u(),i(T,{class:"rounded-lg border min-h-20 p-3"},{default:t(()=>[e(X,{title:o.first_name+" "+o.last_name},{default:t(()=>[a(m)("view user")?(u(),i(S,{key:0,isLink:!0,href:`/users/show/${o.id}`},null,8,["href"])):c("",!0),a(m)("edit users")?(u(),i(w,{key:1,isLink:!0,href:`/users/edit/${o.id}`},null,8,["href"])):c("",!0),e(D,{onClick:g=>a(L)(C.route("users.destroy",o.id),"user")},null,8,["onClick"])]),_:2},1032,["title"]),e(y,null,{default:t(()=>[s(p(o.email),1)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(Y,{data:_.users},null,8,["data"])]),_:1}),e(a(ee),{visible:a(b),"onUpdate:visible":l[2]||(l[2]=o=>h(b)?b.value=o:null),modal:"",style:{width:"30rem"}},{header:t(()=>[e(T,null,{default:t(()=>[e(G,null,{default:t(()=>l[9]||(l[9]=[s("Create New User")])),_:1}),e(y,null,{default:t(()=>l[10]||(l[10]=[s("Copy the roles and assigned branches from existing users")])),_:1})]),_:1})]),default:t(()=>[e(T,null,{default:t(()=>[e(K,null,{default:t(()=>[e(y,null,{default:t(()=>l[11]||(l[11]=[s("Users")])),_:1}),e(J,{filter:"",placeholder:"No Template",modelValue:a(v),"onUpdate:modelValue":l[1]||(l[1]=o=>h(v)?v.value=o:null),optionLabel:"label",optionValue:"value",options:a(j)},null,8,["modelValue","options"])]),_:1}),e(N,{class:"justify-end mt-5"},{default:t(()=>[e(W,{disabled:a(B),onClick:U},{default:t(()=>[l[12]||(l[12]=s(" Continue ")),a(B)?(u(),k("span",se,[e(Q)])):c("",!0)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1},8,["hasButton","exportRoute"])}}};export{pe as default};
