import{T as re,f as ue,r as l,o as d,c as T,w as o,a as e,u as a,i as k,b as s,d as v,e as N,t as c,F as R,g as m,h as ie,N as de}from"./app-Drfr7wPO.js";import{u as ce}from"./useSearch-DbS36i7w.js";import{u as me}from"./useReferenceStore-BuVzO9V4.js";import{u as pe}from"./useToast-Blb7EynO.js";import"./lodash-IPPPM5x9.js";const fe={class:"space-y-5"},_e={class:"flex flex-col space-y-1"},ge={class:"flex flex-col space-y-1"},Ce={class:"flex justify-end"},xe={__name:"Index",props:{categories:{type:Object,required:!0}},setup(p){const i=ref(!1),x=ref(!1),r=re({name:null,remarks:null}),D=ref(null),E=()=>{r.post(route("categories.update",D.value),{preserveScroll:!0,onSuccess:()=>{y.add({severity:"success",summary:"Success",detail:"Category Details Updated Successfully.",life:5e3}),r.reset(),i.value=!1}})},w=p,{search:f}=ce("categories.index"),V=u=>{console.log(u),D.value=u,i.value=!0;const t=w.categories.data.find(_=>_.id===u);r.name=t.name,r.remarks=t.remarks},{isCreateModalVisible:b,openCreateModal:H,store:I}=me(),{toast:y}=pe(),P=ue(),U=u=>{P.require({message:"Are you sure you want to delete this product category?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"danger"},accept:()=>{de.delete(route("categories.destroy",u),{preserveScroll:!0,onSuccess:()=>{y.add({severity:"success",summary:"Success",detail:"Category Deleted Successfully.",life:5e3})},onError:t=>{console.log(t),y.add({severity:"error",summary:"Error",detail:t.message||"An error occurred while deleting the category.",life:5e3})}})}})};watch(i,u=>{u||(r.reset(),r.clearErrors())});const F=computed(()=>route("categories.export",{search:f.value}));return(u,t)=>{const _=l("Input"),j=l("SearchBar"),A=l("TableHeader"),g=l("TH"),$=l("TableHead"),C=l("TD"),S=l("EditButton"),q=l("DeleteButton"),X=l("TableBody"),O=l("Table"),z=l("MobileTableHeading"),G=l("LabelXS"),J=l("MobileTableRow"),K=l("MobileTableContainer"),Q=l("Pagination"),W=l("TableContainer"),Y=l("DialogTitle"),Z=l("DialogDescription"),h=l("DialogHeader"),B=l("Label"),M=l("FormError"),ee=l("Textarea"),te=l("Loading"),oe=l("Button"),le=l("DialogContent"),ne=l("Dialog"),ae=l("CreateReferenceModal"),se=l("Layout");return d(),T(se,{heading:"Product Categories",hasButton:!0,handleClick:a(H),buttonName:"Create New Category",hasExcelDownload:!0,exportRoute:a(F)},{default:o(()=>[e(W,null,{default:o(()=>[e(A,null,{default:o(()=>[e(j,null,{default:o(()=>[e(_,{class:"pl-10",modelValue:a(f),"onUpdate:modelValue":t[0]||(t[0]=n=>k(f)?f.value=n:null),placeholder:"Search..."},null,8,["modelValue"])]),_:1})]),_:1}),e(O,null,{default:o(()=>[e($,null,{default:o(()=>[e(g,null,{default:o(()=>t[5]||(t[5]=[s(" Id ")])),_:1}),e(g,null,{default:o(()=>t[6]||(t[6]=[s(" Name")])),_:1}),e(g,null,{default:o(()=>t[7]||(t[7]=[s(" Remarks")])),_:1}),e(g,null,{default:o(()=>t[8]||(t[8]=[s(" Actions ")])),_:1})]),_:1}),e(X,null,{default:o(()=>[(d(!0),v(R,null,N(p.categories.data,n=>(d(),v("tr",null,[e(C,null,{default:o(()=>[s(c(n.id),1)]),_:2},1024),e(C,null,{default:o(()=>[s(c(n.name),1)]),_:2},1024),e(C,null,{default:o(()=>[s(c(n.remarks??"N/a"),1)]),_:2},1024),e(C,null,{default:o(()=>[e(S,{onClick:L=>V(n.id)},null,8,["onClick"]),e(q,{onClick:L=>U(n.id)},null,8,["onClick"])]),_:2},1024)]))),256))]),_:1})]),_:1}),e(K,null,{default:o(()=>[(d(!0),v(R,null,N(p.categories.data,n=>(d(),T(J,null,{default:o(()=>[e(z,{title:n.name},{default:o(()=>[e(S,{onClick:L=>V(n.id)},null,8,["onClick"])]),_:2},1032,["title"]),e(G,null,{default:o(()=>[s("Remarks: "+c(n.remarks??"N/a"),1)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(Q,{data:p.categories},null,8,["data"])]),_:1}),e(ne,{open:a(i),"onUpdate:open":t[3]||(t[3]=n=>k(i)?i.value=n:null)},{default:o(()=>[e(le,{class:"sm:max-w-[425px]"},{default:o(()=>[e(h,null,{default:o(()=>[e(Y,null,{default:o(()=>t[9]||(t[9]=[s("Edit Category Details")])),_:1}),e(Z,null,{default:o(()=>t[10]||(t[10]=[s(" Input all important fields. ")])),_:1})]),_:1}),m("div",fe,[m("div",_e,[e(B,{class:"text-xs"},{default:o(()=>t[11]||(t[11]=[s("Name")])),_:1}),e(_,{modelValue:a(r).name,"onUpdate:modelValue":t[1]||(t[1]=n=>a(r).name=n)},null,8,["modelValue"]),e(M,null,{default:o(()=>[s(c(a(r).errors.name),1)]),_:1})]),m("div",ge,[e(B,{class:"text-xs"},{default:o(()=>t[12]||(t[12]=[s("Remarks")])),_:1}),e(ee,{modelValue:a(r).remarks,"onUpdate:modelValue":t[2]||(t[2]=n=>a(r).remarks=n)},null,8,["modelValue"]),e(M,null,{default:o(()=>[s(c(a(r).errors.remarks),1)]),_:1})]),m("div",Ce,[e(oe,{onClick:E,class:"gap-2"},{default:o(()=>[t[13]||(t[13]=s(" Save Changes ")),m("span",null,[a(x)?(d(),T(te,{key:0})):ie("",!0)])]),_:1})])])]),_:1})]),_:1},8,["open"]),e(ae,{isCreateModalVisible:a(b),"onUpdate:isCreateModalVisible":t[4]||(t[4]=n=>k(b)?b.value=n:null),title:"Create Product Category",form:a(r),isLoading:a(x),handleCreate:()=>a(I)(u.route("categories.store"),a(r),"Category")},null,8,["isCreateModalVisible","form","isLoading","handleCreate"])]),_:1},8,["handleClick","exportRoute"])}}};export{xe as default};
