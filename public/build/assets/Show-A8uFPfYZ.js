import{G as Le,f as Pe,x as S,T as O,V as Qe,aB as Xe,y as Ge,l as Ke,r as v,o as d,c as D,w as t,a as l,b as u,t as r,h as w,d as c,e as I,u as n,F as q,g as s,E as Je,n as We,m as Ze,b4 as he,N as el}from"./app-rjK1ng7o.js";import{d as T}from"./dayjs.min-CuH6jTGg.js";import{u as ll,t as tl}from"./timezone-Pli5Y0gf.js";import{u as al}from"./useBackButton-B9bUould.js";import{X as ul}from"./x-DY7ygrlY.js";const rl=["onClick"],sl=["href"],nl=["src"],ol={class:"relative z-10 w-full sm:max-w-[600px] mx-4 bg-white rounded-lg shadow-xl border border-gray-200 p-6 transform transition-all"},dl={class:"flex items-center justify-between mb-4"},il={class:"space-y-3"},ml={class:"flex justify-end items-center gap-3 mt-6"},fl={class:"space-y-3"},vl={class:"relative z-10 w-full sm:max-w-[600px] mx-4 bg-white rounded-lg shadow-xl border border-gray-200 p-6 transform transition-all"},pl={class:"flex items-center justify-between mb-4"},_l={class:"space-y-3"},yl={key:0,class:"mt-2 text-sm"},gl={class:"text-gray-500 text-xs ml-1"},cl=["value"],bl={class:"flex justify-end items-center gap-3 mt-6"},xl={class:"space-y-3"},kl={class:"relative z-10 w-full sm:max-w-[600px] mx-4 bg-white rounded-lg shadow-xl border border-gray-200 p-6 transform transition-all"},Cl={class:"flex items-center justify-between mb-4"},Dl={class:"space-y-4"},wl={key:0,class:"mt-4 max-h-64 overflow-y-auto"},Ml=["src"],Rl={class:"flex justify-end items-center gap-3 mt-6"},Sl={key:0},Al={key:1},Fl={__name:"Show",props:{order:{type:Object,required:!0},orderedItems:{type:Object,required:!0},receiveDatesHistory:{type:Array,required:!0},images:{type:Object,required:!0}},setup(g){T.extend(ll),T.extend(tl),T.tz.setDefault("Asia/Manila");const k=Le(),ae=Pe();al(route("orders-receiving.index"));const Re=[{label:"Damaged goods",value:"Damaged goods"},{label:"Missing goods",value:"Missing goods"},{label:"Expired goods",value:"Expired goods"}],A=g,Se=S(A.order.order_status),j=S(!1),Ae=()=>{j.value=!0},ne=S(null),oe=S(null),M=O({quantity_received:null,received_date:new Date().toISOString().slice(0,16),expiry_date:null,remarks:null}),Y=O({image:null}),Q=S(null),Ee=o=>{const e=o.target.files[0];e&&(Y.image=e,Q.value=URL.createObjectURL(e))},Ve=()=>{Y.post(route("orders-receiving.attach-image",A.order.id),{onSuccess:()=>{k.add({severity:"success",summary:"Success",detail:"Image attached successfully.",life:3e3}),j.value=!1,Y.reset(),Q.value=null},onError:o=>{const e=Object.values(o)[0];k.add({severity:"error",summary:"Upload Error",detail:e||"Failed to attach image.",life:5e3})}})},b=O({id:null,store_order_id:A.order.id,delivery_receipt_number:null,sap_so_number:null,remarks:null}),Ue=S(!1);oe.value=A.orderedItems.length>0?A.orderedItems[0]:null;const Ie=o=>{const e=A.orderedItems.findIndex(i=>i.id===o);oe.value=A.orderedItems[e],Ue.value=!0},H=S(!1),F=S(!1),de=o=>{ne.value=o,H.value=!0},qe=()=>{R.value=!0,M.post(route("orders-receiving.receive",ne.value),{onSuccess:()=>{k.add({severity:"success",summary:"Success",detail:"Your receive request has been successfully submitted. Please wait for approval.",life:5e3}),H.value=!1,R.value=!1,M.reset()},onError:o=>{console.log(o),k.add({severity:"error",summary:"Error",detail:"Failed to submit receive request.",life:5e3}),R.value=!1}})},Fe=()=>{R.value=!0,b.id?Ne():b.post(route("orders-receiving.add-delivery-receipt-number"),{onSuccess:()=>{k.add({severity:"success",summary:"Success",detail:"Delivery Receipt Added Successfully.",life:5e3}),F.value=!1,R.value=!1,b.reset()},onError:o=>{console.log(o),k.add({severity:"error",summary:"Error",detail:"Failed to add delivery receipt.",life:5e3}),F.value=!1,R.value=!1}})},Be=A.order.order_status!=="received",R=S(!1),N=S(!1),$=S(null),ie=()=>{N.value=!1},me=()=>{N.value=!1,j.value=!1,F.value=!1},fe=o=>{o.key==="Escape"&&(N.value||j.value||F.value)&&me()},ue=o=>{o.target===o.currentTarget&&me()};Qe(()=>{document.addEventListener("keydown",fe)}),Xe(()=>{document.removeEventListener("keydown",fe)}),Ge(N,o=>{o||(C.reset(),C.clearErrors(),R.value=!1,$.value=null)});const C=O({id:null,quantity_received:null,remarks:null}),re=Ke(()=>{if(!$.value||!C.quantity_received)return 0;const o=$.value.store_order_item.quantity_commited||0;return(parseFloat(C.quantity_received)||0)-o}),ve=o=>{const e=A.receiveDatesHistory,i=e.findIndex(f=>f.id===o),m=e[i];$.value=m,C.id=m.id,C.quantity_received=m.quantity_received,C.remarks=m.remarks,N.value=!0},Te=()=>{R.value=!0,C.post(route("orders-receiving.update-receiving-history"),{onSuccess:o=>{k.add({severity:"success",summary:"Success",detail:"Updated Successfully.",life:5e3}),R.value=!1,N.value=!1},onError:o=>{R.value=!1,k.add({severity:"error",summary:"Error",detail:o.message||"Failed to update receive details.",life:5e3})}})},X=S(!1),E=S(),pe=o=>{const e=A.receiveDatesHistory,i=e.findIndex(f=>f.id===o),m=e[i];E.value=m,X.value=!0},_e=O({id:null}),je=()=>{ae.require({message:"Are you sure you want to delete this image?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove",severity:"danger"},accept:()=>{_e.post(route("destroy"),{onSuccess:()=>{k.add({severity:"success",summary:"Success",detail:"Image deleted successfully.",life:5e3}),R.value=!1},onError:o=>{R.value=!1,console.log(o),k.add({severity:"error",summary:"Error",detail:o.message||"Failed to delete image.",life:5e3})}})}})},ye=(o,e,i,m)=>{b.id=o,b.delivery_receipt_number=e,b.sap_so_number=i,b.remarks=m,F.value=!0},Ne=()=>{b.put(route("orders-receiving.update-delivery-receipt-number",b.id),{onSuccess:()=>{k.add({severity:"success",summary:"Success",detail:"Delivery Receipt Updated Successfully.",life:5e3}),showDeliveryReceiptForm.value=!1,R.value=!1,b.reset()},onError:o=>{console.log(o),k.add({severity:"error",summary:"Error",detail:"Failed to update delivery receipt.",life:5e3}),R.value=!1}})},ge=o=>{ae.require({message:"Are you sure you want to delete this delivery receipt?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove",severity:"danger"},accept:()=>{el.delete(route("orders-receiving.delete-delivery-receipt-number",o),{},{onSuccess:()=>{k.add({severity:"success",summary:"Success",detail:"Delivery Receipt Deleted Successfully.",life:5e3})},onError:e=>{k.add({severity:"error",summary:"Error",detail:e.message||"An error occurred.",life:5e3})}})}})},Ye=()=>{O({store_order_id:A.order.id}).put(route("orders-receiving.confirm-receive",A.order.id),{onSuccess:()=>{k.add({severity:"success",summary:"Success",detail:"Action Completed.",life:5e3})},onError:e=>{k.add({severity:"error",summary:"Error",detail:"Error confirming receive: "+(e.message||"An unknown error occurred."),life:5e3})}})},$e=()=>{ae.require({message:"Are you sure you want to confirm all pending received items? This action cannot be undone.",header:"Confirm Receiving",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{Ye()}})};return(o,e)=>{const i=v("LabelXS"),m=v("SpanBold"),f=v("InputContainer"),ce=v("Card"),se=v("TableHeader"),p=v("TH"),G=v("TableHead"),_=v("TD"),K=v("EditButton"),be=v("DeleteButton"),z=v("DivFlexCenter"),J=v("TableBody"),W=v("Table"),Z=v("MobileTableHeading"),h=v("MobileTableRow"),ee=v("MobileTableContainer"),le=v("TableContainer"),te=v("ShowButton"),x=v("Button"),ze=v("CardTitle"),Oe=v("DivFlexCol"),V=v("Label"),B=v("Input"),U=v("FormError"),xe=v("DialogTitle"),ke=v("DialogDescription"),Ce=v("DialogHeader"),De=v("DialogFooter"),we=v("DialogContent"),Me=v("Dialog"),He=v("Layout");return d(),D(He,{heading:"Order Details"},{default:t(()=>[l(Oe,{class:"gap-3"},{default:t(()=>[l(ce,{class:"p-5 grid sm:grid-cols-4 gap-5"},{default:t(()=>[l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[18]||(e[18]=[u("Encoder: ")])),_:1}),l(m,null,{default:t(()=>[u(r(g.order.encoder.first_name)+" "+r(g.order.encoder.last_name),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[19]||(e[19]=[u("Order Number: ")])),_:1}),l(m,null,{default:t(()=>[u(r(g.order.order_number),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[20]||(e[20]=[u("Order Date: ")])),_:1}),l(m,null,{default:t(()=>[u(r(g.order.order_date),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[21]||(e[21]=[u("Order Status: ")])),_:1}),l(m,null,{default:t(()=>[u(r(g.order.order_status.toUpperCase()),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[22]||(e[22]=[u("Approver: ")])),_:1}),l(m,null,{default:t(()=>{var a,y;return[u(r((a=g.order.approver)==null?void 0:a.first_name)+" "+r((y=g.order.approver)==null?void 0:y.last_name),1)]}),_:1}),g.order.approver?w("",!0):(d(),D(m,{key:0},{default:t(()=>e[23]||(e[23]=[u("N/a")])),_:1}))]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[24]||(e[24]=[u("Variant: ")])),_:1}),l(m,null,{default:t(()=>[u(r(g.order.variant.toUpperCase()),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[25]||(e[25]=[u("Approval Action Date: ")])),_:1}),l(m,null,{default:t(()=>[u(r(g.order.approval_action_date),1)]),_:1})]),_:1})]),_:1}),l(le,null,{default:t(()=>[l(se,null,{default:t(()=>[l(m,{class:"text-xs"},{default:t(()=>e[26]||(e[26]=[u("Delivery Receipts")])),_:1})]),_:1}),l(W,null,{default:t(()=>[l(G,null,{default:t(()=>[l(p,null,{default:t(()=>e[27]||(e[27]=[u("Id")])),_:1}),l(p,null,{default:t(()=>e[28]||(e[28]=[u("Number")])),_:1}),l(p,null,{default:t(()=>e[29]||(e[29]=[u("SAP SO Number")])),_:1}),l(p,null,{default:t(()=>e[30]||(e[30]=[u("Remarks")])),_:1}),l(p,null,{default:t(()=>e[31]||(e[31]=[u("Created at")])),_:1}),l(p,null,{default:t(()=>e[32]||(e[32]=[u("Actions")])),_:1})]),_:1}),l(J,null,{default:t(()=>[(d(!0),c(q,null,I(g.order.delivery_receipts,a=>(d(),c("tr",{key:a.id},[l(_,null,{default:t(()=>[u(r(a.id),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.delivery_receipt_number),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.sap_so_number),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.remarks),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(n(T).utc(a.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024),l(_,null,{default:t(()=>[l(z,{class:"gap-3"},{default:t(()=>[l(K,{onClick:y=>ye(a.id,a.delivery_receipt_number,a.sap_so_number,a.remarks)},null,8,["onClick"]),l(be,{onClick:y=>ge(a.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(ee,null,{default:t(()=>[(d(!0),c(q,null,I(g.order.delivery_receipts,a=>(d(),D(h,{key:a.id},{default:t(()=>[l(Z,{title:`${a.delivery_receipt_number}`},{default:t(()=>[l(K,{onClick:y=>ye(a.id,a.delivery_receipt_number,a.sap_so_number,a.remarks)},null,8,["onClick"]),l(be,{onClick:y=>ge(a.id)},null,8,["onClick"])]),_:2},1032,["title"]),l(i,null,{default:t(()=>[u("SAP SO Number: "+r(a.sap_so_number??"N/a"),1)]),_:2},1024),l(i,null,{default:t(()=>[u("Remarks: "+r(a.remarks??"N/a"),1)]),_:2},1024),l(i,null,{default:t(()=>[u("Created at: "+r(n(T).utc(a.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]),_:2},1024))),128)),g.order.delivery_receipts.length<1?(d(),D(m,{key:0},{default:t(()=>e[33]||(e[33]=[u("None")])),_:1})):w("",!0)]),_:1})]),_:1}),l(le,null,{default:t(()=>[l(se,null,{default:t(()=>[l(m,{class:"text-xs"},{default:t(()=>e[34]||(e[34]=[u("Remarks")])),_:1})]),_:1}),l(W,null,{default:t(()=>[l(G,null,{default:t(()=>[l(p,null,{default:t(()=>e[35]||(e[35]=[u(" Id ")])),_:1}),l(p,null,{default:t(()=>e[36]||(e[36]=[u(" Remarks By")])),_:1}),l(p,null,{default:t(()=>e[37]||(e[37]=[u("Action")])),_:1}),l(p,null,{default:t(()=>e[38]||(e[38]=[u("Remarks")])),_:1}),l(p,null,{default:t(()=>e[39]||(e[39]=[u("Created At")])),_:1})]),_:1}),l(J,null,{default:t(()=>[(d(!0),c(q,null,I(g.order.store_order_remarks,a=>(d(),c("tr",{key:a.id},[l(_,null,{default:t(()=>[u(r(a.id),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.user.first_name)+" "+r(a.user.last_name),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.action.toUpperCase()),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.remarks),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(n(T)(a.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(ee,null,{default:t(()=>[(d(!0),c(q,null,I(g.order.store_order_remarks,a=>(d(),D(h,{key:a.id},{default:t(()=>[l(Z,{title:`${a.action.toUpperCase()}`},{default:t(()=>[l(te)]),_:2},1032,["title"]),l(i,null,{default:t(()=>[u("Remarks: "+r(a.remarks),1)]),_:2},1024),l(i,null,{default:t(()=>[u("Created at: "+r(n(T)(a.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]),_:2},1024))),128)),g.order.store_order_remarks.length<1?(d(),D(m,{key:0},{default:t(()=>e[40]||(e[40]=[u("None")])),_:1})):w("",!0)]),_:1})]),_:1}),l(ce,{class:"p-5"},{default:t(()=>[l(f,{class:"col-span-4"},{default:t(()=>[l(i,null,{default:t(()=>e[41]||(e[41]=[u("Image Attachments: ")])),_:1}),l(z,{class:"gap-4 overflow-auto overflow-x-auto scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-gray-300 hover:scrollbar-thumb-gray-400"},{default:t(()=>[(d(!0),c(q,null,I(g.images,a=>(d(),c("div",{key:a.id,class:"relative"},[s("button",{onClick:y=>{n(_e).id=a.id,je()},class:"absolute -right-2 -top-2 text-white size-5 rounded-full bg-red-500"},[l(n(ul),{class:"size-5"})],8,rl),s("a",{href:a.image_url,target:"_blank",rel:"noopener noreferrer"},[s("img",{src:a.image_url,class:"size-24 cursor-pointer hover:opacity-80 transition-opacity"},null,8,nl)],8,sl)]))),128))]),_:1}),g.images.length<1?(d(),D(m,{key:0},{default:t(()=>e[42]||(e[42]=[u("None")])),_:1})):w("",!0)]),_:1})]),_:1}),l(le,{class:"col-span-2 min-w-fit"},{default:t(()=>[l(z,{class:"justify-between"},{default:t(()=>[l(m,{class:"text-xs"},{default:t(()=>e[43]||(e[43]=[u("Ordered Items")])),_:1}),l(z,{class:"gap-3"},{default:t(()=>[l(x,{class:"text-xs px-2 sm:px-4",onClick:Ae},{default:t(()=>e[44]||(e[44]=[u("Attach Image")])),_:1}),l(x,{class:"text-xs px-2 sm:px-4",onClick:e[0]||(e[0]=a=>F.value=!0)},{default:t(()=>e[45]||(e[45]=[u("Add Delivery Number")])),_:1})]),_:1})]),_:1}),l(W,null,{default:t(()=>[l(G,null,{default:t(()=>[l(p,null,{default:t(()=>e[46]||(e[46]=[u(" Item Code ")])),_:1}),l(p,null,{default:t(()=>e[47]||(e[47]=[u(" Name ")])),_:1}),l(p,null,{default:t(()=>e[48]||(e[48]=[u("BaseUOM")])),_:1}),l(p,null,{default:t(()=>e[49]||(e[49]=[u("UOM")])),_:1}),l(p,null,{default:t(()=>e[50]||(e[50]=[u(" Ordered ")])),_:1}),l(p,null,{default:t(()=>e[51]||(e[51]=[u("Approved")])),_:1}),l(p,null,{default:t(()=>e[52]||(e[52]=[u(" Commited")])),_:1}),l(p,null,{default:t(()=>e[53]||(e[53]=[u(" Received")])),_:1}),l(p,null,{default:t(()=>e[54]||(e[54]=[u(" Actions ")])),_:1})]),_:1}),l(J,null,{default:t(()=>[(d(!0),c(q,null,I(g.orderedItems,a=>(d(),c("tr",{key:a.id},[l(_,null,{default:t(()=>[u(r(a.supplier_item.ItemCode),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.supplier_item.item_name),1)]),_:2},1024),l(_,null,{default:t(()=>{var y;return[u(r((y=a.supplier_item.sap_master_file)==null?void 0:y.BaseUOM),1)]}),_:2},1024),l(_,{class:"text-xs"},{default:t(()=>[u(r(a.supplier_item.uom),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.quantity_ordered),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.quantity_approved),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.quantity_commited),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.quantity_received),1)]),_:2},1024),l(_,{class:"w-[90px]"},{default:t(()=>[l(z,{class:"gap-1"},{default:t(()=>[l(te,{onClick:y=>Ie(a.id)},{default:t(()=>[l(n(Je))]),_:2},1032,["onClick"]),Se.value==="incomplete"?(d(),D(x,{key:0,onClick:y=>de(a.id),class:"text-green-500",variant:"link"},{default:t(()=>e[55]||(e[55]=[u(" Receive ")])),_:2},1032,["onClick"])):w("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(ee,null,{default:t(()=>[(d(!0),c(q,null,I(g.orderedItems,a=>(d(),D(h,{key:a.id},{default:t(()=>[l(Z,{title:`${a.supplier_item.item_name} (${a.supplier_item.ItemCode})`},{default:t(()=>[Be?(d(),D(x,{key:0,onClick:y=>de(a.id),class:"text-green-500",variant:"link"},{default:t(()=>e[56]||(e[56]=[u(" Receive ")])),_:2},1032,["onClick"])):w("",!0)]),_:2},1032,["title"]),l(i,null,{default:t(()=>{var y;return[u("BaseUOM: "+r((y=a.supplier_item.sap_master_file)==null?void 0:y.BaseUOM),1)]}),_:2},1024),l(i,null,{default:t(()=>[u("UOM: "+r(a.uom),1)]),_:2},1024),l(i,null,{default:t(()=>[u("Quantity Received: "+r(a.quantity_received),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(le,null,{default:t(()=>[l(se,null,{default:t(()=>[l(ze,null,{default:t(()=>e[57]||(e[57]=[u("Receiving History")])),_:1}),g.order.order_status!="received"?(d(),D(x,{key:0,onClick:$e},{default:t(()=>e[58]||(e[58]=[u(" Confirm Receive ")])),_:1})):w("",!0)]),_:1}),l(W,null,{default:t(()=>[l(G,null,{default:t(()=>[l(p,null,{default:t(()=>e[59]||(e[59]=[u(" Id ")])),_:1}),l(p,null,{default:t(()=>e[60]||(e[60]=[u(" Item ")])),_:1}),l(p,null,{default:t(()=>e[61]||(e[61]=[u(" Item Code ")])),_:1}),l(p,null,{default:t(()=>e[62]||(e[62]=[u(" Quantity Received")])),_:1}),l(p,null,{default:t(()=>e[63]||(e[63]=[u(" Received At")])),_:1}),l(p,null,{default:t(()=>e[64]||(e[64]=[u(" Status")])),_:1}),l(p,null,{default:t(()=>e[65]||(e[65]=[u("Actions")])),_:1})]),_:1}),l(J,null,{default:t(()=>[(d(!0),c(q,null,I(g.receiveDatesHistory,a=>(d(),c("tr",{key:a.id},[l(_,null,{default:t(()=>[u(r(a.id),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.store_order_item.supplier_item.item_name),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.store_order_item.supplier_item.ItemCode),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.quantity_received),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(n(T)(a.received_date).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024),l(_,null,{default:t(()=>[u(r(a.status),1)]),_:2},1024),l(_,null,{default:t(()=>[l(z,{class:"gap-3"},{default:t(()=>[l(te,{onClick:y=>pe(a.id)},null,8,["onClick"]),a.status==="pending"?(d(),D(K,{key:0,onClick:y=>ve(a.id)},null,8,["onClick"])):w("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),l(ee,null,{default:t(()=>[(d(!0),c(q,null,I(g.receiveDatesHistory,a=>(d(),D(h,{key:a.id},{default:t(()=>[l(Z,{title:`${a.store_order_item.supplier_item.item_name} (${a.store_order_item.supplier_item.ItemCode})`},{default:t(()=>[l(te,{class:"size-5 gap mr-0",onClick:y=>pe(a.id)},null,8,["onClick"]),a.status==="pending"?(d(),D(K,{key:0,class:"size-5 gap mr-1",onClick:y=>ve(a.id)},null,8,["onClick"])):w("",!0)]),_:2},1032,["title"]),l(i,null,{default:t(()=>[u("Received: "+r(a.quantity_received),1)]),_:2},1024),l(i,null,{default:t(()=>[u("Status: "+r(a.status.toUpperCase()),1)]),_:2},1024)]),_:2},1024))),128)),g.receiveDatesHistory.length<1?(d(),D(m,{key:0},{default:t(()=>e[66]||(e[66]=[u("None")])),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),F.value?(d(),c("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center",onClick:ue},[e[74]||(e[74]=s("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),s("div",ol,[s("div",dl,[e[68]||(e[68]=s("div",null,[s("h2",{class:"text-lg font-semibold text-gray-900"}," Delivery Receipt Form "),s("p",{class:"text-sm text-gray-600 mt-1"}," Input all the important details ")],-1)),l(x,{variant:"ghost",size:"sm",onClick:e[1]||(e[1]=a=>F.value=!1),class:"h-8 w-8 p-0 hover:bg-gray-100"},{default:t(()=>e[67]||(e[67]=[s("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),_:1})]),s("div",il,[l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[69]||(e[69]=[u("Delivery Receipt Number")])),_:1}),l(B,{modelValue:n(b).delivery_receipt_number,"onUpdate:modelValue":e[2]||(e[2]=a=>n(b).delivery_receipt_number=a)},null,8,["modelValue"]),l(U,null,{default:t(()=>[u(r(n(b).errors.delivery_receipt_number),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[70]||(e[70]=[u("SAP SO Number")])),_:1}),l(B,{modelValue:n(b).sap_so_number,"onUpdate:modelValue":e[3]||(e[3]=a=>n(b).sap_so_number=a)},null,8,["modelValue"]),l(U,null,{default:t(()=>[u(r(n(b).errors.sap_so_number),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[71]||(e[71]=[u("Remarks")])),_:1}),l(B,{modelValue:n(b).remarks,"onUpdate:modelValue":e[4]||(e[4]=a=>n(b).remarks=a)},null,8,["modelValue"]),l(U,null,{default:t(()=>[u(r(n(b).errors.remarks),1)]),_:1})]),_:1})]),s("div",ml,[l(x,{variant:"ghost",onClick:e[5]||(e[5]=a=>F.value=!1)},{default:t(()=>e[72]||(e[72]=[u("Cancel")])),_:1}),l(x,{onClick:Fe},{default:t(()=>e[73]||(e[73]=[u("Submit")])),_:1})])])])):w("",!0),l(Me,{open:H.value,"onUpdate:open":e[11]||(e[11]=a=>H.value=a)},{default:t(()=>[l(we,{class:"sm:max-w-[600px]"},{default:t(()=>[l(Ce,null,{default:t(()=>[l(xe,null,{default:t(()=>e[75]||(e[75]=[u("Receive Form")])),_:1}),l(ke,null,{default:t(()=>e[76]||(e[76]=[u("Input all the important details")])),_:1})]),_:1}),s("div",fl,[l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[77]||(e[77]=[u("Quantity Received")])),_:1}),l(B,{modelValue:n(M).quantity_received,"onUpdate:modelValue":e[6]||(e[6]=a=>n(M).quantity_received=a),type:"number"},null,8,["modelValue"]),l(U,null,{default:t(()=>[u(r(n(M).errors.quantity_received),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[78]||(e[78]=[u("Received Date")])),_:1}),l(B,{modelValue:n(M).received_date,"onUpdate:modelValue":e[7]||(e[7]=a=>n(M).received_date=a),type:"datetime-local"},null,8,["modelValue"]),l(U,null,{default:t(()=>[u(r(n(M).errors.received_date),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[79]||(e[79]=[u("Expiry Date")])),_:1}),l(B,{modelValue:n(M).expiry_date,"onUpdate:modelValue":e[8]||(e[8]=a=>n(M).expiry_date=a),type:"date"},null,8,["modelValue"]),l(U,null,{default:t(()=>[u(r(n(M).errors.expiry_date),1)]),_:1})]),_:1}),l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[80]||(e[80]=[u("Remarks")])),_:1}),l(B,{modelValue:n(M).remarks,"onUpdate:modelValue":e[9]||(e[9]=a=>n(M).remarks=a)},null,8,["modelValue"]),l(U,null,{default:t(()=>[u(r(n(M).errors.remarks),1)]),_:1})]),_:1})]),l(De,null,{default:t(()=>[l(x,{variant:"ghost",onClick:e[10]||(e[10]=a=>H.value=!1)},{default:t(()=>e[81]||(e[81]=[u("Cancel")])),_:1}),l(x,{onClick:qe},{default:t(()=>e[82]||(e[82]=[u("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),N.value?(d(),c("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center",onClick:ue},[e[91]||(e[91]=s("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),s("div",vl,[s("div",pl,[e[84]||(e[84]=s("div",null,[s("h2",{class:"text-lg font-semibold text-gray-900"}," Edit Receive Details "),s("p",{class:"text-sm text-gray-600 mt-1"}," Update the receive information below. ")],-1)),l(x,{variant:"ghost",size:"sm",onClick:ie,class:"h-8 w-8 p-0 hover:bg-gray-100"},{default:t(()=>e[83]||(e[83]=[s("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),_:1})]),s("div",_l,[l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[85]||(e[85]=[u("Quantity Received")])),_:1}),l(B,{modelValue:n(C).quantity_received,"onUpdate:modelValue":e[12]||(e[12]=a=>n(C).quantity_received=a),type:"number"},null,8,["modelValue"]),l(U,null,{default:t(()=>[u(r(n(C).errors.quantity_received),1)]),_:1}),$.value&&n(C).quantity_received?(d(),c("div",yl,[e[86]||(e[86]=s("span",{class:"font-medium"},"Variance: ",-1)),s("span",{class:We(re.value>=0?"text-green-600":"text-red-600")},r(re.value>=0?"+":"")+r(re.value),3),s("span",gl," (Committed: "+r($.value.store_order_item.quantity_commited)+") ",1)])):w("",!0)]),_:1}),l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[87]||(e[87]=[u("Remarks")])),_:1}),Ze(s("select",{"onUpdate:modelValue":e[13]||(e[13]=a=>n(C).remarks=a),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm transition-colors placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-400 disabled:cursor-not-allowed disabled:opacity-50"},[e[88]||(e[88]=s("option",{value:"",disabled:""},"Select a remark",-1)),(d(),c(q,null,I(Re,a=>s("option",{key:a.value,value:a.value},r(a.label),9,cl)),64))],512),[[he,n(C).remarks]]),l(U,null,{default:t(()=>[u(r(n(C).errors.remarks),1)]),_:1})]),_:1})]),s("div",bl,[l(x,{variant:"ghost",onClick:ie},{default:t(()=>e[89]||(e[89]=[u("Cancel")])),_:1}),l(x,{onClick:Te},{default:t(()=>e[90]||(e[90]=[u("Update")])),_:1})])])])):w("",!0),l(Me,{open:X.value,"onUpdate:open":e[15]||(e[15]=a=>X.value=a)},{default:t(()=>[l(we,{class:"sm:max-w-[600px]"},{default:t(()=>[l(Ce,null,{default:t(()=>[l(xe,null,{default:t(()=>e[92]||(e[92]=[u("Receive History Details")])),_:1}),l(ke,null,{default:t(()=>e[93]||(e[93]=[u("View the details of the received item.")])),_:1})]),_:1}),s("div",xl,[l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[94]||(e[94]=[u("Item Name:")])),_:1}),l(m,null,{default:t(()=>{var a;return[u(r((a=E.value)==null?void 0:a.store_order_item.supplier_item.item_name),1)]}),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[95]||(e[95]=[u("Item Code:")])),_:1}),l(m,null,{default:t(()=>{var a;return[u(r((a=E.value)==null?void 0:a.store_order_item.supplier_item.ItemCode),1)]}),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[96]||(e[96]=[u("Quantity Received:")])),_:1}),l(m,null,{default:t(()=>{var a;return[u(r((a=E.value)==null?void 0:a.quantity_received),1)]}),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[97]||(e[97]=[u("Received By:")])),_:1}),l(m,null,{default:t(()=>{var a,y,L,P;return[u(r((y=(a=E.value)==null?void 0:a.received_by_user)==null?void 0:y.first_name)+" "+r((P=(L=E.value)==null?void 0:L.received_by_user)==null?void 0:P.last_name),1)]}),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[98]||(e[98]=[u("Received Date:")])),_:1}),l(m,null,{default:t(()=>{var a;return[u(r(n(T)((a=E.value)==null?void 0:a.received_date).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]}),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[99]||(e[99]=[u("Expiry Date:")])),_:1}),l(m,null,{default:t(()=>{var a;return[u(r((a=E.value)==null?void 0:a.expiry_date),1)]}),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[100]||(e[100]=[u("Remarks:")])),_:1}),l(m,null,{default:t(()=>{var a;return[u(r((a=E.value)==null?void 0:a.remarks),1)]}),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[101]||(e[101]=[u("Status:")])),_:1}),l(m,null,{default:t(()=>{var a;return[u(r((a=E.value)==null?void 0:a.status),1)]}),_:1})]),_:1}),l(f,null,{default:t(()=>[l(i,null,{default:t(()=>e[102]||(e[102]=[u("Approval Action By:")])),_:1}),l(m,null,{default:t(()=>{var a,y,L,P;return[u(r((y=(a=E.value)==null?void 0:a.approval_action_by_user)==null?void 0:y.first_name)+" "+r((P=(L=E.value)==null?void 0:L.approval_action_by_user)==null?void 0:P.last_name),1)]}),_:1})]),_:1})]),l(De,null,{default:t(()=>[l(x,{variant:"ghost",onClick:e[14]||(e[14]=a=>X.value=!1)},{default:t(()=>e[103]||(e[103]=[u("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),j.value?(d(),c("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center",onClick:ue},[e[109]||(e[109]=s("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm"},null,-1)),s("div",kl,[s("div",Cl,[e[105]||(e[105]=s("div",null,[s("h2",{class:"text-lg font-semibold text-gray-900"}," Attach Image "),s("p",{class:"text-sm text-gray-600 mt-1"}," Select an image file to upload for this order. ")],-1)),l(x,{variant:"ghost",size:"sm",onClick:e[16]||(e[16]=a=>j.value=!1),class:"h-8 w-8 p-0 hover:bg-gray-100"},{default:t(()=>e[104]||(e[104]=[s("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),_:1})]),s("div",Dl,[l(f,null,{default:t(()=>[l(V,{class:"text-xs"},{default:t(()=>e[106]||(e[106]=[u("Image File")])),_:1}),l(B,{type:"file",onChange:Ee,accept:"image/png, image/jpeg, image/jpg",class:"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),l(U,null,{default:t(()=>[u(r(n(Y).errors.image),1)]),_:1})]),_:1}),Q.value?(d(),c("div",wl,[l(V,{class:"text-xs"},{default:t(()=>e[107]||(e[107]=[u("Preview")])),_:1}),s("img",{src:Q.value,class:"mt-2 max-w-full h-auto rounded-md border object-contain"},null,8,Ml)])):w("",!0)]),s("div",Rl,[l(x,{variant:"ghost",onClick:e[17]||(e[17]=a=>j.value=!1)},{default:t(()=>e[108]||(e[108]=[u("Cancel")])),_:1}),l(x,{onClick:Ve,disabled:n(Y).processing},{default:t(()=>[n(Y).processing?(d(),c("span",Sl,"Uploading...")):(d(),c("span",Al,"Upload"))]),_:1},8,["disabled"])])])])):w("",!0)]),_:1})}}};export{Fl as default};
