import{x as m,l as g,y as I,W as O,o as i,c as x,w as d,a,u as e,bC as T,n as j,as as q,bD as U,b,t as w,g as c,d as f,k as D,X as V,h as p,bE as E,bF as K,bG as Q,bH as R,_ as X,bI as $,F as A,e as G,bJ as H,bK as k,bL as J}from"./app-p8ycGfai.js";import{S}from"./search-Czf2XZZ_.js";const M={class:"flex items-center gap-1"},W={class:"p-2 border-b"},Y={class:"relative"},P={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},Z={key:0,class:"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm text-muted-foreground"},ee={class:"absolute left-2"},te={key:1,class:"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm text-muted-foreground"},le={__name:"SearchableSelect",props:{modelValue:{type:[String,Number],required:!1},options:{type:Array,required:!0},optionLabel:{type:String,default:"label"},optionValue:{type:String,default:"value"},placeholder:{type:String,default:"Select..."},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},class:{type:String,required:!1}},emits:["update:modelValue"],setup(s,{emit:C}){const r=s,h=C,l=m(""),u=m(!1),v=m(null),y=g(()=>{if(!l.value)return r.options;const o=l.value.toLowerCase();return r.options.filter(t=>{const n=(t[r.optionLabel]||"").toLowerCase(),F=(t.searchTerms||"").toLowerCase();return n.includes(o)||F.includes(o)})}),L=g(()=>{if(!r.modelValue)return"";const o=r.options.find(t=>t[r.optionValue]===r.modelValue);return o?o[r.optionLabel]:""}),N=o=>{h("update:modelValue",o),l.value="",u.value=!1},B=()=>{h("update:modelValue",null),l.value=""},_=()=>{u.value||(u.value=!0)};I(u,o=>{o?O(()=>{var t;(t=v.value)==null||t.focus()}):l.value=""});const z=()=>{u.value=!1,l.value=""};return(o,t)=>(i(),x(e(J),{"model-value":s.modelValue,"onUpdate:modelValue":N,open:u.value,"onUpdate:open":t[2]||(t[2]=n=>u.value=n)},{default:d(()=>[a(e(T),{class:j(e(q)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",r.class)),disabled:s.disabled},{default:d(()=>[a(e(U),{placeholder:s.placeholder},{default:d(()=>[b(w(L.value||s.placeholder),1)]),_:1},8,["placeholder"]),c("div",M,[s.clearable&&s.modelValue?(i(),f("button",{key:0,onClick:D(B,["stop"]),class:"rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",type:"button"},[a(e(V),{class:"h-3.5 w-3.5"})])):p("",!0),a(e(E),{"as-child":""},{default:d(()=>[a(e(K),{class:"h-4 w-4 opacity-50 shrink-0"})]),_:1})])]),_:1},8,["class","disabled"]),a(e(Q),null,{default:d(()=>[a(e(R),{onInteractOutside:z,class:"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",position:"popper",side:"bottom","side-offset":4},{default:d(()=>[c("div",W,[c("div",Y,[a(e(S),{class:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-500"}),a(e(X),{ref_key:"searchInputRef",ref:v,modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=n=>l.value=n),placeholder:"Search stores...",class:"pl-8 pr-8 h-8 text-sm",onFocus:_},null,8,["modelValue"]),l.value?(i(),f("button",{key:0,onClick:t[1]||(t[1]=n=>l.value=""),class:"absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-500 hover:text-gray-700"},[a(e(V),{class:"h-4 w-4"})])):p("",!0)])]),a(e($),{class:"p-1"},{default:d(()=>[(i(!0),f(A,null,G(y.value,n=>(i(),x(e(H),{key:n[s.optionValue],value:n[s.optionValue],class:"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50"},{default:d(()=>[c("span",P,[a(e(k))]),a(e(k),null,{default:d(()=>[b(w(n[s.optionLabel]),1)]),_:2},1024)]),_:2},1032,["value"]))),128)),y.value.length===0&&l.value?(i(),f("div",Z,[c("span",ee,[a(e(S),{class:"h-3.5 w-3.5"})]),t[3]||(t[3]=b(" No stores found "))])):p("",!0),s.options.length===0?(i(),f("div",te," No stores available ")):p("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value","open"]))}};export{le as _};
