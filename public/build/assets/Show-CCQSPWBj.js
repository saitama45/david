import{l as S,r as u,o as _,c as h,w as n,a as t,b as r,d as y,e as w,t as s,n as T,F as C,g as A}from"./app-p8ycGfai.js";const q=["href"],F={key:1},I=["href"],E={key:1},$={__name:"Show",props:{branches:{type:Object,required:!0},history:{type:Object,required:!0}},setup(f){console.log("StockManagement Show Vue - History Data:",f.history);const d=o=>o==="add"||o==="add_quantity"?"IN":o==="out"||o==="deduct"||o==="log_usage"?"OUT":o==="initial_balance"||o==="BEG BAL"?"BEG BAL":o.replace(/_/g," ").toUpperCase(),m=(o,l=2,a=10)=>{if(o==null||isNaN(o))return"N/a";const p=parseFloat(o);if(isNaN(p))return"N/a";let i=p.toFixed(a);i=i.replace(/\.?0+$/,"");const b=i.split(".");return!b[1]||b[1].length<l?p.toFixed(l):i},N=o=>{if(!o)return"N/a";try{return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(l){return console.error("Error formatting date:",o,l),o}},B=S(()=>{if(f.history.data&&f.history.data.length>0&&f.history.data[0].sap_masterfile){const o=f.history.data[0].sap_masterfile.ItemDescription,l=f.history.data[0].sap_masterfile.AltUOM;return`${o} with AltUOM: ${l}`}return"Stock Details"});return(o,l)=>{const a=u("TH"),p=u("TableHead"),i=u("TD"),b=u("TableBody"),D=u("Table"),O=u("MobileTableHeading"),c=u("LabelXS"),U=u("MobileTableRow"),H=u("MobileTableContainer"),M=u("Pagination"),x=u("TableContainer"),L=u("BackButton"),R=u("Layout");return _(),h(R,{heading:B.value},{default:n(()=>[t(x,null,{default:n(()=>[t(D,null,{default:n(()=>[t(p,null,{default:n(()=>[t(a,null,{default:n(()=>l[0]||(l[0]=[r("Id")])),_:1}),t(a,null,{default:n(()=>l[1]||(l[1]=[r("Ref No.")])),_:1}),t(a,null,{default:n(()=>l[2]||(l[2]=[r("Quantity Change")])),_:1}),t(a,null,{default:n(()=>l[3]||(l[3]=[r("Action")])),_:1}),t(a,null,{default:n(()=>l[4]||(l[4]=[r("Cost Center")])),_:1}),t(a,null,{default:n(()=>l[5]||(l[5]=[r("Unit Cost")])),_:1}),t(a,null,{default:n(()=>l[6]||(l[6]=[r("Total Cost")])),_:1}),t(a,null,{default:n(()=>l[7]||(l[7]=[r("Transaction Date")])),_:1}),t(a,null,{default:n(()=>l[8]||(l[8]=[r("Running SOH")])),_:1}),t(a,null,{default:n(()=>l[9]||(l[9]=[r("Remarks")])),_:1})]),_:1}),t(b,null,{default:n(()=>[(_(!0),y(C,null,w(f.history.data,(e,k)=>(_(),y("tr",{key:e.id},[t(i,null,{default:n(()=>[r(s(e.id),1)]),_:2},1024),t(i,null,{default:n(()=>[e.is_link_ref&&e.display_ref_no!=="N/a"?(_(),y("a",{key:0,href:e.ref_type==="interco"?o.route("interco.show",e.display_ref_no):e.ref_type==="wastage"?o.route("wastage.show.by-number",e.display_ref_no):o.route("store-orders.show",e.display_ref_no),target:"_blank",class:"text-blue-600 hover:underline"},s(e.display_ref_no),9,q)):(_(),y("span",F,s(e.display_ref_no??"N/a"),1))]),_:2},1024),t(i,{class:T({"text-red-500":d(e.action)==="OUT","text-green-500":d(e.action)==="IN"})},{default:n(()=>[r(s(d(e.action)==="OUT"?"-":"+")+s(m(e.quantity,2,10)),1)]),_:2},1032,["class"]),t(i,null,{default:n(()=>[r(s(d(e.action)),1)]),_:2},1024),t(i,null,{default:n(()=>{var g;return[r(s(((g=e.cost_center)==null?void 0:g.name)??"N/a"),1)]}),_:2},1024),t(i,null,{default:n(()=>[r(s(m(e.unit_cost,2,4)),1)]),_:2},1024),t(i,null,{default:n(()=>[r(s(m(e.total_cost,2,4)),1)]),_:2},1024),t(i,null,{default:n(()=>[r(s(N(e.transaction_date)),1)]),_:2},1024),t(i,{class:T({"font-bold text-green-600":k===0})},{default:n(()=>[r(s(m(e.running_soh,2,10)),1)]),_:2},1032,["class"]),t(i,null,{default:n(()=>[r(s(e.remarks&&e.remarks.replace(/testing/gi,"").trim()?e.remarks.replace(/testing/gi,"").trim():"None"),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(H,null,{default:n(()=>[(_(!0),y(C,null,w(f.history.data,(e,k)=>(_(),h(U,{key:e.id},{default:n(()=>[t(O,{title:`${d(e.action)}`},null,8,["title"]),t(c,null,{default:n(()=>[l[10]||(l[10]=r("Ref No.: ")),e.is_link_ref&&e.display_ref_no!=="N/a"?(_(),y("a",{key:0,href:e.ref_type==="interco"?o.route("interco.show",e.display_ref_no):e.ref_type==="wastage"?o.route("wastage.show.by-number",e.display_ref_no):o.route("store-orders.show",e.display_ref_no),target:"_blank",class:"text-blue-600 hover:underline"},s(e.display_ref_no),9,I)):(_(),y("span",E,s(e.display_ref_no??"N/a"),1))]),_:2},1024),t(c,null,{default:n(()=>[l[11]||(l[11]=r("Quantity Change: ")),A("span",{class:T({"text-red-500":d(e.action)==="OUT","text-green-500":d(e.action)==="IN"})},s(d(e.action)==="OUT"?"-":"+")+s(m(e.quantity,2,10)),3)]),_:2},1024),t(c,{class:T({"font-bold text-green-600":k===0})},{default:n(()=>[r("Running SOH: "+s(m(e.running_soh,2,10)),1)]),_:2},1032,["class"]),t(c,null,{default:n(()=>{var g;return[r("Cost Center: "+s(((g=e.cost_center)==null?void 0:g.name)??"N/a"),1)]}),_:2},1024),t(c,null,{default:n(()=>[r("Unit Cost: "+s(m(e.unit_cost,2,4)),1)]),_:2},1024),t(c,null,{default:n(()=>[r("Total Cost: "+s(m(e.total_cost,2,4)),1)]),_:2},1024),t(c,null,{default:n(()=>[r("Transaction Date: "+s(N(e.transaction_date)),1)]),_:2},1024),t(c,null,{default:n(()=>[r("Remarks: "+s(e.remarks&&e.remarks.replace(/testing/gi,"").trim()?e.remarks.replace(/testing/gi,"").trim():"None"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(M,{data:f.history},null,8,["data"])]),_:1}),t(L,{routeName:"stock-management.index"})]),_:1},8,["heading"])}}};export{$ as default};
