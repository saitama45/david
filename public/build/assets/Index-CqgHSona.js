import{Q as v,N as b,r as a,o as g,c as B,w as o,a as e,u as p,i as f,g as F,b as u,d as S,e as O,t as c,F as P}from"./app-p8ycGfai.js";import{l as oe}from"./lodash-Z9yJD-f9.js";import{d as V}from"./dayjs.min-rPz-gETM.js";import{u as k}from"./useSelectOptions-Ci2WUICq.js";const ae={class:"sm:hidden"},ne=["onClick"],pe={__name:"Index",props:{items:{type:Object,required:!0},suppliers:{type:Object,required:!0},branches:{type:Object,required:!0}},setup(y){let n=ref(v().props.filters.dateRange),s=ref(v().props.filters.supplierId),i=ref(v().props.filters.search),d=ref(v().props.filters.branchId);const T=y,{options:w}=k(T.suppliers),{options:x}=k(T.branches),C=r=>{b.get(`/product-orders-summary/show/${r}`,{dateRange:n.value,supplierId:s.value,branchId:d.value},{preserveState:!0})};watch(d,r=>{b.get(route("product-orders-summary.index"),{dateRange:n.value,search:i.value,supplierId:s.value,branchId:r},{preserveState:!0,replace:!0})}),watch(n,r=>{b.get(route("product-orders-summary.index"),{dateRange:r,search:i.value,supplierId:s.value,branchId:d.value},{preserveState:!0,replace:!0})}),watch(s,r=>{b.get(route("product-orders-summary.index"),{supplierId:r,dateRange:n.value,search:i.value,branchId:d.value},{preserveState:!0,replace:!0})}),watch(i,oe.throttle(function(r){b.get(route("product-orders-summary.index"),{search:r,dateRange:n.value,supplierId:s.value,branchId:d.value},{preserveState:!0,replace:!0})},500)),onMounted(()=>{const r=v().props.filters;if(r.dateRange)if(typeof r.dateRange=="string"){const[t,I]=r.dateRange.split(",");n.value=[V(t).toDate(),V(I).toDate()]}else n.value=r.dateRange.map(t=>V(t).toDate());else{const t=V();n.value=[t.toDate(),t.toDate()]}});const L=computed(()=>route("product-orders-summary.export",{dateRange:n.value,supplierId:s.value,branchId:d.value,search:i.value}));return ref(!0),(r,t)=>{const I=a("Input"),H=a("SearchBar"),U=a("Filter"),Y=a("PopoverTrigger"),h=a("MultiSelect"),D=a("Select"),R=a("DatePicker"),q=a("DivFlexCol"),j=a("PopoverContent"),E=a("Popover"),N=a("DivFlexCenter"),Q=a("TableHeader"),m=a("TH"),X=a("TableHead"),_=a("TD"),z=a("Eye"),A=a("TableBody"),G=a("Table"),J=a("ShowButton"),K=a("MobileTableHeading"),M=a("LabelXS"),W=a("MobileTableRow"),Z=a("MobileTableContainer"),$=a("Pagination"),ee=a("TableContainer"),te=a("Layout");return g(),B(te,{heading:"Item Orders Summary",hasExcelDownload:!0,exportRoute:p(L)},{default:o(()=>[e(ee,null,{default:o(()=>[e(Q,{class:"justify-between gap-5"},{default:o(()=>[e(H,null,{default:o(()=>[e(I,{modelValue:p(i),"onUpdate:modelValue":t[0]||(t[0]=l=>f(i)?i.value=l:i=l),class:"pl-10",placeholder:"Search..."},null,8,["modelValue"])]),_:1}),F("section",ae,[e(E,null,{default:o(()=>[e(Y,null,{default:o(()=>[e(U)]),_:1}),e(j,null,{default:o(()=>[e(q,{class:"gap-3"},{default:o(()=>[e(h,{filter:"",placeholder:"Filter By Store",options:p(x),optionLabel:"label",optionValue:"value",modelValue:p(d),"onUpdate:modelValue":t[1]||(t[1]=l=>f(d)?d.value=l:d=l),showClear:"",class:"max-w-64"},null,8,["options","modelValue"]),e(D,{placeholder:"Filter By Supplier",options:p(w),optionLabel:"label",optionValue:"value",modelValue:p(s),"onUpdate:modelValue":t[2]||(t[2]=l=>f(s)?s.value=l:s=l),showClear:""},null,8,["options","modelValue"]),e(R,{class:"min-w-64",selectionMode:"range",modelValue:p(n),"onUpdate:modelValue":t[3]||(t[3]=l=>f(n)?n.value=l:n=l),manualInput:!1,format:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),e(N,{class:"sm:flex hidden gap-3"},{default:o(()=>[e(h,{filter:"",placeholder:"Filter By Store",options:p(x),optionLabel:"label",optionValue:"value",modelValue:p(d),"onUpdate:modelValue":t[4]||(t[4]=l=>f(d)?d.value=l:d=l),showClear:"",class:"max-w-64"},null,8,["options","modelValue"]),e(D,{placeholder:"Filter By Supplier",options:p(w),optionLabel:"label",optionValue:"value",modelValue:p(s),"onUpdate:modelValue":t[5]||(t[5]=l=>f(s)?s.value=l:s=l),showClear:""},null,8,["options","modelValue"]),e(R,{class:"min-w-64",selectionMode:"range",modelValue:p(n),"onUpdate:modelValue":t[6]||(t[6]=l=>f(n)?n.value=l:n=l),manualInput:!1,format:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),e(G,null,{default:o(()=>[e(X,null,{default:o(()=>[e(m,null,{default:o(()=>t[7]||(t[7]=[u("Id")])),_:1}),e(m,null,{default:o(()=>t[8]||(t[8]=[u("Item")])),_:1}),e(m,null,{default:o(()=>t[9]||(t[9]=[u("Inventory Code")])),_:1}),e(m,null,{default:o(()=>t[10]||(t[10]=[u("Conversion")])),_:1}),e(m,null,{default:o(()=>t[11]||(t[11]=[u("UOM")])),_:1}),e(m,null,{default:o(()=>t[12]||(t[12]=[u("Quantity Ordered")])),_:1}),e(m,null,{default:o(()=>t[13]||(t[13]=[u("Actions")])),_:1})]),_:1}),e(A,null,{default:o(()=>[(g(!0),S(P,null,O(y.items.data,l=>(g(),S("tr",null,[e(_,null,{default:o(()=>[u(c(l.id),1)]),_:2},1024),e(_,null,{default:o(()=>[u(c(l.name),1)]),_:2},1024),e(_,null,{default:o(()=>[u(c(l.inventory_code),1)]),_:2},1024),e(_,null,{default:o(()=>[u(c(l.conversion),1)]),_:2},1024),e(_,null,{default:o(()=>[u(c(l.unit_of_measurement.name),1)]),_:2},1024),e(_,null,{default:o(()=>[u(c(l.store_order_items_sum_quantity_commited),1)]),_:2},1024),e(_,null,{default:o(()=>[F("button",{onClick:le=>C(l.id)},[e(z,{class:"size-5"})],8,ne)]),_:2},1024)]))),256))]),_:1})]),_:1}),e(Z,null,{default:o(()=>[(g(!0),S(P,null,O(y.items.data,l=>(g(),B(W,null,{default:o(()=>[e(K,{title:`${l.name} (${l.inventory_code})`},{default:o(()=>[e(J,{onClick:le=>C(l.id)},null,8,["onClick"])]),_:2},1032,["title"]),e(M,null,{default:o(()=>[u("Quantity Ordered: "+c(l.store_order_items_sum_quantity_approved),1)]),_:2},1024),e(M,null,{default:o(()=>[u("Quantity Received: "+c(l.store_order_items_sum_quantity_received),1)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e($,{data:y.items},null,8,["data"])]),_:1})]),_:1},8,["exportRoute"])}}};export{pe as default};
