import{u as oe}from"./useBackButton-B5cTAtmc.js";import{l as ie,x as $,r as _,o as m,c as D,w as e,a as t,b as u,t as d,h as R,n as se,d as y,e as M,F as O,u as S,g as K,N as fe}from"./app-Bp7xdNcv.js";import{d as L}from"./dayjs.min-F7oOwrkI.js";const me=["src","onClick"],_e={key:0,class:"grid sm:grid-cols-2 gap-5"},pe=["src"],Ce={__name:"Show",props:{order:{type:Object},orderedItems:{type:Object},receiveDatesHistory:{type:Object,required:!0},images:{type:Object,required:!0}},setup(i){var z;const{backButton:W}=oe(route("mass-orders.index")),Z=g=>{if(!g)return"bg-gray-400 text-white";switch(g.toUpperCase()){case"APPROVED":return"bg-green-500 text-white";case"RECEIVED":return"bg-green-500 text-white";case"PENDING":return"bg-yellow-500 text-white";case"COMMITED":return"bg-blue-500 text-white";case"REJECTED":return"bg-red-400 text-white";default:return"bg-yellow-500 text-white"}},N=i,c=ie(()=>{if(!N.orderedItems||!Array.isArray(N.orderedItems))return{hasCommittedItems:!1,uniqueCommitters:[],formattedDisplay:"N/a",totalCommittedItems:0,totalItems:0};const g=N.orderedItems.length,l=N.orderedItems.filter(k=>k.committed_by&&k.committedBy),r=l.length;if(r===0)return{hasCommittedItems:!1,uniqueCommitters:[],formattedDisplay:"N/a",totalCommittedItems:r,totalItems:g};const o=l.reduce((k,A)=>{const x=A.committedBy;return x&&!k.find(s=>s.id===x.id)&&k.push({id:x.id,name:`${x.first_name} ${x.last_name}`.trim()}),k},[]);let p="N/a";return r>0&&r<g?o.length>0&&(p=o[0].name):o.length===1?p=o[0].name:o.length===2?p=o.map(k=>k.name).join(", "):o.length>2&&(p=`${o[0].name} (+${o.length-1} more)`),{hasCommittedItems:!0,uniqueCommitters:o,formattedDisplay:p,totalCommittedItems:r,totalItems:g}});console.log("Ordered Items Prop:",N.orderedItems),console.log("Receive Dates History Prop:",N.receiveDatesHistory),console.log("Type of receiveDatesHistory:",typeof N.receiveDatesHistory,Array.isArray(N.receiveDatesHistory)),console.log("Length of receiveDatesHistory:",(z=N.receiveDatesHistory)==null?void 0:z.length);const h=g=>{fe.get(route("mass-orders.create"),{orderId:g})},Y=$(!1),C=$(null),ee=g=>{const r=N.receiveDatesHistory.find(o=>o.id===g);C.value=r,Y.value=!0},j=$(null),T=$(!1),te=g=>{j.value=g,T.value=!0};return(g,l)=>{const r=_("LabelXS"),o=_("SpanBold"),p=_("InputContainer"),k=_("Badge"),A=_("Card"),x=_("TableHeader"),s=_("TH"),F=_("DivFlexCol"),H=_("TableHead"),f=_("TD"),I=_("TableBody"),q=_("Table"),U=_("MobileTableHeading"),E=_("MobileTableRow"),V=_("MobileTableContainer"),P=_("TableContainer"),Q=_("DivFlexCenter"),le=_("CardTitle"),ue=_("ShowButton"),ne=_("Button"),ae=_("DialogTitle"),de=_("DialogHeader"),X=_("DialogContent"),G=_("Dialog"),re=_("Layout");return m(),D(re,{heading:"Order Details",hasButton:!0,buttonName:"Copy Order and Create Another",handleClick:()=>h(i.order.id)},{default:e(()=>[t(F,{class:"gap-3"},{default:e(()=>[t(A,{class:"p-5 grid sm:grid-cols-4 gap-5"},{default:e(()=>[t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[3]||(l[3]=[u("Encoder: ")])),_:1}),t(o,null,{default:e(()=>{var n,a;return[u(d((n=i.order.encoder)==null?void 0:n.first_name)+" "+d((a=i.order.encoder)==null?void 0:a.last_name),1)]}),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[4]||(l[4]=[u("Order Number: ")])),_:1}),t(o,null,{default:e(()=>[u(d(i.order.order_number),1)]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[5]||(l[5]=[u("Order Date: ")])),_:1}),t(o,null,{default:e(()=>[u(d(i.order.order_date),1)]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[6]||(l[6]=[u("Approver: ")])),_:1}),i.order.approver?(m(),D(o,{key:0},{default:e(()=>{var n,a;return[u(d((n=i.order.approver)==null?void 0:n.first_name)+" "+d((a=i.order.approver)==null?void 0:a.last_name),1)]}),_:1})):R("",!0),i.order.approver?R("",!0):(m(),D(o,{key:1},{default:e(()=>l[7]||(l[7]=[u("N/a")])),_:1}))]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[8]||(l[8]=[u("Variant: ")])),_:1}),t(o,null,{default:e(()=>{var n;return[u(d((n=i.order.variant)==null?void 0:n.toUpperCase()),1)]}),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[9]||(l[9]=[u("Approval Action Date: ")])),_:1}),t(o,null,{default:e(()=>[u(d(i.order.approval_action_date?i.order.approval_action_date:"N/a"),1)]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[10]||(l[10]=[u("Committer(s): ")])),_:1}),t(o,null,{default:e(()=>[u(d(c.value.formattedDisplay),1)]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[11]||(l[11]=[u("Order Status: ")])),_:1}),t(k,{class:se(["w-fit",Z(i.order.order_status)])},{default:e(()=>{var n;return[u(d((n=i.order.order_status)==null?void 0:n.toUpperCase().replace("_"," ")),1)]}),_:1},8,["class"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(x,null,{default:e(()=>[t(o,{class:"sm:text-normal text-xs"},{default:e(()=>l[12]||(l[12]=[u("Ordered Items")])),_:1})]),_:1}),t(q,null,{default:e(()=>[t(H,null,{default:e(()=>[t(s,null,{default:e(()=>l[13]||(l[13]=[u(" Item Code ")])),_:1}),t(s,null,{default:e(()=>l[14]||(l[14]=[u(" Name ")])),_:1}),t(s,null,{default:e(()=>l[15]||(l[15]=[u("Base UOM")])),_:1}),t(s,null,{default:e(()=>l[16]||(l[16]=[u("UOM")])),_:1}),t(s,null,{default:e(()=>l[17]||(l[17]=[u(" Ordered")])),_:1}),t(s,null,{default:e(()=>l[18]||(l[18]=[u(" Approved")])),_:1}),t(s,null,{default:e(()=>l[19]||(l[19]=[u(" Comitted")])),_:1}),t(s,null,{default:e(()=>l[20]||(l[20]=[u(" Delivered")])),_:1}),t(s,null,{default:e(()=>l[21]||(l[21]=[u(" Received")])),_:1}),t(s,null,{default:e(()=>[t(F,null,{default:e(()=>[l[23]||(l[23]=u(" Variance ")),t(r,null,{default:e(()=>l[22]||(l[22]=[u("(Ordered vs Committed)")])),_:1})]),_:1})]),_:1}),t(s,null,{default:e(()=>[t(F,null,{default:e(()=>[l[25]||(l[25]=u(" Variance ")),t(r,null,{default:e(()=>l[24]||(l[24]=[u("(Committed vs Received)")])),_:1})]),_:1})]),_:1})]),_:1}),t(I,null,{default:e(()=>[(m(!0),y(O,null,M(i.orderedItems,n=>(m(),y("tr",{key:n.id},[t(f,null,{default:e(()=>{var a;return[u(d(((a=n.supplier_item)==null?void 0:a.ItemCode)??"N/a"),1)]}),_:2},1024),t(f,null,{default:e(()=>{var a;return[u(d(((a=n.supplier_item)==null?void 0:a.item_name)??"N/a"),1)]}),_:2},1024),t(f,null,{default:e(()=>{var a,v;return[u(d(((v=(a=n.supplier_item)==null?void 0:a.sap_master_file)==null?void 0:v.BaseUOM)??"N/a"),1)]}),_:2},1024),t(f,null,{default:e(()=>{var a;return[u(d(((a=n.supplier_item)==null?void 0:a.uom)??"N/a"),1)]}),_:2},1024),t(f,null,{default:e(()=>[u(d(n.quantity_ordered),1)]),_:2},1024),t(f,null,{default:e(()=>[u(d(n.quantity_approved),1)]),_:2},1024),t(f,null,{default:e(()=>{var a;return[u(d(((a=i.order.order_status)==null?void 0:a.toUpperCase())==="APPROVED"?0:n.quantity_commited),1)]}),_:2},1024),t(f,null,{default:e(()=>[u(d(n.quantity_received),1)]),_:2},1024),t(f,null,{default:e(()=>[u(d(n.quantity_received),1)]),_:2},1024),t(f,null,{default:e(()=>{var a;return[u(d(Math.abs(n.quantity_approved-(((a=i.order.order_status)==null?void 0:a.toUpperCase())==="APPROVED"?0:n.quantity_commited))),1)]}),_:2},1024),t(f,null,{default:e(()=>{var a;return[u(d(Math.abs((((a=i.order.order_status)==null?void 0:a.toUpperCase())==="APPROVED"?0:n.quantity_commited)-n.quantity_received)),1)]}),_:2},1024)]))),128))]),_:1})]),_:1}),t(V,null,{default:e(()=>[(m(!0),y(O,null,M(i.orderedItems,n=>(m(),D(E,{key:n.id},{default:e(()=>{var a,v;return[t(U,{title:`${((a=n.supplier_item)==null?void 0:a.item_name)??"N/a"} (${((v=n.supplier_item)==null?void 0:v.ItemCode)??"N/a"})`},null,8,["title"]),t(r,null,{default:e(()=>{var b,w;return[u("Base UOM: "+d(((w=(b=n.supplier_item)==null?void 0:b.sap_master_file)==null?void 0:w.BaseUOM)??"N/a"),1)]}),_:2},1024),t(r,null,{default:e(()=>{var b;return[u("UOM: "+d(((b=n.supplier_item)==null?void 0:b.uom)??"N/a"),1)]}),_:2},1024),t(r,null,{default:e(()=>[u("Ordered: "+d(n.quantity_ordered),1)]),_:2},1024),t(r,null,{default:e(()=>[u("Approved: "+d(n.quantity_approved),1)]),_:2},1024),t(r,null,{default:e(()=>{var b;return[u("Committed: "+d(((b=i.order.order_status)==null?void 0:b.toUpperCase())==="APPROVED"?0:n.quantity_commited),1)]}),_:2},1024),t(r,null,{default:e(()=>[u("Received: "+d(n.quantity_received),1)]),_:2},1024)]}),_:2},1024))),128))]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(x,null,{default:e(()=>[t(o,{class:"sm:text-normal text-xs"},{default:e(()=>l[26]||(l[26]=[u("Delivery Receipts")])),_:1})]),_:1}),t(q,null,{default:e(()=>[t(H,null,{default:e(()=>[t(s,null,{default:e(()=>l[27]||(l[27]=[u("Id")])),_:1}),t(s,null,{default:e(()=>l[28]||(l[28]=[u("Number")])),_:1}),t(s,null,{default:e(()=>l[29]||(l[29]=[u("Remarks")])),_:1}),t(s,null,{default:e(()=>l[30]||(l[30]=[u("Created at")])),_:1})]),_:1}),t(I,null,{default:e(()=>[(m(!0),y(O,null,M(i.order.delivery_receipts,n=>(m(),y("tr",{key:n.id},[t(f,null,{default:e(()=>[u(d(n.id),1)]),_:2},1024),t(f,null,{default:e(()=>[u(d(n.delivery_receipt_number),1)]),_:2},1024),t(f,null,{default:e(()=>[u(d(n.remarks),1)]),_:2},1024),t(f,null,{default:e(()=>[u(d(n.created_at),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(V,null,{default:e(()=>[(m(!0),y(O,null,M(i.order.delivery_receipts,n=>(m(),D(E,{key:n.id},{default:e(()=>[t(U,{title:`${n.delivery_receipt_number}`},null,8,["title"]),t(r,null,{default:e(()=>[u("Remarks: "+d(n.remarks??"N/a"),1)]),_:2},1024),t(r,null,{default:e(()=>[u("Created at: "+d(n.created_at),1)]),_:2},1024)]),_:2},1024))),128)),i.order.delivery_receipts.length<1?(m(),D(o,{key:0},{default:e(()=>l[31]||(l[31]=[u("None")])),_:1})):R("",!0)]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(x,null,{default:e(()=>[t(o,{class:"sm:text-normal text-xs"},{default:e(()=>l[32]||(l[32]=[u("Remarks")])),_:1})]),_:1}),t(q,null,{default:e(()=>[t(H,null,{default:e(()=>[t(s,null,{default:e(()=>l[33]||(l[33]=[u("Id")])),_:1}),t(s,null,{default:e(()=>l[34]||(l[34]=[u("Remarks By")])),_:1}),t(s,null,{default:e(()=>l[35]||(l[35]=[u("Action")])),_:1}),t(s,null,{default:e(()=>l[36]||(l[36]=[u("Remarks")])),_:1}),t(s,null,{default:e(()=>l[37]||(l[37]=[u("Created At")])),_:1})]),_:1}),t(I,null,{default:e(()=>[(m(!0),y(O,null,M(i.order.store_order_remarks,n=>(m(),y("tr",{key:n.id},[t(f,null,{default:e(()=>[u(d(n.id),1)]),_:2},1024),t(f,null,{default:e(()=>{var a,v;return[u(d((a=n.user)==null?void 0:a.first_name)+" "+d((v=n.user)==null?void 0:v.last_name),1)]}),_:2},1024),t(f,null,{default:e(()=>{var a;return[u(d((a=n.action)==null?void 0:a.toUpperCase()),1)]}),_:2},1024),t(f,null,{default:e(()=>[u(d(n.remarks),1)]),_:2},1024),t(f,null,{default:e(()=>[u(d(S(L)(n.created_at).format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(V,null,{default:e(()=>[(m(!0),y(O,null,M(i.order.store_order_remarks,n=>(m(),D(E,{key:n.id},{default:e(()=>{var a;return[t(U,{title:`${(a=n.action)==null?void 0:a.toUpperCase()}`},null,8,["title"]),t(r,null,{default:e(()=>[u("Remarks: "+d(n.remarks),1)]),_:2},1024),t(r,null,{default:e(()=>[u("Created at: "+d(S(L)(n.created_at).format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]}),_:2},1024))),128)),i.order.store_order_remarks.length<1?(m(),D(o,{key:0},{default:e(()=>l[38]||(l[38]=[u("None")])),_:1})):R("",!0)]),_:1})]),_:1}),t(A,{class:"p-5"},{default:e(()=>[t(p,{class:"col-span-4"},{default:e(()=>[t(r,null,{default:e(()=>l[39]||(l[39]=[u("Image Attachments: ")])),_:1}),t(Q,{class:"gap-4 overflow-auto overflow-x-auto scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-gray-300 hover:scrollbar-thumb-gray-400"},{default:e(()=>[(m(!0),y(O,null,M(i.images,n=>(m(),y("div",{key:n.id,class:"relative"},[K("img",{src:n.image_url,class:"size-24 min-w-24 cursor-pointer hover:opacity-80 transition-opacity",onClick:a=>te(n)},null,8,me)]))),128))]),_:1}),i.images.length<1?(m(),D(o,{key:0},{default:e(()=>l[40]||(l[40]=[u("None")])),_:1})):R("",!0)]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(le,{class:"sm:text-normal text-xs"},{default:e(()=>l[41]||(l[41]=[u("Receive Dates History")])),_:1}),t(q,null,{default:e(()=>[t(H,null,{default:e(()=>[t(s,null,{default:e(()=>l[42]||(l[42]=[u(" Id ")])),_:1}),t(s,null,{default:e(()=>l[43]||(l[43]=[u(" Item ")])),_:1}),t(s,null,{default:e(()=>l[44]||(l[44]=[u(" Item Code ")])),_:1}),t(s,null,{default:e(()=>l[45]||(l[45]=[u(" Quantity Received")])),_:1}),t(s,null,{default:e(()=>l[46]||(l[46]=[u(" Received At")])),_:1}),t(s,null,{default:e(()=>l[47]||(l[47]=[u(" Status")])),_:1}),t(s,null,{default:e(()=>l[48]||(l[48]=[u("Actions")])),_:1})]),_:1}),t(I,null,{default:e(()=>[(m(!0),y(O,null,M(i.receiveDatesHistory,n=>(m(),y("tr",{key:n.id},[t(f,null,{default:e(()=>[u(d(n.id),1)]),_:2},1024),t(f,null,{default:e(()=>{var a,v;return[u(d(((v=(a=n.store_order_item)==null?void 0:a.supplier_item)==null?void 0:v.item_name)??"N/a"),1)]}),_:2},1024),t(f,null,{default:e(()=>{var a,v;return[u(d(((v=(a=n.store_order_item)==null?void 0:a.supplier_item)==null?void 0:v.ItemCode)??"N/a"),1)]}),_:2},1024),t(f,null,{default:e(()=>[u(d(n.quantity_received),1)]),_:2},1024),t(f,null,{default:e(()=>[u(d(S(L)(n.received_date).format("MMMM D, YYYY h:mm A")),1)]),_:2},1024),t(f,null,{default:e(()=>[u(d(n.status),1)]),_:2},1024),t(f,null,{default:e(()=>[t(Q,{class:"gap-3"},{default:e(()=>[t(ue,{onClick:a=>ee(n.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(V,null,{default:e(()=>[(m(!0),y(O,null,M(i.receiveDatesHistory,n=>(m(),D(E,{key:n.id},{default:e(()=>{var a,v,b,w;return[t(U,{title:`${((v=(a=n.store_order_item)==null?void 0:a.supplier_item)==null?void 0:v.item_name)??"N/a"} (${((w=(b=n.store_order_item)==null?void 0:b.supplier_item)==null?void 0:w.ItemCode)??"N/a"})`},null,8,["title"]),t(r,null,{default:e(()=>{var B,J;return[u("UOM: "+d(((J=(B=n.store_order_item)==null?void 0:B.supplier_item)==null?void 0:J.uom)??"N/a"),1)]}),_:2},1024),t(r,null,{default:e(()=>[u("Received: "+d(n.quantity_received),1)]),_:2},1024),t(r,null,{default:e(()=>{var B;return[u("Status: "+d((B=n.status)==null?void 0:B.toUpperCase()),1)]}),_:2},1024),i.receiveDatesHistory.length<1?(m(),D(o,{key:0},{default:e(()=>l[49]||(l[49]=[u("None")])),_:1})):R("",!0)]}),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(ne,{variant:"outline",class:"text-lg px-7",onClick:S(W)},{default:e(()=>l[50]||(l[50]=[u(" Back ")])),_:1},8,["onClick"]),t(G,{open:Y.value,"onUpdate:open":l[0]||(l[0]=n=>Y.value=n)},{default:e(()=>[t(X,{class:"sm:max-w-[600px]"},{default:e(()=>[t(de,null,{default:e(()=>[t(ae,null,{default:e(()=>l[51]||(l[51]=[u("Received Item Details")])),_:1})]),_:1}),C.value?(m(),y("section",_e,[t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[52]||(l[52]=[u("Item Code")])),_:1}),t(o,null,{default:e(()=>{var n,a;return[u(d(((a=(n=C.value.store_order_item)==null?void 0:n.supplier_item)==null?void 0:a.ItemCode)??"N/a"),1)]}),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[53]||(l[53]=[u("Item Name")])),_:1}),t(o,null,{default:e(()=>{var n,a;return[u(d(((a=(n=C.value.store_order_item)==null?void 0:n.supplier_item)==null?void 0:a.item_name)??"N/a"),1)]}),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[54]||(l[54]=[u("UOM")])),_:1}),t(o,null,{default:e(()=>{var n,a;return[u(d(((a=(n=C.value.store_order_item)==null?void 0:n.supplier_item)==null?void 0:a.uom)??"N/a"),1)]}),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[55]||(l[55]=[u("Received By")])),_:1}),t(o,null,{default:e(()=>{var n,a;return[u(d((n=C.value.receiver)==null?void 0:n.first_name)+" "+d((a=C.value.receiver)==null?void 0:a.last_name),1)]}),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[56]||(l[56]=[u("Quantity Received")])),_:1}),t(o,null,{default:e(()=>[u(d(C.value.quantity_received),1)]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[57]||(l[57]=[u("Received At")])),_:1}),t(o,null,{default:e(()=>[u(d(C.value.received_date),1)]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[58]||(l[58]=[u("Expiry Date")])),_:1}),t(o,null,{default:e(()=>[u(d(C.value.expiry_date??"N/a"),1)]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[59]||(l[59]=[u("Status")])),_:1}),t(o,null,{default:e(()=>[u(d(C.value.status??"N/a"),1)]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(r,null,{default:e(()=>l[60]||(l[60]=[u("Remarks")])),_:1}),t(o,null,{default:e(()=>[u(d(C.value.remarks??"N/a"),1)]),_:1})]),_:1})])):R("",!0)]),_:1})]),_:1},8,["open"]),t(G,{open:T.value,"onUpdate:open":l[2]||(l[2]=n=>T.value=n)},{default:e(()=>[t(X,{class:"sm:max-w-[90vw] h-[90vh] p-0 flex items-center justify-center"},{default:e(()=>[K("button",{onClick:l[1]||(l[1]=n=>T.value=!1),class:"absolute right-4 top-4 rounded-sm ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 bg-white/80 p-2"}),j.value?(m(),y("img",{key:0,src:j.value.image_url,class:"max-h-full max-w-full object-contain",alt:"Enlarged image"},null,8,pe)):R("",!0)]),_:1})]),_:1},8,["open"])]),_:1},8,["handleClick"])}}};export{Ce as default};
