import{Y as E,l as i,r as R,o as c,c as v,w as s,a as o,u as t,b as l,N as A,aA as w,h as N,g as d,aL as I,aM as M,aN as T,d as q,e as U,t as m,aZ as j,F,aQ as C}from"./app-p8ycGfai.js";import{_ as h,a as z,b as D,c as _,d as G,e as f}from"./TableHeader-a0F1Zfhh.js";import P from"./TransferSummary-BgcFI9aS.js";import Y from"./TransferTimeline-L8PinC5B.js";import{A as Z}from"./arrow-left-Cc6FcHnL.js";import{S as H}from"./square-pen-CI0P5sG9.js";import"./TransferStatusBadge-Cy3bUJcI.js";import"./TooltipTrigger-Cad37LXI.js";import"./VisuallyHidden-Bjfqgrx1.js";import"./clock-DPi-gFdQ.js";import"./circle-x-BrjzfYpA.js";import"./package-WwDcP9-w.js";import"./check-DHL4itGq.js";import"./calendar-BgyW0Gx5.js";import"./user-DThGBxUr.js";const J={class:"grid gap-6"},K={class:"grid lg:grid-cols-1 gap-6"},W={class:"lg:col-span-3 space-y-6"},X={class:"font-medium"},ee={class:"font-medium"},te={class:"font-medium"},re={class:"font-medium"},se={class:"font-medium"},oe={class:"font-medium"},ne={class:"mt-4 pt-4 border-t"},ae={class:"flex justify-between items-center"},de={class:"text-sm font-medium"},ie={class:"text-sm"},le={key:0},ue={class:"text-sm"},me={__name:"Show",props:{order:Object,permissions:Object},setup(p){const n=p;i(()=>n.order.interco_number||"N/A");const g=i(()=>n.order.interco_status||"open");i(()=>{var r,e,u;return console.log("Show.vue order data:",{from_store_name:n.order.from_store_name,sendingStore:n.order.sendingStore,has_serialized_name:!!n.order.from_store_name}),n.order.from_store_name||((r=n.order.sendingStore)==null?void 0:r.name)||((e=n.order.sendingStore)==null?void 0:e.branch_name)||((u=n.order.sendingStore)==null?void 0:u.brand_name)||"Unknown Sending Store"}),i(()=>{var r,e;return n.order.to_store_name||((r=n.order.store_branch)==null?void 0:r.name)||((e=n.order.store_branch)==null?void 0:e.branch_name)||"Unknown Receiving Store"}),i(()=>n.order.created_at);const Q=i(()=>n.order.interco_reason||"No reason provided"),y=i(()=>n.order.remarks||"No remarks"),b=i(()=>{var e;if(!((e=n.order)!=null&&e.store_order_items)||!Array.isArray(n.order.store_order_items))return 0;const r=n.order.store_order_items.reduce((u,a)=>u+(Number(a.quantity_ordered)||0),0);return Number(r)||0}),k=i(()=>{var e;if(!((e=n.order)!=null&&e.store_order_items)||!Array.isArray(n.order.store_order_items))return 0;const r=n.order.store_order_items.reduce((u,a)=>u+(Number(a.quantity_received)||0),0);return Number(r)||0});i(()=>{const r=b.value||0,e=k.value||0;return Math.max(0,r-e)}),i(()=>{const r=b.value||0,e=k.value||0;return r===0?0:e/r*100});const B=i(()=>n.permissions.can_edit&&g.value==="open");i(()=>n.permissions.can_approve&&g.value==="open"),i(()=>n.permissions.can_commit&&g.value==="approved");const L=(r,e=2)=>r==null||isNaN(r)?"0.00":Number(r).toFixed(e),O=r=>{var e,u;return console.log("Getting description for item:",r.item_code,"UOM:",r.uom),console.log("Available description data:",{item_description:r.item_description,sapMasterfile:r.sapMasterfile}),r.item_description||((e=r.sapMasterfile)==null?void 0:e.ItemDescription)||((u=r.sapMasterfile)==null?void 0:u.ItemName)||"Description not available"},x=r=>r.item_uom||r.uom||"",V=()=>{A.get(route("interco.edit",n.order.id))};return(r,e)=>{const u=R("Layout");return c(),v(u,{heading:"Transfer Details"},{actions:s(()=>[o(t(w),{variant:"outline",onClick:e[0]||(e[0]=a=>t(A).get(r.route("interco.index")))},{default:s(()=>[o(t(Z),{class:"w-4 h-4 mr-2"}),e[1]||(e[1]=l(" Back to Transfers "))]),_:1}),B.value?(c(),v(t(w),{key:0,onClick:V},{default:s(()=>[o(t(H),{class:"w-4 h-4 mr-2"}),e[2]||(e[2]=l(" Edit Transfer "))]),_:1})):N("",!0)]),default:s(()=>[d("div",J,[o(P,{transfer:p.order},null,8,["transfer"]),d("div",K,[d("div",W,[o(t(C),null,{default:s(()=>[o(t(I),null,{default:s(()=>[o(t(M),null,{default:s(()=>e[3]||(e[3]=[l("Transfer Items")])),_:1})]),_:1}),o(t(T),null,{default:s(()=>[o(t(h),null,{default:s(()=>[o(t(z),null,{default:s(()=>[o(t(D),null,{default:s(()=>[o(t(_),null,{default:s(()=>e[4]||(e[4]=[l("Item Code")])),_:1}),o(t(_),null,{default:s(()=>e[5]||(e[5]=[l("Description")])),_:1}),o(t(_),null,{default:s(()=>e[6]||(e[6]=[l("Ordered Qty")])),_:1}),o(t(_),null,{default:s(()=>e[7]||(e[7]=[l("Approved Qty")])),_:1}),o(t(_),null,{default:s(()=>e[8]||(e[8]=[l("Committed Qty")])),_:1}),o(t(_),null,{default:s(()=>e[9]||(e[9]=[l("Received Qty")])),_:1}),o(t(_),null,{default:s(()=>e[10]||(e[10]=[l("Variance")])),_:1})]),_:1})]),_:1}),o(t(G),null,{default:s(()=>[(c(!0),q(F,null,U(p.order.store_order_items,a=>(c(),v(t(D),{key:a.id},{default:s(()=>[o(t(f),{class:"font-medium"},{default:s(()=>{var S,$;return[l(m(((S=a.sapMasterfile)==null?void 0:S.ItemCode)||(($=a.sapMasterfile)==null?void 0:$.item_code)||a.item_code||"N/A"),1)]}),_:2},1024),o(t(f),null,{default:s(()=>[d("div",null,[d("p",X,m(O(a)),1),x(a)?(c(),v(t(j),{key:0,variant:"outline",class:"text-xs mt-1"},{default:s(()=>[l(m(x(a)),1)]),_:2},1024)):N("",!0)])]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",ee,m(a.quantity_ordered||0),1)]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",te,m(a.quantity_approved||0),1)]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",re,m(a.quantity_commited||0),1)]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",se,m(a.quantity_received||0),1)]),_:2},1024),o(t(f),null,{default:s(()=>[d("span",oe,m((a.quantity_commited||0)-(a.quantity_received||0)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),d("div",ne,[d("div",ae,[d("span",de,"Total Quantity: "+m(L(b.value)),1)])])]),_:1})]),_:1}),o(t(C),null,{default:s(()=>[o(t(I),null,{default:s(()=>[o(t(M),null,{default:s(()=>e[11]||(e[11]=[l("Additional Information")])),_:1})]),_:1}),o(t(T),{class:"space-y-4"},{default:s(()=>[d("div",null,[e[12]||(e[12]=d("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Reason for Transfer",-1)),d("p",ie,m(Q.value),1)]),y.value&&y.value!=="No remarks"?(c(),q("div",le,[e[13]||(e[13]=d("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Remarks",-1)),d("p",ue,m(y.value),1)])):N("",!0)]),_:1})]),_:1}),o(Y,{transfer:p.order},null,8,["transfer"])])])])]),_:1})}}},Ie=E(me,[["__scopeId","data-v-62942d59"]]);export{Ie as default};
