import{u as U}from"./useSelectOptions-BcktnHf_.js";import{f as q,x as v,Q as x,N as I,l as T,r as o,o as m,c as C,w as l,a as t,u as B,i as Q,b as u,h as R,g as z,d as k,e as G,t as _,F as J,T as K}from"./app-Bw_fMWAP.js";import{l as M}from"./lodash-Cj3gZpb5.js";import{u as P}from"./useToast-CgNL_wIh.js";const W={class:"cursor-pointer"},ee={__name:"Index",props:{items:{type:Object,required:!0},branches:{type:Object,required:!0}},setup(i){q();const{toast:b}=P(),{options:S}=U(i.branches),d=v(x().props.filters.branchId||S.value[0].value);let s=v(x().props.filters.search);watch(d,n=>{r.value=[],I.get(route("soh-adjustment.index"),{branchId:n,search:s.value,page:1},{preserveScroll:!0,preserveState:!0,replace:!0})});const w=()=>{K({selectedItems:r.value,branchId:d.value}).post(route("soh-adjustment.approve-selected-items"),{onSuccess:e=>{b.add({severity:"success",summary:"Success",detail:"Approved Successfully.",life:5e3}),r.value=[]},onError:e=>{b.add({severity:"error",summary:"Error",detail:"An error occured while trying to approve.",life:5e3})}})};watch(s,M.throttle(function(n){I.get(route("soh-adjustment.index"),{search:n,branchId:d.value,page:1},{preserveScroll:!0,preserveState:!0,replace:!0})},500));const r=v([]),f=T(()=>i.items.map(n=>n.id)),y=T({get:()=>f.value.length>0&&r.value.length===f.value.length,set:n=>{r.value=n?[...f.value]:[]}});return(n,e)=>{const j=o("Input"),A=o("SearchBar"),N=o("Select"),g=o("Button"),V=o("DivFlexCenter"),h=o("Checkbox"),p=o("TH"),H=o("TableHead"),c=o("TD"),O=o("TableBody"),D=o("Table"),E=o("TableContainer"),F=o("Layout");return m(),C(F,{heading:"SOH Adjustments"},{default:l(()=>[t(E,null,{default:l(()=>[t(V,{class:"justify-between sm:flex-row flex-col gap-3"},{default:l(()=>[t(A,null,{default:l(()=>[t(j,{class:"pl-10",placeholder:"Search...",modelValue:B(s),"onUpdate:modelValue":e[0]||(e[0]=a=>Q(s)?s.value=a:s=a)},null,8,["modelValue"])]),_:1}),t(V,{class:"gap-3"},{default:l(()=>[t(N,{filter:"",class:"min-w-72",placeholder:"Select a Supplier",options:B(S),optionLabel:"label",optionValue:"value",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a)},null,8,["options","modelValue"]),r.value.length>0?(m(),C(g,{key:0,onClick:w},{default:l(()=>e[4]||(e[4]=[u("Approve All Selected Items")])),_:1})):R("",!0)]),_:1})]),_:1}),t(D,null,{default:l(()=>[t(H,null,{default:l(()=>[t(p,null,{default:l(()=>[z("div",W,[t(h,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=a=>y.value=a),binary:!0},null,8,["modelValue"])])]),_:1}),t(p,null,{default:l(()=>e[5]||(e[5]=[u("Name")])),_:1}),t(p,null,{default:l(()=>e[6]||(e[6]=[u("Code")])),_:1}),t(p,null,{default:l(()=>e[7]||(e[7]=[u("SOH Quantity")])),_:1}),t(p,null,{default:l(()=>e[8]||(e[8]=[u("Actions")])),_:1})]),_:1}),t(O,null,{default:l(()=>[(m(!0),k(J,null,G(i.items,a=>(m(),k("tr",null,[t(c,null,{default:l(()=>[t(h,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=L=>r.value=L),value:a.id,inputId:`item-${a.id}`},null,8,["modelValue","value","inputId"])]),_:2},1024),t(c,null,{default:l(()=>[u(_(a.product.name),1)]),_:2},1024),t(c,null,{default:l(()=>[u(_(a.product.inventory_code),1)]),_:2},1024),t(c,null,{default:l(()=>[u(_(a.quantity),1)]),_:2},1024),t(c,null,{default:l(()=>[t(g,{variant:"link",class:"text-green-500 p-0"},{default:l(()=>e[9]||(e[9]=[u("Approve")])),_:1})]),_:1})]))),256))]),_:1})]),_:1})]),_:1})]),_:1})}}};export{ee as default};
