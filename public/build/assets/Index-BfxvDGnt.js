import{u as J}from"./useSearch-rBw-Wc-C.js";import{x as K,Q as W,y as X,N as D,l as Y,r,o as _,c as w,w as n,a as e,n as p,b as a,t as i,u as v,i as Z,h as F,d as y,e as A,E as I,F as R,g as o}from"./app-p8ycGfai.js";import V from"./TransferStatusBadge-Cy3bUJcI.js";import{u as tt}from"./useAuth-CsB0rIGq.js";import"./lodash-Z9yJD-f9.js";import"./TooltipTrigger-Cad37LXI.js";import"./VisuallyHidden-Bjfqgrx1.js";import"./clock-DPi-gFdQ.js";import"./circle-x-BrjzfYpA.js";import"./package-WwDcP9-w.js";const et={class:"flex items-center justify-between"},nt={class:"flex items-center gap-2"},st={class:"font-semibold text-sm"},lt={class:"flex gap-1"},ot={class:"grid grid-cols-2 gap-3 text-sm"},at={class:"font-medium"},rt={class:"font-medium"},it={class:"grid grid-cols-2 gap-3 text-sm"},ut={class:"font-medium"},dt={class:"font-medium"},mt={class:"flex items-center justify-between text-sm"},ct={class:"font-medium"},St={__name:"Index",props:{orders:{type:Object,required:!0},counts:{type:Object,required:!0}},setup(f){let b=K(W().props.filters.currentFilter||"all");const{search:g}=J("interco-receiving.index");X([b,g],([l,t])=>{D.get(route("interco-receiving.index"),{currentFilter:l,search:t},{preserveState:!0,replace:!0})});const T=l=>{b.value=l},x=l=>b.value===l?"bg-primary text-white":"",S=l=>{D.get(`/interco-receiving/show/${l}`)},{hasAccess:k}=tt(),E=Y(()=>route("interco-receiving.export",{search:g.value,currentFilter:b.value})),C=l=>{var t,u,d;return l.from_store_name||((t=l.sendingStore)==null?void 0:t.name)||((u=l.sendingStore)==null?void 0:u.branch_name)||((d=l.sendingStore)==null?void 0:d.brand_name)||"Unknown Sending Store"},h=l=>{var t,u;return l.to_store_name||((t=l.store_branch)==null?void 0:t.name)||((u=l.store_branch)==null?void 0:u.branch_name)||"Unknown Receiving Store"},B=l=>!l||!Array.isArray(l)?0:l.reduce((t,u)=>t+(Number(u.quantity_ordered)||0),0),N=l=>l?new Date(l).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(l,t)=>{const u=r("Badge"),d=r("Button"),H=r("FilterTab"),$=r("Input"),L=r("SearchBar"),j=r("TableHeader"),m=r("TH"),Q=r("TableHead"),c=r("TD"),q=r("TableBody"),P=r("Table"),U=r("MobileTableContainer"),z=r("Pagination"),M=r("TableContainer"),O=r("Layout");return _(),w(O,{heading:"Interco Receiving",hasExcelDownload:!0,exportRoute:E.value},{default:n(()=>[e(H,null,{default:n(()=>[e(d,{class:p(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("all")]),onClick:t[0]||(t[0]=s=>T("all"))},{default:n(()=>[t[4]||(t[4]=a("ALL ")),e(u,{class:p(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("all")])},{default:n(()=>[a(i(f.counts.all),1)]),_:1},8,["class"])]),_:1},8,["class"]),e(d,{class:p(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("received")]),onClick:t[1]||(t[1]=s=>T("received"))},{default:n(()=>[t[5]||(t[5]=a("RECEIVED ")),e(u,{class:p(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("received")])},{default:n(()=>[a(i(f.counts.received),1)]),_:1},8,["class"])]),_:1},8,["class"]),e(d,{class:p(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("in_transit")]),onClick:t[2]||(t[2]=s=>T("in_transit"))},{default:n(()=>[t[6]||(t[6]=a("IN TRANSIT ")),e(u,{class:p(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("in_transit")])},{default:n(()=>[a(i(f.counts.in_transit),1)]),_:1},8,["class"])]),_:1},8,["class"])]),_:1}),e(M,null,{default:n(()=>[e(j,null,{default:n(()=>[e(L,null,{default:n(()=>[e($,{class:"pl-10",modelValue:v(g),"onUpdate:modelValue":t[3]||(t[3]=s=>Z(g)?g.value=s:null),placeholder:"Search..."},null,8,["modelValue"])]),_:1})]),_:1}),e(P,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(m,null,{default:n(()=>t[7]||(t[7]=[a("Transfer #")])),_:1}),e(m,null,{default:n(()=>t[8]||(t[8]=[a("From Store")])),_:1}),e(m,null,{default:n(()=>t[9]||(t[9]=[a("To Store")])),_:1}),e(m,null,{default:n(()=>t[10]||(t[10]=[a("Items")])),_:1}),e(m,null,{default:n(()=>t[11]||(t[11]=[a("Quantity")])),_:1}),e(m,null,{default:n(()=>t[12]||(t[12]=[a("Status")])),_:1}),e(m,null,{default:n(()=>t[13]||(t[13]=[a("Date")])),_:1}),v(k)("view interco receiving")?(_(),w(m,{key:0},{default:n(()=>t[14]||(t[14]=[a("Actions")])),_:1})):F("",!0)]),_:1}),e(q,null,{default:n(()=>[(_(!0),y(R,null,A(f.orders.data,s=>(_(),y("tr",{key:s.id},[e(c,null,{default:n(()=>[a(i(s.interco_number),1)]),_:2},1024),e(c,null,{default:n(()=>[a(i(C(s)),1)]),_:2},1024),e(c,null,{default:n(()=>[a(i(h(s)),1)]),_:2},1024),e(c,null,{default:n(()=>[a(i(s.store_order_items?s.store_order_items.length:0),1)]),_:2},1024),e(c,null,{default:n(()=>[a(i(B(s.store_order_items)),1)]),_:2},1024),e(c,null,{default:n(()=>[e(V,{status:s.interco_status},null,8,["status"])]),_:2},1024),e(c,null,{default:n(()=>[a(i(N(s.order_date)),1)]),_:2},1024),e(c,null,{default:n(()=>[v(k)("view interco receiving")?(_(),w(d,{key:0,variant:"outline",onClick:G=>S(s.interco_number)},{default:n(()=>[e(v(I))]),_:2},1032,["onClick"])):F("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(U,null,{default:n(()=>[(_(!0),y(R,null,A(f.orders.data,s=>(_(),y("div",{key:s.id,class:"border-b last:border-b-0 p-4 space-y-3"},[o("div",et,[o("div",nt,[o("span",st,i(s.interco_number),1),e(V,{status:s.interco_status},null,8,["status"])]),o("div",lt,[e(d,{variant:"ghost",size:"sm",onClick:G=>S(s.interco_number)},{default:n(()=>[e(v(I),{class:"w-4 h-4"})]),_:2},1032,["onClick"])])]),o("div",ot,[o("div",null,[t[15]||(t[15]=o("span",{class:"text-muted-foreground text-xs"},"From:",-1)),o("div",at,i(C(s)),1)]),o("div",null,[t[16]||(t[16]=o("span",{class:"text-muted-foreground text-xs"},"To:",-1)),o("div",rt,i(h(s)),1)])]),o("div",it,[o("div",null,[t[17]||(t[17]=o("span",{class:"text-muted-foreground text-xs"},"Items:",-1)),o("div",ut,i(s.store_order_items?s.store_order_items.length:0),1)]),o("div",null,[t[18]||(t[18]=o("span",{class:"text-muted-foreground text-xs"},"Quantity:",-1)),o("div",dt,i(B(s.store_order_items)),1)])]),o("div",mt,[o("div",null,[t[19]||(t[19]=o("span",{class:"text-muted-foreground text-xs"},"Date:",-1)),o("div",ct,i(N(s.order_date)),1)])])]))),128))]),_:1}),e(z,{data:f.orders},null,8,["data"])]),_:1})]),_:1},8,["exportRoute"])}}};export{St as default};
