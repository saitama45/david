import{f as Q,x as y,Q as D,y as K,N as F,l as W,r as n,o as s,c as f,w as e,a as t,n as m,b as r,t as o,d as g,e as S,F as C,u as v,i as Y,E as Z,h as O}from"./app-rjK1ng7o.js";import{u as ee}from"./useToast-DBCD-RTl.js";import{l as te}from"./lodash-DqVvdaAw.js";import{u as le}from"./useAuth-DN4uYPJg.js";const ue={__name:"Index",props:{orders:{type:Object,required:!0},counts:{type:Object,required:!0},assignedSuppliers:{type:Array,default:()=>[]}},setup(c){Q(),ee();let b=y(D().props.filters.currentSupplierFilter||"all"),N=y("approved"),_=y(D().props.filters.search);K([b,_],te.throttle(([u,a])=>{F.get(route("cs-approvals.index"),{currentSupplierFilter:u,search:a},{preserveState:!0,replace:!0})},500));const h=u=>{b.value=u},x=u=>b.value===u?"bg-primary text-white":"",R=W(()=>route("cs-approvals.export",{search:_.value,currentSupplierFilter:b.value,currentStatusFilter:N.value})),A=u=>{switch(u.toUpperCase()){case"APPROVED":return"bg-green-500 text-white";case"RECEIVED":return"bg-green-500 text-white";case"PENDING":return"bg-yellow-500 text-white";case"COMMITTED":return"bg-blue-500 text-white";case"REJECTED":return"bg-red-400 text-white";default:return"bg-yellow-500 text-white"}},k=u=>{F.get(`/cs-approvals/show/${u}`)},{hasAccess:B}=le();return(u,a)=>{const w=n("Badge"),T=n("Button"),H=n("FilterTab"),L=n("Input"),M=n("SearchBar"),V=n("TableHeader"),d=n("TH"),I=n("TableHead"),i=n("TD"),P=n("TableBody"),$=n("Table"),q=n("ShowButton"),U=n("MobileTableHeading"),E=n("LabelXS"),j=n("MobileTableRow"),X=n("MobileTableContainer"),z=n("Pagination"),G=n("TableContainer"),J=n("Layout");return s(),f(J,{heading:"CS Review List",hasExcelDownload:!0,exportRoute:R.value},{default:e(()=>[t(H,null,{default:e(()=>[t(T,{class:m(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x("all")]),onClick:a[0]||(a[0]=l=>h("all"))},{default:e(()=>[a[2]||(a[2]=r(" ALL ")),t(w,{class:m(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x("all")])},{default:e(()=>[r(o(c.counts.all_approved),1)]),_:1},8,["class"])]),_:1},8,["class"]),(s(!0),g(C,null,S(c.assignedSuppliers,l=>(s(),f(T,{key:l.value,class:m(["sm:px-10 px-3 bg-white/10 text-gray-800 hover:text-white gap-5 sm:text-sm text-xs",x(l.value)]),onClick:p=>h(l.value)},{default:e(()=>[r(o(l.label)+" ",1),t(w,{class:m(["sm:flex hidden border border-gray bg-transparent text-gray-900 px-2",x(l.value)])},{default:e(()=>[r(o(c.counts[`${l.value}_approved`]||0),1)]),_:2},1032,["class"])]),_:2},1032,["class","onClick"]))),128))]),_:1}),t(G,null,{default:e(()=>[t(V,null,{default:e(()=>[t(M,null,{default:e(()=>[t(L,{class:"pl-10",modelValue:v(_),"onUpdate:modelValue":a[1]||(a[1]=l=>Y(_)?_.value=l:_=l),placeholder:"Order Number Search"},null,8,["modelValue"])]),_:1})]),_:1}),t($,null,{default:e(()=>[t(I,null,{default:e(()=>[t(d,null,{default:e(()=>a[3]||(a[3]=[r("Id")])),_:1}),t(d,null,{default:e(()=>a[4]||(a[4]=[r("Supplier")])),_:1}),t(d,null,{default:e(()=>a[5]||(a[5]=[r("Store")])),_:1}),t(d,null,{default:e(()=>a[6]||(a[6]=[r("Order #")])),_:1}),t(d,null,{default:e(()=>a[7]||(a[7]=[r("Order Date")])),_:1}),t(d,null,{default:e(()=>a[8]||(a[8]=[r("Order Placed Date")])),_:1}),t(d,null,{default:e(()=>a[9]||(a[9]=[r("Order Status")])),_:1}),t(d,null,{default:e(()=>a[10]||(a[10]=[r("Actions")])),_:1})]),_:1}),t(P,null,{default:e(()=>[(s(!0),g(C,null,S(c.orders.data,l=>(s(),g("tr",{key:l.id},[t(i,null,{default:e(()=>[r(o(l.id),1)]),_:2},1024),t(i,null,{default:e(()=>{var p;return[r(o(((p=l.supplier)==null?void 0:p.name)??"N/A"),1)]}),_:2},1024),t(i,null,{default:e(()=>{var p;return[r(o(((p=l.store_branch)==null?void 0:p.name)??"N/A"),1)]}),_:2},1024),t(i,null,{default:e(()=>[r(o(l.order_number),1)]),_:2},1024),t(i,null,{default:e(()=>[r(o(l.order_date),1)]),_:2},1024),t(i,null,{default:e(()=>[r(o(l.created_at),1)]),_:2},1024),t(i,null,{default:e(()=>[t(w,{class:m([A(l.order_status),"font-bold"])},{default:e(()=>[r(o(l.order_status.toUpperCase()),1)]),_:2},1032,["class"])]),_:2},1024),t(i,{class:"flex"},{default:e(()=>[v(B)("view order for cs approval")?(s(),f(T,{key:0,onClick:p=>k(l.order_number),variant:"link"},{default:e(()=>[t(v(Z))]),_:2},1032,["onClick"])):O("",!0)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(X,null,{default:e(()=>[(s(!0),g(C,null,S(c.orders.data,l=>(s(),f(j,{key:l.id},{default:e(()=>[t(U,{title:l.order_number},{default:e(()=>[v(B)("view order for cs approval")?(s(),f(q,{key:0,onClick:p=>k(l.order_number)},null,8,["onClick"])):O("",!0)]),_:2},1032,["title"]),t(E,null,{default:e(()=>[r("Order Status: "+o(l.order_request_status),1)]),_:2},1024),t(E,null,{default:e(()=>[r("Order Date: "+o(l.order_date),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(z,{data:c.orders},null,8,["data"])]),_:1})]),_:1},8,["exportRoute"])}}};export{ue as default};
