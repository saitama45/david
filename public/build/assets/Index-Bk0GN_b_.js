import{r as o,o as l,c as r,w as e,a as t,u as s,i as O,b as u,h as c,d as p,e as b,bm as k,t as m,g as D,F as f,N as G}from"./app-rjK1ng7o.js";import{u as J}from"./useSearch-CHd_X8p0.js";import{u as K}from"./useAuth-DN4uYPJg.js";import{u as Q}from"./useReferenceDelete-DQBdt7a9.js";import"./lodash-DqVvdaAw.js";const W={class:"h-full"},Y={class:"flex flex-wrap gap-2"},Z={class:"flex flex-wrap gap-1"},se={__name:"Index",props:{roles:{type:Object,required:!0}},setup(w){const N=()=>{G.get(route("roles.create"))},{search:h}=J("roles.index"),{hasAccess:d}=K(),{deleteModel:T}=Q(),L=computed(()=>route("roles.export",{search:h.value}));return(_,a)=>{const P=o("Input"),S=o("SearchBar"),H=o("TableHeader"),g=o("TH"),V=o("TableHead"),F=o("DivFlexCenter"),B=o("Badge"),E=o("PopoverTrigger"),I=o("PopoverContent"),$=o("Popover"),x=o("ShowButton"),y=o("EditButton"),v=o("DeleteButton"),A=o("TableBody"),M=o("Table"),j=o("MobileTableHeading"),R=o("LabelXS"),C=o("DivFlexCol"),U=o("Pagination"),X=o("TableContainer"),q=o("Layout");return l(),r(q,{heading:"Roles",hasButton:s(d)("create roles"),buttonName:"Create New Role",handleClick:N,hasExcelDownload:!0,exportRoute:s(L)},{default:e(()=>[t(X,null,{default:e(()=>[t(H,null,{default:e(()=>[t(S,null,{default:e(()=>[t(P,{class:"pl-10",modelValue:s(h),"onUpdate:modelValue":a[0]||(a[0]=n=>O(h)?h.value=n:null),placeholder:"Search..."},null,8,["modelValue"])]),_:1})]),_:1}),t(M,{class:"sm:table hidden"},{default:e(()=>[t(V,null,{default:e(()=>[t(g,null,{default:e(()=>a[1]||(a[1]=[u("Id")])),_:1}),t(g,null,{default:e(()=>a[2]||(a[2]=[u("Name")])),_:1}),t(g,null,{default:e(()=>a[3]||(a[3]=[u("Permissions")])),_:1}),s(d)("edit roles")||s(d)("show roles")?(l(),r(g,{key:0},{default:e(()=>a[4]||(a[4]=[u("Actions")])),_:1})):c("",!0)]),_:1}),t(A,null,{default:e(()=>[(l(!0),p(f,null,b(w.roles.data,n=>(l(),p("tr",W,[t(k,null,{default:e(()=>[t(F,{class:"h-full"},{default:e(()=>[u(m(n.id),1)]),_:2},1024)]),_:2},1024),t(k,null,{default:e(()=>[u(m(n.name),1)]),_:2},1024),t(k,null,{default:e(()=>[D("section",Y,[(l(!0),p(f,null,b(n.permissions,(i,z)=>(l(),p(f,null,[z<3?(l(),r(B,{key:i.id,class:"w-fit"},{default:e(()=>[u(m(i.name),1)]),_:2},1024)):c("",!0)],64))),256)),n.permissions.length>3?(l(),r($,{key:0},{default:e(()=>[t(E,null,{default:e(()=>[t(B,{class:"w-fit cursor-pointer"},{default:e(()=>[u(" +"+m(n.permissions.length-3)+" more ",1)]),_:2},1024)]),_:2},1024),t(I,{class:"w-80 p-2"},{default:e(()=>[D("div",Z,[(l(!0),p(f,null,b(n.permissions,i=>(l(),r(B,{key:i.id,class:"w-fit"},{default:e(()=>[u(m(i.name),1)]),_:2},1024))),128))])]),_:2},1024)]),_:2},1024)):c("",!0)])]),_:2},1024),s(d)("edit roles")||s(d)("show roles")?(l(),r(k,{key:0,class:"items-center flex"},{default:e(()=>[s(d)("show roles")?(l(),r(x,{key:0,isLink:!0,href:_.route("roles.show",n.id)},null,8,["href"])):c("",!0),s(d)("edit roles")?(l(),r(y,{key:1,isLink:!0,href:_.route("roles.edit",n.id)},null,8,["href"])):c("",!0),t(v,{onClick:i=>s(T)(_.route("roles.destroy",n.id),"Role")},null,8,["onClick"])]),_:2},1024)):c("",!0)]))),256))]),_:1})]),_:1}),t(C,{class:"sm:hidden gap-3"},{default:e(()=>[t(C,{class:"sm:hidden gap-3"},{default:e(()=>[(l(!0),p(f,null,b(w.roles.data,n=>(l(),r(C,{class:"rounded-lg border min-h-20 p-3"},{default:e(()=>[t(j,{title:n.name.toUpperCase()},{default:e(()=>[s(d)("show roles")?(l(),r(x,{key:0,isLink:!0,href:_.route("roles.show",n.id)},null,8,["href"])):c("",!0),s(d)("edit roles")?(l(),r(y,{key:1,class:"size-5",isLink:!0,href:`/roles/edit/${n.id}`},null,8,["href"])):c("",!0),t(v,{onClick:i=>s(T)(_.route("roles.destroy",n.id),"Role")},null,8,["onClick"])]),_:2},1032,["title"]),t(R,{class:"text-[10px]"},{default:e(()=>a[5]||(a[5]=[u("Roles")])),_:1}),t(R,null,{default:e(()=>[u(m(n.permissions.slice(0,3).map(i=>i.name).join(", ")+(n.permissions.length>3?` and ${n.permissions.length-3} more`:"")),1)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),t(U,{data:w.roles},null,8,["data"])]),_:1})]),_:1},8,["hasButton","exportRoute"])}}};export{se as default};
