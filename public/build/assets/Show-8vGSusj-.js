import{l as S,r as u,o as _,c as C,w as n,a as t,b as o,d as y,e as h,t as s,n as T,F as B,g as A}from"./app-Drfr7wPO.js";const q=["href"],F={key:1},I=["href"],E={key:1},$={__name:"Show",props:{branches:{type:Object,required:!0},history:{type:Object,required:!0}},setup(f){console.log("StockManagement Show Vue - History Data:",f.history);const d=r=>r==="add"||r==="add_quantity"?"IN":r==="out"||r==="deduct"||r==="log_usage"?"OUT":r==="initial_balance"||r==="BEG BAL"?"BEG BAL":r.replace(/_/g," ").toUpperCase(),c=(r,l=2,i=10)=>{if(r==null||isNaN(r))return"N/a";const b=parseFloat(r);if(isNaN(b))return"N/a";let a=b.toFixed(i);a=a.replace(/\.?0+$/,"");const g=a.split(".");return!g[1]||g[1].length<l?b.toFixed(l):a},k=r=>{if(!r)return"N/a";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(l){return console.error("Error formatting date:",r,l),r}},x=S(()=>{if(f.history.data&&f.history.data.length>0&&f.history.data[0].sap_masterfile){const r=f.history.data[0].sap_masterfile.ItemDescription,l=f.history.data[0].sap_masterfile.AltUOM;return`${r} with AltUOM: ${l}`}return"Stock Details"});return(r,l)=>{const i=u("TH"),b=u("TableHead"),a=u("TD"),g=u("TableBody"),D=u("Table"),O=u("MobileTableHeading"),m=u("LabelXS"),U=u("MobileTableRow"),w=u("MobileTableContainer"),H=u("Pagination"),M=u("TableContainer"),L=u("BackButton"),R=u("Layout");return _(),C(R,{heading:x.value},{default:n(()=>[t(M,null,{default:n(()=>[t(D,null,{default:n(()=>[t(b,null,{default:n(()=>[t(i,null,{default:n(()=>l[0]||(l[0]=[o("Id")])),_:1}),t(i,null,{default:n(()=>l[1]||(l[1]=[o("Ref No.")])),_:1}),t(i,null,{default:n(()=>l[2]||(l[2]=[o("Quantity Change")])),_:1}),t(i,null,{default:n(()=>l[3]||(l[3]=[o("Action")])),_:1}),t(i,null,{default:n(()=>l[4]||(l[4]=[o("Cost Center")])),_:1}),t(i,null,{default:n(()=>l[5]||(l[5]=[o("Unit Cost")])),_:1}),t(i,null,{default:n(()=>l[6]||(l[6]=[o("Total Cost")])),_:1}),t(i,null,{default:n(()=>l[7]||(l[7]=[o("Transaction Date")])),_:1}),t(i,null,{default:n(()=>l[8]||(l[8]=[o("Running SOH")])),_:1}),t(i,null,{default:n(()=>l[9]||(l[9]=[o("Remarks")])),_:1})]),_:1}),t(g,null,{default:n(()=>[(_(!0),y(B,null,h(f.history.data,(e,N)=>(_(),y("tr",{key:e.id},[t(a,null,{default:n(()=>[o(s(e.id),1)]),_:2},1024),t(a,null,{default:n(()=>[e.is_link_ref&&e.display_ref_no!=="N/a"?(_(),y("a",{key:0,href:r.route("store-orders.show",e.display_ref_no),target:"_blank",class:"text-blue-600 hover:underline"},s(e.display_ref_no),9,q)):(_(),y("span",F,s(e.display_ref_no??"N/a"),1))]),_:2},1024),t(a,{class:T({"text-red-500":d(e.action)==="OUT","text-green-500":d(e.action)==="IN"})},{default:n(()=>[o(s(d(e.action)==="OUT"?"-":"+")+s(c(e.quantity,2,10)),1)]),_:2},1032,["class"]),t(a,null,{default:n(()=>[o(s(d(e.action)),1)]),_:2},1024),t(a,null,{default:n(()=>{var p;return[o(s(((p=e.cost_center)==null?void 0:p.name)??"N/a"),1)]}),_:2},1024),t(a,null,{default:n(()=>[o(s(c(e.unit_cost,2,4)),1)]),_:2},1024),t(a,null,{default:n(()=>[o(s(c(e.total_cost,2,4)),1)]),_:2},1024),t(a,null,{default:n(()=>[o(s(k(e.transaction_date)),1)]),_:2},1024),t(a,{class:T({"font-bold text-green-600":N===0})},{default:n(()=>[o(s(c(e.running_soh,2,10)),1)]),_:2},1032,["class"]),t(a,null,{default:n(()=>[o(s(e.remarks??"None"),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),t(w,null,{default:n(()=>[(_(!0),y(B,null,h(f.history.data,(e,N)=>(_(),C(U,{key:e.id},{default:n(()=>[t(O,{title:`${d(e.action)}`},null,8,["title"]),t(m,null,{default:n(()=>[l[10]||(l[10]=o("Ref No.: ")),e.is_link_ref&&e.display_ref_no!=="N/a"?(_(),y("a",{key:0,href:r.route("store-orders.show",e.display_ref_no),target:"_blank",class:"text-blue-600 hover:underline"},s(e.display_ref_no),9,I)):(_(),y("span",E,s(e.display_ref_no??"N/a"),1))]),_:2},1024),t(m,null,{default:n(()=>[l[11]||(l[11]=o("Quantity Change: ")),A("span",{class:T({"text-red-500":d(e.action)==="OUT","text-green-500":d(e.action)==="IN"})},s(d(e.action)==="OUT"?"-":"+")+s(c(e.quantity,2,10)),3)]),_:2},1024),t(m,{class:T({"font-bold text-green-600":N===0})},{default:n(()=>[o("Running SOH: "+s(c(e.running_soh,2,10)),1)]),_:2},1032,["class"]),t(m,null,{default:n(()=>{var p;return[o("Cost Center: "+s(((p=e.cost_center)==null?void 0:p.name)??"N/a"),1)]}),_:2},1024),t(m,null,{default:n(()=>[o("Unit Cost: "+s(c(e.unit_cost,2,4)),1)]),_:2},1024),t(m,null,{default:n(()=>[o("Total Cost: "+s(c(e.total_cost,2,4)),1)]),_:2},1024),t(m,null,{default:n(()=>[o("Transaction Date: "+s(k(e.transaction_date)),1)]),_:2},1024),t(m,null,{default:n(()=>[o("Remarks: "+s(e.remarks??"None"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(H,{data:f.history},null,8,["data"])]),_:1}),t(L,{routeName:"stock-management.index"})]),_:1},8,["heading"])}}};export{$ as default};
