import{u as ue}from"./useBackButton-CVjDC3AL.js";import{G as ie,f as de,T as M,r as a,o as s,c as C,w as t,a as e,u as r,b as n,h as R,d as y,e as A,i as w,t as d,F as V,g as ce,N as pe}from"./app-Bw_fMWAP.js";const me=["src","onClick"],ve=["src"],ye={__name:"Show",props:{order:{type:Object,required:!0},items:{type:Object,required:!0},images:{type:Object,required:!0}},setup(m){const{backButton:U}=ue(route("receiving-approvals.index")),g=ie(),k=de(),O=m,c=ref([]),v=M({id:null}),X=()=>{v.id=[],v.id=O.items.map(u=>u.id),k.require({message:"Are you sure you want to approve all the items status?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{v.post(route("receiving-approvals.approve-received-item"),{onSuccess:()=>{g.add({severity:"success",summary:"Success",detail:"Received Items Status Approved Successfully.",life:3e3})}})}})},z=()=>{v.id=c.value,k.require({message:"Are you sure you want to approve the selected items status?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{v.post(route("receiving-approvals.approve-received-item"),{onSuccess:()=>{g.add({severity:"success",summary:"Success",detail:"Received Item Status Approved Successfully.",life:3e3})}})}})},B=u=>{v.id=u,k.require({message:"Are you sure you want to approve this received item status?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{v.post(route("receiving-approvals.approve-received-item"),{onSuccess:()=>{g.add({severity:"success",summary:"Success",detail:"Received Item Status Approved Successfully.",life:3e3})}})}})},b=M({id:null,remarks:null}),x=ref(!1),j=u=>{b.id=u,x.value=!0},G=()=>{b.post(route("receiving-approvals.decline-received-item"),{onSuccess:()=>{g.add({severity:"success",summary:"Success",detail:"Received Item Status Declined.",life:3e3})}})},I=ref(null),D=ref(!1),Q=u=>{I.value=u,D.value=!0},J=()=>{k.require({message:"Are you sure you want to approve this image?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{pe.post(route("approveImage",I.value.id),{},{onSuccess:()=>{g.add({severity:"success",summary:"Success",detail:"Image approved successfully.",life:5e3}),isLoading.value=!1},onError:u=>{isLoading.value=!1,console.log(u)}})}})};return(u,l)=>{const i=a("Button"),K=a("TableHeader"),f=a("TH"),W=a("TableHead"),F=a("Checkbox"),_=a("TD"),Y=a("TableBody"),Z=a("Table"),q=a("SpanBold"),S=a("DivFlexCenter"),T=a("LabelXS"),h=a("MobileTableRow"),ee=a("MobileTableContainer"),te=a("TableContainer"),$=a("InputContainer"),le=a("Card"),P=a("DialogTitle"),H=a("DialogDescription"),N=a("DialogHeader"),L=a("DialogContent"),E=a("Dialog"),oe=a("Textarea"),ne=a("FormError"),ae=a("DivFlexCol"),se=a("DialogFooter"),re=a("Layout");return s(),C(re,{heading:`Order Number ${m.order.order_number}`},{default:t(()=>[m.items.length>0?(s(),C(te,{key:0},{default:t(()=>[e(K,{class:"justify-between"},{default:t(()=>[r(c).length>0?(s(),C(i,{key:0,onClick:z,variant:"outline"},{default:t(()=>l[5]||(l[5]=[n("Approve Selected Items")])),_:1})):R("",!0),e(i,{class:"bg-green-500",onClick:X},{default:t(()=>l[6]||(l[6]=[n("Approve All")])),_:1})]),_:1}),e(Z,null,{default:t(()=>[e(W,null,{default:t(()=>[e(f),e(f,null,{default:t(()=>l[7]||(l[7]=[n("Item")])),_:1}),e(f,null,{default:t(()=>l[8]||(l[8]=[n("Inventory Code")])),_:1}),e(f,null,{default:t(()=>l[9]||(l[9]=[n("Received Date")])),_:1}),e(f,null,{default:t(()=>l[10]||(l[10]=[n("Quantity Received")])),_:1}),e(f,null,{default:t(()=>l[11]||(l[11]=[n("Status?")])),_:1}),e(f,null,{default:t(()=>l[12]||(l[12]=[n("Actions")])),_:1})]),_:1}),e(Y,null,{default:t(()=>[(s(!0),y(V,null,A(m.items,o=>(s(),y("tr",{key:o.id},[e(_,null,{default:t(()=>[e(F,{modelValue:r(c),"onUpdate:modelValue":l[0]||(l[0]=p=>w(c)?c.value=p:null),value:o.id,inputId:`item-${o.id}`},null,8,["modelValue","value","inputId"])]),_:2},1024),e(_,null,{default:t(()=>[n(d(o.store_order_item.product_inventory.name),1)]),_:2},1024),e(_,null,{default:t(()=>[n(d(o.store_order_item.product_inventory.inventory_code),1)]),_:2},1024),e(_,null,{default:t(()=>[n(d(o.received_date),1)]),_:2},1024),e(_,null,{default:t(()=>[n(d(o.quantity_received),1)]),_:2},1024),e(_,null,{default:t(()=>[n(d(o.status),1)]),_:2},1024),e(_,null,{default:t(()=>[e(i,{onClick:p=>B(o.id),variant:"link",class:"text-green-500 p-0 mr-3"},{default:t(()=>l[13]||(l[13]=[n(" Approve ")])),_:2},1032,["onClick"]),e(i,{onClick:p=>j(o.id),variant:"link",class:"text-red-500 p-0 mr-3"},{default:t(()=>l[14]||(l[14]=[n(" Decline ")])),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1})]),_:1}),e(ee,null,{default:t(()=>[(s(!0),y(V,null,A(m.items,o=>(s(),C(h,{key:o.id},{default:t(()=>[e(S,{class:"justify-between"},{default:t(()=>[e(S,{class:"gap-3"},{default:t(()=>[e(F,{modelValue:r(c),"onUpdate:modelValue":l[1]||(l[1]=p=>w(c)?c.value=p:null),value:o.id,inputId:`item-${o.id}`},null,8,["modelValue","value","inputId"]),e(q,{class:"text-xs"},{default:t(()=>[n(d(`${o.store_order_item.product_inventory.name} (${o.store_order_item.product_inventory.inventory_code})`),1)]),_:2},1024)]),_:2},1024),e(S,null,{default:t(()=>[e(i,{onClick:p=>B(o.id),variant:"link",class:"text-green-500 text-xs p-0 mr-3"},{default:t(()=>l[15]||(l[15]=[n(" Approve ")])),_:2},1032,["onClick"]),e(i,{onClick:p=>j(o.id),variant:"link",class:"text-red-500 text-xs p-0 mr-3"},{default:t(()=>l[16]||(l[16]=[n(" Decline ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),e(T,null,{default:t(()=>[n("Received: "+d(o.quantity_received),1)]),_:2},1024),e(T,null,{default:t(()=>[n("Status: "+d(o.status.toUpperCase()),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):R("",!0),e(le,{class:"p-5"},{default:t(()=>[e($,{class:"col-span-4"},{default:t(()=>[e(T,null,{default:t(()=>l[17]||(l[17]=[n("Image Attachments: ")])),_:1}),e(S,{class:"gap-4 overflow-auto overflow-x-auto scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-gray-300 hover:scrollbar-thumb-gray-400"},{default:t(()=>[(s(!0),y(V,null,A(m.images,o=>(s(),y("div",{key:o.id,class:"relative"},[ce("img",{src:o.image_url,class:"size-24 cursor-pointer hover:opacity-80 transition-opacity",onClick:p=>Q(o)},null,8,me)]))),128))]),_:1}),m.images.length<1?(s(),C(q,{key:0},{default:t(()=>l[18]||(l[18]=[n("None")])),_:1})):R("",!0)]),_:1})]),_:1}),e(i,{variant:"outline",class:"text-lg px-7",onClick:r(U)},{default:t(()=>l[19]||(l[19]=[n(" Back ")])),_:1},8,["onClick"]),e(E,{open:r(D),"onUpdate:open":l[2]||(l[2]=o=>w(D)?D.value=o:null)},{default:t(()=>[e(L,{class:"sm:max-w-[90vw] h-[90vh] p-0 flex flex-col items-center justify-center"},{default:t(()=>[e(N,null,{default:t(()=>[e(P),e(H)]),_:1}),e(i,{onClick:J},{default:t(()=>l[20]||(l[20]=[n("Approve Image")])),_:1}),r(I)?(s(),y("img",{key:0,src:r(I).image_url,class:"max-h-full max-w-full object-contain",alt:"Enlarged image"},null,8,ve)):R("",!0)]),_:1})]),_:1},8,["open"]),e(E,{open:r(x),"onUpdate:open":l[4]||(l[4]=o=>w(x)?x.value=o:null)},{default:t(()=>[e(L,{class:"sm:max-w-[600px]"},{default:t(()=>[e(N,null,{default:t(()=>[e(P,null,{default:t(()=>l[21]||(l[21]=[n("Decline Request")])),_:1}),e(H,null,{default:t(()=>l[22]||(l[22]=[n(" Please input all the required fields. ")])),_:1})]),_:1}),e(ae,{class:"gap-3"},{default:t(()=>[e($,null,{default:t(()=>[e(T,null,{default:t(()=>l[23]||(l[23]=[n("Remarks")])),_:1}),e(oe,{type:"number",modelValue:r(b).remarks,"onUpdate:modelValue":l[3]||(l[3]=o=>r(b).remarks=o)},null,8,["modelValue"]),e(ne,null,{default:t(()=>[n(d(r(b).errors.remarks),1)]),_:1})]),_:1})]),_:1}),e(se,{class:"justify-end"},{default:t(()=>[e(i,{onClick:G},{default:t(()=>l[24]||(l[24]=[n("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["heading"])}}};export{ye as default};
