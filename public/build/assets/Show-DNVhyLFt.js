import{K as Ae,L as Ie,G as je,f as Pe,x as N,T as ue,y as Ze,l as Qe,r as v,o as i,c as V,w as t,a as e,b as n,t as r,h as L,d as U,e as K,u as s,F as W,g as F,X as Xe,E as Ge,n as Ke,m as We,bz as Je,N as he}from"./app-DPA7xop8.js";import{d as ee}from"./dayjs.min-DTOT_ujl.js";import{u as et}from"./useBackButton-DP22MaRs.js";var Ee={exports:{}};(function(p,w){(function(Q,X){p.exports=X()})(Ae,function(){var Q="minute",X=/[+-]\d\d(?::?\d\d)?/g,I=/([+-]|\d\d)/g;return function(me,S,j){var k=S.prototype;j.utc=function(a){var _={date:a,utc:!0,args:arguments};return new S(_)},k.utc=function(a){var _=j(this.toDate(),{locale:this.$L,utc:!0});return a?_.add(this.utcOffset(),Q):_},k.local=function(){return j(this.toDate(),{locale:this.$L,utc:!1})};var te=k.parse;k.parse=function(a){a.utc&&(this.$u=!0),this.$utils().u(a.$offset)||(this.$offset=a.$offset),te.call(this,a)};var M=k.init;k.init=function(){if(this.$u){var a=this.$d;this.$y=a.getUTCFullYear(),this.$M=a.getUTCMonth(),this.$D=a.getUTCDate(),this.$W=a.getUTCDay(),this.$H=a.getUTCHours(),this.$m=a.getUTCMinutes(),this.$s=a.getUTCSeconds(),this.$ms=a.getUTCMilliseconds()}else M.call(this)};var P=k.utcOffset;k.utcOffset=function(a,_){var T=this.$utils().u;if(T(a))return this.$u?0:T(this.$offset)?P.call(this):this.$offset;if(typeof a=="string"&&(a=function(A){A===void 0&&(A="");var J=A.match(X);if(!J)return null;var H=(""+J[0]).match(I)||["-",0,0],$=H[0],Y=60*+H[1]+ +H[2];return Y===0?0:$==="+"?Y:-Y}(a),a===null))return this;var D=Math.abs(a)<=16?60*a:a,y=this;if(_)return y.$offset=D,y.$u=a===0,y;if(a!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(y=this.local().add(D+E,Q)).$offset=D,y.$x.$localOffset=E}else y=this.utc();return y};var c=k.format;k.format=function(a){var _=a||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,_)},k.valueOf=function(){var a=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*a},k.isUTC=function(){return!!this.$u},k.toISOString=function(){return this.toDate().toISOString()},k.toString=function(){return this.toDate().toUTCString()};var O=k.toDate;k.toDate=function(a){return a==="s"&&this.$offset?j(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():O.call(this)};var g=k.diff;k.diff=function(a,_,T){if(a&&this.$u===a.$u)return g.call(this,a,_,T);var D=this.local(),y=j(a).local();return g.call(D,y,_,T)}}})})(Ee);var tt=Ee.exports;const lt=Ie(tt);var Ye={exports:{}};(function(p,w){(function(Q,X){p.exports=X()})(Ae,function(){var Q={year:0,month:1,day:2,hour:3,minute:4,second:5},X={};return function(I,me,S){var j,k=function(c,O,g){g===void 0&&(g={});var a=new Date(c),_=function(T,D){D===void 0&&(D={});var y=D.timeZoneName||"short",E=T+"|"+y,A=X[E];return A||(A=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:T,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:y}),X[E]=A),A}(O,g);return _.formatToParts(a)},te=function(c,O){for(var g=k(c,O),a=[],_=0;_<g.length;_+=1){var T=g[_],D=T.type,y=T.value,E=Q[D];E>=0&&(a[E]=parseInt(y,10))}var A=a[3],J=A===24?0:A,H=a[0]+"-"+a[1]+"-"+a[2]+" "+J+":"+a[4]+":"+a[5]+":000",$=+c;return(S.utc(H).valueOf()-($-=$%1e3))/6e4},M=me.prototype;M.tz=function(c,O){c===void 0&&(c=j);var g,a=this.utcOffset(),_=this.toDate(),T=_.toLocaleString("en-US",{timeZone:c}),D=Math.round((_-new Date(T))/1e3/60),y=15*-Math.round(_.getTimezoneOffset()/15)-D;if(!Number(y))g=this.utcOffset(0,O);else if(g=S(T,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(y,!0),O){var E=g.utcOffset();g=g.add(a-E,"minute")}return g.$x.$timezone=c,g},M.offsetName=function(c){var O=this.$x.$timezone||S.tz.guess(),g=k(this.valueOf(),O,{timeZoneName:c}).find(function(a){return a.type.toLowerCase()==="timezonename"});return g&&g.value};var P=M.startOf;M.startOf=function(c,O){if(!this.$x||!this.$x.$timezone)return P.call(this,c,O);var g=S(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return P.call(g,c,O).tz(this.$x.$timezone,!0)},S.tz=function(c,O,g){var a=g&&O,_=g||O||j,T=te(+S(),_);if(typeof c!="string")return S(c).tz(_);var D=function(J,H,$){var Y=J-60*H*1e3,q=te(Y,$);if(H===q)return[Y,H];var R=te(Y-=60*(q-H)*1e3,$);return q===R?[Y,q]:[J-60*Math.min(q,R)*1e3,Math.max(q,R)]}(S.utc(c,a).valueOf(),T,_),y=D[0],E=D[1],A=S(y).utcOffset(E);return A.$x.$timezone=_,A},S.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},S.tz.setDefault=function(c){j=c}}})})(Ye);var ut=Ye.exports;const nt=Ie(ut),at=["onClick"],rt=["href"],st=["src"],ot={class:"space-y-3"},it={class:"space-y-3"},dt={class:"space-y-3"},ft={key:0,class:"mt-2 text-sm"},mt={class:"text-gray-500 text-xs ml-1"},vt=["value"],pt={class:"space-y-3"},_t={class:"space-y-4"},yt={key:0,class:"mt-4 max-h-64 overflow-y-auto"},ct=["src"],gt={key:0},bt={key:1},Dt={__name:"Show",props:{order:{type:Object,required:!0},orderedItems:{type:Object,required:!0},receiveDatesHistory:{type:Array,required:!0},images:{type:Object,required:!0}},setup(p){ee.extend(lt),ee.extend(nt),ee.tz.setDefault("Asia/Manila");const w=je(),Q=Pe();et(route("orders-receiving.index"));const X=[{label:"Damaged goods",value:"Damaged goods"},{label:"Missing goods",value:"Missing goods"},{label:"Expired goods",value:"Expired goods"}],I=p,me=N(I.order.order_status),S=N(!1),j=()=>{S.value=!0},k=N(null),te=N(null),M=ue({quantity_received:null,received_date:new Date().toISOString().slice(0,16),expiry_date:null,remarks:null}),P=ue({image:null}),c=N(null),O=d=>{const l=d.target.files[0];l&&(P.image=l,c.value=URL.createObjectURL(l))},g=()=>{P.post(route("orders-receiving.attach-image",I.order.id),{onSuccess:()=>{w.add({severity:"success",summary:"Success",detail:"Image attached successfully.",life:3e3}),S.value=!1,P.reset(),c.value=null},onError:d=>{const l=Object.values(d)[0];w.add({severity:"error",summary:"Upload Error",detail:l||"Failed to attach image.",life:5e3})}})},a=ue({id:null,store_order_id:I.order.id,delivery_receipt_number:null,sap_so_number:null,remarks:null}),_=N(!1);te.value=I.orderedItems.length>0?I.orderedItems[0]:null;const T=d=>{const l=I.orderedItems.findIndex(o=>o.id===d);te.value=I.orderedItems[l],_.value=!0},D=N(!1),y=N(!1),E=d=>{k.value=d,D.value=!0},A=()=>{$.value=!0,M.post(route("orders-receiving.receive",k.value),{onSuccess:()=>{w.add({severity:"success",summary:"Success",detail:"Your receive request has been successfully submitted. Please wait for approval.",life:5e3}),D.value=!1,$.value=!1,M.reset()},onError:d=>{console.log(d),w.add({severity:"error",summary:"Error",detail:"Failed to submit receive request.",life:5e3}),$.value=!1}})},J=()=>{$.value=!0,a.id?ze():a.post(route("orders-receiving.add-delivery-receipt-number"),{onSuccess:()=>{w.add({severity:"success",summary:"Success",detail:"Delivery Receipt Added Successfully.",life:5e3}),y.value=!1,$.value=!1,a.reset()},onError:d=>{console.log(d),w.add({severity:"error",summary:"Error",detail:"Failed to add delivery receipt.",life:5e3}),y.value=!1,$.value=!1}})},H=I.order.order_status!=="received",$=N(!1),Y=N(!1),q=N(null);Ze(Y,d=>{d||(R.reset(),R.clearErrors(),$.value=!1,q.value=null)});const R=ue({id:null,quantity_received:null,remarks:null}),De=Qe(()=>{if(!q.value||!R.quantity_received)return 0;const d=q.value.store_order_item.quantity_commited||0;return(parseFloat(R.quantity_received)||0)-d}),Me=d=>{const l=I.receiveDatesHistory,o=l.findIndex(m=>m.id===d),f=l[o];q.value=f,R.id=f.id,R.quantity_received=f.quantity_received,R.remarks=f.remarks,Y.value=!0},Ve=()=>{$.value=!0,R.post(route("orders-receiving.update-receiving-history"),{onSuccess:d=>{w.add({severity:"success",summary:"Success",detail:"Updated Successfully.",life:5e3}),$.value=!1,Y.value=!1},onError:d=>{$.value=!1,w.add({severity:"error",summary:"Error",detail:d.message||"Failed to update receive details.",life:5e3})}})},ve=N(!1),B=N(),Se=d=>{const l=I.receiveDatesHistory,o=l.findIndex(m=>m.id===d),f=l[o];B.value=f,ve.value=!0},Re=ue({id:null}),Fe=()=>{Q.require({message:"Are you sure you want to delete this image?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove",severity:"danger"},accept:()=>{Re.post(route("destroy"),{onSuccess:()=>{w.add({severity:"success",summary:"Success",detail:"Image deleted successfully.",life:5e3}),$.value=!1},onError:d=>{$.value=!1,console.log(d),w.add({severity:"error",summary:"Error",detail:d.message||"Failed to delete image.",life:5e3})}})}})},Ue=(d,l,o,f)=>{a.id=d,a.delivery_receipt_number=l,a.sap_so_number=o,a.remarks=f,y.value=!0},ze=()=>{a.put(route("orders-receiving.update-delivery-receipt-number",a.id),{onSuccess:()=>{w.add({severity:"success",summary:"Success",detail:"Delivery Receipt Updated Successfully.",life:5e3}),y.value=!1,$.value=!1,a.reset()},onError:d=>{console.log(d),w.add({severity:"error",summary:"Error",detail:"Failed to update delivery receipt.",life:5e3}),$.value=!1}})},we=d=>{Q.require({message:"Are you sure you want to delete this delivery receipt?",header:"Confirmation",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Remove",severity:"danger"},accept:()=>{he.delete(route("orders-receiving.delete-delivery-receipt-number",d),{},{onSuccess:()=>{w.add({severity:"success",summary:"Success",detail:"Delivery Receipt Deleted Successfully.",life:5e3})},onError:l=>{w.add({severity:"error",summary:"Error",detail:l.message||"An error occurred.",life:5e3})}})}})},qe=()=>{ue({store_order_id:I.order.id}).put(route("orders-receiving.confirm-receive",I.order.id),{onSuccess:()=>{w.add({severity:"success",summary:"Success",detail:"Action Completed.",life:5e3})},onError:l=>{w.add({severity:"error",summary:"Error",detail:"Error confirming receive: "+(l.message||"An unknown error occurred."),life:5e3})}})},Ne=()=>{Q.require({message:"Are you sure you want to confirm all pending received items? This action cannot be undone.",header:"Confirm Receiving",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Confirm",severity:"success"},accept:()=>{qe()}})};return(d,l)=>{const o=v("LabelXS"),f=v("SpanBold"),m=v("InputContainer"),Oe=v("Card"),$e=v("TableHeader"),b=v("TH"),pe=v("TableHead"),x=v("TD"),_e=v("EditButton"),Te=v("DeleteButton"),le=v("DivFlexCenter"),ye=v("TableBody"),ce=v("Table"),ge=v("MobileTableHeading"),be=v("MobileTableRow"),xe=v("MobileTableContainer"),Ce=v("TableContainer"),ke=v("ShowButton"),z=v("Button"),He=v("CardTitle"),Be=v("DivFlexCol"),ne=v("DialogTitle"),ae=v("DialogDescription"),re=v("DialogHeader"),Z=v("Label"),h=v("Input"),G=v("FormError"),se=v("DialogFooter"),oe=v("DialogContent"),ie=v("Dialog"),Le=v("Layout");return i(),V(Le,{heading:"Order Details"},{default:t(()=>[e(Be,{class:"gap-3"},{default:t(()=>[e(Oe,{class:"p-5 grid sm:grid-cols-4 gap-5"},{default:t(()=>[e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[20]||(l[20]=[n("Encoder: ")])),_:1}),e(f,null,{default:t(()=>[n(r(p.order.encoder.first_name)+" "+r(p.order.encoder.last_name),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[21]||(l[21]=[n("Order Number: ")])),_:1}),e(f,null,{default:t(()=>[n(r(p.order.order_number),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[22]||(l[22]=[n("Order Date: ")])),_:1}),e(f,null,{default:t(()=>[n(r(p.order.order_date),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[23]||(l[23]=[n("Order Status: ")])),_:1}),e(f,null,{default:t(()=>[n(r(p.order.order_status.toUpperCase()),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[24]||(l[24]=[n("Approver: ")])),_:1}),e(f,null,{default:t(()=>{var u,C;return[n(r((u=p.order.approver)==null?void 0:u.first_name)+" "+r((C=p.order.approver)==null?void 0:C.last_name),1)]}),_:1}),p.order.approver?L("",!0):(i(),V(f,{key:0},{default:t(()=>l[25]||(l[25]=[n("N/a")])),_:1}))]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[26]||(l[26]=[n("Variant: ")])),_:1}),e(f,null,{default:t(()=>[n(r(p.order.variant.toUpperCase()),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[27]||(l[27]=[n("Approval Action Date: ")])),_:1}),e(f,null,{default:t(()=>[n(r(p.order.approval_action_date),1)]),_:1})]),_:1})]),_:1}),e(Ce,null,{default:t(()=>[e($e,null,{default:t(()=>[e(f,{class:"text-xs"},{default:t(()=>l[28]||(l[28]=[n("Delivery Receipts")])),_:1})]),_:1}),e(ce,null,{default:t(()=>[e(pe,null,{default:t(()=>[e(b,null,{default:t(()=>l[29]||(l[29]=[n("Id")])),_:1}),e(b,null,{default:t(()=>l[30]||(l[30]=[n("Number")])),_:1}),e(b,null,{default:t(()=>l[31]||(l[31]=[n("SAP SO Number")])),_:1}),e(b,null,{default:t(()=>l[32]||(l[32]=[n("Remarks")])),_:1}),e(b,null,{default:t(()=>l[33]||(l[33]=[n("Created at")])),_:1}),e(b,null,{default:t(()=>l[34]||(l[34]=[n("Actions")])),_:1})]),_:1}),e(ye,null,{default:t(()=>[(i(!0),U(W,null,K(p.order.delivery_receipts,u=>(i(),U("tr",{key:u.id},[e(x,null,{default:t(()=>[n(r(u.id),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.delivery_receipt_number),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.sap_so_number),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.remarks),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(s(ee).utc(u.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024),e(x,null,{default:t(()=>[e(le,{class:"gap-3"},{default:t(()=>[e(_e,{onClick:C=>Ue(u.id,u.delivery_receipt_number,u.sap_so_number,u.remarks)},null,8,["onClick"]),e(Te,{onClick:C=>we(u.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(xe,null,{default:t(()=>[(i(!0),U(W,null,K(p.order.delivery_receipts,u=>(i(),V(be,{key:u.id},{default:t(()=>[e(ge,{title:`${u.delivery_receipt_number}`},{default:t(()=>[e(_e,{onClick:C=>Ue(u.id,u.delivery_receipt_number,u.sap_so_number,u.remarks)},null,8,["onClick"]),e(Te,{onClick:C=>we(u.id)},null,8,["onClick"])]),_:2},1032,["title"]),e(o,null,{default:t(()=>[n("SAP SO Number: "+r(u.sap_so_number??"N/a"),1)]),_:2},1024),e(o,null,{default:t(()=>[n("Remarks: "+r(u.remarks??"N/a"),1)]),_:2},1024),e(o,null,{default:t(()=>[n("Created at: "+r(s(ee).utc(u.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]),_:2},1024))),128)),p.order.delivery_receipts.length<1?(i(),V(f,{key:0},{default:t(()=>l[35]||(l[35]=[n("None")])),_:1})):L("",!0)]),_:1})]),_:1}),e(Ce,null,{default:t(()=>[e($e,null,{default:t(()=>[e(f,{class:"text-xs"},{default:t(()=>l[36]||(l[36]=[n("Remarks")])),_:1})]),_:1}),e(ce,null,{default:t(()=>[e(pe,null,{default:t(()=>[e(b,null,{default:t(()=>l[37]||(l[37]=[n(" Id ")])),_:1}),e(b,null,{default:t(()=>l[38]||(l[38]=[n(" Remarks By")])),_:1}),e(b,null,{default:t(()=>l[39]||(l[39]=[n("Action")])),_:1}),e(b,null,{default:t(()=>l[40]||(l[40]=[n("Remarks")])),_:1}),e(b,null,{default:t(()=>l[41]||(l[41]=[n("Created At")])),_:1})]),_:1}),e(ye,null,{default:t(()=>[(i(!0),U(W,null,K(p.order.store_order_remarks,u=>(i(),U("tr",{key:u.id},[e(x,null,{default:t(()=>[n(r(u.id),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.user.first_name)+" "+r(u.user.last_name),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.action.toUpperCase()),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.remarks),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(s(ee)(u.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(xe,null,{default:t(()=>[(i(!0),U(W,null,K(p.order.store_order_remarks,u=>(i(),V(be,{key:u.id},{default:t(()=>[e(ge,{title:`${u.action.toUpperCase()}`},{default:t(()=>[e(ke)]),_:2},1032,["title"]),e(o,null,{default:t(()=>[n("Remarks: "+r(u.remarks),1)]),_:2},1024),e(o,null,{default:t(()=>[n("Created at: "+r(s(ee)(u.created_at).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024)]),_:2},1024))),128)),p.order.store_order_remarks.length<1?(i(),V(f,{key:0},{default:t(()=>l[42]||(l[42]=[n("None")])),_:1})):L("",!0)]),_:1})]),_:1}),e(Oe,{class:"p-5"},{default:t(()=>[e(m,{class:"col-span-4"},{default:t(()=>[e(o,null,{default:t(()=>l[43]||(l[43]=[n("Image Attachments: ")])),_:1}),e(le,{class:"gap-4 overflow-auto overflow-x-auto scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-gray-300 hover:scrollbar-thumb-gray-400"},{default:t(()=>[(i(!0),U(W,null,K(p.images,u=>(i(),U("div",{key:u.id,class:"relative"},[F("button",{onClick:C=>{s(Re).id=u.id,Fe()},class:"absolute -right-2 -top-2 text-white size-5 rounded-full bg-red-500"},[e(s(Xe),{class:"size-5"})],8,at),F("a",{href:u.image_url,target:"_blank",rel:"noopener noreferrer"},[F("img",{src:u.image_url,class:"size-24 cursor-pointer hover:opacity-80 transition-opacity"},null,8,st)],8,rt)]))),128))]),_:1}),p.images.length<1?(i(),V(f,{key:0},{default:t(()=>l[44]||(l[44]=[n("None")])),_:1})):L("",!0)]),_:1})]),_:1}),e(Ce,{class:"col-span-2 min-w-fit"},{default:t(()=>[e(le,{class:"justify-between"},{default:t(()=>[e(f,{class:"text-xs"},{default:t(()=>l[45]||(l[45]=[n("Ordered Items")])),_:1}),e(le,{class:"gap-3"},{default:t(()=>[e(z,{class:"text-xs px-2 sm:px-4",onClick:j},{default:t(()=>l[46]||(l[46]=[n("Attach Image")])),_:1}),e(z,{class:"text-xs px-2 sm:px-4",onClick:l[0]||(l[0]=u=>y.value=!0)},{default:t(()=>l[47]||(l[47]=[n("Add Delivery Number")])),_:1})]),_:1})]),_:1}),e(ce,null,{default:t(()=>[e(pe,null,{default:t(()=>[e(b,null,{default:t(()=>l[48]||(l[48]=[n(" Item Code ")])),_:1}),e(b,null,{default:t(()=>l[49]||(l[49]=[n(" Name ")])),_:1}),e(b,null,{default:t(()=>l[50]||(l[50]=[n("BaseUOM")])),_:1}),e(b,null,{default:t(()=>l[51]||(l[51]=[n("UOM")])),_:1}),e(b,null,{default:t(()=>l[52]||(l[52]=[n(" Ordered ")])),_:1}),e(b,null,{default:t(()=>l[53]||(l[53]=[n("Approved")])),_:1}),e(b,null,{default:t(()=>l[54]||(l[54]=[n(" Commited")])),_:1}),e(b,null,{default:t(()=>l[55]||(l[55]=[n(" Received")])),_:1}),e(b,null,{default:t(()=>l[56]||(l[56]=[n(" Actions ")])),_:1})]),_:1}),e(ye,null,{default:t(()=>[(i(!0),U(W,null,K(p.orderedItems,u=>(i(),U("tr",{key:u.id},[e(x,null,{default:t(()=>[n(r(u.supplier_item.ItemCode),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.supplier_item.item_name),1)]),_:2},1024),e(x,null,{default:t(()=>{var C;return[n(r((C=u.supplier_item.sap_master_file)==null?void 0:C.BaseUOM),1)]}),_:2},1024),e(x,{class:"text-xs"},{default:t(()=>[n(r(u.supplier_item.uom),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.quantity_ordered),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.quantity_approved),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.quantity_commited),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.quantity_received),1)]),_:2},1024),e(x,{class:"w-[90px]"},{default:t(()=>[e(le,{class:"gap-1"},{default:t(()=>[e(ke,{onClick:C=>T(u.id)},{default:t(()=>[e(s(Ge))]),_:2},1032,["onClick"]),me.value==="incomplete"?(i(),V(z,{key:0,onClick:C=>E(u.id),class:"text-green-500",variant:"link"},{default:t(()=>l[57]||(l[57]=[n(" Receive ")])),_:2},1032,["onClick"])):L("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(xe,null,{default:t(()=>[(i(!0),U(W,null,K(p.orderedItems,u=>(i(),V(be,{key:u.id},{default:t(()=>[e(ge,{title:`${u.supplier_item.item_name} (${u.supplier_item.ItemCode})`},{default:t(()=>[H?(i(),V(z,{key:0,onClick:C=>E(u.id),class:"text-green-500",variant:"link"},{default:t(()=>l[58]||(l[58]=[n(" Receive ")])),_:2},1032,["onClick"])):L("",!0)]),_:2},1032,["title"]),e(o,null,{default:t(()=>{var C;return[n("BaseUOM: "+r((C=u.supplier_item.sap_master_file)==null?void 0:C.BaseUOM),1)]}),_:2},1024),e(o,null,{default:t(()=>[n("UOM: "+r(u.uom),1)]),_:2},1024),e(o,null,{default:t(()=>[n("Quantity Received: "+r(u.quantity_received),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(Ce,null,{default:t(()=>[e($e,null,{default:t(()=>[e(He,null,{default:t(()=>l[59]||(l[59]=[n("Receiving History")])),_:1}),p.order.order_status!="received"?(i(),V(z,{key:0,onClick:Ne},{default:t(()=>l[60]||(l[60]=[n(" Confirm Receive ")])),_:1})):L("",!0)]),_:1}),e(ce,null,{default:t(()=>[e(pe,null,{default:t(()=>[e(b,null,{default:t(()=>l[61]||(l[61]=[n(" Id ")])),_:1}),e(b,null,{default:t(()=>l[62]||(l[62]=[n(" Item ")])),_:1}),e(b,null,{default:t(()=>l[63]||(l[63]=[n(" Item Code ")])),_:1}),e(b,null,{default:t(()=>l[64]||(l[64]=[n(" Quantity Received")])),_:1}),e(b,null,{default:t(()=>l[65]||(l[65]=[n(" Received At")])),_:1}),e(b,null,{default:t(()=>l[66]||(l[66]=[n(" Status")])),_:1}),e(b,null,{default:t(()=>l[67]||(l[67]=[n("Actions")])),_:1})]),_:1}),e(ye,null,{default:t(()=>[(i(!0),U(W,null,K(p.receiveDatesHistory,u=>(i(),U("tr",{key:u.id},[e(x,null,{default:t(()=>[n(r(u.id),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.store_order_item.supplier_item.item_name),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.store_order_item.supplier_item.ItemCode),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.quantity_received),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(s(ee)(u.received_date).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]),_:2},1024),e(x,null,{default:t(()=>[n(r(u.status),1)]),_:2},1024),e(x,null,{default:t(()=>[e(le,{class:"gap-3"},{default:t(()=>[e(ke,{onClick:C=>Se(u.id)},null,8,["onClick"]),u.status==="pending"?(i(),V(_e,{key:0,onClick:C=>Me(u.id)},null,8,["onClick"])):L("",!0)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1}),e(xe,null,{default:t(()=>[(i(!0),U(W,null,K(p.receiveDatesHistory,u=>(i(),V(be,{key:u.id},{default:t(()=>[e(ge,{title:`${u.store_order_item.supplier_item.item_name} (${u.store_order_item.supplier_item.ItemCode})`},{default:t(()=>[e(ke,{class:"size-5 gap mr-0",onClick:C=>Se(u.id)},null,8,["onClick"]),u.status==="pending"?(i(),V(_e,{key:0,class:"size-5 gap mr-1",onClick:C=>Me(u.id)},null,8,["onClick"])):L("",!0)]),_:2},1032,["title"]),e(o,null,{default:t(()=>[n("Received: "+r(u.quantity_received),1)]),_:2},1024),e(o,null,{default:t(()=>[n("Status: "+r(u.status.toUpperCase()),1)]),_:2},1024)]),_:2},1024))),128)),p.receiveDatesHistory.length<1?(i(),V(f,{key:0},{default:t(()=>l[68]||(l[68]=[n("None")])),_:1})):L("",!0)]),_:1})]),_:1})]),_:1}),e(ie,{open:y.value,"onUpdate:open":l[5]||(l[5]=u=>y.value=u)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[69]||(l[69]=[n("Delivery Receipt Form")])),_:1}),e(ae,null,{default:t(()=>l[70]||(l[70]=[n("Input all the important details")])),_:1})]),_:1}),F("div",ot,[e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[71]||(l[71]=[n("Delivery Receipt Number")])),_:1}),e(h,{modelValue:s(a).delivery_receipt_number,"onUpdate:modelValue":l[1]||(l[1]=u=>s(a).delivery_receipt_number=u)},null,8,["modelValue"]),e(G,null,{default:t(()=>[n(r(s(a).errors.delivery_receipt_number),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[72]||(l[72]=[n("SAP SO Number")])),_:1}),e(h,{modelValue:s(a).sap_so_number,"onUpdate:modelValue":l[2]||(l[2]=u=>s(a).sap_so_number=u)},null,8,["modelValue"]),e(G,null,{default:t(()=>[n(r(s(a).errors.sap_so_number),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[73]||(l[73]=[n("Remarks")])),_:1}),e(h,{modelValue:s(a).remarks,"onUpdate:modelValue":l[3]||(l[3]=u=>s(a).remarks=u)},null,8,["modelValue"]),e(G,null,{default:t(()=>[n(r(s(a).errors.remarks),1)]),_:1})]),_:1})]),e(se,null,{default:t(()=>[e(z,{variant:"ghost",onClick:l[4]||(l[4]=u=>y.value=!1)},{default:t(()=>l[74]||(l[74]=[n("Cancel")])),_:1}),e(z,{onClick:J},{default:t(()=>l[75]||(l[75]=[n("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(ie,{open:D.value,"onUpdate:open":l[11]||(l[11]=u=>D.value=u)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[76]||(l[76]=[n("Receive Form")])),_:1}),e(ae,null,{default:t(()=>l[77]||(l[77]=[n("Input all the important details")])),_:1})]),_:1}),F("div",it,[e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[78]||(l[78]=[n("Quantity Received")])),_:1}),e(h,{modelValue:s(M).quantity_received,"onUpdate:modelValue":l[6]||(l[6]=u=>s(M).quantity_received=u),type:"number"},null,8,["modelValue"]),e(G,null,{default:t(()=>[n(r(s(M).errors.quantity_received),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[79]||(l[79]=[n("Received Date")])),_:1}),e(h,{modelValue:s(M).received_date,"onUpdate:modelValue":l[7]||(l[7]=u=>s(M).received_date=u),type:"datetime-local"},null,8,["modelValue"]),e(G,null,{default:t(()=>[n(r(s(M).errors.received_date),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[80]||(l[80]=[n("Expiry Date")])),_:1}),e(h,{modelValue:s(M).expiry_date,"onUpdate:modelValue":l[8]||(l[8]=u=>s(M).expiry_date=u),type:"date"},null,8,["modelValue"]),e(G,null,{default:t(()=>[n(r(s(M).errors.expiry_date),1)]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[81]||(l[81]=[n("Remarks")])),_:1}),e(h,{modelValue:s(M).remarks,"onUpdate:modelValue":l[9]||(l[9]=u=>s(M).remarks=u)},null,8,["modelValue"]),e(G,null,{default:t(()=>[n(r(s(M).errors.remarks),1)]),_:1})]),_:1})]),e(se,null,{default:t(()=>[e(z,{variant:"ghost",onClick:l[10]||(l[10]=u=>D.value=!1)},{default:t(()=>l[82]||(l[82]=[n("Cancel")])),_:1}),e(z,{onClick:A},{default:t(()=>l[83]||(l[83]=[n("Submit")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(ie,{open:Y.value,"onUpdate:open":l[15]||(l[15]=u=>Y.value=u)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[84]||(l[84]=[n("Edit Receive Details")])),_:1}),e(ae,null,{default:t(()=>l[85]||(l[85]=[n("Update the receive information below.")])),_:1})]),_:1}),F("div",dt,[e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[86]||(l[86]=[n("Quantity Received")])),_:1}),e(h,{modelValue:s(R).quantity_received,"onUpdate:modelValue":l[12]||(l[12]=u=>s(R).quantity_received=u),type:"number"},null,8,["modelValue"]),e(G,null,{default:t(()=>[n(r(s(R).errors.quantity_received),1)]),_:1}),q.value&&s(R).quantity_received?(i(),U("div",ft,[l[87]||(l[87]=F("span",{class:"font-medium"},"Variance: ",-1)),F("span",{class:Ke(De.value>=0?"text-green-600":"text-red-600")},r(De.value>=0?"+":"")+r(De.value),3),F("span",mt," (Committed: "+r(q.value.store_order_item.quantity_commited)+") ",1)])):L("",!0)]),_:1}),e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[88]||(l[88]=[n("Remarks")])),_:1}),We(F("select",{"onUpdate:modelValue":l[13]||(l[13]=u=>s(R).remarks=u),class:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm transition-colors placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-400 disabled:cursor-not-allowed disabled:opacity-50"},[l[89]||(l[89]=F("option",{value:"",disabled:""},"Select a remark",-1)),(i(),U(W,null,K(X,u=>F("option",{key:u.value,value:u.value},r(u.label),9,vt)),64))],512),[[Je,s(R).remarks]]),e(G,null,{default:t(()=>[n(r(s(R).errors.remarks),1)]),_:1})]),_:1})]),e(se,null,{default:t(()=>[e(z,{variant:"ghost",onClick:l[14]||(l[14]=u=>Y.value=!1)},{default:t(()=>l[90]||(l[90]=[n("Cancel")])),_:1}),e(z,{onClick:Ve},{default:t(()=>l[91]||(l[91]=[n("Update")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(ie,{open:ve.value,"onUpdate:open":l[17]||(l[17]=u=>ve.value=u)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[92]||(l[92]=[n("Receive History Details")])),_:1}),e(ae,null,{default:t(()=>l[93]||(l[93]=[n("View the details of the received item.")])),_:1})]),_:1}),F("div",pt,[e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[94]||(l[94]=[n("Item Name:")])),_:1}),e(f,null,{default:t(()=>{var u;return[n(r((u=B.value)==null?void 0:u.store_order_item.supplier_item.item_name),1)]}),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[95]||(l[95]=[n("Item Code:")])),_:1}),e(f,null,{default:t(()=>{var u;return[n(r((u=B.value)==null?void 0:u.store_order_item.supplier_item.ItemCode),1)]}),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[96]||(l[96]=[n("Quantity Received:")])),_:1}),e(f,null,{default:t(()=>{var u;return[n(r((u=B.value)==null?void 0:u.quantity_received),1)]}),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[97]||(l[97]=[n("Received By:")])),_:1}),e(f,null,{default:t(()=>{var u,C,de,fe;return[n(r((C=(u=B.value)==null?void 0:u.received_by_user)==null?void 0:C.first_name)+" "+r((fe=(de=B.value)==null?void 0:de.received_by_user)==null?void 0:fe.last_name),1)]}),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[98]||(l[98]=[n("Received Date:")])),_:1}),e(f,null,{default:t(()=>{var u;return[n(r(s(ee)((u=B.value)==null?void 0:u.received_date).tz("Asia/Manila").format("MMMM D, YYYY h:mm A")),1)]}),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[99]||(l[99]=[n("Expiry Date:")])),_:1}),e(f,null,{default:t(()=>{var u;return[n(r((u=B.value)==null?void 0:u.expiry_date),1)]}),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[100]||(l[100]=[n("Remarks:")])),_:1}),e(f,null,{default:t(()=>{var u;return[n(r((u=B.value)==null?void 0:u.remarks),1)]}),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[101]||(l[101]=[n("Status:")])),_:1}),e(f,null,{default:t(()=>{var u;return[n(r((u=B.value)==null?void 0:u.status),1)]}),_:1})]),_:1}),e(m,null,{default:t(()=>[e(o,null,{default:t(()=>l[102]||(l[102]=[n("Approval Action By:")])),_:1}),e(f,null,{default:t(()=>{var u,C,de,fe;return[n(r((C=(u=B.value)==null?void 0:u.approval_action_by_user)==null?void 0:C.first_name)+" "+r((fe=(de=B.value)==null?void 0:de.approval_action_by_user)==null?void 0:fe.last_name),1)]}),_:1})]),_:1})]),e(se,null,{default:t(()=>[e(z,{variant:"ghost",onClick:l[16]||(l[16]=u=>ve.value=!1)},{default:t(()=>l[103]||(l[103]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),e(ie,{open:S.value,"onUpdate:open":l[19]||(l[19]=u=>S.value=u)},{default:t(()=>[e(oe,{class:"sm:max-w-[600px]"},{default:t(()=>[e(re,null,{default:t(()=>[e(ne,null,{default:t(()=>l[104]||(l[104]=[n("Attach Image")])),_:1}),e(ae,null,{default:t(()=>l[105]||(l[105]=[n(" Select an image file to upload for this order. ")])),_:1})]),_:1}),F("div",_t,[e(m,null,{default:t(()=>[e(Z,{class:"text-xs"},{default:t(()=>l[106]||(l[106]=[n("Image File")])),_:1}),e(h,{type:"file",onChange:O,accept:"image/png, image/jpeg, image/jpg",class:"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),e(G,null,{default:t(()=>[n(r(s(P).errors.image),1)]),_:1})]),_:1}),c.value?(i(),U("div",yt,[e(Z,{class:"text-xs"},{default:t(()=>l[107]||(l[107]=[n("Preview")])),_:1}),F("img",{src:c.value,class:"mt-2 max-w-full h-auto rounded-md border object-contain"},null,8,ct)])):L("",!0)]),e(se,null,{default:t(()=>[e(z,{variant:"ghost",onClick:l[18]||(l[18]=u=>S.value=!1)},{default:t(()=>l[108]||(l[108]=[n("Cancel")])),_:1}),e(z,{onClick:g,disabled:s(P).processing},{default:t(()=>[s(P).processing?(i(),U("span",gt,"Uploading...")):(i(),U("span",bt,"Upload"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})}}};export{Dt as default};
